C:/Users/user/AppData/Local/Temp/zcc00001C3CE8FF2.asm:
     1                          MODULE main_c
     2                          LINE 0, "main.c"
main.c:
                                
     1                          ;--------------------------------------------------------
     2                          ; File Created by SDCC : free open source ANSI-C Compiler
     3                          ; Version 4.2.0 #13081 (MINGW64)
     4                          ;--------------------------------------------------------
     5                          ; Processed by Z88DK
     6                          ;--------------------------------------------------------
     7                          
     8                          	EXTERN __divschar
     9                          	EXTERN __divschar_callee
    10                          	EXTERN __divsint
    11                          	EXTERN __divsint_callee
    12                          	EXTERN __divslong
    13                          	EXTERN __divslong_callee
    14                          	EXTERN __divslonglong
    15                          	EXTERN __divslonglong_callee
    16                          	EXTERN __divsuchar
    17                          	EXTERN __divsuchar_callee
    18                          	EXTERN __divuchar
    19                          	EXTERN __divuchar_callee
    20                          	EXTERN __divuint
    21                          	EXTERN __divuint_callee
    22                          	EXTERN __divulong
    23                          	EXTERN __divulong_callee
    24                          	EXTERN __divulonglong
    25                          	EXTERN __divulonglong_callee
    26                          	EXTERN __divuschar
    27                          	EXTERN __divuschar_callee
    28                          	EXTERN __modschar
    29                          	EXTERN __modschar_callee
    30                          	EXTERN __modsint
    31                          	EXTERN __modsint_callee
    32                          	EXTERN __modslong
    33                          	EXTERN __modslong_callee
    34                          	EXTERN __modslonglong
    35                          	EXTERN __modslonglong_callee
    36                          	EXTERN __modsuchar
    37                          	EXTERN __modsuchar_callee
    38                          	EXTERN __moduchar
    39                          	EXTERN __moduchar_callee
    40                          	EXTERN __moduint
    41                          	EXTERN __moduint_callee
    42                          	EXTERN __modulong
    43                          	EXTERN __modulong_callee
    44                          	EXTERN __modulonglong
    45                          	EXTERN __modulonglong_callee
    46                          	EXTERN __moduschar
    47                          	EXTERN __moduschar_callee
    48                          	EXTERN __mulint
    49                          	EXTERN __mulint_callee
    50                          	EXTERN __mullong
    51                          	EXTERN __mullong_callee
    52                          	EXTERN __mullonglong
    53                          	EXTERN __mullonglong_callee
    54                          	EXTERN __mulschar
    55                          	EXTERN __mulschar_callee
    56                          	EXTERN __mulsuchar
    57                          	EXTERN __mulsuchar_callee
    58                          	EXTERN __muluchar
    59                          	EXTERN __muluchar_callee
    60                          	EXTERN __muluschar
    61                          	EXTERN __muluschar_callee
    62                          	EXTERN __rlslonglong
    63                          	EXTERN __rlslonglong_callee
    64                          	EXTERN __rlulonglong
    65                          	EXTERN __rlulonglong_callee
    66                          	EXTERN __rrslonglong
    67                          	EXTERN __rrslonglong_callee
    68                          	EXTERN __rrulonglong
    69                          	EXTERN __rrulonglong_callee
    70                          	EXTERN ___mulsint2slong
    71                          	EXTERN ___mulsint2slong_callee
    72                          	EXTERN ___muluint2ulong
    73                          	EXTERN ___muluint2ulong_callee
    74                          	EXTERN ___sdcc_call_hl
    75                          	EXTERN ___sdcc_call_iy
    76                          	EXTERN ___sdcc_enter_ix
    77                          	EXTERN banked_call
    78                          	EXTERN _banked_ret
    79                          	EXTERN ___fs2schar
    80                          	EXTERN ___fs2schar_callee
    81                          	EXTERN ___fs2sint
    82                          	EXTERN ___fs2sint_callee
    83                          	EXTERN ___fs2slong
    84                          	EXTERN ___fs2slong_callee
    85                          	EXTERN ___fs2slonglong
    86                          	EXTERN ___fs2slonglong_callee
    87                          	EXTERN ___fs2uchar
    88                          	EXTERN ___fs2uchar_callee
    89                          	EXTERN ___fs2uint
    90                          	EXTERN ___fs2uint_callee
    91                          	EXTERN ___fs2ulong
    92                          	EXTERN ___fs2ulong_callee
    93                          	EXTERN ___fs2ulonglong
    94                          	EXTERN ___fs2ulonglong_callee
    95                          	EXTERN ___fsadd
    96                          	EXTERN ___fsadd_callee
    97                          	EXTERN ___fsdiv
    98                          	EXTERN ___fsdiv_callee
    99                          	EXTERN ___fseq
   100                          	EXTERN ___fseq_callee
   101                          	EXTERN ___fsgt
   102                          	EXTERN ___fsgt_callee
   103                          	EXTERN ___fslt
   104                          	EXTERN ___fslt_callee
   105                          	EXTERN ___fsmul
   106                          	EXTERN ___fsmul_callee
   107                          	EXTERN ___fsneq
   108                          	EXTERN ___fsneq_callee
   109                          	EXTERN ___fssub
   110                          	EXTERN ___fssub_callee
   111                          	EXTERN ___schar2fs
   112                          	EXTERN ___schar2fs_callee
   113                          	EXTERN ___sint2fs
   114                          	EXTERN ___sint2fs_callee
   115                          	EXTERN ___slong2fs
   116                          	EXTERN ___slong2fs_callee
   117                          	EXTERN ___slonglong2fs
   118                          	EXTERN ___slonglong2fs_callee
   119                          	EXTERN ___uchar2fs
   120                          	EXTERN ___uchar2fs_callee
   121                          	EXTERN ___uint2fs
   122                          	EXTERN ___uint2fs_callee
   123                          	EXTERN ___ulong2fs
   124                          	EXTERN ___ulong2fs_callee
   125                          	EXTERN ___ulonglong2fs
   126                          	EXTERN ___ulonglong2fs_callee
   127                          	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
   128                          	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
   129                          	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
   130                          	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
   131                          	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
   132                          	EXTERN ____sdcc_4_ldi_nosave_bc
   133                          	EXTERN ____sdcc_4_ldi_save_bc
   134                          	EXTERN ____sdcc_4_push_hlix
   135                          	EXTERN ____sdcc_4_push_mhl
   136                          	EXTERN ____sdcc_lib_setmem_hl
   137                          	EXTERN ____sdcc_ll_add_de_bc_hl
   138                          	EXTERN ____sdcc_ll_add_de_bc_hlix
   139                          	EXTERN ____sdcc_ll_add_de_hlix_bc
   140                          	EXTERN ____sdcc_ll_add_de_hlix_bcix
   141                          	EXTERN ____sdcc_ll_add_deix_bc_hl
   142                          	EXTERN ____sdcc_ll_add_deix_hlix
   143                          	EXTERN ____sdcc_ll_add_hlix_bc_deix
   144                          	EXTERN ____sdcc_ll_add_hlix_deix_bc
   145                          	EXTERN ____sdcc_ll_add_hlix_deix_bcix
   146                          	EXTERN ____sdcc_ll_asr_hlix_a
   147                          	EXTERN ____sdcc_ll_asr_mbc_a
   148                          	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
   149                          	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
   150                          	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
   151                          	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
   152                          	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
   153                          	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
   154                          	EXTERN ____sdcc_ll_copy_src_hl_dst_de
   155                          	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
   156                          	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
   157                          	EXTERN ____sdcc_ll_lsl_hlix_a
   158                          	EXTERN ____sdcc_ll_lsl_mbc_a
   159                          	EXTERN ____sdcc_ll_lsr_hlix_a
   160                          	EXTERN ____sdcc_ll_lsr_mbc_a
   161                          	EXTERN ____sdcc_ll_push_hlix
   162                          	EXTERN ____sdcc_ll_push_mhl
   163                          	EXTERN ____sdcc_ll_sub_de_bc_hl
   164                          	EXTERN ____sdcc_ll_sub_de_bc_hlix
   165                          	EXTERN ____sdcc_ll_sub_de_hlix_bc
   166                          	EXTERN ____sdcc_ll_sub_de_hlix_bcix
   167                          	EXTERN ____sdcc_ll_sub_deix_bc_hl
   168                          	EXTERN ____sdcc_ll_sub_deix_hlix
   169                          	EXTERN ____sdcc_ll_sub_hlix_bc_deix
   170                          	EXTERN ____sdcc_ll_sub_hlix_deix_bc
   171                          	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
   172                          	EXTERN ____sdcc_load_debc_deix
   173                          	EXTERN ____sdcc_load_dehl_deix
   174                          	EXTERN ____sdcc_load_debc_mhl
   175                          	EXTERN ____sdcc_load_hlde_mhl
   176                          	EXTERN ____sdcc_store_dehl_bcix
   177                          	EXTERN ____sdcc_store_debc_hlix
   178                          	EXTERN ____sdcc_store_debc_mhl
   179                          	EXTERN ____sdcc_cpu_pop_ei
   180                          	EXTERN ____sdcc_cpu_pop_ei_jp
   181                          	EXTERN ____sdcc_cpu_push_di
   182                          	EXTERN ____sdcc_outi
   183                          	EXTERN ____sdcc_outi_128
   184                          	EXTERN ____sdcc_outi_256
   185                          	EXTERN ____sdcc_ldi
   186                          	EXTERN ____sdcc_ldi_128
   187                          	EXTERN ____sdcc_ldi_256
   188                          	EXTERN ____sdcc_4_copy_srcd_hlix_dst_deix
   189                          	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_deix
   190                          	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_deix
   191                          	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_deix
   192                          	EXTERN ____sdcc_4_or_src_dehl_dst_bcix
   193                          	EXTERN ____sdcc_4_xor_src_dehl_dst_bcix
   194                          	EXTERN ____sdcc_4_and_src_dehl_dst_bcix
   195                          	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_debc
   196                          	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_debc
   197                          	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_debc
   198                          	EXTERN ____sdcc_4_cpl_src_mhl_dst_debc
   199                          	EXTERN ____sdcc_4_xor_src_debc_mhl_dst_debc
   200                          	EXTERN ____sdcc_4_or_src_debc_mhl_dst_debc
   201                          	EXTERN ____sdcc_4_and_src_debc_mhl_dst_debc
   202                          	EXTERN ____sdcc_4_and_src_debc_hlix_dst_debc
   203                          	EXTERN ____sdcc_4_or_src_debc_hlix_dst_debc
   204                          	EXTERN ____sdcc_4_xor_src_debc_hlix_dst_debc
   205                          
   206                          ;--------------------------------------------------------
   207                          ; Public variables in this module
   208                          ;--------------------------------------------------------
   209                          	GLOBAL _main
   210                          	GLOBAL _init
   211                          	GLOBAL _vdp_scrollTextDown
   212                          	GLOBAL _vdp_refreshViewPort
   213                          	GLOBAL _vdp_refreshViewPort2
   214                          	GLOBAL _waitVdpISR
   215                          	GLOBAL _isrKeyboard
   216                          	GLOBAL _vdpIsReady
   217                          	GLOBAL _vdpStatusRegVal
   218                          	GLOBAL __vdpInterruptEnabled
   219                          	GLOBAL __vdpReg1Val
   220                          	GLOBAL _vdp_cursor
   221                          	GLOBAL __joyStatus
   222                          	GLOBAL __lastKeyboardIntVal
   223                          	GLOBAL __kbdBufferWritePos
   224                          	GLOBAL __kbdBufferReadPos
   225                          	GLOBAL __randomSeed
   226                          	GLOBAL __SCREEN_COLOR
   227                          	GLOBAL __LIST_DEVICE
   228                          	GLOBAL __EMULATION_MODE
   229                          	GLOBAL _cpm_cursor
   230                          	GLOBAL __vdpSplitThirds
   231                          	GLOBAL __autoScroll
   232                          	GLOBAL __vdpMode
   233                          	GLOBAL __vdpTextBufferSize
   234                          	GLOBAL __vdpCursorMaxXFull
   235                          	GLOBAL __vdpCursorMaxX
   236                          	GLOBAL __vdpPatternGeneratorTableAddr
   237                          	GLOBAL __vdpColorTableAddr
   238                          	GLOBAL __vdpPatternNameTableAddr
   239                          	GLOBAL __vdpSpriteSizeSelected
   240                          	GLOBAL __vdpSpriteGeneratorTableAddr
   241                          	GLOBAL __vdpSpriteAttributeTableAddr
   242                          	GLOBAL __vdp_ISR
   243                          	GLOBAL __vdp_textBuffer
   244                          	GLOBAL __kbdBuffer
   245                          	GLOBAL _ASCII
   246                          	GLOBAL __NOTES_FINE
   247                          	GLOBAL __NOTES_COURSE
   248                          	GLOBAL __vdpCursorMaxYFull
   249                          	GLOBAL __vdpCursorMaxY
   250                          	GLOBAL _initNABULib
   251                          	GLOBAL _initNABULIBAudio
   252                          	GLOBAL _nop
   253                          	GLOBAL _NABU_DisableInterrupts
   254                          	GLOBAL _NABU_EnableInterrupts
   255                          	GLOBAL _RightShift
   256                          	GLOBAL _vt_clearToEndOfScreen
   257                          	GLOBAL _vt_clearToEndOfLine
   258                          	GLOBAL _vt_clearScreen
   259                          	GLOBAL _vt_clearLine
   260                          	GLOBAL _vt_clearToStartOfLine
   261                          	GLOBAL _vt_clearToStartOfScreen
   262                          	GLOBAL _vt_moveCursorDown
   263                          	GLOBAL _vt_cursorHome
   264                          	GLOBAL _vt_moveCursorLeft
   265                          	GLOBAL _vt_moveCursorRight
   266                          	GLOBAL _vt_moveCursorUp
   267                          	GLOBAL _vt_deleteLine
   268                          	GLOBAL _vt_setCursor
   269                          	GLOBAL _vt_foregroundColor
   270                          	GLOBAL _vt_insertLine
   271                          	GLOBAL _vt_restoreCursorPosition
   272                          	GLOBAL _vt_backgroundColor
   273                          	GLOBAL _vt_saveCursorPosition
   274                          	GLOBAL _vt_cursorUpAndInsert
   275                          	GLOBAL _vt_wrapOff
   276                          	GLOBAL _vt_wrapOn
   277                          	GLOBAL _vt_normalVideo
   278                          	GLOBAL _vt_reverseVideo
   279                          	GLOBAL _ayWrite
   280                          	GLOBAL _ayRead
   281                          	GLOBAL _playNoteDelay
   282                          	GLOBAL _isKeyPressed
   283                          	GLOBAL _getChar
   284                          	GLOBAL _getJoyStatus
   285                          	GLOBAL _readLine
   286                          	GLOBAL _vdp_setRegister
   287                          	GLOBAL _vdp_setWriteAddress
   288                          	GLOBAL _vdp_setReadAddress
   289                          	GLOBAL _vdp_enableVDPReadyInt
   290                          	GLOBAL _vdp_waitVDPReadyInt
   291                          	GLOBAL _vdp_disableVDPReadyInt
   292                          	GLOBAL _vdp_addISR
   293                          	GLOBAL _vdp_removeISR
   294                          	GLOBAL _vdp_init
   295                          	GLOBAL _vdp_clearVRAM
   296                          	GLOBAL _vdp_initMSXMode
   297                          	GLOBAL _vdp_initTextMode
   298                          	GLOBAL _vdp_initG2Mode
   299                          	GLOBAL _vdp_initMultiColorMode
   300                          	GLOBAL _vdp_clearScreen
   301                          	GLOBAL _vdp_fillScreen
   302                          	GLOBAL _vdp_clearRows
   303                          	GLOBAL _vdp_loadASCIIFont
   304                          	GLOBAL _vdp_loadASCIIFontWithInverse
   305                          	GLOBAL _vdp_putPattern
   306                          	GLOBAL _vdp_loadPatternTable
   307                          	GLOBAL _vdp_loadColorTable
   308                          	GLOBAL _vdp_colorizePattern
   309                          	GLOBAL _vdp_plotHires
   310                          	GLOBAL _vdp_plotColor
   311                          	GLOBAL _vdp_disableSprite
   312                          	GLOBAL _vdp_loadSpritePatternNameTable
   313                          	GLOBAL _vdp_spriteInit
   314                          	GLOBAL _vdp_setSpriteColor
   315                          	GLOBAL _vdp_setSpritePosition
   316                          	GLOBAL _vdp_setSpritePositionAndColor
   317                          	GLOBAL _vdp_getSpritePosition
   318                          	GLOBAL _vdp_print
   319                          	GLOBAL _vdp_printColorized
   320                          	GLOBAL _vdp_printPart
   321                          	GLOBAL _vdp_newLine
   322                          	GLOBAL _vdp_setBackDropColor
   323                          	GLOBAL _vdp_setCursor2
   324                          	GLOBAL _vdp_setCursor
   325                          	GLOBAL _vdp_setTextColor
   326                          	GLOBAL _vdp_write
   327                          	GLOBAL _vdp_writeCharAtLocation
   328                          	GLOBAL _vdp_getCharAtLocationVRAM
   329                          	GLOBAL _vdp_getCharAtLocationBuf
   330                          	GLOBAL _vdp_setCharAtLocationBuf
   331                          	GLOBAL _vdp_scrollTextUp
   332                          	GLOBAL _vdp_writeUInt8ToBinary
   333                          	GLOBAL _vdp_writeUInt16ToBinary
   334                          	GLOBAL _vdp_writeUInt32ToBinary
   335                          ;--------------------------------------------------------
   336                          ; Externals used
   337                          ;--------------------------------------------------------
   338                          	GLOBAL _fputc_cons_ansi
   339                          	GLOBAL _fputc_cons_generic
   340                          	GLOBAL _fputc_cons_native
   341                          	GLOBAL _set_fputc_cons
   342                          	GLOBAL _perror
   343                          	GLOBAL _printk
   344                          	GLOBAL _getk_inkey
   345                          	GLOBAL _getk
   346                          	GLOBAL _remove
   347                          	GLOBAL _rename
   348                          	GLOBAL _fdgetpos
   349                          	GLOBAL _fdtell
   350                          	GLOBAL _fabandon
   351                          	GLOBAL _puts_cons
   352                          	GLOBAL _fgets_cons
   353                          	GLOBAL _fputc_cons
   354                          	GLOBAL _fgetc_cons_inkey
   355                          	GLOBAL _fgetc_cons
   356                          	GLOBAL _fchkstd
   357                          	GLOBAL _getarg
   358                          	GLOBAL _vsscanf
   359                          	GLOBAL _vfscanf
   360                          	GLOBAL _sscanf
   361                          	GLOBAL _fscanf
   362                          	GLOBAL _scanf
   363                          	GLOBAL _printn
   364                          	GLOBAL _vsnprintf
   365                          	GLOBAL _vfprintf
   366                          	GLOBAL _snprintf
   367                          	GLOBAL _sprintf
   368                          	GLOBAL _fprintf
   369                          	GLOBAL _printf
   370                          	GLOBAL _gets
   371                          	GLOBAL _fwrite
   372                          	GLOBAL _fread
   373                          	GLOBAL _fseek
   374                          	GLOBAL _fgetpos
   375                          	GLOBAL _ftell
   376                          	GLOBAL _puts
   377                          	GLOBAL _ferror
   378                          	GLOBAL _feof
   379                          	GLOBAL _ungetc
   380                          	GLOBAL _fgetc
   381                          	GLOBAL _fputc_callee
   382                          	GLOBAL _fputs_callee
   383                          	GLOBAL _fputc
   384                          	GLOBAL _fputs
   385                          	GLOBAL _fgets
   386                          	GLOBAL _closeall
   387                          	GLOBAL _fflush
   388                          	GLOBAL _fclose
   389                          	GLOBAL _funopen
   390                          	GLOBAL _fmemopen
   391                          	GLOBAL __freopen1
   392                          	GLOBAL _fdopen
   393                          	GLOBAL _freopen
   394                          	GLOBAL _fopen
   395                          	GLOBAL _fileno
   396                          	GLOBAL _fopen_zsock
   397                          	GLOBAL _rnd_erase
   398                          	GLOBAL _rnd_saveblock
   399                          	GLOBAL _rnd_loadblock
   400                          	GLOBAL _rmdir
   401                          	GLOBAL _getwd
   402                          	GLOBAL _chdir
   403                          	GLOBAL _getcwd
   404                          	GLOBAL _writebyte
   405                          	GLOBAL _readbyte
   406                          	GLOBAL _lseek
   407                          	GLOBAL _write
   408                          	GLOBAL _read
   409                          	GLOBAL _close
   410                          	GLOBAL _creat
   411                          	GLOBAL _open
   412                          	GLOBAL _gios_esc
   413                          	GLOBAL _gios_text
   414                          	GLOBAL _gios_1px_callee
   415                          	GLOBAL _gios_1px
   416                          	GLOBAL _gios_2px_callee
   417                          	GLOBAL _gios_2px
   418                          	GLOBAL _gios_1pm_callee
   419                          	GLOBAL _gios_1pm
   420                          	GLOBAL _gios
   421                          	GLOBAL _a_serialport
   422                          	GLOBAL _a_driveb
   423                          	GLOBAL _a_memsize
   424                          	GLOBAL _a_biosver
   425                          	GLOBAL _a_machinever
   426                          	GLOBAL _a_machine
   427                          	GLOBAL _a_cury
   428                          	GLOBAL _a_curx
   429                          	GLOBAL _a_ink
   430                          	GLOBAL _a_paper
   431                          	GLOBAL _a_border
   432                          	GLOBAL _a_keyspeed
   433                          	GLOBAL _a_statusline
   434                          	GLOBAL _get_dir_name
   435                          	GLOBAL _dir_get_entry_size
   436                          	GLOBAL _dir_get_entry_name
   437                          	GLOBAL _dir_get_entry_type
   438                          	GLOBAL _dir_move_next
   439                          	GLOBAL _dir_move_first
   440                          	GLOBAL _get_current_volume
   441                          	GLOBAL _change_volume
   442                          	GLOBAL __putoffset
   443                          	GLOBAL _swapuid
   444                          	GLOBAL _putoffset
   445                          	GLOBAL _parsefcb
   446                          	GLOBAL _setfcb
   447                          	GLOBAL _cpm_cache_flush
   448                          	GLOBAL _cpm_cache_get
   449                          	GLOBAL _getfcb
   450                          	GLOBAL _biosh
   451                          	GLOBAL _bios
   452                          	GLOBAL _bdosh_callee
   453                          	GLOBAL _bdosh
   454                          	GLOBAL _bdos_callee
   455                          	GLOBAL _bdos
   456                          	GLOBAL _get_dpb
   457                          	GLOBAL _unbcd
   458                          	GLOBAL _wcmatch
   459                          	GLOBAL _extract_bits_callee
   460                          	GLOBAL _extract_bits
   461                          	GLOBAL _msleep
   462                          	GLOBAL _sleep
   463                          	GLOBAL _t_delay
   464                          	GLOBAL _wpeek
   465                          	GLOBAL _bpeek
   466                          	GLOBAL _wpoke_callee
   467                          	GLOBAL _wpoke
   468                          	GLOBAL _bpoke_callee
   469                          	GLOBAL _bpoke
   470                          	GLOBAL _swapendian
   471                          	GLOBAL _outp_callee
   472                          	GLOBAL _outp
   473                          	GLOBAL _inp
   474                          	GLOBAL _isqrt
   475                          	GLOBAL _labs
   476                          	GLOBAL _abs
   477                          	GLOBAL __ldivu__callee
   478                          	GLOBAL __ldivu_
   479                          	GLOBAL __ldiv__callee
   480                          	GLOBAL __ldiv_
   481                          	GLOBAL __divu__callee
   482                          	GLOBAL __divu_
   483                          	GLOBAL __div__callee
   484                          	GLOBAL __div_
   485                          	GLOBAL _qsort_sdcc_callee
   486                          	GLOBAL _qsort_sdcc
   487                          	GLOBAL _qsort_sccz80_callee
   488                          	GLOBAL _qsort_sccz80
   489                          	GLOBAL _l_qsort_callee
   490                          	GLOBAL _l_qsort
   491                          	GLOBAL _l_bsearch_callee
   492                          	GLOBAL _l_bsearch
   493                          	GLOBAL _getopt
   494                          	GLOBAL _unsetenv
   495                          	GLOBAL _setenv
   496                          	GLOBAL _getenv_r
   497                          	GLOBAL _getenv
   498                          	GLOBAL _atexit
   499                          	GLOBAL _exit
   500                          	GLOBAL _HeapInfo_callee
   501                          	GLOBAL _HeapInfo
   502                          	GLOBAL _HeapRealloc_callee
   503                          	GLOBAL _HeapRealloc
   504                          	GLOBAL _HeapAlloc_callee
   505                          	GLOBAL _HeapAlloc
   506                          	GLOBAL _HeapFree_callee
   507                          	GLOBAL _HeapFree
   508                          	GLOBAL _HeapCalloc_callee
   509                          	GLOBAL _HeapCalloc
   510                          	GLOBAL _HeapSbrk_callee
   511                          	GLOBAL _HeapSbrk
   512                          	GLOBAL _HeapCreate
   513                          	GLOBAL _mallinfo_callee
   514                          	GLOBAL _mallinfo
   515                          	GLOBAL _realloc_callee
   516                          	GLOBAL _realloc
   517                          	GLOBAL _malloc
   518                          	GLOBAL _free
   519                          	GLOBAL _calloc_callee
   520                          	GLOBAL _calloc
   521                          	GLOBAL _sbrk_callee
   522                          	GLOBAL _sbrk
   523                          	GLOBAL _mallinit
   524                          	GLOBAL _srand
   525                          	GLOBAL _rand
   526                          	GLOBAL _ulltoa_callee
   527                          	GLOBAL _ulltoa
   528                          	GLOBAL _strtoull_callee
   529                          	GLOBAL _strtoull
   530                          	GLOBAL _strtoll_callee
   531                          	GLOBAL _strtoll
   532                          	GLOBAL _lltoa_callee
   533                          	GLOBAL _lltoa
   534                          	GLOBAL _atoll_callee
   535                          	GLOBAL _atoll
   536                          	GLOBAL _utoa_callee
   537                          	GLOBAL _utoa
   538                          	GLOBAL _ultoa_callee
   539                          	GLOBAL _ultoa
   540                          	GLOBAL _strtoul_callee
   541                          	GLOBAL _strtoul
   542                          	GLOBAL _strtol_callee
   543                          	GLOBAL _strtol
   544                          	GLOBAL _ltoa_callee
   545                          	GLOBAL _ltoa
   546                          	GLOBAL _itoa_callee
   547                          	GLOBAL _itoa
   548                          	GLOBAL _atol
   549                          	GLOBAL _atoi
   550                          	GLOBAL __sgoioblk_end
   551                          	GLOBAL __sgoioblk
   552                          	GLOBAL __FOPEN_MAX
   553                          	GLOBAL __RND_BLOCKSIZE
   554                          	GLOBAL _gios_ptsout
   555                          	GLOBAL _gios_intout
   556                          	GLOBAL _gios_ptsin
   557                          	GLOBAL _gios_intin
   558                          	GLOBAL _gios_ctl
   559                          	GLOBAL _gios_pb
   560                          	GLOBAL _fc_dirbuf
   561                          	GLOBAL _fc_dirpos
   562                          	GLOBAL _fc_dir
   563                          	GLOBAL __fcb
   564                          	GLOBAL __CLIB_OPEN_MAX
   565                          	GLOBAL _optreset
   566                          	GLOBAL _optopt
   567                          	GLOBAL _optind
   568                          	GLOBAL _opterr
   569                          	GLOBAL _optarg
   570                          ;--------------------------------------------------------
   571                          ; special function registers
   572                          ;--------------------------------------------------------
   573                          defc _IO_VDPDATA	=	0x00a0
   574                          defc _IO_VDPLATCH	=	0x00a1
   575                          defc _IO_AYDATA	=	0x0040
   576                          defc _IO_AYLATCH	=	0x0041
   577                          defc _IO_HCCA	=	0x0080
   578                          defc _IO_KEYBOARD	=	0x0090
   579                          defc _IO_KEYBOARD_STATUS	=	0x0091
   580                          defc _IO_CONTROL	=	0x0000
   581                          ;--------------------------------------------------------
   582                          ; ram data
   583                          ;--------------------------------------------------------
   584                          	SECTION bss_compiler
   585                          __kbdBuffer:
   586  0000  0000000000000000  	DEFS 256
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
   587                          __vdp_textBuffer:
   588  0100  0000000000000000  	DEFS 960
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
   589                          __vdp_ISR:
   590  04c0  0000              	DEFS 2
   591                          __vdpSpriteAttributeTableAddr:
   592  04c2  0000              	DEFS 2
   593                          __vdpSpriteGeneratorTableAddr:
   594  04c4  0000              	DEFS 2
   595                          __vdpSpriteSizeSelected:
   596  04c6  00                	DEFS 1
   597                          __vdpPatternNameTableAddr:
   598  04c7  0000              	DEFS 2
   599                          __vdpColorTableAddr:
   600  04c9  0000              	DEFS 2
   601                          __vdpPatternGeneratorTableAddr:
   602  04cb  0000              	DEFS 2
   603                          __vdpCursorMaxX:
   604  04cd  00                	DEFS 1
   605                          __vdpCursorMaxXFull:
   606  04ce  00                	DEFS 1
   607                          __vdpTextBufferSize:
   608  04cf  0000              	DEFS 2
   609                          __vdpMode:
   610  04d1  00                	DEFS 1
   611                          __autoScroll:
   612  04d2  00                	DEFS 1
   613                          __vdpSplitThirds:
   614  04d3  00                	DEFS 1
   615                          defc _cpm_cursor	=	0xff10
   616                          defc __EMULATION_MODE	=	0xff12
   617                          defc __LIST_DEVICE	=	0xff13
   618                          defc __SCREEN_COLOR	=	0xff25
   619                          ;--------------------------------------------------------
   620                          ; ram data
   621                          ;--------------------------------------------------------
   622                          
   623                          IF 0
   624                          
   625                          ; .area _INITIALIZED removed by z88dk
   626                          
   627                          __randomSeed:
   628                          	DEFS 1
   629                          __kbdBufferReadPos:
   630                          	DEFS 1
   631                          __kbdBufferWritePos:
   632                          	DEFS 1
   633                          __lastKeyboardIntVal:
   634                          	DEFS 1
   635                          __joyStatus:
   636                          	DEFS 4
   637                          _vdp_cursor:
   638                          	DEFS 2
   639                          __vdpReg1Val:
   640                          	DEFS 1
   641                          __vdpInterruptEnabled:
   642                          	DEFS 1
   643                          _vdpStatusRegVal:
   644                          	DEFS 1
   645                          _vdpIsReady:
   646                          	DEFS 1
   647                          
   648                          ENDIF
   649                          
   650                          ;--------------------------------------------------------
   651                          ; absolute external ram data
   652                          ;--------------------------------------------------------
   653                          	SECTION IGNORE
   654                          ;--------------------------------------------------------
   655                          ; global & static initialisations
   656                          ;--------------------------------------------------------
   657                          	SECTION code_crt_init
   658                          ;--------------------------------------------------------
   659                          ; Home
   660                          ;--------------------------------------------------------
   661                          	SECTION IGNORE
   662                          ;--------------------------------------------------------
   663                          ; code
   664                          ;--------------------------------------------------------
   665                          	SECTION code_compiler
   666                          ;	---------------------------------
   667                          ; Function initNABULib
   668                          ; ---------------------------------
   669                          _initNABULib:
   670  0000  3e00              	ld	a,0x03
   671  0002  d300              	out	(_IO_CONTROL), a
   672  0004  cd0000            	call	_NABU_DisableInterrupts
   673  0007  f5                	push	af
   674  0008  ed5f              	ld	a, r
   675  000a  320000            	ld	(__randomSeed), a
   676  000d  f1                	pop	af
   677  000e  3a0000            	ld	a, (__randomSeed+0)
   678  0011  6f                	ld	l, a
   679  0012  2600              	ld	h,0x00
   680  0014  cd0000            	call	_srand
   681  0017  ed5e              	IM	2
   682  0019  3e00              	ld	a, 0xff
   683  001b  ed47              	ld	i, a
   684  001d  210000            	ld	hl, _isrKeyboard
   685  0020  220000            	ld	(0xff00 + 4), hl
   686  0023  3e00              	ld	a,0x0e
   687  0025  f5                	push	af
   688  0026  33                	inc	sp
   689  0027  cd0000            	call	_ayRead
   690  002a  33                	inc	sp
   691  002b  7d                	ld	a, l
   692  002c  cbef              	set	5, a
   693  002e  57                	ld	d,a
   694  002f  1e00              	ld	e,0x0e
   695  0031  d5                	push	de
   696  0032  cd0000            	call	_ayWrite
   697  0035  f1                	pop	af
   698  0036  cd0000            	call	_NABU_EnableInterrupts
   699  0039  c30000            	jp	_initNABULIBAudio
   700                          	SECTION rodata_compiler
   701                          __vdpCursorMaxY:
   702  0000  00                	DEFB +0x17
   703                          __vdpCursorMaxYFull:
   704  0001  00                	DEFB +0x18
   705                          __NOTES_COURSE:
   706  0002  00                	DEFB +0x0d
   707  0003  00                	DEFB +0x0c
   708  0004  00                	DEFB +0x0b
   709  0005  00                	DEFB +0x0b
   710  0006  00                	DEFB +0x0a
   711  0007  00                	DEFB +0x0a
   712  0008  00                	DEFB +0x09
   713  0009  00                	DEFB +0x08
   714  000a  00                	DEFB +0x08
   715  000b  00                	DEFB +0x07
   716  000c  00                	DEFB +0x07
   717  000d  00                	DEFB +0x07
   718  000e  06                	DEFB +0x06
   719  000f  06                	DEFB +0x06
   720  0010  05                	DEFB +0x05
   721  0011  05                	DEFB +0x05
   722  0012  05                	DEFB +0x05
   723  0013  05                	DEFB +0x05
   724  0014  04                	DEFB +0x04
   725  0015  04                	DEFB +0x04
   726  0016  04                	DEFB +0x04
   727  0017  03                	DEFB +0x03
   728  0018  03                	DEFB +0x03
   729  0019  03                	DEFB +0x03
   730  001a  03                	DEFB +0x03
   731  001b  03                	DEFB +0x03
   732  001c  02                	DEFB +0x02
   733  001d  02                	DEFB +0x02
   734  001e  02                	DEFB +0x02
   735  001f  02                	DEFB +0x02
   736  0020  02                	DEFB +0x02
   737  0021  02                	DEFB +0x02
   738  0022  02                	DEFB +0x02
   739  0023  01                	DEFB +0x01
   740  0024  01                	DEFB +0x01
   741  0025  01                	DEFB +0x01
   742  0026  01                	DEFB +0x01
   743  0027  01                	DEFB +0x01
   744  0028  01                	DEFB +0x01
   745  0029  01                	DEFB +0x01
   746  002a  01                	DEFB +0x01
   747  002b  01                	DEFB +0x01
   748  002c  01                	DEFB +0x01
   749  002d  01                	DEFB +0x01
   750  002e  01                	DEFB +0x01
   751  002f  00                	DEFB +0x00
   752  0030  00                	DEFB +0x00
   753  0031  00                	DEFB +0x00
   754  0032  00                	DEFB +0x00
   755  0033  00                	DEFB +0x00
   756  0034  00                	DEFB +0x00
   757  0035  00                	DEFB +0x00
   758  0036  00                	DEFB +0x00
   759  0037  00                	DEFB +0x00
   760  0038  00                	DEFB +0x00
   761  0039  00                	DEFB +0x00
   762  003a  00                	DEFB +0x00
   763  003b  00                	DEFB +0x00
   764  003c  00                	DEFB +0x00
   765  003d  00                	DEFB +0x00
   766  003e  00                	DEFB +0x00
   767  003f  00                	DEFB +0x00
   768  0040  00                	DEFB +0x00
   769  0041  00                	DEFB +0x00
   770  0042  00                	DEFB +0x00
   771  0043  00                	DEFB +0x00
   772  0044  00                	DEFB +0x00
   773  0045  00                	DEFB +0x00
   774  0046  00                	DEFB +0x00
   775  0047  00                	DEFB +0x00
   776  0048  00                	DEFB +0x00
   777  0049  00                	DEFB +0x00
   778                          __NOTES_FINE:
   779  004a  00                	DEFB +0x5c
   780  004b  00                	DEFB +0x9c
   781  004c  00                	DEFB +0xe7
   782  004d  00                	DEFB +0x3c
   783  004e  00                	DEFB +0x9b
   784  004f  00                	DEFB +0x02
   785  0050  00                	DEFB +0x72
   786  0051  00                	DEFB +0xeb
   787  0052  00                	DEFB +0x6a
   788  0053  00                	DEFB +0xf2
   789  0054  00                	DEFB +0x7f
   790  0055  00                	DEFB +0x14
   791  0056  00                	DEFB +0xae
   792  0057  00                	DEFB +0x4e
   793  0058  00                	DEFB +0xf3
   794  0059  00                	DEFB +0x9e
   795  005a  00                	DEFB +0x4d
   796  005b  00                	DEFB +0x01
   797  005c  00                	DEFB +0xb9
   798  005d  00                	DEFB +0x75
   799  005e  00                	DEFB +0x35
   800  005f  00                	DEFB +0xf9
   801  0060  00                	DEFB +0xbf
   802  0061  00                	DEFB +0x8a
   803  0062  00                	DEFB +0x57
   804  0063  00                	DEFB +0x27
   805  0064  00                	DEFB +0xf9
   806  0065  00                	DEFB +0xcf
   807  0066  00                	DEFB +0xa6
   808  0067  00                	DEFB +0x80
   809  0068  00                	DEFB +0x5c
   810  0069  00                	DEFB +0x3a
   811  006a  00                	DEFB +0x1a
   812  006b  00                	DEFB +0xfc
   813  006c  00                	DEFB +0xdf
   814  006d  00                	DEFB +0xc5
   815  006e  00                	DEFB +0xab
   816  006f  00                	DEFB +0x93
   817  0070  00                	DEFB +0x7c
   818  0071  00                	DEFB +0x67
   819  0072  00                	DEFB +0x53
   820  0073  00                	DEFB +0x40
   821  0074  00                	DEFB +0x2e
   822  0075  00                	DEFB +0x1d
   823  0076  00                	DEFB +0x0d
   824  0077  00                	DEFB +0xfe
   825  0078  00                	DEFB +0xef
   826  0079  00                	DEFB +0xe2
   827  007a  00                	DEFB +0xd5
   828  007b  00                	DEFB +0xc9
   829  007c  00                	DEFB +0xbe
   830  007d  00                	DEFB +0xb3
   831  007e  00                	DEFB +0xa9
   832  007f  00                	DEFB +0xa0
   833  0080  00                	DEFB +0x97
   834  0081  00                	DEFB +0x8e
   835  0082  00                	DEFB +0x86
   836  0083  00                	DEFB +0x7f
   837  0084  00                	DEFB +0x77
   838  0085  00                	DEFB +0x71
   839  0086  00                	DEFB +0x6a
   840  0087  00                	DEFB +0x64
   841  0088  00                	DEFB +0x5f
   842  0089  00                	DEFB +0x59
   843  008a  00                	DEFB +0x54
   844  008b  00                	DEFB +0x50
   845  008c  00                	DEFB +0x4b
   846  008d  00                	DEFB +0x47
   847  008e  00                	DEFB +0x43
   848  008f  00                	DEFB +0x3f
   849  0090  00                	DEFB +0x3b
   850  0091  00                	DEFB +0x38
   851                          	SECTION code_compiler
   852                          ;	---------------------------------
   853                          ; Function initNABULIBAudio
   854                          ; ---------------------------------
   855                          _initNABULIBAudio:
   856  003c  00                	xor	a, a
   857  003d  00                	ld	d,a
   858  003e  0006              	ld	e,0x06
   859  0040  00                	push	de
   860  0041  008803            	call	_ayWrite
   861  0044  00                	pop	af
   862  0045  000810            	ld	de,0x1008
   863  0048  00                	push	de
   864  0049  008803            	call	_ayWrite
   865  004c  e7                	pop	af
   866  004d  3c0910            	ld	de,0x1009
   867  0050  72                	push	de
   868  0051  eb8803            	call	_ayWrite
   869  0054  7f                	pop	af
   870  0055  140a10            	ld	de,0x100a
   871  0058  f3                	push	de
   872  0059  9e8803            	call	_ayWrite
   873  005c  b9                	pop	af
   874  005d  750778            	ld	de,0x7807
   875  0060  bf                	push	de
   876  0061  8a8803            	call	_ayWrite
   877  0064  f9                	pop	af
   878  0065  cf                	ret
   879                          	SECTION code_compiler
   880                          ;	---------------------------------
   881                          ; Function nop
   882                          ; ---------------------------------
   883                          _nop:
   884  0066  a6                	NOP
   885  0067  80                	ret
   886                          	SECTION code_compiler
   887                          ;	---------------------------------
   888                          ; Function NABU_DisableInterrupts
   889                          ; ---------------------------------
   890                          _NABU_DisableInterrupts:
   891  0068  5c                	di
   892  0069  3a                	ret
   893                          	SECTION code_compiler
   894                          ;	---------------------------------
   895                          ; Function NABU_EnableInterrupts
   896                          ; ---------------------------------
   897                          _NABU_EnableInterrupts:
   898  006a  1a                	ei
   899  006b  fc                	ret
   900                          	SECTION code_compiler
   901                          ;	---------------------------------
   902                          ; Function RightShift
   903                          ; ---------------------------------
   904                          _RightShift:
   905  006c  dfc5              	push	ix
   906  006e  ab930000          	ld	ix,0
   907  0072  5340              	add	ix,sp
   908  0074  2e                	push	af
   909  0075  1d                	push	af
   910  0076  0dfe06            	ld	c,(ix+6)
   911  0079  e2d507            	ld	b,(ix+7)
   912  007c  be                	dec	bc
   913  007d  b3a904            	ld	l,(ix+4)
   914  0080  978e05            	ld	h,(ix+5)
   915  0083  7f                	add	hl, bc
   916  0084  77                	ex	de, hl
   917  0085  716a08            	ld	c,(ix+8)
   918  0088  5f00              	ld	b,0x00
   919  008a  54                	ld	a, e
   920  008b  50                	sub	a, c
   921  008c  4b47fe            	ld	(ix-2),a
   922  008f  3f                	ld	a, d
   923  0090  3b                	sbc	a, b
   924  0091  387700            	ld	(ix-1),a
   925  0094  dd7e00            	ld	a,(ix+4)
   926  0097  c600              	add	a,0xff
   927  0099  dd7700            	ld	(ix-4),a
   928  009c  dd7e00            	ld	a,(ix+5)
   929  009f  ce00              	adc	a,0xff
   930  00a1  dd7700            	ld	(ix-3),a
   931                          l_RightShift_00101:
   932  00a4  dd7e00            	ld	a,(ix-2)
   933  00a7  dd9600            	sub	a,(ix-4)
   934  00aa  2000              	jr	NZ,l_RightShift_00131
   935  00ac  dd7e00            	ld	a,(ix-1)
   936  00af  dd9600            	sub	a,(ix-3)
   937  00b2  2800              	jr	Z,l_RightShift_00103
   938                          l_RightShift_00131:
   939  00b4  dd6e00            	ld	l,(ix-2)
   940  00b7  dd6600            	ld	h,(ix-1)
   941  00ba  7e                	ld	a, (hl)
   942  00bb  12                	ld	(de), a
   943  00bc  1b                	dec	de
   944  00bd  dd6e00            	ld	l,(ix-2)
   945  00c0  dd6600            	ld	h,(ix-1)
   946  00c3  2b                	dec	hl
   947  00c4  dd7500            	ld	(ix-2),l
   948  00c7  dd7400            	ld	(ix-1),h
   949  00ca  1800              	jr	l_RightShift_00101
   950                          l_RightShift_00103:
   951  00cc  0b                	dec	bc
   952  00cd  dd6e00            	ld	l,(ix+4)
   953  00d0  dd6600            	ld	h,(ix+5)
   954  00d3  09                	add	hl, bc
   955                          l_RightShift_00104:
   956  00d4  7d                	ld	a, l
   957  00d5  dd9600            	sub	a,(ix-4)
   958  00d8  2000              	jr	NZ,l_RightShift_00132
   959  00da  7c                	ld	a, h
   960  00db  dd9600            	sub	a,(ix-3)
   961  00de  2800              	jr	Z,l_RightShift_00107
   962                          l_RightShift_00132:
   963  00e0  3600              	ld	(hl),0x20
   964  00e2  2b                	dec	hl
   965  00e3  1800              	jr	l_RightShift_00104
   966                          l_RightShift_00107:
   967  00e5  ddf9              	ld	sp, ix
   968  00e7  dde1              	pop	ix
   969  00e9  c9                	ret
   970                          	SECTION code_compiler
   971                          ;	---------------------------------
   972                          ; Function isrKeyboard
   973                          ; ---------------------------------
   974                          _isrKeyboard:
   975  00ea  f5                	push	af
   976  00eb  fde5              	push	iy
   977  00ed  fd210000          	ld	iy, 0
   978  00f1  d9                	exx
   979  00f2  db00              	in	a, (_IO_KEYBOARD)
   980  00f4  4f                	ld	c,a
   981  00f5  d600              	sub	a,0x80
   982  00f7  3800              	jr	C,l_isrKeyboard_00111
   983  00f9  3e00              	ld	a,0x83
   984  00fb  91                	sub	a, c
   985  00fc  3800              	jr	C,l_isrKeyboard_00111
   986  00fe  fd210000          	ld	iy,__lastKeyboardIntVal
   987  0102  fd7100            	ld	(iy+0),c
   988  0105  1800              	jr	l_isrKeyboard_00112
   989                          l_isrKeyboard_00111:
   990  0107  79                	ld	a, c
   991  0108  d600              	sub	a,0x90
   992  010a  3800              	jr	C,l_isrKeyboard_00107
   993  010c  3e00              	ld	a,0x95
   994  010e  91                	sub	a, c
   995  010f  3000              	jr	NC,l_isrKeyboard_00112
   996                          l_isrKeyboard_00107:
   997  0111  3a0000            	ld	a, (__lastKeyboardIntVal+0)
   998  0114  fe00              	cp	a,0x80
   999  0116  2800              	jr	Z,l_isrKeyboard_00101
  1000  0118  fe00              	cp	a,0x81
  1001  011a  2800              	jr	Z,l_isrKeyboard_00102
  1002  011c  fe00              	cp	a,0x82
  1003  011e  2800              	jr	Z,l_isrKeyboard_00103
  1004  0120  d600              	sub	a,0x83
  1005  0122  2800              	jr	Z,l_isrKeyboard_00104
  1006  0124  1800              	jr	l_isrKeyboard_00105
  1007                          l_isrKeyboard_00101:
  1008  0126  fd210000          	ld	iy,__lastKeyboardIntVal
  1009  012a  fd360000          	ld	(iy+0),0x00
  1010  012e  210000            	ld	hl,__joyStatus
  1011  0131  71                	ld	(hl), c
  1012  0132  1800              	jr	l_isrKeyboard_00112
  1013                          l_isrKeyboard_00102:
  1014  0134  fd210000          	ld	iy,__lastKeyboardIntVal
  1015  0138  fd360000          	ld	(iy+0),0x00
  1016  013c  210000            	ld	hl, +(__joyStatus + 1)
  1017  013f  71                	ld	(hl), c
  1018  0140  1800              	jr	l_isrKeyboard_00112
  1019                          l_isrKeyboard_00103:
  1020  0142  fd210000          	ld	iy,__lastKeyboardIntVal
  1021  0146  fd360000          	ld	(iy+0),0x00
  1022  014a  210000            	ld	hl, +(__joyStatus + 2)
  1023  014d  71                	ld	(hl), c
  1024  014e  1800              	jr	l_isrKeyboard_00112
  1025                          l_isrKeyboard_00104:
  1026  0150  fd210000          	ld	iy,__lastKeyboardIntVal
  1027  0154  fd360000          	ld	(iy+0),0x00
  1028  0158  210000            	ld	hl, +(__joyStatus + 3)
  1029  015b  71                	ld	(hl), c
  1030  015c  1800              	jr	l_isrKeyboard_00112
  1031                          l_isrKeyboard_00105:
  1032  015e  210000            	ld	hl,__kbdBuffer+0
  1033  0161  ed5b0000          	ld	de, (__kbdBufferWritePos)
  1034  0165  1600              	ld	d,0x00
  1035  0167  19                	add	hl, de
  1036  0168  71                	ld	(hl), c
  1037  0169  3a0000            	ld	a, (__kbdBufferWritePos+0)
  1038  016c  3c                	inc	a
  1039  016d  320000            	ld	(__kbdBufferWritePos+0), a
  1040                          l_isrKeyboard_00112:
  1041  0170  d9                	exx
  1042  0171  fde1              	pop	iy
  1043  0173  f1                	pop	af
  1044  0174  fb                	ei
  1045  0175  ed4d              	reti
  1046                          ;	---------------------------------
  1047                          ; Function vt_clearToEndOfScreen
  1048                          ; ---------------------------------
  1049                          _vt_clearToEndOfScreen:
  1050  0177  210000            	ld	hl,0x001b
  1051  017a  e5                	push	hl
  1052  017b  210000            	ld	hl,___str_0
  1053  017e  e5                	push	hl
  1054  017f  cd0000            	call	_printf
  1055  0182  f1                	pop	af
  1056  0183  f1                	pop	af
  1057  0184  c9                	ret
  1058                          	SECTION rodata_compiler
  1059                          ___str_0:
  1060  0092  25ff4a            	DEFM "%cJ"
  1061  0095  00                	DEFB 0x00
  1062                          	SECTION code_compiler
  1063                          ;	---------------------------------
  1064                          ; Function vt_clearToEndOfLine
  1065                          ; ---------------------------------
  1066                          _vt_clearToEndOfLine:
  1067  0185  210000            	ld	hl,0x001b
  1068  0188  e5                	push	hl
  1069  0189  210000            	ld	hl,___str_1
  1070  018c  e5                	push	hl
  1071  018d  cd0000            	call	_printf
  1072  0190  f1                	pop	af
  1073  0191  f1                	pop	af
  1074  0192  c9                	ret
  1075                          	SECTION rodata_compiler
  1076                          ___str_1:
  1077  0096  0463ff            	DEFM "%cK"
  1078  0099  00                	DEFB 0x00
  1079                          	SECTION code_compiler
  1080                          ;	---------------------------------
  1081                          ; Function vt_clearScreen
  1082                          ; ---------------------------------
  1083                          _vt_clearScreen:
  1084  0193  3a0000            	ld	a, (__EMULATION_MODE+0)
  1085  0196  b7                	or	a, a
  1086  0197  2000              	jr	NZ,l_vt_clearScreen_00102
  1087  0199  210000            	ld	hl,0x001a
  1088  019c  e5                	push	hl
  1089  019d  210000            	ld	hl, +(__sgoioblk + 10)
  1090  01a0  e5                	push	hl
  1091  01a1  cd0000            	call	_fputc_callee
  1092  01a4  1800              	jr	l_vt_clearScreen_00104
  1093                          l_vt_clearScreen_00102:
  1094  01a6  210000            	ld	hl,0x001b
  1095  01a9  e5                	push	hl
  1096  01aa  210000            	ld	hl,___str_2
  1097  01ad  e5                	push	hl
  1098  01ae  cd0000            	call	_printf
  1099  01b1  f1                	pop	af
  1100  01b2  f1                	pop	af
  1101                          l_vt_clearScreen_00104:
  1102  01b3  c9                	ret
  1103                          	SECTION rodata_compiler
  1104                          ___str_2:
  1105  009a  25fc45            	DEFM "%cE"
  1106  009d  00                	DEFB 0x00
  1107                          	SECTION code_compiler
  1108                          ;	---------------------------------
  1109                          ; Function vt_clearLine
  1110                          ; ---------------------------------
  1111                          _vt_clearLine:
  1112  01b4  210000            	ld	hl,0x001b
  1113  01b7  e5                	push	hl
  1114  01b8  210000            	ld	hl,___str_3
  1115  01bb  e5                	push	hl
  1116  01bc  cd0000            	call	_printf
  1117  01bf  f1                	pop	af
  1118  01c0  f1                	pop	af
  1119  01c1  c9                	ret
  1120                          	SECTION rodata_compiler
  1121                          ___str_3:
  1122  009e  0563ff            	DEFM "%cl"
  1123  00a1  00                	DEFB 0x00
  1124                          	SECTION code_compiler
  1125                          ;	---------------------------------
  1126                          ; Function vt_clearToStartOfLine
  1127                          ; ---------------------------------
  1128                          _vt_clearToStartOfLine:
  1129  01c2  210000            	ld	hl,0x001b
  1130  01c5  e5                	push	hl
  1131  01c6  210000            	ld	hl,___str_4
  1132  01c9  e5                	push	hl
  1133  01ca  cd0000            	call	_printf
  1134  01cd  f1                	pop	af
  1135  01ce  f1                	pop	af
  1136  01cf  c9                	ret
  1137                          	SECTION rodata_compiler
  1138                          ___str_4:
  1139  00a2  25fd6f            	DEFM "%co"
  1140  00a5  00                	DEFB 0x00
  1141                          	SECTION code_compiler
  1142                          ;	---------------------------------
  1143                          ; Function vt_clearToStartOfScreen
  1144                          ; ---------------------------------
  1145                          _vt_clearToStartOfScreen:
  1146  01d0  210000            	ld	hl,0x001b
  1147  01d3  e5                	push	hl
  1148  01d4  210000            	ld	hl,___str_5
  1149  01d7  e5                	push	hl
  1150  01d8  cd0000            	call	_printf
  1151  01db  f1                	pop	af
  1152  01dc  f1                	pop	af
  1153  01dd  c9                	ret
  1154                          	SECTION rodata_compiler
  1155                          ___str_5:
  1156  00a6  fe6364            	DEFM "%cd"
  1157  00a9  00                	DEFB 0x00
  1158                          	SECTION code_compiler
  1159                          ;	---------------------------------
  1160                          ; Function vt_moveCursorDown
  1161                          ; ---------------------------------
  1162                          _vt_moveCursorDown:
  1163  01de  0e00              	ld	c,0x00
  1164                          l_vt_moveCursorDown_00103:
  1165  01e0  210000            	ld	hl,2
  1166  01e3  39                	add	hl, sp
  1167  01e4  79                	ld	a, c
  1168  01e5  96                	sub	a, (hl)
  1169  01e6  d0                	ret	NC
  1170  01e7  c5                	push	bc
  1171  01e8  210000            	ld	hl,0x001b
  1172  01eb  e5                	push	hl
  1173  01ec  210000            	ld	hl,___str_6
  1174  01ef  e5                	push	hl
  1175  01f0  cd0000            	call	_printf
  1176  01f3  f1                	pop	af
  1177  01f4  f1                	pop	af
  1178  01f5  c1                	pop	bc
  1179  01f6  0c                	inc	c
  1180  01f7  1800              	jr	l_vt_moveCursorDown_00103
  1181                          	SECTION rodata_compiler
  1182                          ___str_6:
  1183  00aa  250842            	DEFM "%cB"
  1184  00ad  00                	DEFB 0x00
  1185                          	SECTION code_compiler
  1186                          ;	---------------------------------
  1187                          ; Function vt_cursorHome
  1188                          ; ---------------------------------
  1189                          _vt_cursorHome:
  1190  01f9  210000            	ld	hl,0x001b
  1191  01fc  e5                	push	hl
  1192  01fd  210000            	ld	hl,___str_7
  1193  0200  e5                	push	hl
  1194  0201  cd0000            	call	_printf
  1195  0204  f1                	pop	af
  1196  0205  f1                	pop	af
  1197  0206  c9                	ret
  1198                          	SECTION rodata_compiler
  1199                          ___str_7:
  1200  00ae  ff6348            	DEFM "%cH"
  1201  00b1  00                	DEFB 0x00
  1202                          	SECTION code_compiler
  1203                          ;	---------------------------------
  1204                          ; Function vt_moveCursorLeft
  1205                          ; ---------------------------------
  1206                          _vt_moveCursorLeft:
  1207  0207  0e00              	ld	c,0x00
  1208                          l_vt_moveCursorLeft_00103:
  1209  0209  210000            	ld	hl,2
  1210  020c  39                	add	hl, sp
  1211  020d  79                	ld	a, c
  1212  020e  96                	sub	a, (hl)
  1213  020f  d0                	ret	NC
  1214  0210  c5                	push	bc
  1215  0211  210000            	ld	hl,0x001b
  1216  0214  e5                	push	hl
  1217  0215  210000            	ld	hl,___str_8
  1218  0218  e5                	push	hl
  1219  0219  cd0000            	call	_printf
  1220  021c  f1                	pop	af
  1221  021d  f1                	pop	af
  1222  021e  c1                	pop	bc
  1223  021f  0c                	inc	c
  1224  0220  1800              	jr	l_vt_moveCursorLeft_00103
  1225                          	SECTION rodata_compiler
  1226                          ___str_8:
  1227  00b2  251844            	DEFM "%cD"
  1228  00b5  00                	DEFB 0x00
  1229                          	SECTION code_compiler
  1230                          ;	---------------------------------
  1231                          ; Function vt_moveCursorRight
  1232                          ; ---------------------------------
  1233                          _vt_moveCursorRight:
  1234  0222  0e00              	ld	c,0x00
  1235                          l_vt_moveCursorRight_00103:
  1236  0224  210000            	ld	hl,2
  1237  0227  39                	add	hl, sp
  1238  0228  79                	ld	a, c
  1239  0229  96                	sub	a, (hl)
  1240  022a  d0                	ret	NC
  1241  022b  c5                	push	bc
  1242  022c  210000            	ld	hl,0x001b
  1243  022f  e5                	push	hl
  1244  0230  210000            	ld	hl,___str_9
  1245  0233  e5                	push	hl
  1246  0234  cd0000            	call	_printf
  1247  0237  f1                	pop	af
  1248  0238  f1                	pop	af
  1249  0239  c1                	pop	bc
  1250  023a  0c                	inc	c
  1251  023b  1800              	jr	l_vt_moveCursorRight_00103
  1252                          	SECTION rodata_compiler
  1253                          ___str_9:
  1254  00b6  fe6343            	DEFM "%cC"
  1255  00b9  00                	DEFB 0x00
  1256                          	SECTION code_compiler
  1257                          ;	---------------------------------
  1258                          ; Function vt_moveCursorUp
  1259                          ; ---------------------------------
  1260                          _vt_moveCursorUp:
  1261  023d  0e00              	ld	c,0x00
  1262                          l_vt_moveCursorUp_00103:
  1263  023f  210000            	ld	hl,2
  1264  0242  39                	add	hl, sp
  1265  0243  79                	ld	a, c
  1266  0244  96                	sub	a, (hl)
  1267  0245  d0                	ret	NC
  1268  0246  c5                	push	bc
  1269  0247  210000            	ld	hl,0x001b
  1270  024a  e5                	push	hl
  1271  024b  210000            	ld	hl,___str_10
  1272  024e  e5                	push	hl
  1273  024f  cd0000            	call	_printf
  1274  0252  f1                	pop	af
  1275  0253  f1                	pop	af
  1276  0254  c1                	pop	bc
  1277  0255  0c                	inc	c
  1278  0256  1800              	jr	l_vt_moveCursorUp_00103
  1279                          	SECTION rodata_compiler
  1280                          ___str_10:
  1281  00ba  256341            	DEFM "%cA"
  1282  00bd  00                	DEFB 0x00
  1283                          	SECTION code_compiler
  1284                          ;	---------------------------------
  1285                          ; Function vt_deleteLine
  1286                          ; ---------------------------------
  1287                          _vt_deleteLine:
  1288  0258  210000            	ld	hl,0x001b
  1289  025b  e5                	push	hl
  1290  025c  210000            	ld	hl,___str_11
  1291  025f  e5                	push	hl
  1292  0260  cd0000            	call	_printf
  1293  0263  f1                	pop	af
  1294  0264  f1                	pop	af
  1295  0265  c9                	ret
  1296                          	SECTION rodata_compiler
  1297                          ___str_11:
  1298  00be  25fe4d            	DEFM "%cM"
  1299  00c1  00                	DEFB 0x00
  1300                          	SECTION code_compiler
  1301                          ;	---------------------------------
  1302                          ; Function vt_setCursor
  1303                          ; ---------------------------------
  1304                          _vt_setCursor:
  1305  0266  dde5              	push	ix
  1306  0268  dd210000          	ld	ix,0
  1307  026c  dd39              	add	ix,sp
  1308  026e  210000            	ld	hl,0x001b
  1309  0271  e5                	push	hl
  1310  0272  210000            	ld	hl, +(__sgoioblk + 10)
  1311  0275  e5                	push	hl
  1312  0276  cd0000            	call	_fputc_callee
  1313  0279  3a0000            	ld	a, (__EMULATION_MODE+0)
  1314  027c  b7                	or	a, a
  1315  027d  2000              	jr	NZ,l_vt_setCursor_00102
  1316  027f  210000            	ld	hl,0x003d
  1317  0282  e5                	push	hl
  1318  0283  210000            	ld	hl, +(__sgoioblk + 10)
  1319  0286  e5                	push	hl
  1320  0287  cd0000            	call	_fputc_callee
  1321  028a  1800              	jr	l_vt_setCursor_00103
  1322                          l_vt_setCursor_00102:
  1323  028c  210000            	ld	hl,0x0059
  1324  028f  e5                	push	hl
  1325  0290  210000            	ld	hl, +(__sgoioblk + 10)
  1326  0293  e5                	push	hl
  1327  0294  cd0000            	call	_fputc_callee
  1328                          l_vt_setCursor_00103:
  1329  0297  dd4e00            	ld	c,(ix+5)
  1330  029a  0600              	ld	b,0x00
  1331  029c  210000            	ld	hl,0x0020
  1332  029f  09                	add	hl, bc
  1333  02a0  e5                	push	hl
  1334  02a1  210000            	ld	hl, +(__sgoioblk + 10)
  1335  02a4  e5                	push	hl
  1336  02a5  cd0000            	call	_fputc_callee
  1337  02a8  dd4e00            	ld	c,(ix+4)
  1338  02ab  0600              	ld	b,0x00
  1339  02ad  210000            	ld	hl,0x0020
  1340  02b0  09                	add	hl, bc
  1341  02b1  e5                	push	hl
  1342  02b2  210000            	ld	hl, +(__sgoioblk + 10)
  1343  02b5  e5                	push	hl
  1344  02b6  cd0000            	call	_fputc_callee
  1345  02b9  dde1              	pop	ix
  1346  02bb  c9                	ret
  1347                          	SECTION code_compiler
  1348                          ;	---------------------------------
  1349                          ; Function vt_foregroundColor
  1350                          ; ---------------------------------
  1351                          _vt_foregroundColor:
  1352  02bc  dde5              	push	ix
  1353  02be  dd210000          	ld	ix,0
  1354  02c2  dd39              	add	ix,sp
  1355  02c4  210000            	ld	hl,0x001b
  1356  02c7  e5                	push	hl
  1357  02c8  210000            	ld	hl, +(__sgoioblk + 10)
  1358  02cb  e5                	push	hl
  1359  02cc  cd0000            	call	_fputc_callee
  1360  02cf  210000            	ld	hl,0x0062
  1361  02d2  e5                	push	hl
  1362  02d3  210000            	ld	hl, +(__sgoioblk + 10)
  1363  02d6  e5                	push	hl
  1364  02d7  cd0000            	call	_fputc_callee
  1365  02da  dd4e00            	ld	c,(ix+4)
  1366  02dd  0600              	ld	b,0x00
  1367  02df  c5                	push	bc
  1368  02e0  210000            	ld	hl, +(__sgoioblk + 10)
  1369  02e3  e5                	push	hl
  1370  02e4  cd0000            	call	_fputc_callee
  1371  02e7  dde1              	pop	ix
  1372  02e9  c9                	ret
  1373                          	SECTION code_compiler
  1374                          ;	---------------------------------
  1375                          ; Function vt_insertLine
  1376                          ; ---------------------------------
  1377                          _vt_insertLine:
  1378  02ea  210000            	ld	hl,0x001b
  1379  02ed  e5                	push	hl
  1380  02ee  210000            	ld	hl,___str_12
  1381  02f1  e5                	push	hl
  1382  02f2  cd0000            	call	_printf
  1383  02f5  f1                	pop	af
  1384  02f6  f1                	pop	af
  1385  02f7  c9                	ret
  1386                          	SECTION rodata_compiler
  1387                          ___str_12:
  1388  00c2  ff634c            	DEFM "%cL"
  1389  00c5  00                	DEFB 0x00
  1390                          	SECTION code_compiler
  1391                          ;	---------------------------------
  1392                          ; Function vt_restoreCursorPosition
  1393                          ; ---------------------------------
  1394                          _vt_restoreCursorPosition:
  1395  02f8  210000            	ld	hl,0x001b
  1396  02fb  e5                	push	hl
  1397  02fc  210000            	ld	hl,___str_13
  1398  02ff  e5                	push	hl
  1399  0300  cd0000            	call	_printf
  1400  0303  f1                	pop	af
  1401  0304  f1                	pop	af
  1402  0305  c9                	ret
  1403                          	SECTION rodata_compiler
  1404                          ___str_13:
  1405  00c6  fe636b            	DEFM "%ck"
  1406  00c9  00                	DEFB 0x00
  1407                          	SECTION code_compiler
  1408                          ;	---------------------------------
  1409                          ; Function vt_backgroundColor
  1410                          ; ---------------------------------
  1411                          _vt_backgroundColor:
  1412  0306  dde5              	push	ix
  1413  0308  dd210000          	ld	ix,0
  1414  030c  dd39              	add	ix,sp
  1415  030e  210000            	ld	hl,0x001b
  1416  0311  e5                	push	hl
  1417  0312  210000            	ld	hl, +(__sgoioblk + 10)
  1418  0315  e5                	push	hl
  1419  0316  cd0000            	call	_fputc_callee
  1420  0319  210000            	ld	hl,0x0063
  1421  031c  e5                	push	hl
  1422  031d  210000            	ld	hl, +(__sgoioblk + 10)
  1423  0320  e5                	push	hl
  1424  0321  cd0000            	call	_fputc_callee
  1425  0324  dd4e00            	ld	c,(ix+4)
  1426  0327  0600              	ld	b,0x00
  1427  0329  c5                	push	bc
  1428  032a  210000            	ld	hl, +(__sgoioblk + 10)
  1429  032d  e5                	push	hl
  1430  032e  cd0000            	call	_fputc_callee
  1431  0331  dde1              	pop	ix
  1432  0333  c9                	ret
  1433                          	SECTION code_compiler
  1434                          ;	---------------------------------
  1435                          ; Function vt_saveCursorPosition
  1436                          ; ---------------------------------
  1437                          _vt_saveCursorPosition:
  1438  0334  210000            	ld	hl,0x001b
  1439  0337  e5                	push	hl
  1440  0338  210000            	ld	hl,___str_14
  1441  033b  e5                	push	hl
  1442  033c  cd0000            	call	_printf
  1443  033f  f1                	pop	af
  1444  0340  f1                	pop	af
  1445  0341  c9                	ret
  1446                          	SECTION rodata_compiler
  1447                          ___str_14:
  1448  00ca  25d86a            	DEFM "%cj"
  1449  00cd  00                	DEFB 0x00
  1450                          	SECTION code_compiler
  1451                          ;	---------------------------------
  1452                          ; Function vt_cursorUpAndInsert
  1453                          ; ---------------------------------
  1454                          _vt_cursorUpAndInsert:
  1455  0342  210000            	ld	hl,0x001b
  1456  0345  e5                	push	hl
  1457  0346  210000            	ld	hl,___str_15
  1458  0349  e5                	push	hl
  1459  034a  cd0000            	call	_printf
  1460  034d  f1                	pop	af
  1461  034e  f1                	pop	af
  1462  034f  c9                	ret
  1463                          	SECTION rodata_compiler
  1464                          ___str_15:
  1465  00ce  250449            	DEFM "%cI"
  1466  00d1  00                	DEFB 0x00
  1467                          	SECTION code_compiler
  1468                          ;	---------------------------------
  1469                          ; Function vt_wrapOff
  1470                          ; ---------------------------------
  1471                          _vt_wrapOff:
  1472  0350  210000            	ld	hl,0x001b
  1473  0353  e5                	push	hl
  1474  0354  210000            	ld	hl,___str_16
  1475  0357  e5                	push	hl
  1476  0358  cd0000            	call	_printf
  1477  035b  f1                	pop	af
  1478  035c  f1                	pop	af
  1479  035d  c9                	ret
  1480                          	SECTION rodata_compiler
  1481                          ___str_16:
  1482  00d2  056377            	DEFM "%cw"
  1483  00d5  00                	DEFB 0x00
  1484                          	SECTION code_compiler
  1485                          ;	---------------------------------
  1486                          ; Function vt_wrapOn
  1487                          ; ---------------------------------
  1488                          _vt_wrapOn:
  1489  035e  210000            	ld	hl,0x001b
  1490  0361  e5                	push	hl
  1491  0362  210000            	ld	hl,___str_17
  1492  0365  e5                	push	hl
  1493  0366  cd0000            	call	_printf
  1494  0369  f1                	pop	af
  1495  036a  f1                	pop	af
  1496  036b  c9                	ret
  1497                          	SECTION rodata_compiler
  1498                          ___str_17:
  1499  00d6  25fc76            	DEFM "%cv"
  1500  00d9  00                	DEFB 0x00
  1501                          	SECTION code_compiler
  1502                          ;	---------------------------------
  1503                          ; Function vt_normalVideo
  1504                          ; ---------------------------------
  1505                          _vt_normalVideo:
  1506  036c  210000            	ld	hl,0x001b
  1507  036f  e5                	push	hl
  1508  0370  210000            	ld	hl,___str_18
  1509  0373  e5                	push	hl
  1510  0374  cd0000            	call	_printf
  1511  0377  f1                	pop	af
  1512  0378  f1                	pop	af
  1513  0379  c9                	ret
  1514                          	SECTION rodata_compiler
  1515                          ___str_18:
  1516  00da  256371            	DEFM "%cq"
  1517  00dd  00                	DEFB 0x00
  1518                          	SECTION code_compiler
  1519                          ;	---------------------------------
  1520                          ; Function vt_reverseVideo
  1521                          ; ---------------------------------
  1522                          _vt_reverseVideo:
  1523  037a  210000            	ld	hl,0x001b
  1524  037d  e5                	push	hl
  1525  037e  210000            	ld	hl,___str_19
  1526  0381  e5                	push	hl
  1527  0382  cd0000            	call	_printf
  1528  0385  f1                	pop	af
  1529  0386  f1                	pop	af
  1530  0387  c9                	ret
  1531                          	SECTION rodata_compiler
  1532                          ___str_19:
  1533  00de  250570            	DEFM "%cp"
  1534  00e1  00                	DEFB 0x00
  1535                          	SECTION code_compiler
  1536                          ;	---------------------------------
  1537                          ; Function ayWrite
  1538                          ; ---------------------------------
  1539                          _ayWrite:
  1540  0388  fd210000          	ld	iy,2
  1541  038c  fd39              	add	iy, sp
  1542  038e  fd7e00            	ld	a,(iy+0)
  1543  0391  d300              	out	(_IO_AYLATCH), a
  1544  0393  fd7e00            	ld	a,(iy+0+1)
  1545  0396  d300              	out	(_IO_AYDATA), a
  1546  0398  c9                	ret
  1547                          	SECTION code_compiler
  1548                          ;	---------------------------------
  1549                          ; Function ayRead
  1550                          ; ---------------------------------
  1551                          _ayRead:
  1552  0399  210000            	ld	hl,2+0
  1553  039c  39                	add	hl, sp
  1554  039d  7e                	ld	a, (hl)
  1555  039e  d300              	out	(_IO_AYLATCH), a
  1556  03a0  db00              	in	a, (_IO_AYDATA)
  1557  03a2  6f                	ld	l, a
  1558  03a3  c9                	ret
  1559                          	SECTION code_compiler
  1560                          ;	---------------------------------
  1561                          ; Function playNoteDelay
  1562                          ; ---------------------------------
  1563                          _playNoteDelay:
  1564  03a4  dde5              	push	ix
  1565  03a6  dd210000          	ld	ix,0
  1566  03aa  dd39              	add	ix,sp
  1567  03ac  dd5600            	ld	d,(ix+7)
  1568  03af  1e00              	ld	e,0x0b
  1569  03b1  d5                	push	de
  1570  03b2  cd0000            	call	_ayWrite
  1571  03b5  f1                	pop	af
  1572  03b6  dd5600            	ld	d,(ix+6)
  1573  03b9  1e00              	ld	e,0x0c
  1574  03bb  d5                	push	de
  1575  03bc  cd0000            	call	_ayWrite
  1576  03bf  f1                	pop	af
  1577  03c0  dd7e00            	ld	a,(ix+4)
  1578  03c3  b7                	or	a, a
  1579  03c4  2800              	jr	Z,l_playNoteDelay_00101
  1580  03c6  dd7e00            	ld	a,(ix+4)
  1581  03c9  3d                	dec	a
  1582  03ca  2800              	jr	Z,l_playNoteDelay_00102
  1583  03cc  dd7e00            	ld	a,(ix+4)
  1584  03cf  d600              	sub	a,0x02
  1585  03d1  ca0000            	jp	Z,l_playNoteDelay_00103
  1586  03d4  c30000            	jp	l_playNoteDelay_00105
  1587                          l_playNoteDelay_00101:
  1588  03d7  110000            	ld	de,0x1008
  1589  03da  d5                	push	de
  1590  03db  cd0000            	call	_ayWrite
  1591  03de  f1                	pop	af
  1592  03df  af                	xor	a, a
  1593  03e0  57                	ld	d,a
  1594  03e1  1e09              	ld	e,0x09
  1595  03e3  d5                	push	de
  1596  03e4  cd8803            	call	_ayWrite
  1597  03e7  f1                	pop	af
  1598  03e8  af                	xor	a, a
  1599  03e9  57                	ld	d,a
  1600  03ea  1e0a              	ld	e,0x0a
  1601  03ec  d5                	push	de
  1602  03ed  cd8803            	call	_ayWrite
  1603  03f0  f1                	pop	af
  1604  03f1  014a00            	ld	bc,__NOTES_FINE+0
  1605  03f4  dd6e05            	ld	l,(ix+5)
  1606  03f7  2600              	ld	h,0x00
  1607  03f9  09                	add	hl, bc
  1608  03fa  7e                	ld	a, (hl)
  1609  03fb  f5                	push	af
  1610  03fc  33                	inc	sp
  1611  03fd  af                	xor	a, a
  1612  03fe  f5                	push	af
  1613  03ff  33                	inc	sp
  1614  0400  cd8803            	call	_ayWrite
  1615  0403  f1                	pop	af
  1616  0404  010200            	ld	bc,__NOTES_COURSE+0
  1617  0407  dd6e05            	ld	l,(ix+5)
  1618  040a  2600              	ld	h,0x00
  1619  040c  09                	add	hl, bc
  1620  040d  56                	ld	d, (hl)
  1621  040e  1e01              	ld	e,0x01
  1622  0410  d5                	push	de
  1623  0411  cd8803            	call	_ayWrite
  1624  0414  f1                	pop	af
  1625  0415  af                	xor	a, a
  1626  0416  57                	ld	d,a
  1627  0417  1e0d              	ld	e,0x0d
  1628  0419  d5                	push	de
  1629  041a  cd8803            	call	_ayWrite
  1630  041d  f1                	pop	af
  1631  041e  c3ad04            	jp	l_playNoteDelay_00105
  1632                          l_playNoteDelay_00102:
  1633  0421  af                	xor	a, a
  1634  0422  57                	ld	d,a
  1635  0423  1e08              	ld	e,0x08
  1636  0425  d5                	push	de
  1637  0426  cd8803            	call	_ayWrite
  1638  0429  f1                	pop	af
  1639  042a  110910            	ld	de,0x1009
  1640  042d  d5                	push	de
  1641  042e  cd8803            	call	_ayWrite
  1642  0431  f1                	pop	af
  1643  0432  af                	xor	a, a
  1644  0433  57                	ld	d,a
  1645  0434  1e0a              	ld	e,0x0a
  1646  0436  d5                	push	de
  1647  0437  cd8803            	call	_ayWrite
  1648  043a  f1                	pop	af
  1649  043b  014a00            	ld	bc,__NOTES_FINE+0
  1650  043e  dd6e05            	ld	l,(ix+5)
  1651  0441  2600              	ld	h,0x00
  1652  0443  09                	add	hl, bc
  1653  0444  56                	ld	d, (hl)
  1654  0445  1e02              	ld	e,0x02
  1655  0447  d5                	push	de
  1656  0448  cd8803            	call	_ayWrite
  1657  044b  f1                	pop	af
  1658  044c  010200            	ld	bc,__NOTES_COURSE+0
  1659  044f  dd6e05            	ld	l,(ix+5)
  1660  0452  2600              	ld	h,0x00
  1661  0454  09                	add	hl, bc
  1662  0455  56                	ld	d, (hl)
  1663  0456  1e03              	ld	e,0x03
  1664  0458  d5                	push	de
  1665  0459  cd8803            	call	_ayWrite
  1666  045c  f1                	pop	af
  1667  045d  af                	xor	a, a
  1668  045e  57                	ld	d,a
  1669  045f  1e0d              	ld	e,0x0d
  1670  0461  d5                	push	de
  1671  0462  cd8803            	call	_ayWrite
  1672  0465  f1                	pop	af
  1673  0466  1845              	jr	l_playNoteDelay_00105
  1674                          l_playNoteDelay_00103:
  1675  0468  af                	xor	a, a
  1676  0469  57                	ld	d,a
  1677  046a  1e08              	ld	e,0x08
  1678  046c  d5                	push	de
  1679  046d  cd8803            	call	_ayWrite
  1680  0470  f1                	pop	af
  1681  0471  af                	xor	a, a
  1682  0472  57                	ld	d,a
  1683  0473  1e09              	ld	e,0x09
  1684  0475  d5                	push	de
  1685  0476  cd8803            	call	_ayWrite
  1686  0479  f1                	pop	af
  1687  047a  110a10            	ld	de,0x100a
  1688  047d  d5                	push	de
  1689  047e  cd8803            	call	_ayWrite
  1690  0481  f1                	pop	af
  1691  0482  014a00            	ld	bc,__NOTES_FINE+0
  1692  0485  dd6e05            	ld	l,(ix+5)
  1693  0488  2600              	ld	h,0x00
  1694  048a  09                	add	hl, bc
  1695  048b  56                	ld	d, (hl)
  1696  048c  1e04              	ld	e,0x04
  1697  048e  d5                	push	de
  1698  048f  cd8803            	call	_ayWrite
  1699  0492  f1                	pop	af
  1700  0493  010200            	ld	bc,__NOTES_COURSE+0
  1701  0496  dd6e05            	ld	l,(ix+5)
  1702  0499  2600              	ld	h,0x00
  1703  049b  09                	add	hl, bc
  1704  049c  56                	ld	d, (hl)
  1705  049d  1e05              	ld	e,0x05
  1706  049f  d5                	push	de
  1707  04a0  cd8803            	call	_ayWrite
  1708  04a3  f1                	pop	af
  1709  04a4  af                	xor	a, a
  1710  04a5  57                	ld	d,a
  1711  04a6  1e0d              	ld	e,0x0d
  1712  04a8  d5                	push	de
  1713  04a9  cd8803            	call	_ayWrite
  1714  04ac  f1                	pop	af
  1715                          l_playNoteDelay_00105:
  1716  04ad  dde1              	pop	ix
  1717  04af  c9                	ret
  1718                          	SECTION code_compiler
  1719                          ;	---------------------------------
  1720                          ; Function isKeyPressed
  1721                          ; ---------------------------------
  1722                          _isKeyPressed:
  1723  04b0  3a0200            	ld	a, (__kbdBufferWritePos+0)
  1724  04b3  fd210100          	ld	iy,__kbdBufferReadPos
  1725  04b7  fd9600            	sub	a,(iy+0)
  1726  04ba  2004              	jr	NZ,l_isKeyPressed_00103
  1727  04bc  3e01              	ld	a,0x01
  1728  04be  1801              	jr	l_isKeyPressed_00104
  1729                          l_isKeyPressed_00103:
  1730  04c0  af                	xor	a,a
  1731                          l_isKeyPressed_00104:
  1732  04c1  ee01              	xor	a,0x01
  1733  04c3  6f                	ld	l, a
  1734  04c4  c9                	ret
  1735                          	SECTION code_compiler
  1736                          ;	---------------------------------
  1737                          ; Function getChar
  1738                          ; ---------------------------------
  1739                          _getChar:
  1740                          l_getChar_00101:
  1741  04c5  3a0200            	ld	a, (__kbdBufferWritePos+0)
  1742  04c8  fd210100          	ld	iy,__kbdBufferReadPos
  1743  04cc  fd9600            	sub	a,(iy+0)
  1744  04cf  28f4              	jr	Z,l_getChar_00101
  1745  04d1  010000            	ld	bc,__kbdBuffer+0
  1746  04d4  2a0100            	ld	hl, (__kbdBufferReadPos)
  1747  04d7  2600              	ld	h,0x00
  1748  04d9  09                	add	hl, bc
  1749  04da  4e                	ld	c, (hl)
  1750  04db  3a0100            	ld	a, (__kbdBufferReadPos+0)
  1751  04de  3c                	inc	a
  1752  04df  320100            	ld	(__kbdBufferReadPos+0), a
  1753  04e2  69                	ld	l, c
  1754  04e3  c9                	ret
  1755                          	SECTION code_compiler
  1756                          ;	---------------------------------
  1757                          ; Function getJoyStatus
  1758                          ; ---------------------------------
  1759                          _getJoyStatus:
  1760  04e4  3e04              	ld	a, +((__joyStatus) & 0xFF)
  1761  04e6  210200            	ld	hl,2
  1762  04e9  39                	add	hl, sp
  1763  04ea  86                	add	a, (hl)
  1764  04eb  6f                	ld	l, a
  1765  04ec  3e00              	ld	a, +((__joyStatus) / 256)
  1766  04ee  ce00              	adc	a,0x00
  1767  04f0  67                	ld	h, a
  1768  04f1  6e                	ld	l, (hl)
  1769  04f2  c9                	ret
  1770                          	SECTION code_compiler
  1771                          ;	---------------------------------
  1772                          ; Function readLine
  1773                          ; ---------------------------------
  1774                          _readLine:
  1775  04f3  dde5              	push	ix
  1776  04f5  dd210000          	ld	ix,0
  1777  04f9  dd39              	add	ix,sp
  1778  04fb  0e00              	ld	c,0x00
  1779                          l_readLine_00120:
  1780  04fd  c5                	push	bc
  1781  04fe  cdc504            	call	_getChar
  1782  0501  5d                	ld	e, l
  1783  0502  c1                	pop	bc
  1784  0503  7b                	ld	a, e
  1785  0504  d60d              	sub	a,0x0d
  1786  0506  ca8f05            	jp	Z,l_readLine_00121
  1787  0509  79                	ld	a, c
  1788  050a  dd9606            	sub	a,(ix+6)
  1789  050d  3020              	jr	NC,l_readLine_00112
  1790  050f  7b                	ld	a, e
  1791  0510  d620              	sub	a,0x20
  1792  0512  381b              	jr	C,l_readLine_00112
  1793  0514  3e7e              	ld	a,0x7e
  1794  0516  93                	sub	a, e
  1795  0517  3816              	jr	C,l_readLine_00112
  1796  0519  dd6e04            	ld	l,(ix+4)
  1797  051c  dd6605            	ld	h,(ix+5)
  1798  051f  0600              	ld	b,0x00
  1799  0521  09                	add	hl, bc
  1800  0522  73                	ld	(hl), e
  1801  0523  c5                	push	bc
  1802  0524  7b                	ld	a, e
  1803  0525  f5                	push	af
  1804  0526  33                	inc	sp
  1805  0527  cd9f11            	call	_vdp_write
  1806  052a  33                	inc	sp
  1807  052b  c1                	pop	bc
  1808  052c  0c                	inc	c
  1809  052d  18ce              	jr	l_readLine_00120
  1810                          l_readLine_00112:
  1811  052f  7b                	ld	a, e
  1812  0530  d67f              	sub	a,0x7f
  1813  0532  2004              	jr	NZ,l_readLine_00175
  1814  0534  3e01              	ld	a,0x01
  1815  0536  1801              	jr	l_readLine_00176
  1816                          l_readLine_00175:
  1817  0538  af                	xor	a,a
  1818                          l_readLine_00176:
  1819  0539  47                	ld	b, a
  1820  053a  dd7e06            	ld	a,(ix+6)
  1821  053d  91                	sub	a, c
  1822  053e  2018              	jr	NZ,l_readLine_00108
  1823  0540  cb40              	bit	0, b
  1824  0542  2014              	jr	NZ,l_readLine_00108
  1825  0544  c5                	push	bc
  1826  0545  210a00            	ld	hl,0x000a
  1827  0548  e5                	push	hl
  1828  0549  3e3c              	ld	a,0x3c
  1829  054b  f5                	push	af
  1830  054c  33                	inc	sp
  1831  054d  af                	xor	a, a
  1832  054e  f5                	push	af
  1833  054f  33                	inc	sp
  1834  0550  cda403            	call	_playNoteDelay
  1835  0553  f1                	pop	af
  1836  0554  f1                	pop	af
  1837  0555  c1                	pop	bc
  1838  0556  18a5              	jr	l_readLine_00120
  1839                          l_readLine_00108:
  1840  0558  78                	ld	a, b
  1841  0559  b7                	or	a, a
  1842  055a  28a1              	jr	Z,l_readLine_00120
  1843  055c  79                	ld	a, c
  1844  055d  b7                	or	a, a
  1845  055e  289d              	jr	Z,l_readLine_00120
  1846  0560  110800            	ld	de,_vdp_cursor+0
  1847  0563  1a                	ld	a, (de)
  1848  0564  b7                	or	a, a
  1849  0565  200c              	jr	NZ,l_readLine_00102
  1850  0567  3e27              	ld	a,0x27
  1851  0569  12                	ld	(de), a
  1852  056a  3a0900            	ld	a, ((_vdp_cursor + 1) + 0)
  1853  056d  3d                	dec	a
  1854  056e  320900            	ld	((_vdp_cursor + 1)),a
  1855  0571  1802              	jr	l_readLine_00103
  1856                          l_readLine_00102:
  1857  0573  3d                	dec	a
  1858  0574  12                	ld	(de), a
  1859                          l_readLine_00103:
  1860  0575  0d                	dec	c
  1861  0576  3a0900            	ld	a, ((_vdp_cursor + 1) + 0)
  1862  0579  210800            	ld	hl,_vdp_cursor + 0
  1863  057c  46                	ld	b, (hl)
  1864  057d  c5                	push	bc
  1865  057e  2620              	ld	h,0x20
  1866  0580  e5                	push	hl
  1867  0581  33                	inc	sp
  1868  0582  f5                	push	af
  1869  0583  33                	inc	sp
  1870  0584  c5                	push	bc
  1871  0585  33                	inc	sp
  1872  0586  cd1612            	call	_vdp_writeCharAtLocation
  1873  0589  f1                	pop	af
  1874  058a  33                	inc	sp
  1875  058b  c1                	pop	bc
  1876  058c  c3fd04            	jp	l_readLine_00120
  1877                          l_readLine_00121:
  1878  058f  69                	ld	l, c
  1879  0590  dde1              	pop	ix
  1880  0592  c9                	ret
  1881                          	SECTION code_compiler
  1882                          ;	---------------------------------
  1883                          ; Function vdp_setRegister
  1884                          ; ---------------------------------
  1885                          _vdp_setRegister:
  1886  0593  fd210300          	ld	iy,3
  1887  0597  fd39              	add	iy, sp
  1888  0599  fd7e00            	ld	a,(iy+0)
  1889  059c  d3a1              	out	(_IO_VDPLATCH), a
  1890  059e  fd2b              	dec	iy
  1891  05a0  fd7e00            	ld	a,(iy+0)
  1892  05a3  f680              	or	a,0x80
  1893  05a5  d3a1              	out	(_IO_VDPLATCH), a
  1894  05a7  c9                	ret
  1895                          	SECTION code_compiler
  1896                          ;	---------------------------------
  1897                          ; Function vdp_setWriteAddress
  1898                          ; ---------------------------------
  1899                          _vdp_setWriteAddress:
  1900  05a8  fd210200          	ld	iy,2
  1901  05ac  fd39              	add	iy, sp
  1902  05ae  fd7e00            	ld	a,(iy+0)
  1903  05b1  d3a1              	out	(_IO_VDPLATCH), a
  1904  05b3  fd7e01            	ld	a,(iy+1)
  1905  05b6  e63f              	and	a,0x3f
  1906  05b8  f640              	or	a,0x40
  1907  05ba  d3a1              	out	(_IO_VDPLATCH), a
  1908  05bc  c9                	ret
  1909                          	SECTION code_compiler
  1910                          ;	---------------------------------
  1911                          ; Function vdp_setReadAddress
  1912                          ; ---------------------------------
  1913                          _vdp_setReadAddress:
  1914  05bd  fd210200          	ld	iy,2
  1915  05c1  fd39              	add	iy, sp
  1916  05c3  fd7e00            	ld	a,(iy+0)
  1917  05c6  d3a1              	out	(_IO_VDPLATCH), a
  1918  05c8  fd7e01            	ld	a,(iy+1)
  1919  05cb  e63f              	and	a,0x3f
  1920  05cd  d3a1              	out	(_IO_VDPLATCH), a
  1921  05cf  c9                	ret
  1922                          	SECTION code_compiler
  1923                          ;	---------------------------------
  1924                          ; Function waitVdpISR
  1925                          ; ---------------------------------
  1926                          _waitVdpISR:
  1927  05d0  f5                	push	af
  1928  05d1  dba1              	in	a, (_IO_VDPLATCH)
  1929  05d3  320c00            	ld	(_vdpStatusRegVal), a
  1930  05d6  3e01              	ld	a, 0x01
  1931  05d8  320d00            	ld	(_vdpIsReady), a
  1932  05db  f1                	pop	af
  1933  05dc  fb                	ei
  1934  05dd  ed4d              	reti
  1935                          ;	---------------------------------
  1936                          ; Function vdp_enableVDPReadyInt
  1937                          ; ---------------------------------
  1938                          _vdp_enableVDPReadyInt:
  1939  05df  cd6800            	call	_NABU_DisableInterrupts
  1940  05e2  21d005            	ld	hl, _waitVdpISR
  1941  05e5  2206ff            	ld	(0xff00 + 6), hl
  1942  05e8  3e0e              	ld	a,0x0e
  1943  05ea  f5                	push	af
  1944  05eb  33                	inc	sp
  1945  05ec  cd9903            	call	_ayRead
  1946  05ef  33                	inc	sp
  1947  05f0  7d                	ld	a, l
  1948  05f1  cbe7              	set	4, a
  1949  05f3  57                	ld	d,a
  1950  05f4  1e0e              	ld	e,0x0e
  1951  05f6  d5                	push	de
  1952  05f7  cd8803            	call	_ayWrite
  1953  05fa  f1                	pop	af
  1954  05fb  cd6a00            	call	_NABU_EnableInterrupts
  1955  05fe  210b00            	ld	hl,__vdpInterruptEnabled + 0
  1956  0601  3601              	ld	(hl),0x01
  1957  0603  3a0a00            	ld	a, (__vdpReg1Val+0)
  1958  0606  cbef              	set	5, a
  1959  0608  57                	ld	d,a
  1960  0609  1e01              	ld	e,0x01
  1961  060b  d5                	push	de
  1962  060c  cd9305            	call	_vdp_setRegister
  1963  060f  f1                	pop	af
  1964  0610  c9                	ret
  1965                          	SECTION code_compiler
  1966                          ;	---------------------------------
  1967                          ; Function vdp_waitVDPReadyInt
  1968                          ; ---------------------------------
  1969                          _vdp_waitVDPReadyInt:
  1970  0611  3a0d00            	ld	a, (_vdpIsReady+0)
  1971  0614  b7                	or	a, a
  1972  0615  2806              	jr	Z,l_vdp_waitVDPReadyInt_00102
  1973  0617  3e13              	ld	a,0x13
  1974  0619  d300              	out	(_IO_CONTROL), a
  1975  061b  1804              	jr	l_vdp_waitVDPReadyInt_00104
  1976                          l_vdp_waitVDPReadyInt_00102:
  1977  061d  3e03              	ld	a,0x03
  1978  061f  d300              	out	(_IO_CONTROL), a
  1979                          l_vdp_waitVDPReadyInt_00104:
  1980  0621  3a0d00            	ld	a, (_vdpIsReady+0)
  1981  0624  b7                	or	a, a
  1982  0625  28fa              	jr	Z,l_vdp_waitVDPReadyInt_00104
  1983  0627  210d00            	ld	hl,_vdpIsReady + 0
  1984  062a  3600              	ld	(hl),0x00
  1985  062c  c9                	ret
  1986                          	SECTION code_compiler
  1987                          ;	---------------------------------
  1988                          ; Function vdp_disableVDPReadyInt
  1989                          ; ---------------------------------
  1990                          _vdp_disableVDPReadyInt:
  1991  062d  3a0a00            	ld	a, (__vdpReg1Val+0)
  1992  0630  57                	ld	d,a
  1993  0631  1e01              	ld	e,0x01
  1994  0633  d5                	push	de
  1995  0634  cd9305            	call	_vdp_setRegister
  1996  0637  f1                	pop	af
  1997  0638  cd6800            	call	_NABU_DisableInterrupts
  1998  063b  210b00            	ld	hl,__vdpInterruptEnabled + 0
  1999  063e  3600              	ld	(hl),0x00
  2000  0640  db41              	in	a, (_IO_AYLATCH)
  2001  0642  3e0e              	ld	a,0x0e
  2002  0644  f5                	push	af
  2003  0645  33                	inc	sp
  2004  0646  cd9903            	call	_ayRead
  2005  0649  33                	inc	sp
  2006  064a  7d                	ld	a, l
  2007  064b  cb67              	bit	4, a
  2008  064d  2802              	jr	Z,l_vdp_disableVDPReadyInt_00102
  2009  064f  ee10              	xor	a,0x10
  2010                          l_vdp_disableVDPReadyInt_00102:
  2011  0651  57                	ld	d,a
  2012  0652  1e0e              	ld	e,0x0e
  2013  0654  d5                	push	de
  2014  0655  cd8803            	call	_ayWrite
  2015  0658  f1                	pop	af
  2016  0659  c36a00            	jp	_NABU_EnableInterrupts
  2017                          	SECTION code_compiler
  2018                          ;	---------------------------------
  2019                          ; Function vdp_addISR
  2020                          ; ---------------------------------
  2021                          _vdp_addISR:
  2022  065c  cd6800            	call	_NABU_DisableInterrupts
  2023  065f  fd210200          	ld	iy,2
  2024  0663  fd39              	add	iy, sp
  2025  0665  fd7e00            	ld	a,(iy+0)
  2026  0668  32c004            	ld	(__vdp_ISR+0), a
  2027  066b  fd7e01            	ld	a,(iy+1)
  2028  066e  32c104            	ld	(__vdp_ISR+1), a
  2029  0671  2ac004            	ld	hl, (__vdp_ISR)
  2030  0674  2206ff            	ld	(0xff00 + 6), hl
  2031  0677  3e0e              	ld	a,0x0e
  2032  0679  f5                	push	af
  2033  067a  33                	inc	sp
  2034  067b  cd9903            	call	_ayRead
  2035  067e  33                	inc	sp
  2036  067f  7d                	ld	a, l
  2037  0680  cbe7              	set	4, a
  2038  0682  57                	ld	d,a
  2039  0683  1e0e              	ld	e,0x0e
  2040  0685  d5                	push	de
  2041  0686  cd8803            	call	_ayWrite
  2042  0689  f1                	pop	af
  2043  068a  cd6a00            	call	_NABU_EnableInterrupts
  2044  068d  210b00            	ld	hl,__vdpInterruptEnabled + 0
  2045  0690  3601              	ld	(hl),0x01
  2046  0692  3a0a00            	ld	a, (__vdpReg1Val+0)
  2047  0695  cbef              	set	5, a
  2048  0697  57                	ld	d,a
  2049  0698  1e01              	ld	e,0x01
  2050  069a  d5                	push	de
  2051  069b  cd9305            	call	_vdp_setRegister
  2052  069e  f1                	pop	af
  2053  069f  c9                	ret
  2054                          	SECTION code_compiler
  2055                          ;	---------------------------------
  2056                          ; Function vdp_removeISR
  2057                          ; ---------------------------------
  2058                          _vdp_removeISR:
  2059  06a0  3a0a00            	ld	a, (__vdpReg1Val+0)
  2060  06a3  57                	ld	d,a
  2061  06a4  1e01              	ld	e,0x01
  2062  06a6  d5                	push	de
  2063  06a7  cd9305            	call	_vdp_setRegister
  2064  06aa  f1                	pop	af
  2065  06ab  cd6800            	call	_NABU_DisableInterrupts
  2066  06ae  210b00            	ld	hl,__vdpInterruptEnabled + 0
  2067  06b1  3600              	ld	(hl),0x00
  2068  06b3  db41              	in	a, (_IO_AYLATCH)
  2069  06b5  3e0e              	ld	a,0x0e
  2070  06b7  f5                	push	af
  2071  06b8  33                	inc	sp
  2072  06b9  cd9903            	call	_ayRead
  2073  06bc  33                	inc	sp
  2074  06bd  7d                	ld	a, l
  2075  06be  cb67              	bit	4, a
  2076  06c0  2802              	jr	Z,l_vdp_removeISR_00102
  2077  06c2  ee10              	xor	a,0x10
  2078                          l_vdp_removeISR_00102:
  2079  06c4  57                	ld	d,a
  2080  06c5  1e0e              	ld	e,0x0e
  2081  06c7  d5                	push	de
  2082  06c8  cd8803            	call	_ayWrite
  2083  06cb  f1                	pop	af
  2084  06cc  c36a00            	jp	_NABU_EnableInterrupts
  2085                          	SECTION code_compiler
  2086                          ;	---------------------------------
  2087                          ; Function vdp_init
  2088                          ; ---------------------------------
  2089                          _vdp_init:
  2090  06cf  dde5              	push	ix
  2091  06d1  dd210000          	ld	ix,0
  2092  06d5  dd39              	add	ix,sp
  2093  06d7  dd7e04            	ld	a,(ix+4)
  2094  06da  32d104            	ld	(__vdpMode+0), a
  2095  06dd  dd7e0a            	ld	a,(ix+10)
  2096  06e0  32d304            	ld	(__vdpSplitThirds+0), a
  2097  06e3  dd7e07            	ld	a,(ix+7)
  2098  06e6  32c604            	ld	(__vdpSpriteSizeSelected+0), a
  2099  06e9  dd7e09            	ld	a,(ix+9)
  2100  06ec  32d204            	ld	(__autoScroll+0), a
  2101  06ef  210b00            	ld	hl,__vdpInterruptEnabled + 0
  2102  06f2  3600              	ld	(hl),0x00
  2103  06f4  210800            	ld	hl,_vdp_cursor
  2104  06f7  3600              	ld	(hl),0x00
  2105  06f9  210900            	ld	hl, +(_vdp_cursor + 1)
  2106  06fc  3600              	ld	(hl),0x00
  2107  06fe  dd7e07            	ld	a,(ix+7)
  2108  0701  87                	add	a, a
  2109  0702  4f                	ld	c, a
  2110  0703  dd7e04            	ld	a,(ix+4)
  2111  0706  3d                	dec	a
  2112  0707  2812              	jr	Z,l_vdp_init_00101
  2113  0709  dd7e04            	ld	a,(ix+4)
  2114  070c  d602              	sub	a,0x02
  2115  070e  cab207            	jp	Z,l_vdp_init_00106
  2116  0711  dd7e04            	ld	a,(ix+4)
  2117  0714  d603              	sub	a,0x03
  2118  0716  285f              	jr	Z,l_vdp_init_00105
  2119  0718  c3fa07            	jp	l_vdp_init_00107
  2120                          l_vdp_init_00101:
  2121  071b  c5                	push	bc
  2122  071c  3e02              	ld	a,0x02
  2123  071e  f5                	push	af
  2124  071f  33                	inc	sp
  2125  0720  af                	xor	a, a
  2126  0721  f5                	push	af
  2127  0722  33                	inc	sp
  2128  0723  cd9305            	call	_vdp_setRegister
  2129  0726  f1                	pop	af
  2130  0727  c1                	pop	bc
  2131  0728  79                	ld	a, c
  2132  0729  f6c0              	or	a,0xc0
  2133  072b  ddb608            	or	a,(ix+8)
  2134  072e  320a00            	ld	(__vdpReg1Val+0), a
  2135  0731  3a0a00            	ld	a, (__vdpReg1Val+0)
  2136  0734  57                	ld	d,a
  2137  0735  1e01              	ld	e,0x01
  2138  0737  d5                	push	de
  2139  0738  cd9305            	call	_vdp_setRegister
  2140  073b  f1                	pop	af
  2141  073c  3ad304            	ld	a, (__vdpSplitThirds+0)
  2142  073f  b7                	or	a, a
  2143  0740  280a              	jr	Z,l_vdp_init_00103
  2144  0742  110403            	ld	de,0x0304
  2145  0745  d5                	push	de
  2146  0746  cd9305            	call	_vdp_setRegister
  2147  0749  f1                	pop	af
  2148  074a  1809              	jr	l_vdp_init_00104
  2149                          l_vdp_init_00103:
  2150  074c  af                	xor	a, a
  2151  074d  57                	ld	d,a
  2152  074e  1e04              	ld	e,0x04
  2153  0750  d5                	push	de
  2154  0751  cd9305            	call	_vdp_setRegister
  2155  0754  f1                	pop	af
  2156                          l_vdp_init_00104:
  2157  0755  210000            	ld	hl,0x0000
  2158  0758  22cb04            	ld	(__vdpPatternGeneratorTableAddr), hl
  2159  075b  dd360500          	ld	(ix+5),0x00
  2160  075f  fd21cd04          	ld	iy,__vdpCursorMaxX
  2161  0763  fd36001f          	ld	(iy+0),0x1f
  2162  0767  fd21ce04          	ld	iy,__vdpCursorMaxXFull
  2163  076b  fd360020          	ld	(iy+0),0x20
  2164  076f  2603              	ld	h,0x03
  2165  0771  22cf04            	ld	(__vdpTextBufferSize), hl
  2166  0774  c3fa07            	jp	l_vdp_init_00107
  2167                          l_vdp_init_00105:
  2168  0777  af                	xor	a, a
  2169  0778  f5                	push	af
  2170  0779  33                	inc	sp
  2171  077a  af                	xor	a, a
  2172  077b  f5                	push	af
  2173  077c  33                	inc	sp
  2174  077d  cd9305            	call	_vdp_setRegister
  2175  0780  f1                	pop	af
  2176  0781  210a00            	ld	hl,__vdpReg1Val + 0
  2177  0784  36d2              	ld	(hl),0xd2
  2178  0786  3a0a00            	ld	a, (__vdpReg1Val+0)
  2179  0789  57                	ld	d,a
  2180  078a  1e01              	ld	e,0x01
  2181  078c  d5                	push	de
  2182  078d  cd9305            	call	_vdp_setRegister
  2183  0790  f1                	pop	af
  2184  0791  af                	xor	a, a
  2185  0792  57                	ld	d,a
  2186  0793  1e04              	ld	e,0x04
  2187  0795  d5                	push	de
  2188  0796  cd9305            	call	_vdp_setRegister
  2189  0799  f1                	pop	af
  2190  079a  210000            	ld	hl,0x0000
  2191  079d  22cb04            	ld	(__vdpPatternGeneratorTableAddr), hl
  2192  07a0  21cd04            	ld	hl,__vdpCursorMaxX + 0
  2193  07a3  3627              	ld	(hl),0x27
  2194  07a5  21ce04            	ld	hl,__vdpCursorMaxXFull + 0
  2195  07a8  3628              	ld	(hl),0x28
  2196  07aa  21c003            	ld	hl,0x03c0
  2197  07ad  22cf04            	ld	(__vdpTextBufferSize), hl
  2198  07b0  1848              	jr	l_vdp_init_00107
  2199                          l_vdp_init_00106:
  2200  07b2  c5                	push	bc
  2201  07b3  af                	xor	a, a
  2202  07b4  f5                	push	af
  2203  07b5  33                	inc	sp
  2204  07b6  af                	xor	a, a
  2205  07b7  f5                	push	af
  2206  07b8  33                	inc	sp
  2207  07b9  cd9305            	call	_vdp_setRegister
  2208  07bc  f1                	pop	af
  2209  07bd  c1                	pop	bc
  2210  07be  79                	ld	a, c
  2211  07bf  f6c8              	or	a,0xc8
  2212  07c1  ddb608            	or	a,(ix+8)
  2213  07c4  320a00            	ld	(__vdpReg1Val+0), a
  2214  07c7  3a0a00            	ld	a, (__vdpReg1Val+0)
  2215  07ca  57                	ld	d,a
  2216  07cb  1e01              	ld	e,0x01
  2217  07cd  d5                	push	de
  2218  07ce  cd9305            	call	_vdp_setRegister
  2219  07d1  f1                	pop	af
  2220  07d2  af                	xor	a, a
  2221  07d3  57                	ld	d,a
  2222  07d4  1e04              	ld	e,0x04
  2223  07d6  d5                	push	de
  2224  07d7  cd9305            	call	_vdp_setRegister
  2225  07da  f1                	pop	af
  2226  07db  210000            	ld	hl,0x0000
  2227  07de  22cb04            	ld	(__vdpPatternGeneratorTableAddr), hl
  2228  07e1  dd360500          	ld	(ix+5),0x00
  2229  07e5  fd21cd04          	ld	iy,__vdpCursorMaxX
  2230  07e9  fd36001f          	ld	(iy+0),0x1f
  2231  07ed  fd21ce04          	ld	iy,__vdpCursorMaxXFull
  2232  07f1  fd360020          	ld	(iy+0),0x20
  2233  07f5  2603              	ld	h,0x03
  2234  07f7  22cf04            	ld	(__vdpTextBufferSize), hl
  2235                          l_vdp_init_00107:
  2236  07fa  110206            	ld	de,0x0602
  2237  07fd  d5                	push	de
  2238  07fe  cd9305            	call	_vdp_setRegister
  2239  0801  f1                	pop	af
  2240  0802  210018            	ld	hl,0x1800
  2241  0805  22c704            	ld	(__vdpPatternNameTableAddr), hl
  2242  0808  3ad304            	ld	a, (__vdpSplitThirds+0)
  2243  080b  b7                	or	a, a
  2244  080c  280a              	jr	Z,l_vdp_init_00109
  2245  080e  1103ff            	ld	de,0xff03
  2246  0811  d5                	push	de
  2247  0812  cd9305            	call	_vdp_setRegister
  2248  0815  f1                	pop	af
  2249  0816  1808              	jr	l_vdp_init_00110
  2250                          l_vdp_init_00109:
  2251  0818  11039f            	ld	de,0x9f03
  2252  081b  d5                	push	de
  2253  081c  cd9305            	call	_vdp_setRegister
  2254  081f  f1                	pop	af
  2255                          l_vdp_init_00110:
  2256  0820  210020            	ld	hl,0x2000
  2257  0823  22c904            	ld	(__vdpColorTableAddr), hl
  2258  0826  110536            	ld	de,0x3605
  2259  0829  d5                	push	de
  2260  082a  cd9305            	call	_vdp_setRegister
  2261  082d  f1                	pop	af
  2262  082e  21001b            	ld	hl,0x1b00
  2263  0831  22c204            	ld	(__vdpSpriteAttributeTableAddr), hl
  2264  0834  110607            	ld	de,0x0706
  2265  0837  d5                	push	de
  2266  0838  cd9305            	call	_vdp_setRegister
  2267  083b  f1                	pop	af
  2268  083c  210038            	ld	hl,0x3800
  2269  083f  22c404            	ld	(__vdpSpriteGeneratorTableAddr), hl
  2270  0842  dd7e05            	ld	a,(ix+5)
  2271  0845  87                	add	a, a
  2272  0846  87                	add	a, a
  2273  0847  87                	add	a, a
  2274  0848  87                	add	a, a
  2275  0849  4f                	ld	c, a
  2276  084a  dd7e06            	ld	a,(ix+6)
  2277  084d  e60f              	and	a,0x0f
  2278  084f  b1                	or	a, c
  2279  0850  57                	ld	d,a
  2280  0851  1e07              	ld	e,0x07
  2281  0853  d5                	push	de
  2282  0854  cd9305            	call	_vdp_setRegister
  2283  0857  f1                	pop	af
  2284  0858  dde1              	pop	ix
  2285  085a  c33c09            	jp	_vdp_clearScreen
  2286                          	SECTION code_compiler
  2287                          ;	---------------------------------
  2288                          ; Function vdp_clearVRAM
  2289                          ; ---------------------------------
  2290                          _vdp_clearVRAM:
  2291  085d  210000            	ld	hl,0x0000
  2292  0860  e5                	push	hl
  2293  0861  cda805            	call	_vdp_setWriteAddress
  2294  0864  f1                	pop	af
  2295  0865  010000            	ld	bc,0x0000
  2296                          l_vdp_clearVRAM_00103:
  2297  0868  79                	ld	a, c
  2298  0869  d6ff              	sub	a,0xff
  2299  086b  78                	ld	a, b
  2300  086c  de3f              	sbc	a,0x3f
  2301  086e  d0                	ret	NC
  2302  086f  3e00              	ld	a,0x00
  2303  0871  d3a0              	out	(_IO_VDPDATA), a
  2304  0873  03                	inc	bc
  2305  0874  18f2              	jr	l_vdp_clearVRAM_00103
  2306                          	SECTION code_compiler
  2307                          ;	---------------------------------
  2308                          ; Function vdp_initMSXMode
  2309                          ; ---------------------------------
  2310                          _vdp_initMSXMode:
  2311  0876  3e02              	ld	a,0x02
  2312  0878  f5                	push	af
  2313  0879  33                	inc	sp
  2314  087a  af                	xor	a, a
  2315  087b  f5                	push	af
  2316  087c  33                	inc	sp
  2317  087d  cd9305            	call	_vdp_setRegister
  2318  0880  f1                	pop	af
  2319  0881  1101c0            	ld	de,0xc001
  2320  0884  d5                	push	de
  2321  0885  cd9305            	call	_vdp_setRegister
  2322  0888  f1                	pop	af
  2323  0889  110206            	ld	de,0x0602
  2324  088c  d5                	push	de
  2325  088d  cd9305            	call	_vdp_setRegister
  2326  0890  f1                	pop	af
  2327  0891  1103ff            	ld	de,0xff03
  2328  0894  d5                	push	de
  2329  0895  cd9305            	call	_vdp_setRegister
  2330  0898  f1                	pop	af
  2331  0899  110403            	ld	de,0x0304
  2332  089c  d5                	push	de
  2333  089d  cd9305            	call	_vdp_setRegister
  2334  08a0  f1                	pop	af
  2335  08a1  110536            	ld	de,0x3605
  2336  08a4  d5                	push	de
  2337  08a5  cd9305            	call	_vdp_setRegister
  2338  08a8  f1                	pop	af
  2339  08a9  110607            	ld	de,0x0706
  2340  08ac  d5                	push	de
  2341  08ad  cd9305            	call	_vdp_setRegister
  2342  08b0  f1                	pop	af
  2343  08b1  210200            	ld	hl,2+0
  2344  08b4  39                	add	hl, sp
  2345  08b5  7e                	ld	a, (hl)
  2346  08b6  e60f              	and	a,0x0f
  2347  08b8  57                	ld	d,a
  2348  08b9  1e07              	ld	e,0x07
  2349  08bb  d5                	push	de
  2350  08bc  cd9305            	call	_vdp_setRegister
  2351  08bf  f1                	pop	af
  2352  08c0  c9                	ret
  2353                          	SECTION code_compiler
  2354                          ;	---------------------------------
  2355                          ; Function vdp_initTextMode
  2356                          ; ---------------------------------
  2357                          _vdp_initTextMode:
  2358  08c1  af                	xor	a, a
  2359  08c2  f5                	push	af
  2360  08c3  33                	inc	sp
  2361  08c4  fd210500          	ld	iy,5
  2362  08c8  fd39              	add	iy, sp
  2363  08ca  fd7e00            	ld	a,(iy+0)
  2364  08cd  f5                	push	af
  2365  08ce  33                	inc	sp
  2366  08cf  af                	xor	a, a
  2367  08d0  f5                	push	af
  2368  08d1  33                	inc	sp
  2369  08d2  af                	xor	a, a
  2370  08d3  f5                	push	af
  2371  08d4  33                	inc	sp
  2372  08d5  fd2b              	dec	iy
  2373  08d7  fd7e00            	ld	a,(iy+0)
  2374  08da  f5                	push	af
  2375  08db  33                	inc	sp
  2376  08dc  fd2b              	dec	iy
  2377  08de  fd5600            	ld	d,(iy+0)
  2378  08e1  1e03              	ld	e,0x03
  2379  08e3  d5                	push	de
  2380  08e4  cdcf06            	call	_vdp_init
  2381  08e7  f1                	pop	af
  2382  08e8  f1                	pop	af
  2383  08e9  f1                	pop	af
  2384  08ea  33                	inc	sp
  2385  08eb  c9                	ret
  2386                          	SECTION code_compiler
  2387                          ;	---------------------------------
  2388                          ; Function vdp_initG2Mode
  2389                          ; ---------------------------------
  2390                          _vdp_initG2Mode:
  2391  08ec  fd210600          	ld	iy,6
  2392  08f0  fd39              	add	iy, sp
  2393  08f2  fd7e00            	ld	a,(iy+0)
  2394  08f5  f5                	push	af
  2395  08f6  33                	inc	sp
  2396  08f7  fd2b              	dec	iy
  2397  08f9  fd7e00            	ld	a,(iy+0)
  2398  08fc  f5                	push	af
  2399  08fd  33                	inc	sp
  2400  08fe  fd2b              	dec	iy
  2401  0900  fd7e00            	ld	a,(iy+0)
  2402  0903  f5                	push	af
  2403  0904  33                	inc	sp
  2404  0905  fd2b              	dec	iy
  2405  0907  fd7e00            	ld	a,(iy+0)
  2406  090a  f5                	push	af
  2407  090b  33                	inc	sp
  2408  090c  fd2b              	dec	iy
  2409  090e  fd7e00            	ld	a,(iy+0)
  2410  0911  f5                	push	af
  2411  0912  33                	inc	sp
  2412  0913  af                	xor	a, a
  2413  0914  57                	ld	d,a
  2414  0915  1e01              	ld	e,0x01
  2415  0917  d5                	push	de
  2416  0918  cdcf06            	call	_vdp_init
  2417  091b  f1                	pop	af
  2418  091c  f1                	pop	af
  2419  091d  f1                	pop	af
  2420  091e  33                	inc	sp
  2421  091f  c9                	ret
  2422                          	SECTION code_compiler
  2423                          ;	---------------------------------
  2424                          ; Function vdp_initMultiColorMode
  2425                          ; ---------------------------------
  2426                          _vdp_initMultiColorMode:
  2427  0920  af                	xor	a, a
  2428  0921  f5                	push	af
  2429  0922  33                	inc	sp
  2430  0923  af                	xor	a, a
  2431  0924  f5                	push	af
  2432  0925  33                	inc	sp
  2433  0926  af                	xor	a, a
  2434  0927  f5                	push	af
  2435  0928  33                	inc	sp
  2436  0929  af                	xor	a, a
  2437  092a  f5                	push	af
  2438  092b  33                	inc	sp
  2439  092c  af                	xor	a, a
  2440  092d  f5                	push	af
  2441  092e  33                	inc	sp
  2442  092f  af                	xor	a, a
  2443  0930  57                	ld	d,a
  2444  0931  1e02              	ld	e,0x02
  2445  0933  d5                	push	de
  2446  0934  cdcf06            	call	_vdp_init
  2447  0937  f1                	pop	af
  2448  0938  f1                	pop	af
  2449  0939  f1                	pop	af
  2450  093a  33                	inc	sp
  2451  093b  c9                	ret
  2452                          	SECTION code_compiler
  2453                          ;	---------------------------------
  2454                          ; Function vdp_clearScreen
  2455                          ; ---------------------------------
  2456                          _vdp_clearScreen:
  2457  093c  2ac704            	ld	hl, (__vdpPatternNameTableAddr)
  2458  093f  e5                	push	hl
  2459  0940  cda805            	call	_vdp_setWriteAddress
  2460  0943  f1                	pop	af
  2461  0944  3ace04            	ld	a, (__vdpCursorMaxXFull+0)
  2462  0947  4f                	ld	c, a
  2463  0948  0600              	ld	b,0x00
  2464  094a  69                	ld	l, c
  2465  094b  60                	ld	h, b
  2466  094c  29                	add	hl, hl
  2467  094d  09                	add	hl, bc
  2468  094e  29                	add	hl, hl
  2469  094f  29                	add	hl, hl
  2470  0950  29                	add	hl, hl
  2471  0951  110001            	ld	de,__vdp_textBuffer
  2472  0954  19                	add	hl, de
  2473  0955  eb                	ex	de, hl
  2474  0956  0e00              	ld	c,0x00
  2475  0958  3ad104            	ld	a, (__vdpMode+0)
  2476  095b  d603              	sub	a,0x03
  2477  095d  2002              	jr	NZ,l_vdp_clearScreen_00109
  2478  095f  0e20              	ld	c,0x20
  2479                          l_vdp_clearScreen_00109:
  2480  0961  210001            	ld	hl,__vdp_textBuffer
  2481                          l_vdp_clearScreen_00103:
  2482  0964  79                	ld	a, c
  2483  0965  d3a0              	out	(_IO_VDPDATA), a
  2484  0967  3620              	ld	(hl),0x20
  2485  0969  23                	inc	hl
  2486  096a  7d                	ld	a, l
  2487  096b  93                	sub	a, e
  2488  096c  20f6              	jr	NZ,l_vdp_clearScreen_00103
  2489  096e  7c                	ld	a, h
  2490  096f  92                	sub	a, d
  2491  0970  20f2              	jr	NZ,l_vdp_clearScreen_00103
  2492  0972  c9                	ret
  2493                          	SECTION code_compiler
  2494                          ;	---------------------------------
  2495                          ; Function vdp_fillScreen
  2496                          ; ---------------------------------
  2497                          _vdp_fillScreen:
  2498  0973  dde5              	push	ix
  2499  0975  dd210000          	ld	ix,0
  2500  0979  dd39              	add	ix,sp
  2501  097b  2ac704            	ld	hl, (__vdpPatternNameTableAddr)
  2502  097e  e5                	push	hl
  2503  097f  cda805            	call	_vdp_setWriteAddress
  2504  0982  f1                	pop	af
  2505  0983  010001            	ld	bc,__vdp_textBuffer+0
  2506  0986  3ace04            	ld	a, (__vdpCursorMaxXFull+0)
  2507  0989  5f                	ld	e, a
  2508  098a  1600              	ld	d,0x00
  2509  098c  6b                	ld	l, e
  2510  098d  62                	ld	h, d
  2511  098e  29                	add	hl, hl
  2512  098f  19                	add	hl, de
  2513  0990  29                	add	hl, hl
  2514  0991  29                	add	hl, hl
  2515  0992  29                	add	hl, hl
  2516  0993  09                	add	hl, bc
  2517  0994  eb                	ex	de, hl
  2518                          l_vdp_fillScreen_00101:
  2519  0995  dd7e04            	ld	a,(ix+4)
  2520  0998  d3a0              	out	(_IO_VDPDATA), a
  2521  099a  dd7e04            	ld	a,(ix+4)
  2522  099d  02                	ld	(bc), a
  2523  099e  03                	inc	bc
  2524  099f  69                	ld	l, c
  2525  09a0  60                	ld	h, b
  2526  09a1  bf                	cp	a, a
  2527  09a2  ed52              	sbc	hl, de
  2528  09a4  20ef              	jr	NZ,l_vdp_fillScreen_00101
  2529  09a6  dde1              	pop	ix
  2530  09a8  c9                	ret
  2531                          	SECTION code_compiler
  2532                          ;	---------------------------------
  2533                          ; Function vdp_clearRows
  2534                          ; ---------------------------------
  2535                          _vdp_clearRows:
  2536  09a9  dde5              	push	ix
  2537  09ab  dd210000          	ld	ix,0
  2538  09af  dd39              	add	ix,sp
  2539  09b1  21ce04            	ld	hl,__vdpCursorMaxXFull + 0
  2540  09b4  5e                	ld	e, (hl)
  2541  09b5  dd6604            	ld	h,(ix+4)
  2542  09b8  2e00              	ld	l,0x00
  2543  09ba  55                	ld	d, l
  2544  09bb  0608              	ld	b,0x08
  2545                          l_vdp_clearRows_00112:
  2546  09bd  29                	add	hl, hl
  2547  09be  3001              	jr	NC,l_vdp_clearRows_00113
  2548  09c0  19                	add	hl, de
  2549                          l_vdp_clearRows_00113:
  2550  09c1  10fa              	djnz	l_vdp_clearRows_00112
  2551  09c3  eb                	ex	de, hl
  2552  09c4  2ac704            	ld	hl, (__vdpPatternNameTableAddr)
  2553  09c7  19                	add	hl, de
  2554  09c8  e5                	push	hl
  2555  09c9  cda805            	call	_vdp_setWriteAddress
  2556  09cc  f1                	pop	af
  2557  09cd  fd21ce04          	ld	iy,__vdpCursorMaxXFull
  2558  09d1  fd5e00            	ld	e,(iy+0)
  2559  09d4  dd6604            	ld	h,(ix+4)
  2560  09d7  2e00              	ld	l,0x00
  2561  09d9  55                	ld	d, l
  2562  09da  0608              	ld	b,0x08
  2563                          l_vdp_clearRows_00114:
  2564  09dc  29                	add	hl, hl
  2565  09dd  3001              	jr	NC,l_vdp_clearRows_00115
  2566  09df  19                	add	hl, de
  2567                          l_vdp_clearRows_00115:
  2568  09e0  10fa              	djnz	l_vdp_clearRows_00114
  2569  09e2  110001            	ld	de,__vdp_textBuffer
  2570  09e5  19                	add	hl, de
  2571  09e6  e5                	push	hl
  2572  09e7  fd5e00            	ld	e,(iy+0)
  2573  09ea  dd6605            	ld	h,(ix+5)
  2574  09ed  2e00              	ld	l,0x00
  2575  09ef  55                	ld	d, l
  2576  09f0  0608              	ld	b,0x08
  2577                          l_vdp_clearRows_00116:
  2578  09f2  29                	add	hl, hl
  2579  09f3  3001              	jr	NC,l_vdp_clearRows_00117
  2580  09f5  19                	add	hl, de
  2581                          l_vdp_clearRows_00117:
  2582  09f6  10fa              	djnz	l_vdp_clearRows_00116
  2583  09f8  c1                	pop	bc
  2584  09f9  110001            	ld	de,__vdp_textBuffer
  2585  09fc  19                	add	hl, de
  2586  09fd  eb                	ex	de, hl
  2587                          l_vdp_clearRows_00101:
  2588  09fe  3e20              	ld	a,0x20
  2589  0a00  d3a0              	out	(_IO_VDPDATA), a
  2590  0a02  3e20              	ld	a,0x20
  2591  0a04  02                	ld	(bc), a
  2592  0a05  03                	inc	bc
  2593  0a06  6b                	ld	l, e
  2594  0a07  62                	ld	h, d
  2595  0a08  bf                	cp	a, a
  2596  0a09  ed42              	sbc	hl, bc
  2597  0a0b  20f1              	jr	NZ,l_vdp_clearRows_00101
  2598  0a0d  dde1              	pop	ix
  2599  0a0f  c9                	ret
  2600                          	SECTION code_compiler
  2601                          ;	---------------------------------
  2602                          ; Function vdp_loadASCIIFont
  2603                          ; ---------------------------------
  2604                          _vdp_loadASCIIFont:
  2605  0a10  dde5              	push	ix
  2606  0a12  dd210000          	ld	ix,0
  2607  0a16  dd39              	add	ix,sp
  2608  0a18  2acb04            	ld	hl, (__vdpPatternGeneratorTableAddr)
  2609  0a1b  110001            	ld	de,0x0100
  2610  0a1e  19                	add	hl, de
  2611  0a1f  e5                	push	hl
  2612  0a20  cda805            	call	_vdp_setWriteAddress
  2613  0a23  f1                	pop	af
  2614  0a24  dd4e04            	ld	c,(ix+4)
  2615  0a27  dd4605            	ld	b,(ix+5)
  2616  0a2a  210003            	ld	hl,0x0300
  2617  0a2d  09                	add	hl, bc
  2618  0a2e  eb                	ex	de, hl
  2619                          l_vdp_loadASCIIFont_00101:
  2620  0a2f  0a                	ld	a, (bc)
  2621  0a30  d3a0              	out	(_IO_VDPDATA), a
  2622  0a32  03                	inc	bc
  2623  0a33  69                	ld	l, c
  2624  0a34  60                	ld	h, b
  2625  0a35  bf                	cp	a, a
  2626  0a36  ed52              	sbc	hl, de
  2627  0a38  20f5              	jr	NZ,l_vdp_loadASCIIFont_00101
  2628  0a3a  dde1              	pop	ix
  2629  0a3c  c9                	ret
  2630                          	SECTION code_compiler
  2631                          ;	---------------------------------
  2632                          ; Function vdp_loadASCIIFontWithInverse
  2633                          ; ---------------------------------
  2634                          _vdp_loadASCIIFontWithInverse:
  2635  0a3d  dde5              	push	ix
  2636  0a3f  dd210000          	ld	ix,0
  2637  0a43  dd39              	add	ix,sp
  2638  0a45  f5                	push	af
  2639  0a46  2acb04            	ld	hl, (__vdpPatternGeneratorTableAddr)
  2640  0a49  110001            	ld	de,0x0100
  2641  0a4c  19                	add	hl, de
  2642  0a4d  e5                	push	hl
  2643  0a4e  cda805            	call	_vdp_setWriteAddress
  2644  0a51  f1                	pop	af
  2645  0a52  dd4e04            	ld	c,(ix+4)
  2646  0a55  dd4605            	ld	b,(ix+5)
  2647  0a58  210003            	ld	hl,0x0300
  2648  0a5b  09                	add	hl, bc
  2649  0a5c  e3                	ex	(sp), hl
  2650  0a5d  59                	ld	e, c
  2651  0a5e  50                	ld	d, b
  2652                          l_vdp_loadASCIIFontWithInverse_00101:
  2653  0a5f  1a                	ld	a, (de)
  2654  0a60  d3a0              	out	(_IO_VDPDATA), a
  2655  0a62  13                	inc	de
  2656  0a63  e1                	pop	hl
  2657  0a64  e5                	push	hl
  2658  0a65  bf                	cp	a, a
  2659  0a66  ed52              	sbc	hl, de
  2660  0a68  20f5              	jr	NZ,l_vdp_loadASCIIFontWithInverse_00101
  2661                          l_vdp_loadASCIIFontWithInverse_00104:
  2662  0a6a  0a                	ld	a, (bc)
  2663  0a6b  2f                	cpl
  2664  0a6c  d3a0              	out	(_IO_VDPDATA), a
  2665  0a6e  03                	inc	bc
  2666  0a6f  e1                	pop	hl
  2667  0a70  e5                	push	hl
  2668  0a71  bf                	cp	a, a
  2669  0a72  ed42              	sbc	hl, bc
  2670  0a74  20f4              	jr	NZ,l_vdp_loadASCIIFontWithInverse_00104
  2671  0a76  ddf9              	ld	sp, ix
  2672  0a78  dde1              	pop	ix
  2673  0a7a  c9                	ret
  2674                          	SECTION code_compiler
  2675                          ;	---------------------------------
  2676                          ; Function vdp_putPattern
  2677                          ; ---------------------------------
  2678                          _vdp_putPattern:
  2679  0a7b  dde5              	push	ix
  2680  0a7d  dd210000          	ld	ix,0
  2681  0a81  dd39              	add	ix,sp
  2682  0a83  21ce04            	ld	hl,__vdpCursorMaxXFull + 0
  2683  0a86  5e                	ld	e, (hl)
  2684  0a87  dd6605            	ld	h,(ix+5)
  2685  0a8a  2e00              	ld	l,0x00
  2686  0a8c  55                	ld	d, l
  2687  0a8d  0608              	ld	b,0x08
  2688                          l_vdp_putPattern_00103:
  2689  0a8f  29                	add	hl, hl
  2690  0a90  3001              	jr	NC,l_vdp_putPattern_00104
  2691  0a92  19                	add	hl, de
  2692                          l_vdp_putPattern_00104:
  2693  0a93  10fa              	djnz	l_vdp_putPattern_00103
  2694  0a95  dd4e04            	ld	c,(ix+4)
  2695  0a98  0600              	ld	b,0x00
  2696  0a9a  09                	add	hl, bc
  2697  0a9b  eb                	ex	de, hl
  2698  0a9c  2ac704            	ld	hl, (__vdpPatternNameTableAddr)
  2699  0a9f  19                	add	hl, de
  2700  0aa0  d5                	push	de
  2701  0aa1  e5                	push	hl
  2702  0aa2  cda805            	call	_vdp_setWriteAddress
  2703  0aa5  f1                	pop	af
  2704  0aa6  d1                	pop	de
  2705  0aa7  210001            	ld	hl,__vdp_textBuffer+0
  2706  0aaa  19                	add	hl, de
  2707  0aab  dd7e06            	ld	a,(ix+6)
  2708  0aae  77                	ld	(hl), a
  2709  0aaf  dd7e06            	ld	a,(ix+6)
  2710  0ab2  d3a0              	out	(_IO_VDPDATA), a
  2711  0ab4  dde1              	pop	ix
  2712  0ab6  c9                	ret
  2713                          	SECTION code_compiler
  2714                          ;	---------------------------------
  2715                          ; Function vdp_loadPatternTable
  2716                          ; ---------------------------------
  2717                          _vdp_loadPatternTable:
  2718  0ab7  dde5              	push	ix
  2719  0ab9  dd210000          	ld	ix,0
  2720  0abd  dd39              	add	ix,sp
  2721  0abf  f5                	push	af
  2722  0ac0  dd5e04            	ld	e,(ix+4)
  2723  0ac3  dd5605            	ld	d,(ix+5)
  2724  0ac6  dd6e06            	ld	l,(ix+6)
  2725  0ac9  dd6607            	ld	h,(ix+7)
  2726  0acc  19                	add	hl, de
  2727  0acd  e3                	ex	(sp), hl
  2728  0ace  d5                	push	de
  2729  0acf  2acb04            	ld	hl, (__vdpPatternGeneratorTableAddr)
  2730  0ad2  e5                	push	hl
  2731  0ad3  cda805            	call	_vdp_setWriteAddress
  2732  0ad6  f1                	pop	af
  2733  0ad7  d1                	pop	de
  2734  0ad8  4b                	ld	c, e
  2735  0ad9  42                	ld	b, d
  2736                          l_vdp_loadPatternTable_00101:
  2737  0ada  0a                	ld	a, (bc)
  2738  0adb  d3a0              	out	(_IO_VDPDATA), a
  2739  0add  03                	inc	bc
  2740  0ade  e1                	pop	hl
  2741  0adf  e5                	push	hl
  2742  0ae0  bf                	cp	a, a
  2743  0ae1  ed42              	sbc	hl, bc
  2744  0ae3  20f5              	jr	NZ,l_vdp_loadPatternTable_00101
  2745  0ae5  3ad304            	ld	a, (__vdpSplitThirds+0)
  2746  0ae8  b7                	or	a, a
  2747  0ae9  2834              	jr	Z,l_vdp_loadPatternTable_00112
  2748  0aeb  2acb04            	ld	hl, (__vdpPatternGeneratorTableAddr)
  2749  0aee  010008            	ld	bc,0x0800
  2750  0af1  09                	add	hl, bc
  2751  0af2  d5                	push	de
  2752  0af3  e5                	push	hl
  2753  0af4  cda805            	call	_vdp_setWriteAddress
  2754  0af7  f1                	pop	af
  2755  0af8  d1                	pop	de
  2756  0af9  4b                	ld	c, e
  2757  0afa  42                	ld	b, d
  2758                          l_vdp_loadPatternTable_00104:
  2759  0afb  0a                	ld	a, (bc)
  2760  0afc  d3a0              	out	(_IO_VDPDATA), a
  2761  0afe  03                	inc	bc
  2762  0aff  e1                	pop	hl
  2763  0b00  e5                	push	hl
  2764  0b01  bf                	cp	a, a
  2765  0b02  ed42              	sbc	hl, bc
  2766  0b04  20f5              	jr	NZ,l_vdp_loadPatternTable_00104
  2767  0b06  2acb04            	ld	hl, (__vdpPatternGeneratorTableAddr)
  2768  0b09  010010            	ld	bc,0x1000
  2769  0b0c  09                	add	hl, bc
  2770  0b0d  d5                	push	de
  2771  0b0e  e5                	push	hl
  2772  0b0f  cda805            	call	_vdp_setWriteAddress
  2773  0b12  f1                	pop	af
  2774  0b13  d1                	pop	de
  2775                          l_vdp_loadPatternTable_00107:
  2776  0b14  1a                	ld	a, (de)
  2777  0b15  d3a0              	out	(_IO_VDPDATA), a
  2778  0b17  13                	inc	de
  2779  0b18  e1                	pop	hl
  2780  0b19  e5                	push	hl
  2781  0b1a  bf                	cp	a, a
  2782  0b1b  ed52              	sbc	hl, de
  2783  0b1d  20f5              	jr	NZ,l_vdp_loadPatternTable_00107
  2784                          l_vdp_loadPatternTable_00112:
  2785  0b1f  ddf9              	ld	sp, ix
  2786  0b21  dde1              	pop	ix
  2787  0b23  c9                	ret
  2788                          	SECTION code_compiler
  2789                          ;	---------------------------------
  2790                          ; Function vdp_loadColorTable
  2791                          ; ---------------------------------
  2792                          _vdp_loadColorTable:
  2793  0b24  dde5              	push	ix
  2794  0b26  dd210000          	ld	ix,0
  2795  0b2a  dd39              	add	ix,sp
  2796  0b2c  f5                	push	af
  2797  0b2d  dd5e04            	ld	e,(ix+4)
  2798  0b30  dd5605            	ld	d,(ix+5)
  2799  0b33  dd6e06            	ld	l,(ix+6)
  2800  0b36  dd6607            	ld	h,(ix+7)
  2801  0b39  19                	add	hl, de
  2802  0b3a  e3                	ex	(sp), hl
  2803  0b3b  d5                	push	de
  2804  0b3c  2ac904            	ld	hl, (__vdpColorTableAddr)
  2805  0b3f  e5                	push	hl
  2806  0b40  cda805            	call	_vdp_setWriteAddress
  2807  0b43  f1                	pop	af
  2808  0b44  d1                	pop	de
  2809  0b45  4b                	ld	c, e
  2810  0b46  42                	ld	b, d
  2811                          l_vdp_loadColorTable_00101:
  2812  0b47  0a                	ld	a, (bc)
  2813  0b48  d3a0              	out	(_IO_VDPDATA), a
  2814  0b4a  03                	inc	bc
  2815  0b4b  e1                	pop	hl
  2816  0b4c  e5                	push	hl
  2817  0b4d  bf                	cp	a, a
  2818  0b4e  ed42              	sbc	hl, bc
  2819  0b50  20f5              	jr	NZ,l_vdp_loadColorTable_00101
  2820  0b52  3ad304            	ld	a, (__vdpSplitThirds+0)
  2821  0b55  b7                	or	a, a
  2822  0b56  2834              	jr	Z,l_vdp_loadColorTable_00112
  2823  0b58  2ac904            	ld	hl, (__vdpColorTableAddr)
  2824  0b5b  010008            	ld	bc,0x0800
  2825  0b5e  09                	add	hl, bc
  2826  0b5f  d5                	push	de
  2827  0b60  e5                	push	hl
  2828  0b61  cda805            	call	_vdp_setWriteAddress
  2829  0b64  f1                	pop	af
  2830  0b65  d1                	pop	de
  2831  0b66  4b                	ld	c, e
  2832  0b67  42                	ld	b, d
  2833                          l_vdp_loadColorTable_00104:
  2834  0b68  0a                	ld	a, (bc)
  2835  0b69  d3a0              	out	(_IO_VDPDATA), a
  2836  0b6b  03                	inc	bc
  2837  0b6c  e1                	pop	hl
  2838  0b6d  e5                	push	hl
  2839  0b6e  bf                	cp	a, a
  2840  0b6f  ed42              	sbc	hl, bc
  2841  0b71  20f5              	jr	NZ,l_vdp_loadColorTable_00104
  2842  0b73  2ac904            	ld	hl, (__vdpColorTableAddr)
  2843  0b76  010010            	ld	bc,0x1000
  2844  0b79  09                	add	hl, bc
  2845  0b7a  d5                	push	de
  2846  0b7b  e5                	push	hl
  2847  0b7c  cda805            	call	_vdp_setWriteAddress
  2848  0b7f  f1                	pop	af
  2849  0b80  d1                	pop	de
  2850                          l_vdp_loadColorTable_00107:
  2851  0b81  1a                	ld	a, (de)
  2852  0b82  d3a0              	out	(_IO_VDPDATA), a
  2853  0b84  13                	inc	de
  2854  0b85  e1                	pop	hl
  2855  0b86  e5                	push	hl
  2856  0b87  bf                	cp	a, a
  2857  0b88  ed52              	sbc	hl, de
  2858  0b8a  20f5              	jr	NZ,l_vdp_loadColorTable_00107
  2859                          l_vdp_loadColorTable_00112:
  2860  0b8c  ddf9              	ld	sp, ix
  2861  0b8e  dde1              	pop	ix
  2862  0b90  c9                	ret
  2863                          	SECTION code_compiler
  2864                          ;	---------------------------------
  2865                          ; Function vdp_colorizePattern
  2866                          ; ---------------------------------
  2867                          _vdp_colorizePattern:
  2868  0b91  dde5              	push	ix
  2869  0b93  dd210000          	ld	ix,0
  2870  0b97  dd39              	add	ix,sp
  2871  0b99  3b                	dec	sp
  2872  0b9a  dd6e04            	ld	l,(ix+4)
  2873  0b9d  2600              	ld	h,0x00
  2874  0b9f  29                	add	hl, hl
  2875  0ba0  29                	add	hl, hl
  2876  0ba1  29                	add	hl, hl
  2877  0ba2  4d                	ld	c, l
  2878  0ba3  44                	ld	b, h
  2879  0ba4  dd7e05            	ld	a,(ix+5)
  2880  0ba7  87                	add	a, a
  2881  0ba8  87                	add	a, a
  2882  0ba9  87                	add	a, a
  2883  0baa  87                	add	a, a
  2884  0bab  dd5e06            	ld	e,(ix+6)
  2885  0bae  83                	add	a, e
  2886  0baf  dd77ff            	ld	(ix-1),a
  2887  0bb2  2ac904            	ld	hl, (__vdpColorTableAddr)
  2888  0bb5  09                	add	hl, bc
  2889  0bb6  c5                	push	bc
  2890  0bb7  e5                	push	hl
  2891  0bb8  cda805            	call	_vdp_setWriteAddress
  2892  0bbb  f1                	pop	af
  2893  0bbc  c1                	pop	bc
  2894  0bbd  1e00              	ld	e,0x00
  2895                          l_vdp_colorizePattern_00107:
  2896  0bbf  7b                	ld	a, e
  2897  0bc0  d608              	sub	a,0x08
  2898  0bc2  3008              	jr	NC,l_vdp_colorizePattern_00101
  2899  0bc4  dd7eff            	ld	a,(ix-1)
  2900  0bc7  d3a0              	out	(_IO_VDPDATA), a
  2901  0bc9  1c                	inc	e
  2902  0bca  18f3              	jr	l_vdp_colorizePattern_00107
  2903                          l_vdp_colorizePattern_00101:
  2904  0bcc  3ad304            	ld	a, (__vdpSplitThirds+0)
  2905  0bcf  b7                	or	a, a
  2906  0bd0  283a              	jr	Z,l_vdp_colorizePattern_00115
  2907  0bd2  2ac904            	ld	hl, (__vdpColorTableAddr)
  2908  0bd5  110008            	ld	de,0x0800
  2909  0bd8  19                	add	hl, de
  2910  0bd9  09                	add	hl, bc
  2911  0bda  c5                	push	bc
  2912  0bdb  e5                	push	hl
  2913  0bdc  cda805            	call	_vdp_setWriteAddress
  2914  0bdf  f1                	pop	af
  2915  0be0  c1                	pop	bc
  2916  0be1  1e00              	ld	e,0x00
  2917                          l_vdp_colorizePattern_00110:
  2918  0be3  7b                	ld	a, e
  2919  0be4  d608              	sub	a,0x08
  2920  0be6  3008              	jr	NC,l_vdp_colorizePattern_00102
  2921  0be8  dd7eff            	ld	a,(ix-1)
  2922  0beb  d3a0              	out	(_IO_VDPDATA), a
  2923  0bed  1c                	inc	e
  2924  0bee  18f3              	jr	l_vdp_colorizePattern_00110
  2925                          l_vdp_colorizePattern_00102:
  2926  0bf0  2ac904            	ld	hl, (__vdpColorTableAddr)
  2927  0bf3  110010            	ld	de,0x1000
  2928  0bf6  19                	add	hl, de
  2929  0bf7  09                	add	hl, bc
  2930  0bf8  e5                	push	hl
  2931  0bf9  cda805            	call	_vdp_setWriteAddress
  2932  0bfc  f1                	pop	af
  2933  0bfd  0e00              	ld	c,0x00
  2934                          l_vdp_colorizePattern_00113:
  2935  0bff  79                	ld	a, c
  2936  0c00  d608              	sub	a,0x08
  2937  0c02  3008              	jr	NC,l_vdp_colorizePattern_00115
  2938  0c04  dd7eff            	ld	a,(ix-1)
  2939  0c07  d3a0              	out	(_IO_VDPDATA), a
  2940  0c09  0c                	inc	c
  2941  0c0a  18f3              	jr	l_vdp_colorizePattern_00113
  2942                          l_vdp_colorizePattern_00115:
  2943  0c0c  33                	inc	sp
  2944  0c0d  dde1              	pop	ix
  2945  0c0f  c9                	ret
  2946                          	SECTION code_compiler
  2947                          ;	---------------------------------
  2948                          ; Function vdp_plotHires
  2949                          ; ---------------------------------
  2950                          _vdp_plotHires:
  2951  0c10  dde5              	push	ix
  2952  0c12  dd210000          	ld	ix,0
  2953  0c16  dd39              	add	ix,sp
  2954  0c18  f5                	push	af
  2955  0c19  3b                	dec	sp
  2956  0c1a  dd7e04            	ld	a,(ix+4)
  2957  0c1d  dd77fd            	ld	(ix-3),a
  2958  0c20  dd36fe00          	ld	(ix-2),0x00
  2959  0c24  e1                	pop	hl
  2960  0c25  e5                	push	hl
  2961  0c26  ddcbfe7e          	bit	7,(ix-2)
  2962  0c2a  2806              	jr	Z,l_vdp_plotHires_00106
  2963  0c2c  e1                	pop	hl
  2964  0c2d  e5                	push	hl
  2965  0c2e  110700            	ld	de,0x0007
  2966  0c31  19                	add	hl, de
  2967                          l_vdp_plotHires_00106:
  2968  0c32  cb2c              	sra	h
  2969  0c34  cb1d              	rr	l
  2970  0c36  cb2c              	sra	h
  2971  0c38  cb1d              	rr	l
  2972  0c3a  cb2c              	sra	h
  2973  0c3c  cb1d              	rr	l
  2974  0c3e  29                	add	hl, hl
  2975  0c3f  29                	add	hl, hl
  2976  0c40  29                	add	hl, hl
  2977  0c41  dd4e05            	ld	c,(ix+5)
  2978  0c44  0600              	ld	b,0x00
  2979  0c46  79                	ld	a, c
  2980  0c47  e607              	and	a,0x07
  2981  0c49  5f                	ld	e, a
  2982  0c4a  1600              	ld	d,0x00
  2983  0c4c  19                	add	hl, de
  2984  0c4d  eb                	ex	de, hl
  2985  0c4e  69                	ld	l, c
  2986  0c4f  60                	ld	h, b
  2987  0c50  cb78              	bit	7, b
  2988  0c52  2804              	jr	Z,l_vdp_plotHires_00107
  2989  0c54  210700            	ld	hl,0x0007
  2990  0c57  09                	add	hl, bc
  2991                          l_vdp_plotHires_00107:
  2992  0c58  cb2c              	sra	h
  2993  0c5a  cb1d              	rr	l
  2994  0c5c  cb2c              	sra	h
  2995  0c5e  cb1d              	rr	l
  2996  0c60  cb2c              	sra	h
  2997  0c62  cb1d              	rr	l
  2998  0c64  65                	ld	h, l
  2999  0c65  2e00              	ld	l,0x00
  3000  0c67  19                	add	hl, de
  3001  0c68  eb                	ex	de, hl
  3002  0c69  2acb04            	ld	hl, (__vdpPatternGeneratorTableAddr)
  3003  0c6c  19                	add	hl, de
  3004  0c6d  d5                	push	de
  3005  0c6e  e5                	push	hl
  3006  0c6f  cdbd05            	call	_vdp_setReadAddress
  3007  0c72  f1                	pop	af
  3008  0c73  d1                	pop	de
  3009  0c74  dba0              	in	a, (_IO_VDPDATA)
  3010  0c76  dd77ff            	ld	(ix-1),a
  3011  0c79  2ac904            	ld	hl, (__vdpColorTableAddr)
  3012  0c7c  19                	add	hl, de
  3013  0c7d  d5                	push	de
  3014  0c7e  e5                	push	hl
  3015  0c7f  cdbd05            	call	_vdp_setReadAddress
  3016  0c82  f1                	pop	af
  3017  0c83  d1                	pop	de
  3018  0c84  dba0              	in	a, (_IO_VDPDATA)
  3019  0c86  6f                	ld	l, a
  3020  0c87  dd7efd            	ld	a,(ix-3)
  3021  0c8a  e607              	and	a,0x07
  3022  0c8c  f5                	push	af
  3023  0c8d  018000            	ld	bc,0x0080
  3024  0c90  f1                	pop	af
  3025  0c91  3c                	inc	a
  3026  0c92  1804              	jr	l_vdp_plotHires_00124
  3027                          l_vdp_plotHires_00123:
  3028  0c94  cb28              	sra	b
  3029  0c96  cb19              	rr	c
  3030                          l_vdp_plotHires_00124:
  3031  0c98  3d                	dec	a
  3032  0c99  20f9              	jr	NZ, l_vdp_plotHires_00123
  3033  0c9b  dd7e06            	ld	a,(ix+6)
  3034  0c9e  b7                	or	a, a
  3035  0c9f  2814              	jr	Z,l_vdp_plotHires_00102
  3036  0ca1  79                	ld	a, c
  3037  0ca2  ddb6ff            	or	a,(ix-1)
  3038  0ca5  4f                	ld	c, a
  3039  0ca6  7d                	ld	a, l
  3040  0ca7  e60f              	and	a,0x0f
  3041  0ca9  6f                	ld	l, a
  3042  0caa  dd7e06            	ld	a,(ix+6)
  3043  0cad  87                	add	a, a
  3044  0cae  87                	add	a, a
  3045  0caf  87                	add	a, a
  3046  0cb0  87                	add	a, a
  3047  0cb1  b5                	or	a, l
  3048  0cb2  47                	ld	b, a
  3049  0cb3  1811              	jr	l_vdp_plotHires_00103
  3050                          l_vdp_plotHires_00102:
  3051  0cb5  79                	ld	a, c
  3052  0cb6  2f                	cpl
  3053  0cb7  dda6ff            	and	a,(ix-1)
  3054  0cba  4f                	ld	c, a
  3055  0cbb  7d                	ld	a, l
  3056  0cbc  e6f0              	and	a,0xf0
  3057  0cbe  6f                	ld	l, a
  3058  0cbf  dd7e07            	ld	a,(ix+7)
  3059  0cc2  e60f              	and	a,0x0f
  3060  0cc4  b5                	or	a, l
  3061  0cc5  47                	ld	b, a
  3062                          l_vdp_plotHires_00103:
  3063  0cc6  fd2acb04          	ld	iy, (__vdpPatternGeneratorTableAddr)
  3064  0cca  fd19              	add	iy, de
  3065  0ccc  c5                	push	bc
  3066  0ccd  d5                	push	de
  3067  0cce  fde5              	push	iy
  3068  0cd0  cda805            	call	_vdp_setWriteAddress
  3069  0cd3  f1                	pop	af
  3070  0cd4  d1                	pop	de
  3071  0cd5  c1                	pop	bc
  3072  0cd6  79                	ld	a, c
  3073  0cd7  d3a0              	out	(_IO_VDPDATA), a
  3074  0cd9  fd2ac904          	ld	iy, (__vdpColorTableAddr)
  3075  0cdd  fd19              	add	iy, de
  3076  0cdf  c5                	push	bc
  3077  0ce0  fde5              	push	iy
  3078  0ce2  cda805            	call	_vdp_setWriteAddress
  3079  0ce5  f1                	pop	af
  3080  0ce6  c1                	pop	bc
  3081  0ce7  78                	ld	a, b
  3082  0ce8  d3a0              	out	(_IO_VDPDATA), a
  3083  0cea  ddf9              	ld	sp, ix
  3084  0cec  dde1              	pop	ix
  3085  0cee  c9                	ret
  3086                          	SECTION code_compiler
  3087                          ;	---------------------------------
  3088                          ; Function vdp_plotColor
  3089                          ; ---------------------------------
  3090                          _vdp_plotColor:
  3091  0cef  dde5              	push	ix
  3092  0cf1  dd210000          	ld	ix,0
  3093  0cf5  dd39              	add	ix,sp
  3094  0cf7  21f4ff            	ld	hl, -12
  3095  0cfa  39                	add	hl, sp
  3096  0cfb  f9                	ld	sp, hl
  3097  0cfc  dd7e04            	ld	a,(ix+4)
  3098  0cff  dd77f4            	ld	(ix-12),a
  3099  0d02  dd36f500          	ld	(ix-11),0x00
  3100  0d06  dd7e05            	ld	a,(ix+5)
  3101  0d09  dd77f6            	ld	(ix-10),a
  3102  0d0c  dd36f700          	ld	(ix-9),0x00
  3103  0d10  dd7ef5            	ld	a,(ix-11)
  3104  0d13  07                	rlca
  3105  0d14  e601              	and	a,0x01
  3106  0d16  dd77f8            	ld	(ix-8),a
  3107  0d19  dd7ef4            	ld	a,(ix-12)
  3108  0d1c  c601              	add	a,0x01
  3109  0d1e  dd77f9            	ld	(ix-7),a
  3110  0d21  dd7ef5            	ld	a,(ix-11)
  3111  0d24  ce00              	adc	a,0x00
  3112  0d26  dd77fa            	ld	(ix-6),a
  3113  0d29  dd7ef6            	ld	a,(ix-10)
  3114  0d2c  e607              	and	a,0x07
  3115  0d2e  dd77fb            	ld	(ix-5),a
  3116  0d31  dd36fc00          	ld	(ix-4),0x00
  3117  0d35  dd7ef7            	ld	a,(ix-9)
  3118  0d38  07                	rlca
  3119  0d39  e601              	and	a,0x01
  3120  0d3b  dd77fd            	ld	(ix-3),a
  3121  0d3e  dd7ef6            	ld	a,(ix-10)
  3122  0d41  c607              	add	a,0x07
  3123  0d43  dd77fe            	ld	(ix-2),a
  3124  0d46  dd7ef7            	ld	a,(ix-9)
  3125  0d49  ce00              	adc	a,0x00
  3126  0d4b  dd77ff            	ld	(ix-1),a
  3127  0d4e  3ad104            	ld	a, (__vdpMode+0)
  3128  0d51  d602              	sub	a,0x02
  3129  0d53  2078              	jr	NZ,l_vdp_plotColor_00110
  3130  0d55  e1                	pop	hl
  3131  0d56  e5                	push	hl
  3132  0d57  dd7ef8            	ld	a,(ix-8)
  3133  0d5a  b7                	or	a, a
  3134  0d5b  2806              	jr	Z,l_vdp_plotColor_00114
  3135  0d5d  dd6ef9            	ld	l,(ix-7)
  3136  0d60  dd66fa            	ld	h,(ix-6)
  3137                          l_vdp_plotColor_00114:
  3138  0d63  cb2c              	sra	h
  3139  0d65  cb1d              	rr	l
  3140  0d67  29                	add	hl, hl
  3141  0d68  29                	add	hl, hl
  3142  0d69  29                	add	hl, hl
  3143  0d6a  eb                	ex	de, hl
  3144  0d6b  2acb04            	ld	hl, (__vdpPatternGeneratorTableAddr)
  3145  0d6e  19                	add	hl, de
  3146  0d6f  dd4efb            	ld	c,(ix-5)
  3147  0d72  dd46fc            	ld	b,(ix-4)
  3148  0d75  09                	add	hl, bc
  3149  0d76  d1                	pop	de
  3150  0d77  c1                	pop	bc
  3151  0d78  c5                	push	bc
  3152  0d79  d5                	push	de
  3153  0d7a  dd7efd            	ld	a,(ix-3)
  3154  0d7d  b7                	or	a, a
  3155  0d7e  2806              	jr	Z,l_vdp_plotColor_00115
  3156  0d80  dd4efe            	ld	c,(ix-2)
  3157  0d83  dd46ff            	ld	b,(ix-1)
  3158                          l_vdp_plotColor_00115:
  3159  0d86  cb28              	sra	b
  3160  0d88  cb19              	rr	c
  3161  0d8a  cb28              	sra	b
  3162  0d8c  cb19              	rr	c
  3163  0d8e  cb28              	sra	b
  3164  0d90  cb19              	rr	c
  3165  0d92  41                	ld	b, c
  3166  0d93  0e00              	ld	c,0x00
  3167  0d95  09                	add	hl, bc
  3168  0d96  e5                	push	hl
  3169  0d97  e5                	push	hl
  3170  0d98  cdbd05            	call	_vdp_setReadAddress
  3171  0d9b  f1                	pop	af
  3172  0d9c  e1                	pop	hl
  3173  0d9d  dba0              	in	a, (_IO_VDPDATA)
  3174  0d9f  47                	ld	b, a
  3175  0da0  c5                	push	bc
  3176  0da1  e5                	push	hl
  3177  0da2  cda805            	call	_vdp_setWriteAddress
  3178  0da5  f1                	pop	af
  3179  0da6  c1                	pop	bc
  3180  0da7  dd4e04            	ld	c,(ix+4)
  3181  0daa  78                	ld	a, b
  3182  0dab  cb41              	bit	0, c
  3183  0dad  280e              	jr	Z,l_vdp_plotColor_00102
  3184  0daf  e6f0              	and	a,0xf0
  3185  0db1  4f                	ld	c, a
  3186  0db2  dd7e06            	ld	a,(ix+6)
  3187  0db5  e60f              	and	a,0x0f
  3188  0db7  81                	add	a, c
  3189  0db8  d3a0              	out	(_IO_VDPDATA), a
  3190  0dba  c3980e            	jp	l_vdp_plotColor_00112
  3191                          l_vdp_plotColor_00102:
  3192  0dbd  e60f              	and	a,0x0f
  3193  0dbf  4f                	ld	c, a
  3194  0dc0  dd7e06            	ld	a,(ix+6)
  3195  0dc3  87                	add	a, a
  3196  0dc4  87                	add	a, a
  3197  0dc5  87                	add	a, a
  3198  0dc6  87                	add	a, a
  3199  0dc7  81                	add	a, c
  3200  0dc8  d3a0              	out	(_IO_VDPDATA), a
  3201  0dca  c3980e            	jp	l_vdp_plotColor_00112
  3202                          l_vdp_plotColor_00110:
  3203  0dcd  3ad104            	ld	a, (__vdpMode+0)
  3204  0dd0  3d                	dec	a
  3205  0dd1  c2980e            	jp	NZ,l_vdp_plotColor_00112
  3206  0dd4  e1                	pop	hl
  3207  0dd5  e5                	push	hl
  3208  0dd6  dd7ef8            	ld	a,(ix-8)
  3209  0dd9  b7                	or	a, a
  3210  0dda  2806              	jr	Z,l_vdp_plotColor_00116
  3211  0ddc  dd6ef9            	ld	l,(ix-7)
  3212  0ddf  dd66fa            	ld	h,(ix-6)
  3213                          l_vdp_plotColor_00116:
  3214  0de2  cb2c              	sra	h
  3215  0de4  cb1d              	rr	l
  3216  0de6  29                	add	hl, hl
  3217  0de7  29                	add	hl, hl
  3218  0de8  29                	add	hl, hl
  3219  0de9  dd5efb            	ld	e,(ix-5)
  3220  0dec  dd56fc            	ld	d,(ix-4)
  3221  0def  19                	add	hl, de
  3222  0df0  dd5ef6            	ld	e,(ix-10)
  3223  0df3  dd56f7            	ld	d,(ix-9)
  3224  0df6  dd7efd            	ld	a,(ix-3)
  3225  0df9  b7                	or	a, a
  3226  0dfa  2806              	jr	Z,l_vdp_plotColor_00117
  3227  0dfc  dd5efe            	ld	e,(ix-2)
  3228  0dff  dd56ff            	ld	d,(ix-1)
  3229                          l_vdp_plotColor_00117:
  3230  0e02  cb2a              	sra	d
  3231  0e04  cb1b              	rr	e
  3232  0e06  cb2a              	sra	d
  3233  0e08  cb1b              	rr	e
  3234  0e0a  cb2a              	sra	d
  3235  0e0c  cb1b              	rr	e
  3236  0e0e  43                	ld	b, e
  3237  0e0f  0e00              	ld	c,0x00
  3238  0e11  09                	add	hl, bc
  3239  0e12  dd75fc            	ld	(ix-4),l
  3240  0e15  dd74fd            	ld	(ix-3),h
  3241  0e18  fd2ac904          	ld	iy, (__vdpColorTableAddr)
  3242  0e1c  dd5efc            	ld	e,(ix-4)
  3243  0e1f  dd56fd            	ld	d,(ix-3)
  3244  0e22  fd19              	add	iy, de
  3245  0e24  fde5              	push	iy
  3246  0e26  cdbd05            	call	_vdp_setReadAddress
  3247  0e29  f1                	pop	af
  3248  0e2a  dba0              	in	a, (_IO_VDPDATA)
  3249  0e2c  dd77ff            	ld	(ix-1),a
  3250  0e2f  dd7e04            	ld	a,(ix+4)
  3251  0e32  0f                	rrca
  3252  0e33  381d              	jr	C,l_vdp_plotColor_00105
  3253  0e35  dd7eff            	ld	a,(ix-1)
  3254  0e38  e60f              	and	a,0x0f
  3255  0e3a  dd77fb            	ld	(ix-5),a
  3256  0e3d  dd7e06            	ld	a,(ix+6)
  3257  0e40  dd77ff            	ld	(ix-1),a
  3258  0e43  87                	add	a, a
  3259  0e44  87                	add	a, a
  3260  0e45  87                	add	a, a
  3261  0e46  87                	add	a, a
  3262  0e47  dd77ff            	ld	(ix-1),a
  3263  0e4a  ddb6fb            	or	a,(ix-5)
  3264  0e4d  dd77ff            	ld	(ix-1),a
  3265  0e50  1819              	jr	l_vdp_plotColor_00106
  3266                          l_vdp_plotColor_00105:
  3267  0e52  dd7eff            	ld	a,(ix-1)
  3268  0e55  e6f0              	and	a,0xf0
  3269  0e57  dd77fe            	ld	(ix-2),a
  3270  0e5a  dd7e06            	ld	a,(ix+6)
  3271  0e5d  dd77ff            	ld	(ix-1),a
  3272  0e60  e60f              	and	a,0x0f
  3273  0e62  dd77ff            	ld	(ix-1),a
  3274  0e65  ddb6fe            	or	a,(ix-2)
  3275  0e68  dd77ff            	ld	(ix-1),a
  3276                          l_vdp_plotColor_00106:
  3277  0e6b  fd2acb04          	ld	iy, (__vdpPatternGeneratorTableAddr)
  3278  0e6f  dd5efc            	ld	e,(ix-4)
  3279  0e72  dd56fd            	ld	d,(ix-3)
  3280  0e75  fd19              	add	iy, de
  3281  0e77  fde5              	push	iy
  3282  0e79  cda805            	call	_vdp_setWriteAddress
  3283  0e7c  f1                	pop	af
  3284  0e7d  3ef0              	ld	a,0xf0
  3285  0e7f  d3a0              	out	(_IO_VDPDATA), a
  3286  0e81  fd2ac904          	ld	iy, (__vdpColorTableAddr)
  3287  0e85  dd5efc            	ld	e,(ix-4)
  3288  0e88  dd56fd            	ld	d,(ix-3)
  3289  0e8b  fd19              	add	iy, de
  3290  0e8d  fde5              	push	iy
  3291  0e8f  cda805            	call	_vdp_setWriteAddress
  3292  0e92  f1                	pop	af
  3293  0e93  dd7eff            	ld	a,(ix-1)
  3294  0e96  d3a0              	out	(_IO_VDPDATA), a
  3295                          l_vdp_plotColor_00112:
  3296  0e98  ddf9              	ld	sp, ix
  3297  0e9a  dde1              	pop	ix
  3298  0e9c  c9                	ret
  3299                          	SECTION code_compiler
  3300                          ;	---------------------------------
  3301                          ; Function vdp_disableSprite
  3302                          ; ---------------------------------
  3303                          _vdp_disableSprite:
  3304  0e9d  fd210200          	ld	iy,2
  3305  0ea1  fd39              	add	iy, sp
  3306  0ea3  fd6e00            	ld	l,(iy+0)
  3307  0ea6  2600              	ld	h,0x00
  3308  0ea8  29                	add	hl, hl
  3309  0ea9  29                	add	hl, hl
  3310  0eaa  eb                	ex	de, hl
  3311  0eab  2ac204            	ld	hl, (__vdpSpriteAttributeTableAddr)
  3312  0eae  19                	add	hl, de
  3313  0eaf  e5                	push	hl
  3314  0eb0  cda805            	call	_vdp_setWriteAddress
  3315  0eb3  f1                	pop	af
  3316  0eb4  3ec0              	ld	a,0xc0
  3317  0eb6  d3a0              	out	(_IO_VDPDATA), a
  3318  0eb8  3e00              	ld	a,0x00
  3319  0eba  d3a0              	out	(_IO_VDPDATA), a
  3320  0ebc  3e00              	ld	a,0x00
  3321  0ebe  d3a0              	out	(_IO_VDPDATA), a
  3322  0ec0  3e80              	ld	a,0x80
  3323  0ec2  d3a0              	out	(_IO_VDPDATA), a
  3324  0ec4  c9                	ret
  3325                          	SECTION code_compiler
  3326                          ;	---------------------------------
  3327                          ; Function vdp_loadSpritePatternNameTable
  3328                          ; ---------------------------------
  3329                          _vdp_loadSpritePatternNameTable:
  3330  0ec5  dde5              	push	ix
  3331  0ec7  dd210000          	ld	ix,0
  3332  0ecb  dd39              	add	ix,sp
  3333  0ecd  0600              	ld	b,0x00
  3334                          l_vdp_loadSpritePatternNameTable_00108:
  3335  0ecf  78                	ld	a, b
  3336  0ed0  d620              	sub	a,0x20
  3337  0ed2  300b              	jr	NC,l_vdp_loadSpritePatternNameTable_00101
  3338  0ed4  c5                	push	bc
  3339  0ed5  c5                	push	bc
  3340  0ed6  33                	inc	sp
  3341  0ed7  cd9d0e            	call	_vdp_disableSprite
  3342  0eda  33                	inc	sp
  3343  0edb  c1                	pop	bc
  3344  0edc  04                	inc	b
  3345  0edd  18f0              	jr	l_vdp_loadSpritePatternNameTable_00108
  3346                          l_vdp_loadSpritePatternNameTable_00101:
  3347  0edf  3ac604            	ld	a, (__vdpSpriteSizeSelected+0)
  3348  0ee2  b7                	or	a, a
  3349  0ee3  282a              	jr	Z,l_vdp_loadSpritePatternNameTable_00105
  3350  0ee5  2ac404            	ld	hl, (__vdpSpriteGeneratorTableAddr)
  3351  0ee8  e5                	push	hl
  3352  0ee9  cda805            	call	_vdp_setWriteAddress
  3353  0eec  f1                	pop	af
  3354  0eed  dd6e04            	ld	l,(ix+4)
  3355  0ef0  dd6605            	ld	h,(ix+5)
  3356  0ef3  29                	add	hl, hl
  3357  0ef4  29                	add	hl, hl
  3358  0ef5  29                	add	hl, hl
  3359  0ef6  29                	add	hl, hl
  3360  0ef7  29                	add	hl, hl
  3361  0ef8  eb                	ex	de,hl
  3362  0ef9  010000            	ld	bc,0x0000
  3363                          l_vdp_loadSpritePatternNameTable_00111:
  3364  0efc  79                	ld	a, c
  3365  0efd  93                	sub	a, e
  3366  0efe  78                	ld	a, b
  3367  0eff  9a                	sbc	a, d
  3368  0f00  3035              	jr	NC,l_vdp_loadSpritePatternNameTable_00116
  3369  0f02  dd6e06            	ld	l,(ix+6)
  3370  0f05  dd6607            	ld	h,(ix+7)
  3371  0f08  09                	add	hl, bc
  3372  0f09  7e                	ld	a, (hl)
  3373  0f0a  d3a0              	out	(_IO_VDPDATA), a
  3374  0f0c  03                	inc	bc
  3375  0f0d  18ed              	jr	l_vdp_loadSpritePatternNameTable_00111
  3376                          l_vdp_loadSpritePatternNameTable_00105:
  3377  0f0f  2ac404            	ld	hl, (__vdpSpriteGeneratorTableAddr)
  3378  0f12  e5                	push	hl
  3379  0f13  cda805            	call	_vdp_setWriteAddress
  3380  0f16  f1                	pop	af
  3381  0f17  dd6e04            	ld	l,(ix+4)
  3382  0f1a  dd6605            	ld	h,(ix+5)
  3383  0f1d  29                	add	hl, hl
  3384  0f1e  29                	add	hl, hl
  3385  0f1f  29                	add	hl, hl
  3386  0f20  eb                	ex	de,hl
  3387  0f21  010000            	ld	bc,0x0000
  3388                          l_vdp_loadSpritePatternNameTable_00114:
  3389  0f24  79                	ld	a, c
  3390  0f25  93                	sub	a, e
  3391  0f26  78                	ld	a, b
  3392  0f27  9a                	sbc	a, d
  3393  0f28  300d              	jr	NC,l_vdp_loadSpritePatternNameTable_00116
  3394  0f2a  dd6e06            	ld	l,(ix+6)
  3395  0f2d  dd6607            	ld	h,(ix+7)
  3396  0f30  09                	add	hl, bc
  3397  0f31  7e                	ld	a, (hl)
  3398  0f32  d3a0              	out	(_IO_VDPDATA), a
  3399  0f34  03                	inc	bc
  3400  0f35  18ed              	jr	l_vdp_loadSpritePatternNameTable_00114
  3401                          l_vdp_loadSpritePatternNameTable_00116:
  3402  0f37  dde1              	pop	ix
  3403  0f39  c9                	ret
  3404                          	SECTION code_compiler
  3405                          ;	---------------------------------
  3406                          ; Function vdp_spriteInit
  3407                          ; ---------------------------------
  3408                          _vdp_spriteInit:
  3409  0f3a  dde5              	push	ix
  3410  0f3c  dd210000          	ld	ix,0
  3411  0f40  dd39              	add	ix,sp
  3412  0f42  dd6e04            	ld	l,(ix+4)
  3413  0f45  2600              	ld	h,0x00
  3414  0f47  29                	add	hl, hl
  3415  0f48  29                	add	hl, hl
  3416  0f49  eb                	ex	de, hl
  3417  0f4a  2ac204            	ld	hl, (__vdpSpriteAttributeTableAddr)
  3418  0f4d  19                	add	hl, de
  3419  0f4e  e5                	push	hl
  3420  0f4f  cda805            	call	_vdp_setWriteAddress
  3421  0f52  f1                	pop	af
  3422  0f53  dd7e07            	ld	a,(ix+7)
  3423  0f56  d3a0              	out	(_IO_VDPDATA), a
  3424  0f58  dd7e06            	ld	a,(ix+6)
  3425  0f5b  d3a0              	out	(_IO_VDPDATA), a
  3426  0f5d  dd4e05            	ld	c,(ix+5)
  3427  0f60  3ac604            	ld	a, (__vdpSpriteSizeSelected+0)
  3428  0f63  b7                	or	a, a
  3429  0f64  2807              	jr	Z,l_vdp_spriteInit_00102
  3430  0f66  79                	ld	a, c
  3431  0f67  87                	add	a, a
  3432  0f68  87                	add	a, a
  3433  0f69  d3a0              	out	(_IO_VDPDATA), a
  3434  0f6b  1803              	jr	l_vdp_spriteInit_00103
  3435                          l_vdp_spriteInit_00102:
  3436  0f6d  79                	ld	a, c
  3437  0f6e  d3a0              	out	(_IO_VDPDATA), a
  3438                          l_vdp_spriteInit_00103:
  3439  0f70  dd7e08            	ld	a,(ix+8)
  3440  0f73  e60f              	and	a,0x0f
  3441  0f75  d3a0              	out	(_IO_VDPDATA), a
  3442  0f77  dd6e04            	ld	l,(ix+4)
  3443  0f7a  dde1              	pop	ix
  3444  0f7c  c9                	ret
  3445                          	SECTION code_compiler
  3446                          ;	---------------------------------
  3447                          ; Function vdp_setSpriteColor
  3448                          ; ---------------------------------
  3449                          _vdp_setSpriteColor:
  3450  0f7d  fd210200          	ld	iy,2
  3451  0f81  fd39              	add	iy, sp
  3452  0f83  fd6e00            	ld	l,(iy+0)
  3453  0f86  2600              	ld	h,0x00
  3454  0f88  29                	add	hl, hl
  3455  0f89  29                	add	hl, hl
  3456  0f8a  eb                	ex	de, hl
  3457  0f8b  2ac204            	ld	hl, (__vdpSpriteAttributeTableAddr)
  3458  0f8e  19                	add	hl, de
  3459  0f8f  23                	inc	hl
  3460  0f90  23                	inc	hl
  3461  0f91  23                	inc	hl
  3462  0f92  e5                	push	hl
  3463  0f93  cda805            	call	_vdp_setWriteAddress
  3464  0f96  f1                	pop	af
  3465  0f97  210300            	ld	hl,3+0
  3466  0f9a  39                	add	hl, sp
  3467  0f9b  7e                	ld	a, (hl)
  3468  0f9c  e60f              	and	a,0x0f
  3469  0f9e  d3a0              	out	(_IO_VDPDATA), a
  3470  0fa0  c9                	ret
  3471                          	SECTION code_compiler
  3472                          ;	---------------------------------
  3473                          ; Function vdp_setSpritePosition
  3474                          ; ---------------------------------
  3475                          _vdp_setSpritePosition:
  3476  0fa1  fd210200          	ld	iy,2
  3477  0fa5  fd39              	add	iy, sp
  3478  0fa7  fd6e00            	ld	l,(iy+0)
  3479  0faa  2600              	ld	h,0x00
  3480  0fac  29                	add	hl, hl
  3481  0fad  29                	add	hl, hl
  3482  0fae  eb                	ex	de, hl
  3483  0faf  2ac204            	ld	hl, (__vdpSpriteAttributeTableAddr)
  3484  0fb2  19                	add	hl, de
  3485  0fb3  e5                	push	hl
  3486  0fb4  cda805            	call	_vdp_setWriteAddress
  3487  0fb7  f1                	pop	af
  3488  0fb8  fd210400          	ld	iy,4
  3489  0fbc  fd39              	add	iy, sp
  3490  0fbe  fd7e00            	ld	a,(iy+0)
  3491  0fc1  d3a0              	out	(_IO_VDPDATA), a
  3492  0fc3  fd2b              	dec	iy
  3493  0fc5  fd7e00            	ld	a,(iy+0)
  3494  0fc8  d3a0              	out	(_IO_VDPDATA), a
  3495  0fca  c9                	ret
  3496                          	SECTION code_compiler
  3497                          ;	---------------------------------
  3498                          ; Function vdp_setSpritePositionAndColor
  3499                          ; ---------------------------------
  3500                          _vdp_setSpritePositionAndColor:
  3501  0fcb  fd210200          	ld	iy,2
  3502  0fcf  fd39              	add	iy, sp
  3503  0fd1  fd6e00            	ld	l,(iy+0)
  3504  0fd4  2600              	ld	h,0x00
  3505  0fd6  29                	add	hl, hl
  3506  0fd7  29                	add	hl, hl
  3507  0fd8  eb                	ex	de, hl
  3508  0fd9  2ac204            	ld	hl, (__vdpSpriteAttributeTableAddr)
  3509  0fdc  19                	add	hl, de
  3510  0fdd  e5                	push	hl
  3511  0fde  cda805            	call	_vdp_setWriteAddress
  3512  0fe1  f1                	pop	af
  3513  0fe2  fd210400          	ld	iy,4
  3514  0fe6  fd39              	add	iy, sp
  3515  0fe8  fd7e00            	ld	a,(iy+0)
  3516  0feb  d3a0              	out	(_IO_VDPDATA), a
  3517  0fed  fd2b              	dec	iy
  3518  0fef  fd7e00            	ld	a,(iy+0)
  3519  0ff2  d3a0              	out	(_IO_VDPDATA), a
  3520  0ff4  fd2b              	dec	iy
  3521  0ff6  fd7e00            	ld	a,(iy+0)
  3522  0ff9  d3a0              	out	(_IO_VDPDATA), a
  3523  0ffb  fd7e03            	ld	a,(iy+0+1+1+1)
  3524  0ffe  e60f              	and	a,0x0f
  3525  1000  d3a0              	out	(_IO_VDPDATA), a
  3526  1002  c9                	ret
  3527                          	SECTION code_compiler
  3528                          ;	---------------------------------
  3529                          ; Function vdp_getSpritePosition
  3530                          ; ---------------------------------
  3531                          _vdp_getSpritePosition:
  3532  1003  fd210200          	ld	iy,2
  3533  1007  fd39              	add	iy, sp
  3534  1009  fd6e00            	ld	l,(iy+0)
  3535  100c  2600              	ld	h,0x00
  3536  100e  29                	add	hl, hl
  3537  100f  29                	add	hl, hl
  3538  1010  eb                	ex	de, hl
  3539  1011  2ac204            	ld	hl, (__vdpSpriteAttributeTableAddr)
  3540  1014  19                	add	hl, de
  3541  1015  e5                	push	hl
  3542  1016  cdbd05            	call	_vdp_setReadAddress
  3543  1019  f1                	pop	af
  3544  101a  fd210500          	ld	iy,5
  3545  101e  fd39              	add	iy, sp
  3546  1020  fd4e00            	ld	c,(iy+0)
  3547  1023  fd4601            	ld	b,(iy+1)
  3548  1026  dba0              	in	a, (_IO_VDPDATA)
  3549  1028  02                	ld	(bc), a
  3550  1029  fd2b              	dec	iy
  3551  102b  fd2b              	dec	iy
  3552  102d  fd4e00            	ld	c,(iy+0)
  3553  1030  fd4601            	ld	b,(iy+1)
  3554  1033  dba0              	in	a, (_IO_VDPDATA)
  3555  1035  02                	ld	(bc), a
  3556  1036  c9                	ret
  3557                          	SECTION code_compiler
  3558                          ;	---------------------------------
  3559                          ; Function vdp_print
  3560                          ; ---------------------------------
  3561                          _vdp_print:
  3562  1037  e1                	pop	hl
  3563  1038  c1                	pop	bc
  3564  1039  c5                	push	bc
  3565  103a  e5                	push	hl
  3566                          l_vdp_print_00101:
  3567  103b  0a                	ld	a, (bc)
  3568  103c  b7                	or	a, a
  3569  103d  c8                	ret	Z
  3570  103e  c5                	push	bc
  3571  103f  f5                	push	af
  3572  1040  33                	inc	sp
  3573  1041  cd9f11            	call	_vdp_write
  3574  1044  33                	inc	sp
  3575  1045  c1                	pop	bc
  3576  1046  03                	inc	bc
  3577  1047  18f2              	jr	l_vdp_print_00101
  3578                          	SECTION code_compiler
  3579                          ;	---------------------------------
  3580                          ; Function vdp_printColorized
  3581                          ; ---------------------------------
  3582                          _vdp_printColorized:
  3583  1049  e1                	pop	hl
  3584  104a  c1                	pop	bc
  3585  104b  c5                	push	bc
  3586  104c  e5                	push	hl
  3587                          l_vdp_printColorized_00101:
  3588  104d  0a                	ld	a, (bc)
  3589  104e  b7                	or	a, a
  3590  104f  c8                	ret	Z
  3591  1050  c5                	push	bc
  3592  1051  fd210700          	ld	iy,7
  3593  1055  fd39              	add	iy, sp
  3594  1057  fd6600            	ld	h,(iy+0)
  3595  105a  e5                	push	hl
  3596  105b  33                	inc	sp
  3597  105c  fd2b              	dec	iy
  3598  105e  fd6600            	ld	h,(iy+0)
  3599  1061  e5                	push	hl
  3600  1062  33                	inc	sp
  3601  1063  f5                	push	af
  3602  1064  33                	inc	sp
  3603  1065  cd910b            	call	_vdp_colorizePattern
  3604  1068  f1                	pop	af
  3605  1069  33                	inc	sp
  3606  106a  c1                	pop	bc
  3607  106b  0a                	ld	a, (bc)
  3608  106c  c5                	push	bc
  3609  106d  f5                	push	af
  3610  106e  33                	inc	sp
  3611  106f  cd9f11            	call	_vdp_write
  3612  1072  33                	inc	sp
  3613  1073  c1                	pop	bc
  3614  1074  03                	inc	bc
  3615  1075  18d6              	jr	l_vdp_printColorized_00101
  3616                          	SECTION code_compiler
  3617                          ;	---------------------------------
  3618                          ; Function vdp_printPart
  3619                          ; ---------------------------------
  3620                          _vdp_printPart:
  3621  1077  dde5              	push	ix
  3622  1079  dd210000          	ld	ix,0
  3623  107d  dd39              	add	ix,sp
  3624  107f  dd7e08            	ld	a,(ix+8)
  3625  1082  dd8604            	add	a,(ix+4)
  3626  1085  4f                	ld	c, a
  3627  1086  dd7e09            	ld	a,(ix+9)
  3628  1089  dd8e05            	adc	a,(ix+5)
  3629  108c  47                	ld	b, a
  3630  108d  dd6e06            	ld	l,(ix+6)
  3631  1090  dd6607            	ld	h,(ix+7)
  3632  1093  09                	add	hl, bc
  3633  1094  eb                	ex	de, hl
  3634                          l_vdp_printPart_00101:
  3635  1095  69                	ld	l, c
  3636  1096  60                	ld	h, b
  3637  1097  bf                	cp	a, a
  3638  1098  ed52              	sbc	hl, de
  3639  109a  280e              	jr	Z,l_vdp_printPart_00104
  3640  109c  0a                	ld	a, (bc)
  3641  109d  c5                	push	bc
  3642  109e  d5                	push	de
  3643  109f  f5                	push	af
  3644  10a0  33                	inc	sp
  3645  10a1  cd9f11            	call	_vdp_write
  3646  10a4  33                	inc	sp
  3647  10a5  d1                	pop	de
  3648  10a6  c1                	pop	bc
  3649  10a7  03                	inc	bc
  3650  10a8  18eb              	jr	l_vdp_printPart_00101
  3651                          l_vdp_printPart_00104:
  3652  10aa  dde1              	pop	ix
  3653  10ac  c9                	ret
  3654                          	SECTION code_compiler
  3655                          ;	---------------------------------
  3656                          ; Function vdp_newLine
  3657                          ; ---------------------------------
  3658                          _vdp_newLine:
  3659  10ad  210900            	ld	hl,_vdp_cursor + 1
  3660  10b0  4e                	ld	c, (hl)
  3661  10b1  79                	ld	a, c
  3662  10b2  d617              	sub	a,0x17
  3663  10b4  2018              	jr	NZ,l_vdp_newLine_00104
  3664  10b6  3ad204            	ld	a, (__autoScroll+0)
  3665  10b9  b7                	or	a, a
  3666  10ba  280b              	jr	Z,l_vdp_newLine_00102
  3667  10bc  3e17              	ld	a,0x17
  3668  10be  f5                	push	af
  3669  10bf  33                	inc	sp
  3670  10c0  af                	xor	a, a
  3671  10c1  f5                	push	af
  3672  10c2  33                	inc	sp
  3673  10c3  cd1913            	call	_vdp_scrollTextUp
  3674  10c6  f1                	pop	af
  3675                          l_vdp_newLine_00102:
  3676  10c7  210800            	ld	hl,_vdp_cursor
  3677  10ca  3600              	ld	(hl),0x00
  3678  10cc  180c              	jr	l_vdp_newLine_00106
  3679                          l_vdp_newLine_00104:
  3680  10ce  79                	ld	a, c
  3681  10cf  3c                	inc	a
  3682  10d0  77                	ld	(hl), a
  3683  10d1  f5                	push	af
  3684  10d2  33                	inc	sp
  3685  10d3  af                	xor	a, a
  3686  10d4  f5                	push	af
  3687  10d5  33                	inc	sp
  3688  10d6  cde810            	call	_vdp_setCursor2
  3689  10d9  f1                	pop	af
  3690                          l_vdp_newLine_00106:
  3691  10da  c9                	ret
  3692                          	SECTION code_compiler
  3693                          ;	---------------------------------
  3694                          ; Function vdp_setBackDropColor
  3695                          ; ---------------------------------
  3696                          _vdp_setBackDropColor:
  3697  10db  210200            	ld	hl,2+0
  3698  10de  39                	add	hl, sp
  3699  10df  56                	ld	d, (hl)
  3700  10e0  1e07              	ld	e,0x07
  3701  10e2  d5                	push	de
  3702  10e3  cd9305            	call	_vdp_setRegister
  3703  10e6  f1                	pop	af
  3704  10e7  c9                	ret
  3705                          	SECTION code_compiler
  3706                          ;	---------------------------------
  3707                          ; Function vdp_setCursor2
  3708                          ; ---------------------------------
  3709                          _vdp_setCursor2:
  3710  10e8  dde5              	push	ix
  3711  10ea  dd210000          	ld	ix,0
  3712  10ee  dd39              	add	ix,sp
  3713  10f0  3acd04            	ld	a,(__vdpCursorMaxX)
  3714  10f3  dd9604            	sub	a,(ix+4)
  3715  10f6  3007              	jr	NC,l_vdp_setCursor2_00102
  3716  10f8  dd360400          	ld	(ix+4),0x00
  3717  10fc  dd3405            	inc	(ix+5)
  3718                          l_vdp_setCursor2_00102:
  3719  10ff  3a0000            	ld	a, (__vdpCursorMaxY+0)
  3720  1102  dd9605            	sub	a,(ix+5)
  3721  1105  3004              	jr	NC,l_vdp_setCursor2_00104
  3722  1107  dd360500          	ld	(ix+5),0x00
  3723                          l_vdp_setCursor2_00104:
  3724  110b  210800            	ld	hl,_vdp_cursor
  3725  110e  dd7e04            	ld	a,(ix+4)
  3726  1111  77                	ld	(hl), a
  3727  1112  210900            	ld	hl, +(_vdp_cursor + 1)
  3728  1115  dd7e05            	ld	a,(ix+5)
  3729  1118  77                	ld	(hl), a
  3730  1119  dde1              	pop	ix
  3731  111b  c9                	ret
  3732                          	SECTION code_compiler
  3733                          ;	---------------------------------
  3734                          ; Function vdp_setCursor
  3735                          ; ---------------------------------
  3736                          _vdp_setCursor:
  3737  111c  fd210200          	ld	iy,2
  3738  1120  fd39              	add	iy, sp
  3739  1122  fd7e00            	ld	a,(iy+0)
  3740  1125  b7                	or	a, a
  3741  1126  2816              	jr	Z,l_vdp_setCursor_00101
  3742  1128  fd7e00            	ld	a,(iy+0)
  3743  112b  3d                	dec	a
  3744  112c  2822              	jr	Z,l_vdp_setCursor_00102
  3745  112e  fd7e00            	ld	a,(iy+0)
  3746  1131  d602              	sub	a,0x02
  3747  1133  282d              	jr	Z,l_vdp_setCursor_00103
  3748  1135  fd7e00            	ld	a,(iy+0)
  3749  1138  d603              	sub	a,0x03
  3750  113a  2838              	jr	Z,l_vdp_setCursor_00104
  3751  113c  1846              	jr	l_vdp_setCursor_00106
  3752                          l_vdp_setCursor_00101:
  3753  113e  3a0900            	ld	a, (_vdp_cursor + 1)
  3754  1141  3d                	dec	a
  3755  1142  210800            	ld	hl,_vdp_cursor + 0
  3756  1145  46                	ld	b, (hl)
  3757  1146  f5                	push	af
  3758  1147  33                	inc	sp
  3759  1148  c5                	push	bc
  3760  1149  33                	inc	sp
  3761  114a  cde810            	call	_vdp_setCursor2
  3762  114d  f1                	pop	af
  3763  114e  1834              	jr	l_vdp_setCursor_00106
  3764                          l_vdp_setCursor_00102:
  3765  1150  3a0900            	ld	a, (_vdp_cursor + 1)
  3766  1153  3c                	inc	a
  3767  1154  210800            	ld	hl,_vdp_cursor + 0
  3768  1157  46                	ld	b, (hl)
  3769  1158  f5                	push	af
  3770  1159  33                	inc	sp
  3771  115a  c5                	push	bc
  3772  115b  33                	inc	sp
  3773  115c  cde810            	call	_vdp_setCursor2
  3774  115f  f1                	pop	af
  3775  1160  1822              	jr	l_vdp_setCursor_00106
  3776                          l_vdp_setCursor_00103:
  3777  1162  210900            	ld	hl,_vdp_cursor + 1
  3778  1165  46                	ld	b, (hl)
  3779  1166  3a0800            	ld	a, (_vdp_cursor + 0)
  3780  1169  3d                	dec	a
  3781  116a  c5                	push	bc
  3782  116b  33                	inc	sp
  3783  116c  f5                	push	af
  3784  116d  33                	inc	sp
  3785  116e  cde810            	call	_vdp_setCursor2
  3786  1171  f1                	pop	af
  3787  1172  1810              	jr	l_vdp_setCursor_00106
  3788                          l_vdp_setCursor_00104:
  3789  1174  210900            	ld	hl,_vdp_cursor + 1
  3790  1177  46                	ld	b, (hl)
  3791  1178  3a0800            	ld	a, (_vdp_cursor + 0)
  3792  117b  3c                	inc	a
  3793  117c  c5                	push	bc
  3794  117d  33                	inc	sp
  3795  117e  f5                	push	af
  3796  117f  33                	inc	sp
  3797  1180  cde810            	call	_vdp_setCursor2
  3798  1183  f1                	pop	af
  3799                          l_vdp_setCursor_00106:
  3800  1184  c9                	ret
  3801                          	SECTION code_compiler
  3802                          ;	---------------------------------
  3803                          ; Function vdp_setTextColor
  3804                          ; ---------------------------------
  3805                          _vdp_setTextColor:
  3806  1185  fd210200          	ld	iy,2
  3807  1189  fd39              	add	iy, sp
  3808  118b  fd7e00            	ld	a,(iy+0)
  3809  118e  87                	add	a, a
  3810  118f  87                	add	a, a
  3811  1190  87                	add	a, a
  3812  1191  87                	add	a, a
  3813  1192  fd4e01            	ld	c,(iy+0+1)
  3814  1195  81                	add	a, c
  3815  1196  57                	ld	d,a
  3816  1197  1e07              	ld	e,0x07
  3817  1199  d5                	push	de
  3818  119a  cd9305            	call	_vdp_setRegister
  3819  119d  f1                	pop	af
  3820  119e  c9                	ret
  3821                          	SECTION code_compiler
  3822                          ;	---------------------------------
  3823                          ; Function vdp_write
  3824                          ; ---------------------------------
  3825                          _vdp_write:
  3826  119f  dde5              	push	ix
  3827  11a1  dd210000          	ld	ix,0
  3828  11a5  dd39              	add	ix,sp
  3829  11a7  210900            	ld	hl, +(_vdp_cursor + 1) + 0
  3830  11aa  5e                	ld	e, (hl)
  3831  11ab  21ce04            	ld	hl,__vdpCursorMaxXFull + 0
  3832  11ae  66                	ld	h, (hl)
  3833  11af  2e00              	ld	l,0x00
  3834  11b1  55                	ld	d, l
  3835  11b2  0608              	ld	b,0x08
  3836                          l_vdp_write_00122:
  3837  11b4  29                	add	hl, hl
  3838  11b5  3001              	jr	NC,l_vdp_write_00123
  3839  11b7  19                	add	hl, de
  3840                          l_vdp_write_00123:
  3841  11b8  10fa              	djnz	l_vdp_write_00122
  3842  11ba  eb                	ex	de, hl
  3843  11bb  3a0800            	ld	a, (_vdp_cursor + 0)
  3844  11be  2600              	ld	h,0x00
  3845  11c0  6f                	ld	l, a
  3846  11c1  19                	add	hl, de
  3847  11c2  eb                	ex	de, hl
  3848  11c3  2ac704            	ld	hl, (__vdpPatternNameTableAddr)
  3849  11c6  19                	add	hl, de
  3850  11c7  d5                	push	de
  3851  11c8  e5                	push	hl
  3852  11c9  cda805            	call	_vdp_setWriteAddress
  3853  11cc  f1                	pop	af
  3854  11cd  d1                	pop	de
  3855  11ce  dd7e04            	ld	a,(ix+4)
  3856  11d1  d3a0              	out	(_IO_VDPDATA), a
  3857  11d3  210001            	ld	hl,__vdp_textBuffer
  3858  11d6  19                	add	hl, de
  3859  11d7  dd7e04            	ld	a,(ix+4)
  3860  11da  77                	ld	(hl), a
  3861  11db  3ad204            	ld	a, (__autoScroll+0)
  3862  11de  b7                	or	a, a
  3863  11df  2821              	jr	Z,l_vdp_write_00102
  3864  11e1  210800            	ld	hl,_vdp_cursor + 0
  3865  11e4  46                	ld	b, (hl)
  3866  11e5  3acd04            	ld	a, (__vdpCursorMaxX+0)
  3867  11e8  90                	sub	a, b
  3868  11e9  2017              	jr	NZ,l_vdp_write_00102
  3869  11eb  3a0900            	ld	a, ((_vdp_cursor + 1) + 0)
  3870  11ee  d617              	sub	a,0x17
  3871  11f0  2010              	jr	NZ,l_vdp_write_00102
  3872  11f2  3e17              	ld	a,0x17
  3873  11f4  f5                	push	af
  3874  11f5  33                	inc	sp
  3875  11f6  af                	xor	a, a
  3876  11f7  f5                	push	af
  3877  11f8  33                	inc	sp
  3878  11f9  cd1913            	call	_vdp_scrollTextUp
  3879  11fc  f1                	pop	af
  3880  11fd  210800            	ld	hl,_vdp_cursor
  3881  1200  3600              	ld	(hl),0x00
  3882                          l_vdp_write_00102:
  3883  1202  3a0900            	ld	a, ((_vdp_cursor + 1) + 0)
  3884  1205  210800            	ld	hl,_vdp_cursor + 0
  3885  1208  4e                	ld	c, (hl)
  3886  1209  0c                	inc	c
  3887  120a  f5                	push	af
  3888  120b  33                	inc	sp
  3889  120c  79                	ld	a, c
  3890  120d  f5                	push	af
  3891  120e  33                	inc	sp
  3892  120f  cde810            	call	_vdp_setCursor2
  3893  1212  f1                	pop	af
  3894  1213  dde1              	pop	ix
  3895  1215  c9                	ret
  3896                          	SECTION code_compiler
  3897                          ;	---------------------------------
  3898                          ; Function vdp_writeCharAtLocation
  3899                          ; ---------------------------------
  3900                          _vdp_writeCharAtLocation:
  3901  1216  dde5              	push	ix
  3902  1218  dd210000          	ld	ix,0
  3903  121c  dd39              	add	ix,sp
  3904  121e  21ce04            	ld	hl,__vdpCursorMaxXFull + 0
  3905  1221  5e                	ld	e, (hl)
  3906  1222  dd6605            	ld	h,(ix+5)
  3907  1225  2e00              	ld	l,0x00
  3908  1227  55                	ld	d, l
  3909  1228  0608              	ld	b,0x08
  3910                          l_vdp_writeCharAtLocation_00103:
  3911  122a  29                	add	hl, hl
  3912  122b  3001              	jr	NC,l_vdp_writeCharAtLocation_00104
  3913  122d  19                	add	hl, de
  3914                          l_vdp_writeCharAtLocation_00104:
  3915  122e  10fa              	djnz	l_vdp_writeCharAtLocation_00103
  3916  1230  dd4e04            	ld	c,(ix+4)
  3917  1233  0600              	ld	b,0x00
  3918  1235  09                	add	hl, bc
  3919  1236  eb                	ex	de, hl
  3920  1237  210001            	ld	hl,__vdp_textBuffer+0
  3921  123a  19                	add	hl, de
  3922  123b  dd7e06            	ld	a,(ix+6)
  3923  123e  77                	ld	(hl), a
  3924  123f  2ac704            	ld	hl, (__vdpPatternNameTableAddr)
  3925  1242  19                	add	hl, de
  3926  1243  e5                	push	hl
  3927  1244  cda805            	call	_vdp_setWriteAddress
  3928  1247  f1                	pop	af
  3929  1248  dd7e06            	ld	a,(ix+6)
  3930  124b  d3a0              	out	(_IO_VDPDATA), a
  3931  124d  dde1              	pop	ix
  3932  124f  c9                	ret
  3933                          	SECTION code_compiler
  3934                          ;	---------------------------------
  3935                          ; Function vdp_getCharAtLocationVRAM
  3936                          ; ---------------------------------
  3937                          _vdp_getCharAtLocationVRAM:
  3938  1250  dde5              	push	ix
  3939  1252  dd210000          	ld	ix,0
  3940  1256  dd39              	add	ix,sp
  3941  1258  21ce04            	ld	hl,__vdpCursorMaxXFull + 0
  3942  125b  5e                	ld	e, (hl)
  3943  125c  dd6605            	ld	h,(ix+5)
  3944  125f  2e00              	ld	l,0x00
  3945  1261  55                	ld	d, l
  3946  1262  0608              	ld	b,0x08
  3947                          l_vdp_getCharAtLocationVRAM_00103:
  3948  1264  29                	add	hl, hl
  3949  1265  3001              	jr	NC,l_vdp_getCharAtLocationVRAM_00104
  3950  1267  19                	add	hl, de
  3951                          l_vdp_getCharAtLocationVRAM_00104:
  3952  1268  10fa              	djnz	l_vdp_getCharAtLocationVRAM_00103
  3953  126a  dd4e04            	ld	c,(ix+4)
  3954  126d  0600              	ld	b,0x00
  3955  126f  09                	add	hl, bc
  3956  1270  eb                	ex	de, hl
  3957  1271  2ac704            	ld	hl, (__vdpPatternNameTableAddr)
  3958  1274  19                	add	hl, de
  3959  1275  e5                	push	hl
  3960  1276  cdbd05            	call	_vdp_setReadAddress
  3961  1279  f1                	pop	af
  3962  127a  dba0              	in	a, (_IO_VDPDATA)
  3963  127c  6f                	ld	l, a
  3964  127d  dde1              	pop	ix
  3965  127f  c9                	ret
  3966                          	SECTION code_compiler
  3967                          ;	---------------------------------
  3968                          ; Function vdp_getCharAtLocationBuf
  3969                          ; ---------------------------------
  3970                          _vdp_getCharAtLocationBuf:
  3971  1280  dde5              	push	ix
  3972  1282  dd210000          	ld	ix,0
  3973  1286  dd39              	add	ix,sp
  3974  1288  21ce04            	ld	hl,__vdpCursorMaxXFull + 0
  3975  128b  5e                	ld	e, (hl)
  3976  128c  dd6605            	ld	h,(ix+5)
  3977  128f  2e00              	ld	l,0x00
  3978  1291  55                	ld	d, l
  3979  1292  0608              	ld	b,0x08
  3980                          l_vdp_getCharAtLocationBuf_00103:
  3981  1294  29                	add	hl, hl
  3982  1295  3001              	jr	NC,l_vdp_getCharAtLocationBuf_00104
  3983  1297  19                	add	hl, de
  3984                          l_vdp_getCharAtLocationBuf_00104:
  3985  1298  10fa              	djnz	l_vdp_getCharAtLocationBuf_00103
  3986  129a  dd4e04            	ld	c,(ix+4)
  3987  129d  0600              	ld	b,0x00
  3988  129f  09                	add	hl, bc
  3989  12a0  110001            	ld	de,__vdp_textBuffer
  3990  12a3  19                	add	hl, de
  3991  12a4  6e                	ld	l, (hl)
  3992  12a5  dde1              	pop	ix
  3993  12a7  c9                	ret
  3994                          	SECTION code_compiler
  3995                          ;	---------------------------------
  3996                          ; Function vdp_setCharAtLocationBuf
  3997                          ; ---------------------------------
  3998                          _vdp_setCharAtLocationBuf:
  3999  12a8  dde5              	push	ix
  4000  12aa  dd210000          	ld	ix,0
  4001  12ae  dd39              	add	ix,sp
  4002  12b0  21ce04            	ld	hl,__vdpCursorMaxXFull + 0
  4003  12b3  5e                	ld	e, (hl)
  4004  12b4  dd6605            	ld	h,(ix+5)
  4005  12b7  2e00              	ld	l,0x00
  4006  12b9  55                	ld	d, l
  4007  12ba  0608              	ld	b,0x08
  4008                          l_vdp_setCharAtLocationBuf_00103:
  4009  12bc  29                	add	hl, hl
  4010  12bd  3001              	jr	NC,l_vdp_setCharAtLocationBuf_00104
  4011  12bf  19                	add	hl, de
  4012                          l_vdp_setCharAtLocationBuf_00104:
  4013  12c0  10fa              	djnz	l_vdp_setCharAtLocationBuf_00103
  4014  12c2  dd4e04            	ld	c,(ix+4)
  4015  12c5  0600              	ld	b,0x00
  4016  12c7  09                	add	hl, bc
  4017  12c8  110001            	ld	de,__vdp_textBuffer
  4018  12cb  19                	add	hl, de
  4019  12cc  dd7e06            	ld	a,(ix+6)
  4020  12cf  77                	ld	(hl), a
  4021  12d0  dde1              	pop	ix
  4022  12d2  c9                	ret
  4023                          	SECTION code_compiler
  4024                          ;	---------------------------------
  4025                          ; Function vdp_refreshViewPort2
  4026                          ; ---------------------------------
  4027                          _vdp_refreshViewPort2:
  4028  12d3  2ac704            	ld	hl, (__vdpPatternNameTableAddr)
  4029  12d6  e5                	push	hl
  4030  12d7  cda805            	call	_vdp_setWriteAddress
  4031  12da  f1                	pop	af
  4032  12db  e5                	push	hl
  4033  12dc  d5                	push	de
  4034  12dd  210001            	ld	hl, __vdp_textBuffer
  4035  12e0  ed5bcf04          	ld	de, (__vdpTextBufferSize)
  4036  12e4  19                	add	hl, de
  4037  12e5  545d              	ld	de, hl
  4038  12e7  210001            	ld	hl, __vdp_textBuffer
  4039                          vdp_refreshViewPortLoop4:
  4040  12ea  7e                	ld	a, (hl)
  4041  12eb  d3a0              	out	(0xa0), a
  4042  12ed  23                	inc	hl
  4043  12ee  7c                	ld	a, h
  4044  12ef  ba                	cp	a, d
  4045  12f0  c2ea12            	jp	nz, vdp_refreshViewPortLoop4
  4046  12f3  7d                	ld	a, l
  4047  12f4  bb                	cp	a, e
  4048  12f5  c2ea12            	jp	nz, vdp_refreshViewPortLoop4
  4049  12f8  d1                	pop	de
  4050  12f9  e1                	pop	hl
  4051  12fa  c9                	ret
  4052                          	SECTION code_compiler
  4053                          ;	---------------------------------
  4054                          ; Function vdp_refreshViewPort
  4055                          ; ---------------------------------
  4056                          _vdp_refreshViewPort:
  4057  12fb  2ac704            	ld	hl, (__vdpPatternNameTableAddr)
  4058  12fe  e5                	push	hl
  4059  12ff  cda805            	call	_vdp_setWriteAddress
  4060  1302  f1                	pop	af
  4061  1303  e5                	push	hl
  4062  1304  d5                	push	de
  4063  1305  210001            	ld	hl, __vdp_textBuffer
  4064  1308  ed5bcf04          	ld	de, (__vdpTextBufferSize)
  4065                          vdp_refreshViewPortLoop3:
  4066  130c  7e                	ld	a, (hl)
  4067  130d  d3a0              	out	(0xa0), a
  4068  130f  23                	inc	hl
  4069  1310  1b                	dec	de
  4070  1311  7a                	ld	A, D
  4071  1312  b3                	or	E
  4072  1313  c20c13            	jp	nz, vdp_refreshViewPortLoop3
  4073  1316  d1                	pop	de
  4074  1317  e1                	pop	hl
  4075  1318  c9                	ret
  4076                          	SECTION code_compiler
  4077                          ;	---------------------------------
  4078                          ; Function vdp_scrollTextUp
  4079                          ; ---------------------------------
  4080                          _vdp_scrollTextUp:
  4081  1319  dde5              	push	ix
  4082  131b  dd210000          	ld	ix,0
  4083  131f  dd39              	add	ix,sp
  4084  1321  f5                	push	af
  4085  1322  21ce04            	ld	hl,__vdpCursorMaxXFull + 0
  4086  1325  5e                	ld	e, (hl)
  4087  1326  dd6604            	ld	h,(ix+4)
  4088  1329  2e00              	ld	l,0x00
  4089  132b  55                	ld	d, l
  4090  132c  0608              	ld	b,0x08
  4091                          l_vdp_scrollTextUp_00125:
  4092  132e  29                	add	hl, hl
  4093  132f  3001              	jr	NC,l_vdp_scrollTextUp_00126
  4094  1331  19                	add	hl, de
  4095                          l_vdp_scrollTextUp_00126:
  4096  1332  10fa              	djnz	l_vdp_scrollTextUp_00125
  4097  1334  eb                	ex	de, hl
  4098  1335  2ac704            	ld	hl, (__vdpPatternNameTableAddr)
  4099  1338  19                	add	hl, de
  4100  1339  e5                	push	hl
  4101  133a  cda805            	call	_vdp_setWriteAddress
  4102  133d  f1                	pop	af
  4103  133e  21ce04            	ld	hl,__vdpCursorMaxXFull + 0
  4104  1341  5e                	ld	e, (hl)
  4105  1342  dd6604            	ld	h,(ix+4)
  4106  1345  2e00              	ld	l,0x00
  4107  1347  55                	ld	d, l
  4108  1348  0608              	ld	b,0x08
  4109                          l_vdp_scrollTextUp_00127:
  4110  134a  29                	add	hl, hl
  4111  134b  3001              	jr	NC,l_vdp_scrollTextUp_00128
  4112  134d  19                	add	hl, de
  4113                          l_vdp_scrollTextUp_00128:
  4114  134e  10fa              	djnz	l_vdp_scrollTextUp_00127
  4115  1350  110001            	ld	de,__vdp_textBuffer
  4116  1353  19                	add	hl, de
  4117  1354  eb                	ex	de, hl
  4118  1355  2ace04            	ld	hl, (__vdpCursorMaxXFull)
  4119  1358  2600              	ld	h,0x00
  4120  135a  19                	add	hl, de
  4121  135b  e3                	ex	(sp), hl
  4122  135c  dd4e05            	ld	c,(ix+5)
  4123  135f  0600              	ld	b,0x00
  4124  1361  03                	inc	bc
  4125  1362  3ace04            	ld	a, (__vdpCursorMaxXFull+0)
  4126  1365  2600              	ld	h,0x00
  4127  1367  d5                	push	de
  4128  1368  6f                	ld	l, a
  4129  1369  e5                	push	hl
  4130  136a  c5                	push	bc
  4131  136b  cd0000            	call	__mulint_callee
  4132  136e  d1                	pop	de
  4133  136f  010001            	ld	bc,__vdp_textBuffer
  4134  1372  09                	add	hl, bc
  4135  1373  4d                	ld	c, l
  4136  1374  44                	ld	b, h
  4137  1375  eb                	ex	de, hl
  4138  1376  d1                	pop	de
  4139  1377  d5                	push	de
  4140                          l_vdp_scrollTextUp_00101:
  4141  1378  1a                	ld	a, (de)
  4142  1379  77                	ld	(hl), a
  4143  137a  d3a0              	out	(_IO_VDPDATA), a
  4144  137c  23                	inc	hl
  4145  137d  13                	inc	de
  4146  137e  7b                	ld	a, e
  4147  137f  91                	sub	a, c
  4148  1380  20f6              	jr	NZ,l_vdp_scrollTextUp_00101
  4149  1382  7a                	ld	a, d
  4150  1383  90                	sub	a, b
  4151  1384  20f2              	jr	NZ,l_vdp_scrollTextUp_00101
  4152  1386  eb                	ex	de, hl
  4153                          l_vdp_scrollTextUp_00104:
  4154  1387  3e20              	ld	a,0x20
  4155  1389  12                	ld	(de),a
  4156  138a  d3a0              	out	(_IO_VDPDATA), a
  4157  138c  13                	inc	de
  4158  138d  6b                	ld	l, e
  4159  138e  62                	ld	h, d
  4160  138f  bf                	cp	a, a
  4161  1390  ed42              	sbc	hl, bc
  4162  1392  20f3              	jr	NZ,l_vdp_scrollTextUp_00104
  4163  1394  ddf9              	ld	sp, ix
  4164  1396  dde1              	pop	ix
  4165  1398  c9                	ret
  4166                          	SECTION code_compiler
  4167                          ;	---------------------------------
  4168                          ; Function vdp_scrollTextDown
  4169                          ; ---------------------------------
  4170                          _vdp_scrollTextDown:
  4171  1399  dde5              	push	ix
  4172  139b  dd210000          	ld	ix,0
  4173  139f  dd39              	add	ix,sp
  4174  13a1  f5                	push	af
  4175  13a2  fd21ce04          	ld	iy,__vdpCursorMaxXFull
  4176  13a6  fd5e00            	ld	e,(iy+0)
  4177  13a9  dd6605            	ld	h,(ix+5)
  4178  13ac  2e00              	ld	l,0x00
  4179  13ae  55                	ld	d, l
  4180  13af  0608              	ld	b,0x08
  4181                          l_vdp_scrollTextDown_00139:
  4182  13b1  29                	add	hl, hl
  4183  13b2  3001              	jr	NC,l_vdp_scrollTextDown_00140
  4184  13b4  19                	add	hl, de
  4185                          l_vdp_scrollTextDown_00140:
  4186  13b5  10fa              	djnz	l_vdp_scrollTextDown_00139
  4187  13b7  110001            	ld	de,__vdp_textBuffer
  4188  13ba  19                	add	hl, de
  4189  13bb  2b                	dec	hl
  4190  13bc  eb                	ex	de, hl
  4191  13bd  3ace04            	ld	a, (__vdpCursorMaxXFull+0)
  4192  13c0  83                	add	a, e
  4193  13c1  4f                	ld	c, a
  4194  13c2  3e00              	ld	a,0x00
  4195  13c4  8a                	adc	a, d
  4196  13c5  47                	ld	b, a
  4197  13c6  d5                	push	de
  4198  13c7  c5                	push	bc
  4199  13c8  fd5e00            	ld	e,(iy+0)
  4200  13cb  dd6604            	ld	h,(ix+4)
  4201  13ce  2e00              	ld	l,0x00
  4202  13d0  55                	ld	d, l
  4203  13d1  0608              	ld	b,0x08
  4204                          l_vdp_scrollTextDown_00141:
  4205  13d3  29                	add	hl, hl
  4206  13d4  3001              	jr	NC,l_vdp_scrollTextDown_00142
  4207  13d6  19                	add	hl, de
  4208                          l_vdp_scrollTextDown_00142:
  4209  13d7  10fa              	djnz	l_vdp_scrollTextDown_00141
  4210  13d9  c1                	pop	bc
  4211  13da  d1                	pop	de
  4212  13db  3eff              	ld	a, +((__vdp_textBuffer - 1) & 0xFF)
  4213  13dd  85                	add	a, l
  4214  13de  6f                	ld	l, a
  4215  13df  3e00              	ld	a, +((__vdp_textBuffer - 1) / 256)
  4216  13e1  8c                	adc	a, h
  4217  13e2  67                	ld	h, a
  4218  13e3  e3                	ex	(sp), hl
  4219                          l_vdp_scrollTextDown_00101:
  4220  13e4  1a                	ld	a, (de)
  4221  13e5  02                	ld	(bc), a
  4222  13e6  0b                	dec	bc
  4223  13e7  1b                	dec	de
  4224  13e8  e1                	pop	hl
  4225  13e9  e5                	push	hl
  4226  13ea  bf                	cp	a, a
  4227  13eb  ed52              	sbc	hl, de
  4228  13ed  20f5              	jr	NZ,l_vdp_scrollTextDown_00101
  4229                          l_vdp_scrollTextDown_00104:
  4230  13ef  3e20              	ld	a,0x20
  4231  13f1  02                	ld	(bc), a
  4232  13f2  0b                	dec	bc
  4233  13f3  e1                	pop	hl
  4234  13f4  e5                	push	hl
  4235  13f5  bf                	cp	a, a
  4236  13f6  ed42              	sbc	hl, bc
  4237  13f8  20f5              	jr	NZ,l_vdp_scrollTextDown_00104
  4238  13fa  21ce04            	ld	hl,__vdpCursorMaxXFull + 0
  4239  13fd  5e                	ld	e, (hl)
  4240  13fe  dd6604            	ld	h,(ix+4)
  4241  1401  2e00              	ld	l,0x00
  4242  1403  55                	ld	d, l
  4243  1404  0608              	ld	b,0x08
  4244                          l_vdp_scrollTextDown_00147:
  4245  1406  29                	add	hl, hl
  4246  1407  3001              	jr	NC,l_vdp_scrollTextDown_00148
  4247  1409  19                	add	hl, de
  4248                          l_vdp_scrollTextDown_00148:
  4249  140a  10fa              	djnz	l_vdp_scrollTextDown_00147
  4250  140c  eb                	ex	de, hl
  4251  140d  2ac704            	ld	hl, (__vdpPatternNameTableAddr)
  4252  1410  19                	add	hl, de
  4253  1411  e5                	push	hl
  4254  1412  cda805            	call	_vdp_setWriteAddress
  4255  1415  f1                	pop	af
  4256  1416  21ce04            	ld	hl,__vdpCursorMaxXFull + 0
  4257  1419  5e                	ld	e, (hl)
  4258  141a  dd6604            	ld	h,(ix+4)
  4259  141d  2e00              	ld	l,0x00
  4260  141f  55                	ld	d, l
  4261  1420  0608              	ld	b,0x08
  4262                          l_vdp_scrollTextDown_00149:
  4263  1422  29                	add	hl, hl
  4264  1423  3001              	jr	NC,l_vdp_scrollTextDown_00150
  4265  1425  19                	add	hl, de
  4266                          l_vdp_scrollTextDown_00150:
  4267  1426  10fa              	djnz	l_vdp_scrollTextDown_00149
  4268  1428  110001            	ld	de,__vdp_textBuffer
  4269  142b  19                	add	hl, de
  4270  142c  eb                	ex	de, hl
  4271  142d  dd4e05            	ld	c,(ix+5)
  4272  1430  0600              	ld	b,0x00
  4273  1432  03                	inc	bc
  4274  1433  3ace04            	ld	a, (__vdpCursorMaxXFull+0)
  4275  1436  2600              	ld	h,0x00
  4276  1438  d5                	push	de
  4277  1439  6f                	ld	l, a
  4278  143a  e5                	push	hl
  4279  143b  c5                	push	bc
  4280  143c  cd0000            	call	__mulint_callee
  4281  143f  d1                	pop	de
  4282  1440  010001            	ld	bc,__vdp_textBuffer
  4283  1443  09                	add	hl, bc
  4284  1444  4d                	ld	c, l
  4285  1445  44                	ld	b, h
  4286                          l_vdp_scrollTextDown_00107:
  4287  1446  1a                	ld	a, (de)
  4288  1447  d3a0              	out	(_IO_VDPDATA), a
  4289  1449  13                	inc	de
  4290  144a  6b                	ld	l, e
  4291  144b  62                	ld	h, d
  4292  144c  bf                	cp	a, a
  4293  144d  ed42              	sbc	hl, bc
  4294  144f  20f5              	jr	NZ,l_vdp_scrollTextDown_00107
  4295  1451  ddf9              	ld	sp, ix
  4296  1453  dde1              	pop	ix
  4297  1455  c9                	ret
  4298                          	SECTION code_compiler
  4299                          ;	---------------------------------
  4300                          ; Function vdp_writeUInt8ToBinary
  4301                          ; ---------------------------------
  4302                          _vdp_writeUInt8ToBinary:
  4303  1456  dde5              	push	ix
  4304  1458  dd210000          	ld	ix,0
  4305  145c  dd39              	add	ix,sp
  4306  145e  21f7ff            	ld	hl, -9
  4307  1461  39                	add	hl, sp
  4308  1462  f9                	ld	sp, hl
  4309  1463  0e00              	ld	c,0x00
  4310                          l_vdp_writeUInt8ToBinary_00106:
  4311  1465  79                	ld	a, c
  4312  1466  d608              	sub	a,0x08
  4313  1468  302a              	jr	NC,l_vdp_writeUInt8ToBinary_00104
  4314  146a  41                	ld	b, c
  4315  146b  dd6e04            	ld	l,(ix+4)
  4316  146e  04                	inc	b
  4317  146f  1802              	jr	l_vdp_writeUInt8ToBinary_00127
  4318                          l_vdp_writeUInt8ToBinary_00126:
  4319  1471  cb3d              	srl	l
  4320                          l_vdp_writeUInt8ToBinary_00127:
  4321  1473  10fc              	djnz	l_vdp_writeUInt8ToBinary_00126
  4322  1475  59                	ld	e, c
  4323  1476  3e07              	ld	a,0x07
  4324  1478  93                	sub	a, e
  4325  1479  5f                	ld	e, a
  4326  147a  07                	rlca
  4327  147b  9f                	sbc	a, a
  4328  147c  57                	ld	d, a
  4329  147d  cb45              	bit	0, l
  4330  147f  2809              	jr	Z,l_vdp_writeUInt8ToBinary_00102
  4331  1481  210000            	ld	hl,0
  4332  1484  39                	add	hl, sp
  4333  1485  19                	add	hl, de
  4334  1486  3631              	ld	(hl),0x31
  4335  1488  1807              	jr	l_vdp_writeUInt8ToBinary_00107
  4336                          l_vdp_writeUInt8ToBinary_00102:
  4337  148a  210000            	ld	hl,0
  4338  148d  39                	add	hl, sp
  4339  148e  19                	add	hl, de
  4340  148f  3630              	ld	(hl),0x30
  4341                          l_vdp_writeUInt8ToBinary_00107:
  4342  1491  0c                	inc	c
  4343  1492  18d1              	jr	l_vdp_writeUInt8ToBinary_00106
  4344                          l_vdp_writeUInt8ToBinary_00104:
  4345  1494  dd36ff00          	ld	(ix-1),0x00
  4346  1498  210000            	ld	hl,0
  4347  149b  39                	add	hl, sp
  4348  149c  e5                	push	hl
  4349  149d  cd3710            	call	_vdp_print
  4350  14a0  ddf9              	ld	sp,ix
  4351  14a2  dde1              	pop	ix
  4352  14a4  c9                	ret
  4353                          	SECTION code_compiler
  4354                          ;	---------------------------------
  4355                          ; Function vdp_writeUInt16ToBinary
  4356                          ; ---------------------------------
  4357                          _vdp_writeUInt16ToBinary:
  4358  14a5  dde5              	push	ix
  4359  14a7  dd210000          	ld	ix,0
  4360  14ab  dd39              	add	ix,sp
  4361  14ad  21edff            	ld	hl, -19
  4362  14b0  39                	add	hl, sp
  4363  14b1  f9                	ld	sp, hl
  4364  14b2  0e00              	ld	c,0x00
  4365                          l_vdp_writeUInt16ToBinary_00106:
  4366  14b4  79                	ld	a, c
  4367  14b5  d610              	sub	a,0x10
  4368  14b7  303f              	jr	NC,l_vdp_writeUInt16ToBinary_00104
  4369  14b9  41                	ld	b, c
  4370  14ba  dd5e04            	ld	e,(ix+4)
  4371  14bd  dd5605            	ld	d,(ix+5)
  4372  14c0  04                	inc	b
  4373  14c1  1804              	jr	l_vdp_writeUInt16ToBinary_00127
  4374                          l_vdp_writeUInt16ToBinary_00126:
  4375  14c3  cb3a              	srl	d
  4376  14c5  cb1b              	rr	e
  4377                          l_vdp_writeUInt16ToBinary_00127:
  4378  14c7  10fa              	djnz	l_vdp_writeUInt16ToBinary_00126
  4379  14c9  41                	ld	b, c
  4380  14ca  3e0f              	ld	a,0x0f
  4381  14cc  90                	sub	a, b
  4382  14cd  dd77fe            	ld	(ix-2),a
  4383  14d0  07                	rlca
  4384  14d1  9f                	sbc	a, a
  4385  14d2  dd77ff            	ld	(ix-1),a
  4386  14d5  cb43              	bit	0, e
  4387  14d7  280f              	jr	Z,l_vdp_writeUInt16ToBinary_00102
  4388  14d9  dd5efe            	ld	e,(ix-2)
  4389  14dc  dd56ff            	ld	d,(ix-1)
  4390  14df  210000            	ld	hl,0
  4391  14e2  39                	add	hl, sp
  4392  14e3  19                	add	hl, de
  4393  14e4  3631              	ld	(hl),0x31
  4394  14e6  180d              	jr	l_vdp_writeUInt16ToBinary_00107
  4395                          l_vdp_writeUInt16ToBinary_00102:
  4396  14e8  dd5efe            	ld	e,(ix-2)
  4397  14eb  dd56ff            	ld	d,(ix-1)
  4398  14ee  210000            	ld	hl,0
  4399  14f1  39                	add	hl, sp
  4400  14f2  19                	add	hl, de
  4401  14f3  3630              	ld	(hl),0x30
  4402                          l_vdp_writeUInt16ToBinary_00107:
  4403  14f5  0c                	inc	c
  4404  14f6  18bc              	jr	l_vdp_writeUInt16ToBinary_00106
  4405                          l_vdp_writeUInt16ToBinary_00104:
  4406  14f8  dd36fd00          	ld	(ix-3),0x00
  4407  14fc  210000            	ld	hl,0
  4408  14ff  39                	add	hl, sp
  4409  1500  e5                	push	hl
  4410  1501  cd3710            	call	_vdp_print
  4411  1504  ddf9              	ld	sp,ix
  4412  1506  dde1              	pop	ix
  4413  1508  c9                	ret
  4414                          	SECTION code_compiler
  4415                          ;	---------------------------------
  4416                          ; Function vdp_writeUInt32ToBinary
  4417                          ; ---------------------------------
  4418                          _vdp_writeUInt32ToBinary:
  4419  1509  dde5              	push	ix
  4420  150b  dd210000          	ld	ix,0
  4421  150f  dd39              	add	ix,sp
  4422  1511  21daff            	ld	hl, -38
  4423  1514  39                	add	hl, sp
  4424  1515  f9                	ld	sp, hl
  4425  1516  dd36ff00          	ld	(ix-1),0x00
  4426                          l_vdp_writeUInt32ToBinary_00106:
  4427  151a  dd7eff            	ld	a,(ix-1)
  4428  151d  d620              	sub	a,0x20
  4429  151f  3067              	jr	NC,l_vdp_writeUInt32ToBinary_00104
  4430  1521  dd46ff            	ld	b,(ix-1)
  4431  1524  dd4e04            	ld	c,(ix+4)
  4432  1527  dd5e05            	ld	e,(ix+5)
  4433  152a  dd6e06            	ld	l,(ix+6)
  4434  152d  dd6607            	ld	h,(ix+7)
  4435  1530  04                	inc	b
  4436  1531  1808              	jr	l_vdp_writeUInt32ToBinary_00127
  4437                          l_vdp_writeUInt32ToBinary_00126:
  4438  1533  cb3c              	srl	h
  4439  1535  cb1d              	rr	l
  4440  1537  cb1b              	rr	e
  4441  1539  cb19              	rr	c
  4442                          l_vdp_writeUInt32ToBinary_00127:
  4443  153b  10f6              	djnz	l_vdp_writeUInt32ToBinary_00126
  4444  153d  dd46ff            	ld	b,(ix-1)
  4445  1540  3e1f              	ld	a,0x1f
  4446  1542  90                	sub	a, b
  4447  1543  dd77fb            	ld	(ix-5),a
  4448  1546  07                	rlca
  4449  1547  9f                	sbc	a, a
  4450  1548  dd77fc            	ld	(ix-4),a
  4451  154b  cb41              	bit	0, c
  4452  154d  281b              	jr	Z,l_vdp_writeUInt32ToBinary_00102
  4453  154f  dd5efb            	ld	e,(ix-5)
  4454  1552  dd56fc            	ld	d,(ix-4)
  4455  1555  210000            	ld	hl,0
  4456  1558  39                	add	hl, sp
  4457  1559  19                	add	hl, de
  4458  155a  dd75fd            	ld	(ix-3),l
  4459  155d  dd74fe            	ld	(ix-2),h
  4460  1560  dd6efd            	ld	l,(ix-3)
  4461  1563  dd66fe            	ld	h,(ix-2)
  4462  1566  3631              	ld	(hl),0x31
  4463  1568  1819              	jr	l_vdp_writeUInt32ToBinary_00107
  4464                          l_vdp_writeUInt32ToBinary_00102:
  4465  156a  dd5efb            	ld	e,(ix-5)
  4466  156d  dd56fc            	ld	d,(ix-4)
  4467  1570  210000            	ld	hl,0
  4468  1573  39                	add	hl, sp
  4469  1574  19                	add	hl, de
  4470  1575  dd75fd            	ld	(ix-3),l
  4471  1578  dd74fe            	ld	(ix-2),h
  4472  157b  dd6efd            	ld	l,(ix-3)
  4473  157e  dd66fe            	ld	h,(ix-2)
  4474  1581  3630              	ld	(hl),0x30
  4475                          l_vdp_writeUInt32ToBinary_00107:
  4476  1583  dd34ff            	inc	(ix-1)
  4477  1586  1892              	jr	l_vdp_writeUInt32ToBinary_00106
  4478                          l_vdp_writeUInt32ToBinary_00104:
  4479  1588  dd36fa00          	ld	(ix-6),0x00
  4480  158c  210000            	ld	hl,0
  4481  158f  39                	add	hl, sp
  4482  1590  e5                	push	hl
  4483  1591  cd3710            	call	_vdp_print
  4484  1594  ddf9              	ld	sp,ix
  4485  1596  dde1              	pop	ix
  4486  1598  c9                	ret
  4487                          	SECTION code_compiler
  4488                          ;	---------------------------------
  4489                          ; Function init
  4490                          ; ---------------------------------
  4491                          _init:
  4492  1599  cd0000            	call	_initNABULib
  4493  159c  cd5d08            	call	_vdp_clearVRAM
  4494  159f  af                	xor	a, a
  4495  15a0  f5                	push	af
  4496  15a1  33                	inc	sp
  4497  15a2  af                	xor	a, a
  4498  15a3  f5                	push	af
  4499  15a4  33                	inc	sp
  4500  15a5  af                	xor	a, a
  4501  15a6  f5                	push	af
  4502  15a7  33                	inc	sp
  4503  15a8  af                	xor	a, a
  4504  15a9  57                	ld	d,a
  4505  15aa  1e05              	ld	e,0x05
  4506  15ac  d5                	push	de
  4507  15ad  cdec08            	call	_vdp_initG2Mode
  4508  15b0  f1                	pop	af
  4509  15b1  f1                	pop	af
  4510  15b2  33                	inc	sp
  4511  15b3  cddf05            	call	_vdp_enableVDPReadyInt
  4512  15b6  21e200            	ld	hl,_ASCII
  4513  15b9  e5                	push	hl
  4514  15ba  cd100a            	call	_vdp_loadASCIIFont
  4515  15bd  f1                	pop	af
  4516  15be  0620              	ld	b,0x20
  4517                          l_init_00103:
  4518  15c0  78                	ld	a, b
  4519  15c1  d67a              	sub	a,0x7a
  4520  15c3  d0                	ret	NC
  4521  15c4  c5                	push	bc
  4522  15c5  110f01            	ld	de,0x010f
  4523  15c8  d5                	push	de
  4524  15c9  c5                	push	bc
  4525  15ca  33                	inc	sp
  4526  15cb  cd910b            	call	_vdp_colorizePattern
  4527  15ce  f1                	pop	af
  4528  15cf  33                	inc	sp
  4529  15d0  c1                	pop	bc
  4530  15d1  04                	inc	b
  4531  15d2  18ec              	jr	l_init_00103
  4532                          	SECTION rodata_compiler
  4533                          _ASCII:
  4534  00e2  00                	DEFB +0x00
  4535  00e3  00                	DEFB +0x00
  4536  00e4  00                	DEFB +0x00
  4537  00e5  00                	DEFB +0x00
  4538  00e6  00                	DEFB +0x00
  4539  00e7  00                	DEFB +0x00
  4540  00e8  00                	DEFB +0x00
  4541  00e9  00                	DEFB +0x00
  4542  00ea  20                	DEFB +0x20
  4543  00eb  20                	DEFB +0x20
  4544  00ec  20                	DEFB +0x20
  4545  00ed  20                	DEFB +0x20
  4546  00ee  20                	DEFB +0x20
  4547  00ef  00                	DEFB +0x00
  4548  00f0  20                	DEFB +0x20
  4549  00f1  00                	DEFB +0x00
  4550  00f2  50                	DEFB +0x50
  4551  00f3  50                	DEFB +0x50
  4552  00f4  00                	DEFB +0x00
  4553  00f5  00                	DEFB +0x00
  4554  00f6  00                	DEFB +0x00
  4555  00f7  00                	DEFB +0x00
  4556  00f8  00                	DEFB +0x00
  4557  00f9  00                	DEFB +0x00
  4558  00fa  50                	DEFB +0x50
  4559  00fb  50                	DEFB +0x50
  4560  00fc  f8                	DEFB +0xf8
  4561  00fd  50                	DEFB +0x50
  4562  00fe  f8                	DEFB +0xf8
  4563  00ff  50                	DEFB +0x50
  4564  0100  50                	DEFB +0x50
  4565  0101  00                	DEFB +0x00
  4566  0102  20                	DEFB +0x20
  4567  0103  78                	DEFB +0x78
  4568  0104  a0                	DEFB +0xa0
  4569  0105  70                	DEFB +0x70
  4570  0106  28                	DEFB +0x28
  4571  0107  f0                	DEFB +0xf0
  4572  0108  20                	DEFB +0x20
  4573  0109  00                	DEFB +0x00
  4574  010a  c0                	DEFB +0xc0
  4575  010b  c8                	DEFB +0xc8
  4576  010c  10                	DEFB +0x10
  4577  010d  20                	DEFB +0x20
  4578  010e  40                	DEFB +0x40
  4579  010f  98                	DEFB +0x98
  4580  0110  18                	DEFB +0x18
  4581  0111  00                	DEFB +0x00
  4582  0112  60                	DEFB +0x60
  4583  0113  90                	DEFB +0x90
  4584  0114  a0                	DEFB +0xa0
  4585  0115  40                	DEFB +0x40
  4586  0116  a8                	DEFB +0xa8
  4587  0117  90                	DEFB +0x90
  4588  0118  68                	DEFB +0x68
  4589  0119  00                	DEFB +0x00
  4590  011a  60                	DEFB +0x60
  4591  011b  20                	DEFB +0x20
  4592  011c  40                	DEFB +0x40
  4593  011d  00                	DEFB +0x00
  4594  011e  00                	DEFB +0x00
  4595  011f  00                	DEFB +0x00
  4596  0120  00                	DEFB +0x00
  4597  0121  00                	DEFB +0x00
  4598  0122  10                	DEFB +0x10
  4599  0123  20                	DEFB +0x20
  4600  0124  40                	DEFB +0x40
  4601  0125  40                	DEFB +0x40
  4602  0126  40                	DEFB +0x40
  4603  0127  20                	DEFB +0x20
  4604  0128  10                	DEFB +0x10
  4605  0129  00                	DEFB +0x00
  4606  012a  40                	DEFB +0x40
  4607  012b  20                	DEFB +0x20
  4608  012c  10                	DEFB +0x10
  4609  012d  10                	DEFB +0x10
  4610  012e  10                	DEFB +0x10
  4611  012f  20                	DEFB +0x20
  4612  0130  40                	DEFB +0x40
  4613  0131  00                	DEFB +0x00
  4614  0132  00                	DEFB +0x00
  4615  0133  20                	DEFB +0x20
  4616  0134  a8                	DEFB +0xa8
  4617  0135  70                	DEFB +0x70
  4618  0136  a8                	DEFB +0xa8
  4619  0137  20                	DEFB +0x20
  4620  0138  00                	DEFB +0x00
  4621  0139  00                	DEFB +0x00
  4622  013a  00                	DEFB +0x00
  4623  013b  20                	DEFB +0x20
  4624  013c  20                	DEFB +0x20
  4625  013d  f8                	DEFB +0xf8
  4626  013e  20                	DEFB +0x20
  4627  013f  20                	DEFB +0x20
  4628  0140  00                	DEFB +0x00
  4629  0141  00                	DEFB +0x00
  4630  0142  00                	DEFB +0x00
  4631  0143  00                	DEFB +0x00
  4632  0144  00                	DEFB +0x00
  4633  0145  00                	DEFB +0x00
  4634  0146  60                	DEFB +0x60
  4635  0147  20                	DEFB +0x20
  4636  0148  40                	DEFB +0x40
  4637  0149  00                	DEFB +0x00
  4638  014a  00                	DEFB +0x00
  4639  014b  00                	DEFB +0x00
  4640  014c  00                	DEFB +0x00
  4641  014d  f8                	DEFB +0xf8
  4642  014e  00                	DEFB +0x00
  4643  014f  00                	DEFB +0x00
  4644  0150  00                	DEFB +0x00
  4645  0151  00                	DEFB +0x00
  4646  0152  00                	DEFB +0x00
  4647  0153  00                	DEFB +0x00
  4648  0154  00                	DEFB +0x00
  4649  0155  00                	DEFB +0x00
  4650  0156  00                	DEFB +0x00
  4651  0157  60                	DEFB +0x60
  4652  0158  60                	DEFB +0x60
  4653  0159  00                	DEFB +0x00
  4654  015a  00                	DEFB +0x00
  4655  015b  08                	DEFB +0x08
  4656  015c  10                	DEFB +0x10
  4657  015d  20                	DEFB +0x20
  4658  015e  40                	DEFB +0x40
  4659  015f  80                	DEFB +0x80
  4660  0160  00                	DEFB +0x00
  4661  0161  00                	DEFB +0x00
  4662  0162  70                	DEFB +0x70
  4663  0163  88                	DEFB +0x88
  4664  0164  98                	DEFB +0x98
  4665  0165  a8                	DEFB +0xa8
  4666  0166  c8                	DEFB +0xc8
  4667  0167  88                	DEFB +0x88
  4668  0168  70                	DEFB +0x70
  4669  0169  00                	DEFB +0x00
  4670  016a  20                	DEFB +0x20
  4671  016b  60                	DEFB +0x60
  4672  016c  20                	DEFB +0x20
  4673  016d  20                	DEFB +0x20
  4674  016e  20                	DEFB +0x20
  4675  016f  20                	DEFB +0x20
  4676  0170  70                	DEFB +0x70
  4677  0171  00                	DEFB +0x00
  4678  0172  70                	DEFB +0x70
  4679  0173  88                	DEFB +0x88
  4680  0174  08                	DEFB +0x08
  4681  0175  10                	DEFB +0x10
  4682  0176  20                	DEFB +0x20
  4683  0177  40                	DEFB +0x40
  4684  0178  f8                	DEFB +0xf8
  4685  0179  00                	DEFB +0x00
  4686  017a  f8                	DEFB +0xf8
  4687  017b  10                	DEFB +0x10
  4688  017c  20                	DEFB +0x20
  4689  017d  10                	DEFB +0x10
  4690  017e  08                	DEFB +0x08
  4691  017f  88                	DEFB +0x88
  4692  0180  70                	DEFB +0x70
  4693  0181  00                	DEFB +0x00
  4694  0182  10                	DEFB +0x10
  4695  0183  30                	DEFB +0x30
  4696  0184  50                	DEFB +0x50
  4697  0185  90                	DEFB +0x90
  4698  0186  f8                	DEFB +0xf8
  4699  0187  10                	DEFB +0x10
  4700  0188  10                	DEFB +0x10
  4701  0189  00                	DEFB +0x00
  4702  018a  f8                	DEFB +0xf8
  4703  018b  80                	DEFB +0x80
  4704  018c  f0                	DEFB +0xf0
  4705  018d  08                	DEFB +0x08
  4706  018e  08                	DEFB +0x08
  4707  018f  88                	DEFB +0x88
  4708  0190  70                	DEFB +0x70
  4709  0191  00                	DEFB +0x00
  4710  0192  30                	DEFB +0x30
  4711  0193  40                	DEFB +0x40
  4712  0194  80                	DEFB +0x80
  4713  0195  f8                	DEFB +0xf8
  4714  0196  88                	DEFB +0x88
  4715  0197  88                	DEFB +0x88
  4716  0198  70                	DEFB +0x70
  4717  0199  00                	DEFB +0x00
  4718  019a  f8                	DEFB +0xf8
  4719  019b  08                	DEFB +0x08
  4720  019c  10                	DEFB +0x10
  4721  019d  20                	DEFB +0x20
  4722  019e  40                	DEFB +0x40
  4723  019f  40                	DEFB +0x40
  4724  01a0  40                	DEFB +0x40
  4725  01a1  00                	DEFB +0x00
  4726  01a2  70                	DEFB +0x70
  4727  01a3  88                	DEFB +0x88
  4728  01a4  88                	DEFB +0x88
  4729  01a5  70                	DEFB +0x70
  4730  01a6  88                	DEFB +0x88
  4731  01a7  88                	DEFB +0x88
  4732  01a8  70                	DEFB +0x70
  4733  01a9  00                	DEFB +0x00
  4734  01aa  70                	DEFB +0x70
  4735  01ab  88                	DEFB +0x88
  4736  01ac  88                	DEFB +0x88
  4737  01ad  78                	DEFB +0x78
  4738  01ae  08                	DEFB +0x08
  4739  01af  10                	DEFB +0x10
  4740  01b0  60                	DEFB +0x60
  4741  01b1  00                	DEFB +0x00
  4742  01b2  00                	DEFB +0x00
  4743  01b3  30                	DEFB +0x30
  4744  01b4  30                	DEFB +0x30
  4745  01b5  00                	DEFB +0x00
  4746  01b6  30                	DEFB +0x30
  4747  01b7  30                	DEFB +0x30
  4748  01b8  00                	DEFB +0x00
  4749  01b9  00                	DEFB +0x00
  4750  01ba  00                	DEFB +0x00
  4751  01bb  30                	DEFB +0x30
  4752  01bc  30                	DEFB +0x30
  4753  01bd  00                	DEFB +0x00
  4754  01be  30                	DEFB +0x30
  4755  01bf  10                	DEFB +0x10
  4756  01c0  20                	DEFB +0x20
  4757  01c1  00                	DEFB +0x00
  4758  01c2  10                	DEFB +0x10
  4759  01c3  20                	DEFB +0x20
  4760  01c4  40                	DEFB +0x40
  4761  01c5  80                	DEFB +0x80
  4762  01c6  40                	DEFB +0x40
  4763  01c7  20                	DEFB +0x20
  4764  01c8  10                	DEFB +0x10
  4765  01c9  00                	DEFB +0x00
  4766  01ca  00                	DEFB +0x00
  4767  01cb  00                	DEFB +0x00
  4768  01cc  f8                	DEFB +0xf8
  4769  01cd  00                	DEFB +0x00
  4770  01ce  f8                	DEFB +0xf8
  4771  01cf  00                	DEFB +0x00
  4772  01d0  00                	DEFB +0x00
  4773  01d1  00                	DEFB +0x00
  4774  01d2  40                	DEFB +0x40
  4775  01d3  20                	DEFB +0x20
  4776  01d4  10                	DEFB +0x10
  4777  01d5  08                	DEFB +0x08
  4778  01d6  10                	DEFB +0x10
  4779  01d7  20                	DEFB +0x20
  4780  01d8  40                	DEFB +0x40
  4781  01d9  00                	DEFB +0x00
  4782  01da  70                	DEFB +0x70
  4783  01db  88                	DEFB +0x88
  4784  01dc  08                	DEFB +0x08
  4785  01dd  10                	DEFB +0x10
  4786  01de  20                	DEFB +0x20
  4787  01df  00                	DEFB +0x00
  4788  01e0  20                	DEFB +0x20
  4789  01e1  00                	DEFB +0x00
  4790  01e2  70                	DEFB +0x70
  4791  01e3  88                	DEFB +0x88
  4792  01e4  08                	DEFB +0x08
  4793  01e5  68                	DEFB +0x68
  4794  01e6  a8                	DEFB +0xa8
  4795  01e7  a8                	DEFB +0xa8
  4796  01e8  70                	DEFB +0x70
  4797  01e9  00                	DEFB +0x00
  4798  01ea  70                	DEFB +0x70
  4799  01eb  88                	DEFB +0x88
  4800  01ec  88                	DEFB +0x88
  4801  01ed  88                	DEFB +0x88
  4802  01ee  f8                	DEFB +0xf8
  4803  01ef  88                	DEFB +0x88
  4804  01f0  88                	DEFB +0x88
  4805  01f1  00                	DEFB +0x00
  4806  01f2  f0                	DEFB +0xf0
  4807  01f3  88                	DEFB +0x88
  4808  01f4  88                	DEFB +0x88
  4809  01f5  f0                	DEFB +0xf0
  4810  01f6  88                	DEFB +0x88
  4811  01f7  88                	DEFB +0x88
  4812  01f8  f0                	DEFB +0xf0
  4813  01f9  00                	DEFB +0x00
  4814  01fa  70                	DEFB +0x70
  4815  01fb  88                	DEFB +0x88
  4816  01fc  80                	DEFB +0x80
  4817  01fd  80                	DEFB +0x80
  4818  01fe  80                	DEFB +0x80
  4819  01ff  88                	DEFB +0x88
  4820  0200  70                	DEFB +0x70
  4821  0201  00                	DEFB +0x00
  4822  0202  e0                	DEFB +0xe0
  4823  0203  90                	DEFB +0x90
  4824  0204  88                	DEFB +0x88
  4825  0205  88                	DEFB +0x88
  4826  0206  88                	DEFB +0x88
  4827  0207  90                	DEFB +0x90
  4828  0208  e0                	DEFB +0xe0
  4829  0209  00                	DEFB +0x00
  4830  020a  f8                	DEFB +0xf8
  4831  020b  80                	DEFB +0x80
  4832  020c  80                	DEFB +0x80
  4833  020d  f0                	DEFB +0xf0
  4834  020e  80                	DEFB +0x80
  4835  020f  80                	DEFB +0x80
  4836  0210  f8                	DEFB +0xf8
  4837  0211  00                	DEFB +0x00
  4838  0212  f8                	DEFB +0xf8
  4839  0213  80                	DEFB +0x80
  4840  0214  80                	DEFB +0x80
  4841  0215  f0                	DEFB +0xf0
  4842  0216  80                	DEFB +0x80
  4843  0217  80                	DEFB +0x80
  4844  0218  80                	DEFB +0x80
  4845  0219  00                	DEFB +0x00
  4846  021a  70                	DEFB +0x70
  4847  021b  88                	DEFB +0x88
  4848  021c  80                	DEFB +0x80
  4849  021d  b8                	DEFB +0xb8
  4850  021e  88                	DEFB +0x88
  4851  021f  88                	DEFB +0x88
  4852  0220  78                	DEFB +0x78
  4853  0221  00                	DEFB +0x00
  4854  0222  88                	DEFB +0x88
  4855  0223  88                	DEFB +0x88
  4856  0224  88                	DEFB +0x88
  4857  0225  f8                	DEFB +0xf8
  4858  0226  88                	DEFB +0x88
  4859  0227  88                	DEFB +0x88
  4860  0228  88                	DEFB +0x88
  4861  0229  00                	DEFB +0x00
  4862  022a  70                	DEFB +0x70
  4863  022b  20                	DEFB +0x20
  4864  022c  20                	DEFB +0x20
  4865  022d  20                	DEFB +0x20
  4866  022e  20                	DEFB +0x20
  4867  022f  20                	DEFB +0x20
  4868  0230  70                	DEFB +0x70
  4869  0231  00                	DEFB +0x00
  4870  0232  38                	DEFB +0x38
  4871  0233  10                	DEFB +0x10
  4872  0234  10                	DEFB +0x10
  4873  0235  10                	DEFB +0x10
  4874  0236  10                	DEFB +0x10
  4875  0237  90                	DEFB +0x90
  4876  0238  60                	DEFB +0x60
  4877  0239  00                	DEFB +0x00
  4878  023a  88                	DEFB +0x88
  4879  023b  90                	DEFB +0x90
  4880  023c  a0                	DEFB +0xa0
  4881  023d  c0                	DEFB +0xc0
  4882  023e  a0                	DEFB +0xa0
  4883  023f  90                	DEFB +0x90
  4884  0240  88                	DEFB +0x88
  4885  0241  00                	DEFB +0x00
  4886  0242  80                	DEFB +0x80
  4887  0243  80                	DEFB +0x80
  4888  0244  80                	DEFB +0x80
  4889  0245  80                	DEFB +0x80
  4890  0246  80                	DEFB +0x80
  4891  0247  80                	DEFB +0x80
  4892  0248  f8                	DEFB +0xf8
  4893  0249  00                	DEFB +0x00
  4894  024a  88                	DEFB +0x88
  4895  024b  d8                	DEFB +0xd8
  4896  024c  a8                	DEFB +0xa8
  4897  024d  a8                	DEFB +0xa8
  4898  024e  88                	DEFB +0x88
  4899  024f  88                	DEFB +0x88
  4900  0250  88                	DEFB +0x88
  4901  0251  00                	DEFB +0x00
  4902  0252  88                	DEFB +0x88
  4903  0253  c8                	DEFB +0xc8
  4904  0254  a8                	DEFB +0xa8
  4905  0255  98                	DEFB +0x98
  4906  0256  88                	DEFB +0x88
  4907  0257  88                	DEFB +0x88
  4908  0258  88                	DEFB +0x88
  4909  0259  00                	DEFB +0x00
  4910  025a  70                	DEFB +0x70
  4911  025b  88                	DEFB +0x88
  4912  025c  88                	DEFB +0x88
  4913  025d  88                	DEFB +0x88
  4914  025e  88                	DEFB +0x88
  4915  025f  88                	DEFB +0x88
  4916  0260  70                	DEFB +0x70
  4917  0261  00                	DEFB +0x00
  4918  0262  f0                	DEFB +0xf0
  4919  0263  88                	DEFB +0x88
  4920  0264  88                	DEFB +0x88
  4921  0265  f0                	DEFB +0xf0
  4922  0266  80                	DEFB +0x80
  4923  0267  80                	DEFB +0x80
  4924  0268  80                	DEFB +0x80
  4925  0269  00                	DEFB +0x00
  4926  026a  70                	DEFB +0x70
  4927  026b  88                	DEFB +0x88
  4928  026c  88                	DEFB +0x88
  4929  026d  88                	DEFB +0x88
  4930  026e  a8                	DEFB +0xa8
  4931  026f  90                	DEFB +0x90
  4932  0270  68                	DEFB +0x68
  4933  0271  00                	DEFB +0x00
  4934  0272  f0                	DEFB +0xf0
  4935  0273  88                	DEFB +0x88
  4936  0274  88                	DEFB +0x88
  4937  0275  f0                	DEFB +0xf0
  4938  0276  a0                	DEFB +0xa0
  4939  0277  90                	DEFB +0x90
  4940  0278  88                	DEFB +0x88
  4941  0279  00                	DEFB +0x00
  4942  027a  78                	DEFB +0x78
  4943  027b  80                	DEFB +0x80
  4944  027c  80                	DEFB +0x80
  4945  027d  70                	DEFB +0x70
  4946  027e  08                	DEFB +0x08
  4947  027f  08                	DEFB +0x08
  4948  0280  f0                	DEFB +0xf0
  4949  0281  00                	DEFB +0x00
  4950  0282  f8                	DEFB +0xf8
  4951  0283  20                	DEFB +0x20
  4952  0284  20                	DEFB +0x20
  4953  0285  20                	DEFB +0x20
  4954  0286  20                	DEFB +0x20
  4955  0287  20                	DEFB +0x20
  4956  0288  20                	DEFB +0x20
  4957  0289  00                	DEFB +0x00
  4958  028a  88                	DEFB +0x88
  4959  028b  88                	DEFB +0x88
  4960  028c  88                	DEFB +0x88
  4961  028d  88                	DEFB +0x88
  4962  028e  88                	DEFB +0x88
  4963  028f  88                	DEFB +0x88
  4964  0290  70                	DEFB +0x70
  4965  0291  00                	DEFB +0x00
  4966  0292  88                	DEFB +0x88
  4967  0293  88                	DEFB +0x88
  4968  0294  88                	DEFB +0x88
  4969  0295  88                	DEFB +0x88
  4970  0296  88                	DEFB +0x88
  4971  0297  50                	DEFB +0x50
  4972  0298  20                	DEFB +0x20
  4973  0299  00                	DEFB +0x00
  4974  029a  88                	DEFB +0x88
  4975  029b  88                	DEFB +0x88
  4976  029c  88                	DEFB +0x88
  4977  029d  88                	DEFB +0x88
  4978  029e  a8                	DEFB +0xa8
  4979  029f  a8                	DEFB +0xa8
  4980  02a0  50                	DEFB +0x50
  4981  02a1  00                	DEFB +0x00
  4982  02a2  88                	DEFB +0x88
  4983  02a3  88                	DEFB +0x88
  4984  02a4  50                	DEFB +0x50
  4985  02a5  20                	DEFB +0x20
  4986  02a6  50                	DEFB +0x50
  4987  02a7  88                	DEFB +0x88
  4988  02a8  88                	DEFB +0x88
  4989  02a9  00                	DEFB +0x00
  4990  02aa  88                	DEFB +0x88
  4991  02ab  88                	DEFB +0x88
  4992  02ac  88                	DEFB +0x88
  4993  02ad  50                	DEFB +0x50
  4994  02ae  20                	DEFB +0x20
  4995  02af  20                	DEFB +0x20
  4996  02b0  20                	DEFB +0x20
  4997  02b1  00                	DEFB +0x00
  4998  02b2  f8                	DEFB +0xf8
  4999  02b3  08                	DEFB +0x08
  5000  02b4  10                	DEFB +0x10
  5001  02b5  20                	DEFB +0x20
  5002  02b6  40                	DEFB +0x40
  5003  02b7  80                	DEFB +0x80
  5004  02b8  f8                	DEFB +0xf8
  5005  02b9  00                	DEFB +0x00
  5006  02ba  70                	DEFB +0x70
  5007  02bb  40                	DEFB +0x40
  5008  02bc  40                	DEFB +0x40
  5009  02bd  40                	DEFB +0x40
  5010  02be  40                	DEFB +0x40
  5011  02bf  40                	DEFB +0x40
  5012  02c0  70                	DEFB +0x70
  5013  02c1  00                	DEFB +0x00
  5014  02c2  00                	DEFB +0x00
  5015  02c3  80                	DEFB +0x80
  5016  02c4  40                	DEFB +0x40
  5017  02c5  20                	DEFB +0x20
  5018  02c6  10                	DEFB +0x10
  5019  02c7  08                	DEFB +0x08
  5020  02c8  00                	DEFB +0x00
  5021  02c9  00                	DEFB +0x00
  5022  02ca  70                	DEFB +0x70
  5023  02cb  10                	DEFB +0x10
  5024  02cc  10                	DEFB +0x10
  5025  02cd  10                	DEFB +0x10
  5026  02ce  10                	DEFB +0x10
  5027  02cf  10                	DEFB +0x10
  5028  02d0  70                	DEFB +0x70
  5029  02d1  00                	DEFB +0x00
  5030  02d2  20                	DEFB +0x20
  5031  02d3  50                	DEFB +0x50
  5032  02d4  88                	DEFB +0x88
  5033  02d5  00                	DEFB +0x00
  5034  02d6  00                	DEFB +0x00
  5035  02d7  00                	DEFB +0x00
  5036  02d8  00                	DEFB +0x00
  5037  02d9  00                	DEFB +0x00
  5038  02da  00                	DEFB +0x00
  5039  02db  00                	DEFB +0x00
  5040  02dc  00                	DEFB +0x00
  5041  02dd  00                	DEFB +0x00
  5042  02de  00                	DEFB +0x00
  5043  02df  00                	DEFB +0x00
  5044  02e0  f8                	DEFB +0xf8
  5045  02e1  00                	DEFB +0x00
  5046  02e2  40                	DEFB +0x40
  5047  02e3  20                	DEFB +0x20
  5048  02e4  10                	DEFB +0x10
  5049  02e5  00                	DEFB +0x00
  5050  02e6  00                	DEFB +0x00
  5051  02e7  00                	DEFB +0x00
  5052  02e8  00                	DEFB +0x00
  5053  02e9  00                	DEFB +0x00
  5054  02ea  00                	DEFB +0x00
  5055  02eb  00                	DEFB +0x00
  5056  02ec  70                	DEFB +0x70
  5057  02ed  08                	DEFB +0x08
  5058  02ee  78                	DEFB +0x78
  5059  02ef  88                	DEFB +0x88
  5060  02f0  78                	DEFB +0x78
  5061  02f1  00                	DEFB +0x00
  5062  02f2  00                	DEFB +0x00
  5063  02f3  80                	DEFB +0x80
  5064  02f4  80                	DEFB +0x80
  5065  02f5  b0                	DEFB +0xb0
  5066  02f6  c8                	DEFB +0xc8
  5067  02f7  88                	DEFB +0x88
  5068  02f8  f0                	DEFB +0xf0
  5069  02f9  00                	DEFB +0x00
  5070  02fa  00                	DEFB +0x00
  5071  02fb  00                	DEFB +0x00
  5072  02fc  70                	DEFB +0x70
  5073  02fd  80                	DEFB +0x80
  5074  02fe  80                	DEFB +0x80
  5075  02ff  88                	DEFB +0x88
  5076  0300  70                	DEFB +0x70
  5077  0301  00                	DEFB +0x00
  5078  0302  08                	DEFB +0x08
  5079  0303  08                	DEFB +0x08
  5080  0304  08                	DEFB +0x08
  5081  0305  68                	DEFB +0x68
  5082  0306  98                	DEFB +0x98
  5083  0307  88                	DEFB +0x88
  5084  0308  78                	DEFB +0x78
  5085  0309  00                	DEFB +0x00
  5086  030a  00                	DEFB +0x00
  5087  030b  00                	DEFB +0x00
  5088  030c  70                	DEFB +0x70
  5089  030d  88                	DEFB +0x88
  5090  030e  f8                	DEFB +0xf8
  5091  030f  80                	DEFB +0x80
  5092  0310  70                	DEFB +0x70
  5093  0311  00                	DEFB +0x00
  5094  0312  30                	DEFB +0x30
  5095  0313  48                	DEFB +0x48
  5096  0314  40                	DEFB +0x40
  5097  0315  e0                	DEFB +0xe0
  5098  0316  40                	DEFB +0x40
  5099  0317  40                	DEFB +0x40
  5100  0318  40                	DEFB +0x40
  5101  0319  00                	DEFB +0x00
  5102  031a  00                	DEFB +0x00
  5103  031b  78                	DEFB +0x78
  5104  031c  88                	DEFB +0x88
  5105  031d  88                	DEFB +0x88
  5106  031e  78                	DEFB +0x78
  5107  031f  08                	DEFB +0x08
  5108  0320  70                	DEFB +0x70
  5109  0321  00                	DEFB +0x00
  5110  0322  80                	DEFB +0x80
  5111  0323  80                	DEFB +0x80
  5112  0324  b0                	DEFB +0xb0
  5113  0325  c8                	DEFB +0xc8
  5114  0326  88                	DEFB +0x88
  5115  0327  88                	DEFB +0x88
  5116  0328  88                	DEFB +0x88
  5117  0329  00                	DEFB +0x00
  5118  032a  00                	DEFB +0x00
  5119  032b  20                	DEFB +0x20
  5120  032c  00                	DEFB +0x00
  5121  032d  20                	DEFB +0x20
  5122  032e  20                	DEFB +0x20
  5123  032f  20                	DEFB +0x20
  5124  0330  20                	DEFB +0x20
  5125  0331  00                	DEFB +0x00
  5126  0332  10                	DEFB +0x10
  5127  0333  00                	DEFB +0x00
  5128  0334  30                	DEFB +0x30
  5129  0335  10                	DEFB +0x10
  5130  0336  10                	DEFB +0x10
  5131  0337  90                	DEFB +0x90
  5132  0338  60                	DEFB +0x60
  5133  0339  00                	DEFB +0x00
  5134  033a  80                	DEFB +0x80
  5135  033b  80                	DEFB +0x80
  5136  033c  90                	DEFB +0x90
  5137  033d  a0                	DEFB +0xa0
  5138  033e  c0                	DEFB +0xc0
  5139  033f  a0                	DEFB +0xa0
  5140  0340  90                	DEFB +0x90
  5141  0341  00                	DEFB +0x00
  5142  0342  60                	DEFB +0x60
  5143  0343  20                	DEFB +0x20
  5144  0344  20                	DEFB +0x20
  5145  0345  20                	DEFB +0x20
  5146  0346  20                	DEFB +0x20
  5147  0347  20                	DEFB +0x20
  5148  0348  70                	DEFB +0x70
  5149  0349  00                	DEFB +0x00
  5150  034a  00                	DEFB +0x00
  5151  034b  00                	DEFB +0x00
  5152  034c  d0                	DEFB +0xd0
  5153  034d  a8                	DEFB +0xa8
  5154  034e  a8                	DEFB +0xa8
  5155  034f  88                	DEFB +0x88
  5156  0350  88                	DEFB +0x88
  5157  0351  00                	DEFB +0x00
  5158  0352  00                	DEFB +0x00
  5159  0353  00                	DEFB +0x00
  5160  0354  b0                	DEFB +0xb0
  5161  0355  c8                	DEFB +0xc8
  5162  0356  88                	DEFB +0x88
  5163  0357  88                	DEFB +0x88
  5164  0358  88                	DEFB +0x88
  5165  0359  00                	DEFB +0x00
  5166  035a  00                	DEFB +0x00
  5167  035b  00                	DEFB +0x00
  5168  035c  70                	DEFB +0x70
  5169  035d  88                	DEFB +0x88
  5170  035e  88                	DEFB +0x88
  5171  035f  88                	DEFB +0x88
  5172  0360  70                	DEFB +0x70
  5173  0361  00                	DEFB +0x00
  5174  0362  00                	DEFB +0x00
  5175  0363  00                	DEFB +0x00
  5176  0364  f0                	DEFB +0xf0
  5177  0365  88                	DEFB +0x88
  5178  0366  f0                	DEFB +0xf0
  5179  0367  80                	DEFB +0x80
  5180  0368  80                	DEFB +0x80
  5181  0369  00                	DEFB +0x00
  5182  036a  00                	DEFB +0x00
  5183  036b  00                	DEFB +0x00
  5184  036c  68                	DEFB +0x68
  5185  036d  98                	DEFB +0x98
  5186  036e  78                	DEFB +0x78
  5187  036f  08                	DEFB +0x08
  5188  0370  08                	DEFB +0x08
  5189  0371  00                	DEFB +0x00
  5190  0372  00                	DEFB +0x00
  5191  0373  00                	DEFB +0x00
  5192  0374  b0                	DEFB +0xb0
  5193  0375  c8                	DEFB +0xc8
  5194  0376  80                	DEFB +0x80
  5195  0377  80                	DEFB +0x80
  5196  0378  80                	DEFB +0x80
  5197  0379  00                	DEFB +0x00
  5198  037a  00                	DEFB +0x00
  5199  037b  00                	DEFB +0x00
  5200  037c  70                	DEFB +0x70
  5201  037d  80                	DEFB +0x80
  5202  037e  70                	DEFB +0x70
  5203  037f  08                	DEFB +0x08
  5204  0380  f0                	DEFB +0xf0
  5205  0381  00                	DEFB +0x00
  5206  0382  40                	DEFB +0x40
  5207  0383  40                	DEFB +0x40
  5208  0384  e0                	DEFB +0xe0
  5209  0385  40                	DEFB +0x40
  5210  0386  40                	DEFB +0x40
  5211  0387  48                	DEFB +0x48
  5212  0388  30                	DEFB +0x30
  5213  0389  00                	DEFB +0x00
  5214  038a  00                	DEFB +0x00
  5215  038b  00                	DEFB +0x00
  5216  038c  88                	DEFB +0x88
  5217  038d  88                	DEFB +0x88
  5218  038e  88                	DEFB +0x88
  5219  038f  98                	DEFB +0x98
  5220  0390  68                	DEFB +0x68
  5221  0391  00                	DEFB +0x00
  5222  0392  00                	DEFB +0x00
  5223  0393  00                	DEFB +0x00
  5224  0394  88                	DEFB +0x88
  5225  0395  88                	DEFB +0x88
  5226  0396  88                	DEFB +0x88
  5227  0397  50                	DEFB +0x50
  5228  0398  20                	DEFB +0x20
  5229  0399  00                	DEFB +0x00
  5230  039a  00                	DEFB +0x00
  5231  039b  00                	DEFB +0x00
  5232  039c  88                	DEFB +0x88
  5233  039d  88                	DEFB +0x88
  5234  039e  a8                	DEFB +0xa8
  5235  039f  a8                	DEFB +0xa8
  5236  03a0  50                	DEFB +0x50
  5237  03a1  00                	DEFB +0x00
  5238  03a2  00                	DEFB +0x00
  5239  03a3  00                	DEFB +0x00
  5240  03a4  88                	DEFB +0x88
  5241  03a5  50                	DEFB +0x50
  5242  03a6  20                	DEFB +0x20
  5243  03a7  50                	DEFB +0x50
  5244  03a8  88                	DEFB +0x88
  5245  03a9  00                	DEFB +0x00
  5246  03aa  00                	DEFB +0x00
  5247  03ab  00                	DEFB +0x00
  5248  03ac  88                	DEFB +0x88
  5249  03ad  88                	DEFB +0x88
  5250  03ae  78                	DEFB +0x78
  5251  03af  08                	DEFB +0x08
  5252  03b0  70                	DEFB +0x70
  5253  03b1  00                	DEFB +0x00
  5254  03b2  00                	DEFB +0x00
  5255  03b3  00                	DEFB +0x00
  5256  03b4  f8                	DEFB +0xf8
  5257  03b5  10                	DEFB +0x10
  5258  03b6  20                	DEFB +0x20
  5259  03b7  40                	DEFB +0x40
  5260  03b8  f8                	DEFB +0xf8
  5261  03b9  00                	DEFB +0x00
  5262  03ba  10                	DEFB +0x10
  5263  03bb  20                	DEFB +0x20
  5264  03bc  20                	DEFB +0x20
  5265  03bd  40                	DEFB +0x40
  5266  03be  20                	DEFB +0x20
  5267  03bf  20                	DEFB +0x20
  5268  03c0  10                	DEFB +0x10
  5269  03c1  00                	DEFB +0x00
  5270  03c2  20                	DEFB +0x20
  5271  03c3  20                	DEFB +0x20
  5272  03c4  20                	DEFB +0x20
  5273  03c5  20                	DEFB +0x20
  5274  03c6  20                	DEFB +0x20
  5275  03c7  20                	DEFB +0x20
  5276  03c8  20                	DEFB +0x20
  5277  03c9  00                	DEFB +0x00
  5278  03ca  20                	DEFB +0x20
  5279  03cb  10                	DEFB +0x10
  5280  03cc  10                	DEFB +0x10
  5281  03cd  08                	DEFB +0x08
  5282  03ce  10                	DEFB +0x10
  5283  03cf  10                	DEFB +0x10
  5284  03d0  20                	DEFB +0x20
  5285  03d1  00                	DEFB +0x00
  5286  03d2  00                	DEFB +0x00
  5287  03d3  28                	DEFB +0x28
  5288  03d4  50                	DEFB +0x50
  5289  03d5  00                	DEFB +0x00
  5290  03d6  00                	DEFB +0x00
  5291  03d7  00                	DEFB +0x00
  5292  03d8  00                	DEFB +0x00
  5293  03d9  00                	DEFB +0x00
  5294  03da  00                	DEFB 0x00
  5295  03db  00                	DEFB 0x00
  5296  03dc  00                	DEFB 0x00
  5297  03dd  00                	DEFB 0x00
  5298  03de  00                	DEFB 0x00
  5299  03df  00                	DEFB 0x00
  5300  03e0  00                	DEFB 0x00
  5301  03e1  00                	DEFB 0x00
  5302                          	SECTION code_compiler
  5303                          ;	---------------------------------
  5304                          ; Function main
  5305                          ; ---------------------------------
  5306                          _main:
  5307  15d4  cd9915            	call	_init
  5308  15d7  0e41              	ld	c,0x41
  5309                          l_main_00108:
  5310  15d9  c5                	push	bc
  5311  15da  cdb004            	call	_isKeyPressed
  5312  15dd  7d                	ld	a, l
  5313  15de  c1                	pop	bc
  5314  15df  b7                	or	a,a
  5315  15e0  2048              	jr	NZ,l_main_00116
  5316  15e2  47                	ld	b,a
  5317                          l_main_00114:
  5318  15e3  78                	ld	a, b
  5319  15e4  d618              	sub	a,0x18
  5320  15e6  301b              	jr	NC,l_main_00104
  5321  15e8  1600              	ld	d,0x00
  5322                          l_main_00111:
  5323  15ea  7a                	ld	a, d
  5324  15eb  d620              	sub	a,0x20
  5325  15ed  3011              	jr	NC,l_main_00115
  5326  15ef  c5                	push	bc
  5327  15f0  d5                	push	de
  5328  15f1  79                	ld	a, c
  5329  15f2  f5                	push	af
  5330  15f3  33                	inc	sp
  5331  15f4  4a                	ld	c, d
  5332  15f5  c5                	push	bc
  5333  15f6  cda812            	call	_vdp_setCharAtLocationBuf
  5334  15f9  f1                	pop	af
  5335  15fa  33                	inc	sp
  5336  15fb  d1                	pop	de
  5337  15fc  c1                	pop	bc
  5338  15fd  14                	inc	d
  5339  15fe  18ea              	jr	l_main_00111
  5340                          l_main_00115:
  5341  1600  04                	inc	b
  5342  1601  18e0              	jr	l_main_00114
  5343                          l_main_00104:
  5344  1603  0c                	inc	c
  5345  1604  79                	ld	a, c
  5346  1605  d65a              	sub	a,0x5a
  5347  1607  2002              	jr	NZ,l_main_00106
  5348  1609  0e41              	ld	c,0x41
  5349                          l_main_00106:
  5350  160b  210d00            	ld	hl,_vdpIsReady + 0
  5351  160e  3600              	ld	(hl),0x00
  5352  1610  c5                	push	bc
  5353  1611  cd1106            	call	_vdp_waitVDPReadyInt
  5354  1614  cdd312            	call	_vdp_refreshViewPort2
  5355  1617  210100            	ld	hl,0x0001
  5356  161a  e5                	push	hl
  5357  161b  3e01              	ld	a,0x01
  5358  161d  f5                	push	af
  5359  161e  33                	inc	sp
  5360  161f  af                	xor	a, a
  5361  1620  f5                	push	af
  5362  1621  33                	inc	sp
  5363  1622  cda403            	call	_playNoteDelay
  5364  1625  f1                	pop	af
  5365  1626  f1                	pop	af
  5366  1627  c1                	pop	bc
  5367  1628  18af              	jr	l_main_00108
  5368                          l_main_00116:
  5369  162a  c9                	ret
  5370                          	SECTION data_compiler
  5371                          __randomSeed:
  5372  0000  00                	DEFB +0x00
  5373                          __kbdBufferReadPos:
  5374  0001  00                	DEFB +0x00
  5375                          __kbdBufferWritePos:
  5376  0002  00                	DEFB +0x00
  5377                          __lastKeyboardIntVal:
  5378  0003  00                	DEFB +0x00
  5379                          __joyStatus:
  5380  0004  00                	DEFB +0x00
  5381  0005  00                	DEFB 0x00
  5382  0006  00                	DEFB 0x00
  5383  0007  00                	DEFB 0x00
  5384                          _vdp_cursor:
  5385  0008  00                	DEFB +0x00
  5386  0009  00                	DEFB +0x00
  5387                          __vdpReg1Val:
  5388  000a  00                	DEFB +0x00
  5389                          __vdpInterruptEnabled:
  5390  000b  00                	DEFB +0x00
  5391                          _vdpStatusRegVal:
  5392  000c  00                	DEFB +0x00
  5393                          _vdpIsReady:
  5394  000d  00                	DEFB +0x00
  5395                          	SECTION IGNORE
  5396                          
