C:/Users/dj/AppData/Local/Temp/zcc00004160EF232.asm:
     1                          MODULE main_c
     2                          LINE 0, "main.c"
main.c:
                                
     1                          ;--------------------------------------------------------
     2                          ; File Created by SDCC : free open source ANSI-C Compiler
     3                          ; Version 4.2.0 #13081 (MINGW64)
     4                          ;--------------------------------------------------------
     5                          ; Processed by Z88DK
     6                          ;--------------------------------------------------------
     7                          
     8                          	EXTERN __divschar
     9                          	EXTERN __divschar_callee
    10                          	EXTERN __divsint
    11                          	EXTERN __divsint_callee
    12                          	EXTERN __divslong
    13                          	EXTERN __divslong_callee
    14                          	EXTERN __divslonglong
    15                          	EXTERN __divslonglong_callee
    16                          	EXTERN __divsuchar
    17                          	EXTERN __divsuchar_callee
    18                          	EXTERN __divuchar
    19                          	EXTERN __divuchar_callee
    20                          	EXTERN __divuint
    21                          	EXTERN __divuint_callee
    22                          	EXTERN __divulong
    23                          	EXTERN __divulong_callee
    24                          	EXTERN __divulonglong
    25                          	EXTERN __divulonglong_callee
    26                          	EXTERN __divuschar
    27                          	EXTERN __divuschar_callee
    28                          	EXTERN __modschar
    29                          	EXTERN __modschar_callee
    30                          	EXTERN __modsint
    31                          	EXTERN __modsint_callee
    32                          	EXTERN __modslong
    33                          	EXTERN __modslong_callee
    34                          	EXTERN __modslonglong
    35                          	EXTERN __modslonglong_callee
    36                          	EXTERN __modsuchar
    37                          	EXTERN __modsuchar_callee
    38                          	EXTERN __moduchar
    39                          	EXTERN __moduchar_callee
    40                          	EXTERN __moduint
    41                          	EXTERN __moduint_callee
    42                          	EXTERN __modulong
    43                          	EXTERN __modulong_callee
    44                          	EXTERN __modulonglong
    45                          	EXTERN __modulonglong_callee
    46                          	EXTERN __moduschar
    47                          	EXTERN __moduschar_callee
    48                          	EXTERN __mulint
    49                          	EXTERN __mulint_callee
    50                          	EXTERN __mullong
    51                          	EXTERN __mullong_callee
    52                          	EXTERN __mullonglong
    53                          	EXTERN __mullonglong_callee
    54                          	EXTERN __mulschar
    55                          	EXTERN __mulschar_callee
    56                          	EXTERN __mulsuchar
    57                          	EXTERN __mulsuchar_callee
    58                          	EXTERN __muluchar
    59                          	EXTERN __muluchar_callee
    60                          	EXTERN __muluschar
    61                          	EXTERN __muluschar_callee
    62                          	EXTERN __rlslonglong
    63                          	EXTERN __rlslonglong_callee
    64                          	EXTERN __rlulonglong
    65                          	EXTERN __rlulonglong_callee
    66                          	EXTERN __rrslonglong
    67                          	EXTERN __rrslonglong_callee
    68                          	EXTERN __rrulonglong
    69                          	EXTERN __rrulonglong_callee
    70                          	EXTERN ___mulsint2slong
    71                          	EXTERN ___mulsint2slong_callee
    72                          	EXTERN ___muluint2ulong
    73                          	EXTERN ___muluint2ulong_callee
    74                          	EXTERN ___sdcc_call_hl
    75                          	EXTERN ___sdcc_call_iy
    76                          	EXTERN ___sdcc_enter_ix
    77                          	EXTERN banked_call
    78                          	EXTERN _banked_ret
    79                          	EXTERN ___fs2schar
    80                          	EXTERN ___fs2schar_callee
    81                          	EXTERN ___fs2sint
    82                          	EXTERN ___fs2sint_callee
    83                          	EXTERN ___fs2slong
    84                          	EXTERN ___fs2slong_callee
    85                          	EXTERN ___fs2slonglong
    86                          	EXTERN ___fs2slonglong_callee
    87                          	EXTERN ___fs2uchar
    88                          	EXTERN ___fs2uchar_callee
    89                          	EXTERN ___fs2uint
    90                          	EXTERN ___fs2uint_callee
    91                          	EXTERN ___fs2ulong
    92                          	EXTERN ___fs2ulong_callee
    93                          	EXTERN ___fs2ulonglong
    94                          	EXTERN ___fs2ulonglong_callee
    95                          	EXTERN ___fsadd
    96                          	EXTERN ___fsadd_callee
    97                          	EXTERN ___fsdiv
    98                          	EXTERN ___fsdiv_callee
    99                          	EXTERN ___fseq
   100                          	EXTERN ___fseq_callee
   101                          	EXTERN ___fsgt
   102                          	EXTERN ___fsgt_callee
   103                          	EXTERN ___fslt
   104                          	EXTERN ___fslt_callee
   105                          	EXTERN ___fsmul
   106                          	EXTERN ___fsmul_callee
   107                          	EXTERN ___fsneq
   108                          	EXTERN ___fsneq_callee
   109                          	EXTERN ___fssub
   110                          	EXTERN ___fssub_callee
   111                          	EXTERN ___schar2fs
   112                          	EXTERN ___schar2fs_callee
   113                          	EXTERN ___sint2fs
   114                          	EXTERN ___sint2fs_callee
   115                          	EXTERN ___slong2fs
   116                          	EXTERN ___slong2fs_callee
   117                          	EXTERN ___slonglong2fs
   118                          	EXTERN ___slonglong2fs_callee
   119                          	EXTERN ___uchar2fs
   120                          	EXTERN ___uchar2fs_callee
   121                          	EXTERN ___uint2fs
   122                          	EXTERN ___uint2fs_callee
   123                          	EXTERN ___ulong2fs
   124                          	EXTERN ___ulong2fs_callee
   125                          	EXTERN ___ulonglong2fs
   126                          	EXTERN ___ulonglong2fs_callee
   127                          	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
   128                          	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
   129                          	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
   130                          	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
   131                          	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
   132                          	EXTERN ____sdcc_4_ldi_nosave_bc
   133                          	EXTERN ____sdcc_4_ldi_save_bc
   134                          	EXTERN ____sdcc_4_push_hlix
   135                          	EXTERN ____sdcc_4_push_mhl
   136                          	EXTERN ____sdcc_lib_setmem_hl
   137                          	EXTERN ____sdcc_ll_add_de_bc_hl
   138                          	EXTERN ____sdcc_ll_add_de_bc_hlix
   139                          	EXTERN ____sdcc_ll_add_de_hlix_bc
   140                          	EXTERN ____sdcc_ll_add_de_hlix_bcix
   141                          	EXTERN ____sdcc_ll_add_deix_bc_hl
   142                          	EXTERN ____sdcc_ll_add_deix_hlix
   143                          	EXTERN ____sdcc_ll_add_hlix_bc_deix
   144                          	EXTERN ____sdcc_ll_add_hlix_deix_bc
   145                          	EXTERN ____sdcc_ll_add_hlix_deix_bcix
   146                          	EXTERN ____sdcc_ll_asr_hlix_a
   147                          	EXTERN ____sdcc_ll_asr_mbc_a
   148                          	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
   149                          	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
   150                          	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
   151                          	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
   152                          	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
   153                          	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
   154                          	EXTERN ____sdcc_ll_copy_src_hl_dst_de
   155                          	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
   156                          	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
   157                          	EXTERN ____sdcc_ll_lsl_hlix_a
   158                          	EXTERN ____sdcc_ll_lsl_mbc_a
   159                          	EXTERN ____sdcc_ll_lsr_hlix_a
   160                          	EXTERN ____sdcc_ll_lsr_mbc_a
   161                          	EXTERN ____sdcc_ll_push_hlix
   162                          	EXTERN ____sdcc_ll_push_mhl
   163                          	EXTERN ____sdcc_ll_sub_de_bc_hl
   164                          	EXTERN ____sdcc_ll_sub_de_bc_hlix
   165                          	EXTERN ____sdcc_ll_sub_de_hlix_bc
   166                          	EXTERN ____sdcc_ll_sub_de_hlix_bcix
   167                          	EXTERN ____sdcc_ll_sub_deix_bc_hl
   168                          	EXTERN ____sdcc_ll_sub_deix_hlix
   169                          	EXTERN ____sdcc_ll_sub_hlix_bc_deix
   170                          	EXTERN ____sdcc_ll_sub_hlix_deix_bc
   171                          	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
   172                          	EXTERN ____sdcc_load_debc_deix
   173                          	EXTERN ____sdcc_load_dehl_deix
   174                          	EXTERN ____sdcc_load_debc_mhl
   175                          	EXTERN ____sdcc_load_hlde_mhl
   176                          	EXTERN ____sdcc_store_dehl_bcix
   177                          	EXTERN ____sdcc_store_debc_hlix
   178                          	EXTERN ____sdcc_store_debc_mhl
   179                          	EXTERN ____sdcc_cpu_pop_ei
   180                          	EXTERN ____sdcc_cpu_pop_ei_jp
   181                          	EXTERN ____sdcc_cpu_push_di
   182                          	EXTERN ____sdcc_outi
   183                          	EXTERN ____sdcc_outi_128
   184                          	EXTERN ____sdcc_outi_256
   185                          	EXTERN ____sdcc_ldi
   186                          	EXTERN ____sdcc_ldi_128
   187                          	EXTERN ____sdcc_ldi_256
   188                          	EXTERN ____sdcc_4_copy_srcd_hlix_dst_deix
   189                          	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_deix
   190                          	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_deix
   191                          	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_deix
   192                          	EXTERN ____sdcc_4_or_src_dehl_dst_bcix
   193                          	EXTERN ____sdcc_4_xor_src_dehl_dst_bcix
   194                          	EXTERN ____sdcc_4_and_src_dehl_dst_bcix
   195                          	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_debc
   196                          	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_debc
   197                          	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_debc
   198                          	EXTERN ____sdcc_4_cpl_src_mhl_dst_debc
   199                          	EXTERN ____sdcc_4_xor_src_debc_mhl_dst_debc
   200                          	EXTERN ____sdcc_4_or_src_debc_mhl_dst_debc
   201                          	EXTERN ____sdcc_4_and_src_debc_mhl_dst_debc
   202                          	EXTERN ____sdcc_4_and_src_debc_hlix_dst_debc
   203                          	EXTERN ____sdcc_4_or_src_debc_hlix_dst_debc
   204                          	EXTERN ____sdcc_4_xor_src_debc_hlix_dst_debc
   205                          
   206                          ;--------------------------------------------------------
   207                          ; Public variables in this module
   208                          ;--------------------------------------------------------
   209                          	GLOBAL _main
   210                          	GLOBAL _vdp_scrollTextDown
   211                          	GLOBAL _vdp_refreshViewPort
   212                          	GLOBAL _waitVdpISR
   213                          	GLOBAL _isrKeyboard
   214                          	GLOBAL _isrHCCARX
   215                          	GLOBAL _vdpIsReady
   216                          	GLOBAL _vdpStatusRegVal
   217                          	GLOBAL __vdpInterruptEnabled
   218                          	GLOBAL __autoScrollBottomRow
   219                          	GLOBAL __autoScrollTopRow
   220                          	GLOBAL __vdpReg1Val
   221                          	GLOBAL _vdp_cursor
   222                          	GLOBAL __joyStatus
   223                          	GLOBAL __lastKeyboardIntVal
   224                          	GLOBAL __kbdBufferWritePos
   225                          	GLOBAL __kbdBufferReadPos
   226                          	GLOBAL __rxBufferWritePos
   227                          	GLOBAL __rxBufferReadPos
   228                          	GLOBAL __randomSeed
   229                          	GLOBAL __CPM_COLUMN_WIDTH
   230                          	GLOBAL __CLOUD_CPM_KEY
   231                          	GLOBAL __SCREEN_COLOR
   232                          	GLOBAL __LIST_DEVICE
   233                          	GLOBAL __EMULATION_MODE
   234                          	GLOBAL _cpm_cursor
   235                          	GLOBAL __vdpSplitThirds
   236                          	GLOBAL __autoScroll
   237                          	GLOBAL __vdpMode
   238                          	GLOBAL __vdpTextBufferSize
   239                          	GLOBAL __vdpCursorMaxXFull
   240                          	GLOBAL __vdpCursorMaxX
   241                          	GLOBAL __vdpPatternGeneratorTableAddr
   242                          	GLOBAL __vdpColorTableAddr
   243                          	GLOBAL __vdpPatternNameTableAddr
   244                          	GLOBAL __vdpSpriteSizeSelected
   245                          	GLOBAL __vdpSpriteGeneratorTableAddr
   246                          	GLOBAL __vdpSpriteAttributeTableAddr
   247                          	GLOBAL __vdp_ISR
   248                          	GLOBAL __vdp_textBuffer
   249                          	GLOBAL __kbdBuffer
   250                          	GLOBAL __rxBuffer
   251                          	GLOBAL __NOTES_FINE
   252                          	GLOBAL __NOTES_COURSE
   253                          	GLOBAL __vdpCursorMaxYFull
   254                          	GLOBAL __vdpCursorMaxY
   255                          	GLOBAL _initNABULib
   256                          	GLOBAL _initNABULIBAudio
   257                          	GLOBAL _nop
   258                          	GLOBAL _NABU_DisableInterrupts
   259                          	GLOBAL _NABU_EnableInterrupts
   260                          	GLOBAL _RightShift
   261                          	GLOBAL _vt_clearToEndOfScreen
   262                          	GLOBAL _vt_clearToEndOfLine
   263                          	GLOBAL _vt_clearScreen
   264                          	GLOBAL _vt_clearLine
   265                          	GLOBAL _vt_clearToStartOfLine
   266                          	GLOBAL _vt_clearToStartOfScreen
   267                          	GLOBAL _vt_moveCursorDown
   268                          	GLOBAL _vt_cursorHome
   269                          	GLOBAL _vt_moveCursorLeft
   270                          	GLOBAL _vt_moveCursorRight
   271                          	GLOBAL _vt_moveCursorUp
   272                          	GLOBAL _vt_deleteLine
   273                          	GLOBAL _vt_setCursor
   274                          	GLOBAL _vt_insertLine
   275                          	GLOBAL _vt_restoreCursorPosition
   276                          	GLOBAL _vt_backgroundColor
   277                          	GLOBAL _vt_saveCursorPosition
   278                          	GLOBAL _vt_cursorUpAndInsert
   279                          	GLOBAL _vt_wrapOff
   280                          	GLOBAL _vt_wrapOn
   281                          	GLOBAL _vt_normalVideo
   282                          	GLOBAL _vt_reverseVideo
   283                          	GLOBAL _isCloudCPM
   284                          	GLOBAL _ayWrite
   285                          	GLOBAL _ayRead
   286                          	GLOBAL _playNoteDelay
   287                          	GLOBAL _isKeyPressed
   288                          	GLOBAL _getChar
   289                          	GLOBAL _getJoyStatus
   290                          	GLOBAL _readLine
   291                          	GLOBAL _hcca_ping
   292                          	GLOBAL _hcca_isRxBufferAvailable
   293                          	GLOBAL _hcca_getSizeOfDataInBuffer
   294                          	GLOBAL _hcca_readByte
   295                          	GLOBAL _hcca_readUInt16
   296                          	GLOBAL _hcca_readInt16
   297                          	GLOBAL _hcca_readUInt32
   298                          	GLOBAL _hcca_readInt32
   299                          	GLOBAL _hcca_readBytes
   300                          	GLOBAL _hcca_writeByte
   301                          	GLOBAL _hcca_writeUInt32
   302                          	GLOBAL _hcca_writeInt32
   303                          	GLOBAL _hcca_writeUInt16
   304                          	GLOBAL _hcca_writeInt16
   305                          	GLOBAL _hcca_writeString
   306                          	GLOBAL _hcca_writeBytes
   307                          	GLOBAL _vdp_setRegister
   308                          	GLOBAL _vdp_setWriteAddress
   309                          	GLOBAL _vdp_setReadAddress
   310                          	GLOBAL _vdp_enableVDPReadyInt
   311                          	GLOBAL _vdp_waitVDPReadyInt
   312                          	GLOBAL _vdp_disableVDPReadyInt
   313                          	GLOBAL _vdp_addISR
   314                          	GLOBAL _vdp_removeISR
   315                          	GLOBAL _vdp_init
   316                          	GLOBAL _vdp_clearVRAM
   317                          	GLOBAL _vdp_initMSXMode
   318                          	GLOBAL _vdp_initTextMode80
   319                          	GLOBAL _vdp_initTextMode
   320                          	GLOBAL _vdp_initG2Mode
   321                          	GLOBAL _vdp_initMultiColorMode
   322                          	GLOBAL _vdp_clearScreen
   323                          	GLOBAL _vdp_fillScreen
   324                          	GLOBAL _vdp_clearRows
   325                          	GLOBAL _vdp_loadASCIIFont
   326                          	GLOBAL _vdp_loadASCIIFontWithInverse
   327                          	GLOBAL _vdp_putPattern
   328                          	GLOBAL _vdp_loadPatternToId
   329                          	GLOBAL _vdp_loadPatternTable
   330                          	GLOBAL _vdp_loadColorToId
   331                          	GLOBAL _vdp_loadColorTable
   332                          	GLOBAL _vdp_colorizePattern
   333                          	GLOBAL _vdp_plotHires
   334                          	GLOBAL _vdp_plotColor
   335                          	GLOBAL _vdp_disableSprite
   336                          	GLOBAL _vdp_loadSpritePatternNameTable
   337                          	GLOBAL _vdp_spriteInit
   338                          	GLOBAL _vdp_setSpriteColor
   339                          	GLOBAL _vdp_setSpritePosition
   340                          	GLOBAL _vdp_setSpritePositionAndColor
   341                          	GLOBAL _vdp_getSpritePosition
   342                          	GLOBAL _vdp_print
   343                          	GLOBAL _vdp_printJustified
   344                          	GLOBAL _vdp_printColorized
   345                          	GLOBAL _vdp_printPart
   346                          	GLOBAL _vdp_newLine
   347                          	GLOBAL _vdp_setBackDropColor
   348                          	GLOBAL _vdp_setCursor2
   349                          	GLOBAL _vdp_setCursor
   350                          	GLOBAL _vdp_setTextColor
   351                          	GLOBAL _vdp_write
   352                          	GLOBAL _vdp_writeCharAtLocation
   353                          	GLOBAL _vdp_getCharAtLocationVRAM
   354                          	GLOBAL _vdp_getCharAtLocationBuf
   355                          	GLOBAL _vdp_setCharAtLocationBuf
   356                          	GLOBAL _vdp_scrollTextUp
   357                          	GLOBAL _vdp_writeUInt8ToBinary
   358                          	GLOBAL _vdp_writeUInt16ToBinary
   359                          	GLOBAL _vdp_writeUInt32ToBinary
   360                          	GLOBAL _initGame
   361                          	GLOBAL _drawBoard
   362                          	GLOBAL _checkWin
   363                          	GLOBAL _playGame
   364                          ;--------------------------------------------------------
   365                          ; Externals used
   366                          ;--------------------------------------------------------
   367                          	GLOBAL _vt_foregroundColor
   368                          	GLOBAL _fputc_cons_ansi
   369                          	GLOBAL _fputc_cons_generic
   370                          	GLOBAL _fputc_cons_native
   371                          	GLOBAL _set_fputc_cons
   372                          	GLOBAL _perror
   373                          	GLOBAL _printk
   374                          	GLOBAL _getk_inkey
   375                          	GLOBAL _getk
   376                          	GLOBAL _remove
   377                          	GLOBAL _rename
   378                          	GLOBAL _fdgetpos
   379                          	GLOBAL _fdtell
   380                          	GLOBAL _fabandon
   381                          	GLOBAL _puts_cons
   382                          	GLOBAL _fgets_cons
   383                          	GLOBAL _fputc_cons
   384                          	GLOBAL _fgetc_cons_inkey
   385                          	GLOBAL _fgetc_cons
   386                          	GLOBAL _fchkstd
   387                          	GLOBAL _getarg
   388                          	GLOBAL _vsscanf
   389                          	GLOBAL _vfscanf
   390                          	GLOBAL _sscanf
   391                          	GLOBAL _fscanf
   392                          	GLOBAL _scanf
   393                          	GLOBAL _printn
   394                          	GLOBAL _vsnprintf
   395                          	GLOBAL _vfprintf
   396                          	GLOBAL _snprintf
   397                          	GLOBAL _sprintf
   398                          	GLOBAL _fprintf
   399                          	GLOBAL _printf
   400                          	GLOBAL _gets
   401                          	GLOBAL _fwrite
   402                          	GLOBAL _fread
   403                          	GLOBAL _fseek
   404                          	GLOBAL _fgetpos
   405                          	GLOBAL _ftell
   406                          	GLOBAL _puts
   407                          	GLOBAL _ferror
   408                          	GLOBAL _feof
   409                          	GLOBAL _ungetc
   410                          	GLOBAL _fgetc
   411                          	GLOBAL _fputc_callee
   412                          	GLOBAL _fputs_callee
   413                          	GLOBAL _fputc
   414                          	GLOBAL _fputs
   415                          	GLOBAL _fgets
   416                          	GLOBAL _closeall
   417                          	GLOBAL _fflush
   418                          	GLOBAL _fclose
   419                          	GLOBAL _funopen
   420                          	GLOBAL _fmemopen
   421                          	GLOBAL __freopen1
   422                          	GLOBAL _fdopen
   423                          	GLOBAL _freopen
   424                          	GLOBAL _fopen
   425                          	GLOBAL _fileno
   426                          	GLOBAL _fopen_zsock
   427                          	GLOBAL _rnd_erase
   428                          	GLOBAL _rnd_saveblock
   429                          	GLOBAL _rnd_loadblock
   430                          	GLOBAL _rmdir
   431                          	GLOBAL _getwd
   432                          	GLOBAL _chdir
   433                          	GLOBAL _getcwd
   434                          	GLOBAL _writebyte
   435                          	GLOBAL _readbyte
   436                          	GLOBAL _lseek
   437                          	GLOBAL _write
   438                          	GLOBAL _read
   439                          	GLOBAL _close
   440                          	GLOBAL _creat
   441                          	GLOBAL _open
   442                          	GLOBAL _unbcd
   443                          	GLOBAL _wcmatch
   444                          	GLOBAL _extract_bits_callee
   445                          	GLOBAL _extract_bits
   446                          	GLOBAL _msleep
   447                          	GLOBAL _sleep
   448                          	GLOBAL _t_delay
   449                          	GLOBAL _wpeek
   450                          	GLOBAL _bpeek
   451                          	GLOBAL _wpoke_callee
   452                          	GLOBAL _wpoke
   453                          	GLOBAL _bpoke_callee
   454                          	GLOBAL _bpoke
   455                          	GLOBAL _swapendian
   456                          	GLOBAL _outp_callee
   457                          	GLOBAL _outp
   458                          	GLOBAL _inp
   459                          	GLOBAL _isqrt
   460                          	GLOBAL _labs
   461                          	GLOBAL _abs
   462                          	GLOBAL __ldivu__callee
   463                          	GLOBAL __ldivu_
   464                          	GLOBAL __ldiv__callee
   465                          	GLOBAL __ldiv_
   466                          	GLOBAL __divu__callee
   467                          	GLOBAL __divu_
   468                          	GLOBAL __div__callee
   469                          	GLOBAL __div_
   470                          	GLOBAL _qsort_sdcc_callee
   471                          	GLOBAL _qsort_sdcc
   472                          	GLOBAL _qsort_sccz80_callee
   473                          	GLOBAL _qsort_sccz80
   474                          	GLOBAL _l_qsort_callee
   475                          	GLOBAL _l_qsort
   476                          	GLOBAL _l_bsearch_callee
   477                          	GLOBAL _l_bsearch
   478                          	GLOBAL _getopt
   479                          	GLOBAL _unsetenv
   480                          	GLOBAL _setenv
   481                          	GLOBAL _getenv_r
   482                          	GLOBAL _getenv
   483                          	GLOBAL _atexit
   484                          	GLOBAL _exit
   485                          	GLOBAL _HeapInfo_callee
   486                          	GLOBAL _HeapInfo
   487                          	GLOBAL _HeapRealloc_callee
   488                          	GLOBAL _HeapRealloc
   489                          	GLOBAL _HeapAlloc_callee
   490                          	GLOBAL _HeapAlloc
   491                          	GLOBAL _HeapFree_callee
   492                          	GLOBAL _HeapFree
   493                          	GLOBAL _HeapCalloc_callee
   494                          	GLOBAL _HeapCalloc
   495                          	GLOBAL _HeapSbrk_callee
   496                          	GLOBAL _HeapSbrk
   497                          	GLOBAL _HeapCreate
   498                          	GLOBAL _mallinfo_callee
   499                          	GLOBAL _mallinfo
   500                          	GLOBAL _realloc_callee
   501                          	GLOBAL _realloc
   502                          	GLOBAL _malloc
   503                          	GLOBAL _free
   504                          	GLOBAL _calloc_callee
   505                          	GLOBAL _calloc
   506                          	GLOBAL _sbrk_callee
   507                          	GLOBAL _sbrk
   508                          	GLOBAL _mallinit
   509                          	GLOBAL _srand
   510                          	GLOBAL _rand
   511                          	GLOBAL _ulltoa_callee
   512                          	GLOBAL _ulltoa
   513                          	GLOBAL _strtoull_callee
   514                          	GLOBAL _strtoull
   515                          	GLOBAL _strtoll_callee
   516                          	GLOBAL _strtoll
   517                          	GLOBAL _lltoa_callee
   518                          	GLOBAL _lltoa
   519                          	GLOBAL _atoll_callee
   520                          	GLOBAL _atoll
   521                          	GLOBAL _utoa_callee
   522                          	GLOBAL _utoa
   523                          	GLOBAL _ultoa_callee
   524                          	GLOBAL _ultoa
   525                          	GLOBAL _strtoul_callee
   526                          	GLOBAL _strtoul
   527                          	GLOBAL _strtol_callee
   528                          	GLOBAL _strtol
   529                          	GLOBAL _ltoa_callee
   530                          	GLOBAL _ltoa
   531                          	GLOBAL _itoa_callee
   532                          	GLOBAL _itoa
   533                          	GLOBAL _atol
   534                          	GLOBAL _atoi
   535                          	GLOBAL __sgoioblk_end
   536                          	GLOBAL __sgoioblk
   537                          	GLOBAL __FOPEN_MAX
   538                          	GLOBAL __RND_BLOCKSIZE
   539                          	GLOBAL _optreset
   540                          	GLOBAL _optopt
   541                          	GLOBAL _optind
   542                          	GLOBAL _opterr
   543                          	GLOBAL _optarg
   544                          ;--------------------------------------------------------
   545                          ; special function registers
   546                          ;--------------------------------------------------------
   547                          defc _IO_VDPDATA	=	0x00a0
   548                          defc _IO_VDPLATCH	=	0x00a1
   549                          defc _IO_AYDATA	=	0x0040
   550                          defc _IO_AYLATCH	=	0x0041
   551                          defc _IO_HCCA	=	0x0080
   552                          defc _IO_KEYBOARD	=	0x0090
   553                          defc _IO_KEYBOARD_STATUS	=	0x0091
   554                          defc _IO_CONTROL	=	0x0000
   555                          ;--------------------------------------------------------
   556                          ; ram data
   557                          ;--------------------------------------------------------
   558                          	SECTION bss_compiler
   559                          __rxBuffer:
   560  0000  0000000000000000  	DEFS 256
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
   561                          __kbdBuffer:
   562  0100  0000000000000000  	DEFS 256
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
   563                          __vdp_textBuffer:
   564  0200  0000000000000000  	DEFS 1920
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
   565                          __vdp_ISR:
   566  0980  0000              	DEFS 2
   567                          __vdpSpriteAttributeTableAddr:
   568  0982  0000              	DEFS 2
   569                          __vdpSpriteGeneratorTableAddr:
   570  0984  0000              	DEFS 2
   571                          __vdpSpriteSizeSelected:
   572  0986  00                	DEFS 1
   573                          __vdpPatternNameTableAddr:
   574  0987  0000              	DEFS 2
   575                          __vdpColorTableAddr:
   576  0989  0000              	DEFS 2
   577                          __vdpPatternGeneratorTableAddr:
   578  098b  0000              	DEFS 2
   579                          __vdpCursorMaxX:
   580  098d  00                	DEFS 1
   581                          __vdpCursorMaxXFull:
   582  098e  00                	DEFS 1
   583                          __vdpTextBufferSize:
   584  098f  0000              	DEFS 2
   585                          __vdpMode:
   586  0991  00                	DEFS 1
   587                          __autoScroll:
   588  0992  00                	DEFS 1
   589                          __vdpSplitThirds:
   590  0993  00                	DEFS 1
   591                          defc _cpm_cursor	=	0xff10
   592                          defc __EMULATION_MODE	=	0xff12
   593                          defc __LIST_DEVICE	=	0xff13
   594                          defc __SCREEN_COLOR	=	0xff25
   595                          defc __CLOUD_CPM_KEY	=	0xff29
   596                          defc __CPM_COLUMN_WIDTH	=	0xff2e
   597                          ;--------------------------------------------------------
   598                          ; ram data
   599                          ;--------------------------------------------------------
   600                          
   601                          IF 0
   602                          
   603                          ; .area _INITIALIZED removed by z88dk
   604                          
   605                          __randomSeed:
   606                          	DEFS 1
   607                          __rxBufferReadPos:
   608                          	DEFS 1
   609                          __rxBufferWritePos:
   610                          	DEFS 1
   611                          __kbdBufferReadPos:
   612                          	DEFS 1
   613                          __kbdBufferWritePos:
   614                          	DEFS 1
   615                          __lastKeyboardIntVal:
   616                          	DEFS 1
   617                          __joyStatus:
   618                          	DEFS 4
   619                          _vdp_cursor:
   620                          	DEFS 2
   621                          __vdpReg1Val:
   622                          	DEFS 1
   623                          __autoScrollTopRow:
   624                          	DEFS 1
   625                          __autoScrollBottomRow:
   626                          	DEFS 1
   627                          __vdpInterruptEnabled:
   628                          	DEFS 1
   629                          _vdpStatusRegVal:
   630                          	DEFS 1
   631                          _vdpIsReady:
   632                          	DEFS 1
   633                          
   634                          ENDIF
   635                          
   636                          ;--------------------------------------------------------
   637                          ; absolute external ram data
   638                          ;--------------------------------------------------------
   639                          	SECTION IGNORE
   640                          ;--------------------------------------------------------
   641                          ; global & static initialisations
   642                          ;--------------------------------------------------------
   643                          	SECTION code_crt_init
   644                          ;--------------------------------------------------------
   645                          ; Home
   646                          ;--------------------------------------------------------
   647                          	SECTION IGNORE
   648                          ;--------------------------------------------------------
   649                          ; code
   650                          ;--------------------------------------------------------
   651                          	SECTION code_compiler
   652                          ;	---------------------------------
   653                          ; Function initNABULib
   654                          ; ---------------------------------
   655                          _initNABULib:
   656  0000  3e00              	ld	a,0x03
   657  0002  d300              	out	(_IO_CONTROL), a
   658  0004  cd0000            	call	_NABU_DisableInterrupts
   659  0007  f5                	push	af
   660  0008  ed5f              	ld	a, r
   661  000a  320000            	ld	(__randomSeed), a
   662  000d  f1                	pop	af
   663  000e  3a0000            	ld	a, (__randomSeed+0)
   664  0011  6f                	ld	l, a
   665  0012  2600              	ld	h,0x00
   666  0014  cd0000            	call	_srand
   667  0017  ed5e              	IM	2
   668  0019  3e00              	ld	a, 0xff
   669  001b  ed47              	ld	i, a
   670  001d  210000            	ld	hl, _isrHCCARX
   671  0020  220000            	ld	(0xff00), hl
   672  0023  210000            	ld	hl, _isrKeyboard
   673  0026  220000            	ld	(0xff00 + 4), hl
   674  0029  3e00              	ld	a,0x0e
   675  002b  f5                	push	af
   676  002c  33                	inc	sp
   677  002d  cd0000            	call	_ayRead
   678  0030  33                	inc	sp
   679  0031  7d                	ld	a, l
   680  0032  cbff              	set	7, a
   681  0034  cbef              	set	5, a
   682  0036  57                	ld	d,a
   683  0037  1e00              	ld	e,0x0e
   684  0039  d5                	push	de
   685  003a  cd0000            	call	_ayWrite
   686  003d  f1                	pop	af
   687  003e  cd0000            	call	_NABU_EnableInterrupts
   688  0041  c30000            	jp	_initNABULIBAudio
   689                          	SECTION rodata_compiler
   690                          __vdpCursorMaxY:
   691  0000  00                	DEFB +0x17
   692                          __vdpCursorMaxYFull:
   693  0001  00                	DEFB +0x18
   694                          __NOTES_COURSE:
   695  0002  00                	DEFB +0x0d
   696  0003  00                	DEFB +0x0c
   697  0004  00                	DEFB +0x0b
   698  0005  00                	DEFB +0x0b
   699  0006  00                	DEFB +0x0a
   700  0007  00                	DEFB +0x0a
   701  0008  00                	DEFB +0x09
   702  0009  00                	DEFB +0x08
   703  000a  00                	DEFB +0x08
   704  000b  00                	DEFB +0x07
   705  000c  00                	DEFB +0x07
   706  000d  00                	DEFB +0x07
   707  000e  00                	DEFB +0x06
   708  000f  00                	DEFB +0x06
   709  0010  00                	DEFB +0x05
   710  0011  00                	DEFB +0x05
   711  0012  05                	DEFB +0x05
   712  0013  05                	DEFB +0x05
   713  0014  04                	DEFB +0x04
   714  0015  04                	DEFB +0x04
   715  0016  04                	DEFB +0x04
   716  0017  03                	DEFB +0x03
   717  0018  03                	DEFB +0x03
   718  0019  03                	DEFB +0x03
   719  001a  03                	DEFB +0x03
   720  001b  03                	DEFB +0x03
   721  001c  02                	DEFB +0x02
   722  001d  02                	DEFB +0x02
   723  001e  02                	DEFB +0x02
   724  001f  02                	DEFB +0x02
   725  0020  02                	DEFB +0x02
   726  0021  02                	DEFB +0x02
   727  0022  02                	DEFB +0x02
   728  0023  01                	DEFB +0x01
   729  0024  01                	DEFB +0x01
   730  0025  01                	DEFB +0x01
   731  0026  01                	DEFB +0x01
   732  0027  01                	DEFB +0x01
   733  0028  01                	DEFB +0x01
   734  0029  01                	DEFB +0x01
   735  002a  01                	DEFB +0x01
   736  002b  01                	DEFB +0x01
   737  002c  01                	DEFB +0x01
   738  002d  01                	DEFB +0x01
   739  002e  01                	DEFB +0x01
   740  002f  00                	DEFB +0x00
   741  0030  00                	DEFB +0x00
   742  0031  00                	DEFB +0x00
   743  0032  00                	DEFB +0x00
   744  0033  00                	DEFB +0x00
   745  0034  00                	DEFB +0x00
   746  0035  00                	DEFB +0x00
   747  0036  00                	DEFB +0x00
   748  0037  00                	DEFB +0x00
   749  0038  00                	DEFB +0x00
   750  0039  00                	DEFB +0x00
   751  003a  00                	DEFB +0x00
   752  003b  00                	DEFB +0x00
   753  003c  00                	DEFB +0x00
   754  003d  00                	DEFB +0x00
   755  003e  00                	DEFB +0x00
   756  003f  00                	DEFB +0x00
   757  0040  00                	DEFB +0x00
   758  0041  00                	DEFB +0x00
   759  0042  00                	DEFB +0x00
   760  0043  00                	DEFB +0x00
   761  0044  00                	DEFB +0x00
   762  0045  00                	DEFB +0x00
   763  0046  00                	DEFB +0x00
   764  0047  00                	DEFB +0x00
   765  0048  00                	DEFB +0x00
   766  0049  00                	DEFB +0x00
   767                          __NOTES_FINE:
   768  004a  00                	DEFB +0x5c
   769  004b  00                	DEFB +0x9c
   770  004c  00                	DEFB +0xe7
   771  004d  00                	DEFB +0x3c
   772  004e  00                	DEFB +0x9b
   773  004f  00                	DEFB +0x02
   774  0050  00                	DEFB +0x72
   775  0051  00                	DEFB +0xeb
   776  0052  00                	DEFB +0x6a
   777  0053  00                	DEFB +0xf2
   778  0054  00                	DEFB +0x7f
   779  0055  00                	DEFB +0x14
   780  0056  00                	DEFB +0xae
   781  0057  00                	DEFB +0x4e
   782  0058  00                	DEFB +0xf3
   783  0059  00                	DEFB +0x9e
   784  005a  00                	DEFB +0x4d
   785  005b  00                	DEFB +0x01
   786  005c  00                	DEFB +0xb9
   787  005d  00                	DEFB +0x75
   788  005e  00                	DEFB +0x35
   789  005f  00                	DEFB +0xf9
   790  0060  00                	DEFB +0xbf
   791  0061  00                	DEFB +0x8a
   792  0062  00                	DEFB +0x57
   793  0063  00                	DEFB +0x27
   794  0064  00                	DEFB +0xf9
   795  0065  00                	DEFB +0xcf
   796  0066  00                	DEFB +0xa6
   797  0067  00                	DEFB +0x80
   798  0068  00                	DEFB +0x5c
   799  0069  00                	DEFB +0x3a
   800  006a  00                	DEFB +0x1a
   801  006b  00                	DEFB +0xfc
   802  006c  00                	DEFB +0xdf
   803  006d  00                	DEFB +0xc5
   804  006e  00                	DEFB +0xab
   805  006f  00                	DEFB +0x93
   806  0070  00                	DEFB +0x7c
   807  0071  00                	DEFB +0x67
   808  0072  00                	DEFB +0x53
   809  0073  00                	DEFB +0x40
   810  0074  00                	DEFB +0x2e
   811  0075  00                	DEFB +0x1d
   812  0076  00                	DEFB +0x0d
   813  0077  00                	DEFB +0xfe
   814  0078  00                	DEFB +0xef
   815  0079  00                	DEFB +0xe2
   816  007a  00                	DEFB +0xd5
   817  007b  00                	DEFB +0xc9
   818  007c  00                	DEFB +0xbe
   819  007d  00                	DEFB +0xb3
   820  007e  00                	DEFB +0xa9
   821  007f  00                	DEFB +0xa0
   822  0080  00                	DEFB +0x97
   823  0081  00                	DEFB +0x8e
   824  0082  00                	DEFB +0x86
   825  0083  00                	DEFB +0x7f
   826  0084  00                	DEFB +0x77
   827  0085  00                	DEFB +0x71
   828  0086  00                	DEFB +0x6a
   829  0087  00                	DEFB +0x64
   830  0088  00                	DEFB +0x5f
   831  0089  00                	DEFB +0x59
   832  008a  00                	DEFB +0x54
   833  008b  00                	DEFB +0x50
   834  008c  00                	DEFB +0x4b
   835  008d  00                	DEFB +0x47
   836  008e  00                	DEFB +0x43
   837  008f  00                	DEFB +0x3f
   838  0090  00                	DEFB +0x3b
   839  0091  00                	DEFB +0x38
   840                          	SECTION code_compiler
   841                          ;	---------------------------------
   842                          ; Function initNABULIBAudio
   843                          ; ---------------------------------
   844                          _initNABULIBAudio:
   845  0044  00                	xor	a, a
   846  0045  00                	ld	d,a
   847  0046  0006              	ld	e,0x06
   848  0048  00                	push	de
   849  0049  005f04            	call	_ayWrite
   850  004c  e7                	pop	af
   851  004d  3c                	xor	a, a
   852  004e  9b                	ld	d,a
   853  004f  0208              	ld	e,0x08
   854  0051  eb                	push	de
   855  0052  6a5f04            	call	_ayWrite
   856  0055  14                	pop	af
   857  0056  ae                	xor	a, a
   858  0057  4e                	ld	d,a
   859  0058  f309              	ld	e,0x09
   860  005a  4d                	push	de
   861  005b  015f04            	call	_ayWrite
   862  005e  35                	pop	af
   863  005f  f9                	xor	a, a
   864  0060  bf                	ld	d,a
   865  0061  8a0a              	ld	e,0x0a
   866  0063  27                	push	de
   867  0064  f95f04            	call	_ayWrite
   868  0067  80                	pop	af
   869  0068  5c0778            	ld	de,0x7807
   870  006b  fc                	push	de
   871  006c  df5f04            	call	_ayWrite
   872  006f  93                	pop	af
   873  0070  7c                	xor	a, a
   874  0071  67                	ld	d,a
   875  0072  530b              	ld	e,0x0b
   876  0074  2e                	push	de
   877  0075  1d5f04            	call	_ayWrite
   878  0078  ef                	pop	af
   879  0079  e2                	xor	a, a
   880  007a  d5                	ld	d,a
   881  007b  c90c              	ld	e,0x0c
   882  007d  b3                	push	de
   883  007e  a95f04            	call	_ayWrite
   884  0081  8e                	pop	af
   885  0082  86                	xor	a, a
   886  0083  7f                	ld	d,a
   887  0084  770d              	ld	e,0x0d
   888  0086  6a                	push	de
   889  0087  645f04            	call	_ayWrite
   890  008a  54                	pop	af
   891  008b  50                	ret
   892                          	SECTION code_compiler
   893                          ;	---------------------------------
   894                          ; Function nop
   895                          ; ---------------------------------
   896                          _nop:
   897  008c  4b                	NOP
   898  008d  47                	ret
   899                          	SECTION code_compiler
   900                          ;	---------------------------------
   901                          ; Function NABU_DisableInterrupts
   902                          ; ---------------------------------
   903                          _NABU_DisableInterrupts:
   904  008e  43                	di
   905  008f  3f                	ret
   906                          	SECTION code_compiler
   907                          ;	---------------------------------
   908                          ; Function NABU_EnableInterrupts
   909                          ; ---------------------------------
   910                          _NABU_EnableInterrupts:
   911  0090  3b                	ei
   912  0091  38                	ret
   913                          	SECTION code_compiler
   914                          ;	---------------------------------
   915                          ; Function RightShift
   916                          ; ---------------------------------
   917                          _RightShift:
   918  0092  dde5              	push	ix
   919  0094  dd210000          	ld	ix,0
   920  0098  dd39              	add	ix,sp
   921  009a  f5                	push	af
   922  009b  f5                	push	af
   923  009c  dd4e00            	ld	c,(ix+6)
   924  009f  dd4600            	ld	b,(ix+7)
   925  00a2  0b                	dec	bc
   926  00a3  dd6e00            	ld	l,(ix+4)
   927  00a6  dd6600            	ld	h,(ix+5)
   928  00a9  09                	add	hl, bc
   929  00aa  eb                	ex	de, hl
   930  00ab  dd4e00            	ld	c,(ix+8)
   931  00ae  0600              	ld	b,0x00
   932  00b0  7b                	ld	a, e
   933  00b1  91                	sub	a, c
   934  00b2  dd7700            	ld	(ix-2),a
   935  00b5  7a                	ld	a, d
   936  00b6  98                	sbc	a, b
   937  00b7  dd7700            	ld	(ix-1),a
   938  00ba  dd7e00            	ld	a,(ix+4)
   939  00bd  c600              	add	a,0xff
   940  00bf  dd7700            	ld	(ix-4),a
   941  00c2  dd7e00            	ld	a,(ix+5)
   942  00c5  ce00              	adc	a,0xff
   943  00c7  dd7700            	ld	(ix-3),a
   944                          l_RightShift_00101:
   945  00ca  dd7e00            	ld	a,(ix-2)
   946  00cd  dd9600            	sub	a,(ix-4)
   947  00d0  2000              	jr	NZ,l_RightShift_00131
   948  00d2  dd7e00            	ld	a,(ix-1)
   949  00d5  dd9600            	sub	a,(ix-3)
   950  00d8  2800              	jr	Z,l_RightShift_00103
   951                          l_RightShift_00131:
   952  00da  dd6e00            	ld	l,(ix-2)
   953  00dd  dd6600            	ld	h,(ix-1)
   954  00e0  7e                	ld	a, (hl)
   955  00e1  12                	ld	(de), a
   956  00e2  1b                	dec	de
   957  00e3  dd6e00            	ld	l,(ix-2)
   958  00e6  dd6600            	ld	h,(ix-1)
   959  00e9  2b                	dec	hl
   960  00ea  dd7500            	ld	(ix-2),l
   961  00ed  dd7400            	ld	(ix-1),h
   962  00f0  1800              	jr	l_RightShift_00101
   963                          l_RightShift_00103:
   964  00f2  0b                	dec	bc
   965  00f3  dd6e00            	ld	l,(ix+4)
   966  00f6  dd6600            	ld	h,(ix+5)
   967  00f9  09                	add	hl, bc
   968                          l_RightShift_00104:
   969  00fa  7d                	ld	a, l
   970  00fb  dd9600            	sub	a,(ix-4)
   971  00fe  2000              	jr	NZ,l_RightShift_00132
   972  0100  7c                	ld	a, h
   973  0101  dd9600            	sub	a,(ix-3)
   974  0104  2800              	jr	Z,l_RightShift_00107
   975                          l_RightShift_00132:
   976  0106  3600              	ld	(hl),0x20
   977  0108  2b                	dec	hl
   978  0109  1800              	jr	l_RightShift_00104
   979                          l_RightShift_00107:
   980  010b  ddf9              	ld	sp, ix
   981  010d  dde1              	pop	ix
   982  010f  c9                	ret
   983                          	SECTION code_compiler
   984                          ;	---------------------------------
   985                          ; Function isrHCCARX
   986                          ; ---------------------------------
   987                          _isrHCCARX:
   988  0110  c5                	push	bc
   989  0111  d5                	push	de
   990  0112  e5                	push	hl
   991  0113  f5                	push	af
   992  0114  010000            	ld	bc, __rxBuffer+0
   993  0117  2a0000            	ld	hl, (__rxBufferWritePos)
   994  011a  2600              	ld	h, 0x00
   995  011c  09                	add	hl, bc
   996  011d  db00              	in	a, (_IO_HCCA)
   997  011f  77                	ld	(hl), a
   998  0120  3a0000            	ld	a, (__rxBufferWritePos+0)
   999  0123  3c                	inc	a
  1000  0124  320000            	ld	(__rxBufferWritePos+0), a
  1001  0127  f1                	pop	af
  1002  0128  e1                	pop	hl
  1003  0129  d1                	pop	de
  1004  012a  c1                	pop	bc
  1005  012b  fb                	ei
  1006  012c  ed4d              	reti
  1007                          ;	---------------------------------
  1008                          ; Function isrKeyboard
  1009                          ; ---------------------------------
  1010                          _isrKeyboard:
  1011  012e  c5                	push	bc
  1012  012f  d5                	push	de
  1013  0130  e5                	push	hl
  1014  0131  f5                	push	af
  1015  0132  fde5              	push	iy
  1016  0134  fd210000          	ld	iy, 0
  1017  0138  db00              	in	a, (_IO_KEYBOARD)
  1018  013a  4f                	ld	c,a
  1019  013b  d600              	sub	a,0x80
  1020  013d  3800              	jr	C,l_isrKeyboard_00111
  1021  013f  3e00              	ld	a,0x83
  1022  0141  91                	sub	a, c
  1023  0142  3800              	jr	C,l_isrKeyboard_00111
  1024  0144  fd210000          	ld	iy,__lastKeyboardIntVal
  1025  0148  fd7100            	ld	(iy+0),c
  1026  014b  1800              	jr	l_isrKeyboard_00112
  1027                          l_isrKeyboard_00111:
  1028  014d  79                	ld	a, c
  1029  014e  d600              	sub	a,0x90
  1030  0150  3800              	jr	C,l_isrKeyboard_00107
  1031  0152  3e00              	ld	a,0x95
  1032  0154  91                	sub	a, c
  1033  0155  3000              	jr	NC,l_isrKeyboard_00112
  1034                          l_isrKeyboard_00107:
  1035  0157  3a0000            	ld	a, (__lastKeyboardIntVal+0)
  1036  015a  fe00              	cp	a,0x80
  1037  015c  2800              	jr	Z,l_isrKeyboard_00101
  1038  015e  fe00              	cp	a,0x81
  1039  0160  2800              	jr	Z,l_isrKeyboard_00102
  1040  0162  fe00              	cp	a,0x82
  1041  0164  2800              	jr	Z,l_isrKeyboard_00103
  1042  0166  d600              	sub	a,0x83
  1043  0168  2800              	jr	Z,l_isrKeyboard_00104
  1044  016a  1800              	jr	l_isrKeyboard_00105
  1045                          l_isrKeyboard_00101:
  1046  016c  fd210000          	ld	iy,__lastKeyboardIntVal
  1047  0170  fd360000          	ld	(iy+0),0x00
  1048  0174  210000            	ld	hl,__joyStatus
  1049  0177  71                	ld	(hl), c
  1050  0178  1800              	jr	l_isrKeyboard_00112
  1051                          l_isrKeyboard_00102:
  1052  017a  fd210000          	ld	iy,__lastKeyboardIntVal
  1053  017e  fd360000          	ld	(iy+0),0x00
  1054  0182  210000            	ld	hl, +(__joyStatus + 1)
  1055  0185  71                	ld	(hl), c
  1056  0186  1800              	jr	l_isrKeyboard_00112
  1057                          l_isrKeyboard_00103:
  1058  0188  fd210000          	ld	iy,__lastKeyboardIntVal
  1059  018c  fd360000          	ld	(iy+0),0x00
  1060  0190  210000            	ld	hl, +(__joyStatus + 2)
  1061  0193  71                	ld	(hl), c
  1062  0194  1800              	jr	l_isrKeyboard_00112
  1063                          l_isrKeyboard_00104:
  1064  0196  fd210000          	ld	iy,__lastKeyboardIntVal
  1065  019a  fd360000          	ld	(iy+0),0x00
  1066  019e  210000            	ld	hl, +(__joyStatus + 3)
  1067  01a1  71                	ld	(hl), c
  1068  01a2  1800              	jr	l_isrKeyboard_00112
  1069                          l_isrKeyboard_00105:
  1070  01a4  210000            	ld	hl,__kbdBuffer+0
  1071  01a7  ed5b0000          	ld	de, (__kbdBufferWritePos)
  1072  01ab  1600              	ld	d,0x00
  1073  01ad  19                	add	hl, de
  1074  01ae  71                	ld	(hl), c
  1075  01af  3a0000            	ld	a, (__kbdBufferWritePos+0)
  1076  01b2  3c                	inc	a
  1077  01b3  320000            	ld	(__kbdBufferWritePos+0), a
  1078                          l_isrKeyboard_00112:
  1079  01b6  fde1              	pop	iy
  1080  01b8  f1                	pop	af
  1081  01b9  e1                	pop	hl
  1082  01ba  d1                	pop	de
  1083  01bb  c1                	pop	bc
  1084  01bc  fb                	ei
  1085  01bd  ed4d              	reti
  1086                          ;	---------------------------------
  1087                          ; Function vt_clearToEndOfScreen
  1088                          ; ---------------------------------
  1089                          _vt_clearToEndOfScreen:
  1090  01bf  210000            	ld	hl,0x001b
  1091  01c2  e5                	push	hl
  1092  01c3  210000            	ld	hl,___str_0
  1093  01c6  e5                	push	hl
  1094  01c7  cd0000            	call	_printf
  1095  01ca  f1                	pop	af
  1096  01cb  f1                	pop	af
  1097  01cc  c9                	ret
  1098                          	SECTION rodata_compiler
  1099                          ___str_0:
  1100  0092  25634a            	DEFM "%cJ"
  1101  0095  00                	DEFB 0x00
  1102                          	SECTION code_compiler
  1103                          ;	---------------------------------
  1104                          ; Function vt_clearToEndOfLine
  1105                          ; ---------------------------------
  1106                          _vt_clearToEndOfLine:
  1107  01cd  210000            	ld	hl,0x001b
  1108  01d0  e5                	push	hl
  1109  01d1  210000            	ld	hl,___str_1
  1110  01d4  e5                	push	hl
  1111  01d5  cd0000            	call	_printf
  1112  01d8  f1                	pop	af
  1113  01d9  f1                	pop	af
  1114  01da  c9                	ret
  1115                          	SECTION rodata_compiler
  1116                          ___str_1:
  1117  0096  00004b            	DEFM "%cK"
  1118  0099  00                	DEFB 0x00
  1119                          	SECTION code_compiler
  1120                          ;	---------------------------------
  1121                          ; Function vt_clearScreen
  1122                          ; ---------------------------------
  1123                          _vt_clearScreen:
  1124  01db  3a0000            	ld	a, (__EMULATION_MODE+0)
  1125  01de  b7                	or	a, a
  1126  01df  2000              	jr	NZ,l_vt_clearScreen_00102
  1127  01e1  210000            	ld	hl,0x001a
  1128  01e4  e5                	push	hl
  1129  01e5  210000            	ld	hl, +(__sgoioblk + 10)
  1130  01e8  e5                	push	hl
  1131  01e9  cd0000            	call	_fputc_callee
  1132  01ec  1800              	jr	l_vt_clearScreen_00104
  1133                          l_vt_clearScreen_00102:
  1134  01ee  210000            	ld	hl,0x001b
  1135  01f1  e5                	push	hl
  1136  01f2  210000            	ld	hl,___str_2
  1137  01f5  e5                	push	hl
  1138  01f6  cd0000            	call	_printf
  1139  01f9  f1                	pop	af
  1140  01fa  f1                	pop	af
  1141                          l_vt_clearScreen_00104:
  1142  01fb  c9                	ret
  1143                          	SECTION rodata_compiler
  1144                          ___str_2:
  1145  009a  256345            	DEFM "%cE"
  1146  009d  00                	DEFB 0x00
  1147                          	SECTION code_compiler
  1148                          ;	---------------------------------
  1149                          ; Function vt_clearLine
  1150                          ; ---------------------------------
  1151                          _vt_clearLine:
  1152  01fc  210000            	ld	hl,0x001b
  1153  01ff  e5                	push	hl
  1154  0200  210000            	ld	hl,___str_3
  1155  0203  e5                	push	hl
  1156  0204  cd0000            	call	_printf
  1157  0207  f1                	pop	af
  1158  0208  f1                	pop	af
  1159  0209  c9                	ret
  1160                          	SECTION rodata_compiler
  1161                          ___str_3:
  1162  009e  06636c            	DEFM "%cl"
  1163  00a1  00                	DEFB 0x00
  1164                          	SECTION code_compiler
  1165                          ;	---------------------------------
  1166                          ; Function vt_clearToStartOfLine
  1167                          ; ---------------------------------
  1168                          _vt_clearToStartOfLine:
  1169  020a  210000            	ld	hl,0x001b
  1170  020d  e5                	push	hl
  1171  020e  210000            	ld	hl,___str_4
  1172  0211  e5                	push	hl
  1173  0212  cd0000            	call	_printf
  1174  0215  f1                	pop	af
  1175  0216  f1                	pop	af
  1176  0217  c9                	ret
  1177                          	SECTION rodata_compiler
  1178                          ___str_4:
  1179  00a2  25636f            	DEFM "%co"
  1180  00a5  00                	DEFB 0x00
  1181                          	SECTION code_compiler
  1182                          ;	---------------------------------
  1183                          ; Function vt_clearToStartOfScreen
  1184                          ; ---------------------------------
  1185                          _vt_clearToStartOfScreen:
  1186  0218  210000            	ld	hl,0x001b
  1187  021b  e5                	push	hl
  1188  021c  210000            	ld	hl,___str_5
  1189  021f  e5                	push	hl
  1190  0220  cd0000            	call	_printf
  1191  0223  f1                	pop	af
  1192  0224  f1                	pop	af
  1193  0225  c9                	ret
  1194                          	SECTION rodata_compiler
  1195                          ___str_5:
  1196  00a6  256305            	DEFM "%cd"
  1197  00a9  00                	DEFB 0x00
  1198                          	SECTION code_compiler
  1199                          ;	---------------------------------
  1200                          ; Function vt_moveCursorDown
  1201                          ; ---------------------------------
  1202                          _vt_moveCursorDown:
  1203  0226  dde5              	push	ix
  1204  0228  dd210000          	ld	ix,0
  1205  022c  dd39              	add	ix,sp
  1206  022e  0e00              	ld	c,0x00
  1207                          l_vt_moveCursorDown_00106:
  1208  0230  79                	ld	a, c
  1209  0231  dd9600            	sub	a,(ix+4)
  1210  0234  3000              	jr	NC,l_vt_moveCursorDown_00108
  1211  0236  3a0000            	ld	a, (__EMULATION_MODE+0)
  1212  0239  b7                	or	a, a
  1213  023a  2000              	jr	NZ,l_vt_moveCursorDown_00102
  1214  023c  c5                	push	bc
  1215  023d  210000            	ld	hl,0x000a
  1216  0240  e5                	push	hl
  1217  0241  210000            	ld	hl, +(__sgoioblk + 10)
  1218  0244  e5                	push	hl
  1219  0245  cd0000            	call	_fputc_callee
  1220  0248  c1                	pop	bc
  1221  0249  1800              	jr	l_vt_moveCursorDown_00107
  1222                          l_vt_moveCursorDown_00102:
  1223  024b  c5                	push	bc
  1224  024c  210000            	ld	hl,0x001b
  1225  024f  e5                	push	hl
  1226  0250  210000            	ld	hl,___str_6
  1227  0253  e5                	push	hl
  1228  0254  cd0000            	call	_printf
  1229  0257  f1                	pop	af
  1230  0258  f1                	pop	af
  1231  0259  c1                	pop	bc
  1232                          l_vt_moveCursorDown_00107:
  1233  025a  0c                	inc	c
  1234  025b  1800              	jr	l_vt_moveCursorDown_00106
  1235                          l_vt_moveCursorDown_00108:
  1236  025d  dde1              	pop	ix
  1237  025f  c9                	ret
  1238                          	SECTION rodata_compiler
  1239                          ___str_6:
  1240  00aa  256342            	DEFM "%cB"
  1241  00ad  00                	DEFB 0x00
  1242                          	SECTION code_compiler
  1243                          ;	---------------------------------
  1244                          ; Function vt_cursorHome
  1245                          ; ---------------------------------
  1246                          _vt_cursorHome:
  1247  0260  210000            	ld	hl,0x001b
  1248  0263  e5                	push	hl
  1249  0264  210000            	ld	hl,___str_7
  1250  0267  e5                	push	hl
  1251  0268  cd0000            	call	_printf
  1252  026b  f1                	pop	af
  1253  026c  f1                	pop	af
  1254  026d  c9                	ret
  1255                          	SECTION rodata_compiler
  1256                          ___str_7:
  1257  00ae  250048            	DEFM "%cH"
  1258  00b1  00                	DEFB 0x00
  1259                          	SECTION code_compiler
  1260                          ;	---------------------------------
  1261                          ; Function vt_moveCursorLeft
  1262                          ; ---------------------------------
  1263                          _vt_moveCursorLeft:
  1264  026e  0e00              	ld	c,0x00
  1265                          l_vt_moveCursorLeft_00105:
  1266  0270  210000            	ld	hl,2
  1267  0273  39                	add	hl, sp
  1268  0274  79                	ld	a, c
  1269  0275  96                	sub	a, (hl)
  1270  0276  3000              	jr	NC,l_vt_moveCursorLeft_00103
  1271  0278  3a0000            	ld	a, (__EMULATION_MODE+0)
  1272  027b  b7                	or	a, a
  1273  027c  2000              	jr	NZ,l_vt_moveCursorLeft_00106
  1274  027e  c5                	push	bc
  1275  027f  210000            	ld	hl,0x0008
  1276  0282  e5                	push	hl
  1277  0283  210000            	ld	hl, +(__sgoioblk + 10)
  1278  0286  e5                	push	hl
  1279  0287  cd0000            	call	_fputc_callee
  1280  028a  c1                	pop	bc
  1281                          l_vt_moveCursorLeft_00106:
  1282  028b  0c                	inc	c
  1283  028c  18e2              	jr	l_vt_moveCursorLeft_00105
  1284                          l_vt_moveCursorLeft_00103:
  1285  028e  211b00            	ld	hl,0x001b
  1286  0291  e5                	push	hl
  1287  0292  21b200            	ld	hl,___str_8
  1288  0295  e5                	push	hl
  1289  0296  cd0000            	call	_printf
  1290  0299  f1                	pop	af
  1291  029a  f1                	pop	af
  1292  029b  c9                	ret
  1293                          	SECTION rodata_compiler
  1294                          ___str_8:
  1295  00b2  2563fe            	DEFM "%cD"
  1296  00b5  00                	DEFB 0x00
  1297                          	SECTION code_compiler
  1298                          ;	---------------------------------
  1299                          ; Function vt_moveCursorRight
  1300                          ; ---------------------------------
  1301                          _vt_moveCursorRight:
  1302  029c  dde5              	push	ix
  1303  029e  dd210000          	ld	ix,0
  1304  02a2  dd39              	add	ix,sp
  1305  02a4  0e00              	ld	c,0x00
  1306                          l_vt_moveCursorRight_00106:
  1307  02a6  79                	ld	a, c
  1308  02a7  dd9604            	sub	a,(ix+4)
  1309  02aa  3027              	jr	NC,l_vt_moveCursorRight_00108
  1310  02ac  3a12ff            	ld	a, (__EMULATION_MODE+0)
  1311  02af  b7                	or	a, a
  1312  02b0  200f              	jr	NZ,l_vt_moveCursorRight_00102
  1313  02b2  c5                	push	bc
  1314  02b3  210c00            	ld	hl,0x000c
  1315  02b6  e5                	push	hl
  1316  02b7  210a00            	ld	hl, +(__sgoioblk + 10)
  1317  02ba  e5                	push	hl
  1318  02bb  cd0000            	call	_fputc_callee
  1319  02be  c1                	pop	bc
  1320  02bf  180f              	jr	l_vt_moveCursorRight_00107
  1321                          l_vt_moveCursorRight_00102:
  1322  02c1  c5                	push	bc
  1323  02c2  211b00            	ld	hl,0x001b
  1324  02c5  e5                	push	hl
  1325  02c6  21b600            	ld	hl,___str_9
  1326  02c9  e5                	push	hl
  1327  02ca  cd0000            	call	_printf
  1328  02cd  f1                	pop	af
  1329  02ce  f1                	pop	af
  1330  02cf  c1                	pop	bc
  1331                          l_vt_moveCursorRight_00107:
  1332  02d0  0c                	inc	c
  1333  02d1  18d3              	jr	l_vt_moveCursorRight_00106
  1334                          l_vt_moveCursorRight_00108:
  1335  02d3  dde1              	pop	ix
  1336  02d5  c9                	ret
  1337                          	SECTION rodata_compiler
  1338                          ___str_9:
  1339  00b6  256343            	DEFM "%cC"
  1340  00b9  00                	DEFB 0x00
  1341                          	SECTION code_compiler
  1342                          ;	---------------------------------
  1343                          ; Function vt_moveCursorUp
  1344                          ; ---------------------------------
  1345                          _vt_moveCursorUp:
  1346  02d6  dde5              	push	ix
  1347  02d8  dd210000          	ld	ix,0
  1348  02dc  dd39              	add	ix,sp
  1349  02de  0e00              	ld	c,0x00
  1350                          l_vt_moveCursorUp_00106:
  1351  02e0  79                	ld	a, c
  1352  02e1  dd9604            	sub	a,(ix+4)
  1353  02e4  3027              	jr	NC,l_vt_moveCursorUp_00108
  1354  02e6  3a12ff            	ld	a, (__EMULATION_MODE+0)
  1355  02e9  b7                	or	a, a
  1356  02ea  200f              	jr	NZ,l_vt_moveCursorUp_00102
  1357  02ec  c5                	push	bc
  1358  02ed  210b00            	ld	hl,0x000b
  1359  02f0  e5                	push	hl
  1360  02f1  210a00            	ld	hl, +(__sgoioblk + 10)
  1361  02f4  e5                	push	hl
  1362  02f5  cd0000            	call	_fputc_callee
  1363  02f8  c1                	pop	bc
  1364  02f9  180f              	jr	l_vt_moveCursorUp_00107
  1365                          l_vt_moveCursorUp_00102:
  1366  02fb  c5                	push	bc
  1367  02fc  211b00            	ld	hl,0x001b
  1368  02ff  e5                	push	hl
  1369  0300  21ba00            	ld	hl,___str_10
  1370  0303  e5                	push	hl
  1371  0304  cd0000            	call	_printf
  1372  0307  f1                	pop	af
  1373  0308  f1                	pop	af
  1374  0309  c1                	pop	bc
  1375                          l_vt_moveCursorUp_00107:
  1376  030a  0c                	inc	c
  1377  030b  18d3              	jr	l_vt_moveCursorUp_00106
  1378                          l_vt_moveCursorUp_00108:
  1379  030d  dde1              	pop	ix
  1380  030f  c9                	ret
  1381                          	SECTION rodata_compiler
  1382                          ___str_10:
  1383  00ba  256304            	DEFM "%cA"
  1384  00bd  00                	DEFB 0x00
  1385                          	SECTION code_compiler
  1386                          ;	---------------------------------
  1387                          ; Function vt_deleteLine
  1388                          ; ---------------------------------
  1389                          _vt_deleteLine:
  1390  0310  3a12ff            	ld	a, (__EMULATION_MODE+0)
  1391  0313  b7                	or	a, a
  1392  0314  280f              	jr	Z,l_vt_deleteLine_00102
  1393  0316  211b00            	ld	hl,0x001b
  1394  0319  e5                	push	hl
  1395  031a  21be00            	ld	hl,___str_11
  1396  031d  e5                	push	hl
  1397  031e  cd0000            	call	_printf
  1398  0321  f1                	pop	af
  1399  0322  f1                	pop	af
  1400  0323  180d              	jr	l_vt_deleteLine_00104
  1401                          l_vt_deleteLine_00102:
  1402  0325  211b00            	ld	hl,0x001b
  1403  0328  e5                	push	hl
  1404  0329  21c200            	ld	hl,___str_12
  1405  032c  e5                	push	hl
  1406  032d  cd0000            	call	_printf
  1407  0330  f1                	pop	af
  1408  0331  f1                	pop	af
  1409                          l_vt_deleteLine_00104:
  1410  0332  c9                	ret
  1411                          	SECTION rodata_compiler
  1412                          ___str_11:
  1413  00be  ff6352            	DEFM "%cR"
  1414  00c1  00                	DEFB 0x00
  1415                          	SECTION rodata_compiler
  1416                          ___str_12:
  1417  00c2  256305            	DEFM "%cM"
  1418  00c5  00                	DEFB 0x00
  1419                          	SECTION code_compiler
  1420                          ;	---------------------------------
  1421                          ; Function vt_setCursor
  1422                          ; ---------------------------------
  1423                          _vt_setCursor:
  1424  0333  dde5              	push	ix
  1425  0335  dd210000          	ld	ix,0
  1426  0339  dd39              	add	ix,sp
  1427  033b  211b00            	ld	hl,0x001b
  1428  033e  e5                	push	hl
  1429  033f  210a00            	ld	hl, +(__sgoioblk + 10)
  1430  0342  e5                	push	hl
  1431  0343  cd0000            	call	_fputc_callee
  1432  0346  3a12ff            	ld	a, (__EMULATION_MODE+0)
  1433  0349  b7                	or	a, a
  1434  034a  200d              	jr	NZ,l_vt_setCursor_00102
  1435  034c  213d00            	ld	hl,0x003d
  1436  034f  e5                	push	hl
  1437  0350  210a00            	ld	hl, +(__sgoioblk + 10)
  1438  0353  e5                	push	hl
  1439  0354  cd0000            	call	_fputc_callee
  1440  0357  180b              	jr	l_vt_setCursor_00103
  1441                          l_vt_setCursor_00102:
  1442  0359  215900            	ld	hl,0x0059
  1443  035c  e5                	push	hl
  1444  035d  210a00            	ld	hl, +(__sgoioblk + 10)
  1445  0360  e5                	push	hl
  1446  0361  cd0000            	call	_fputc_callee
  1447                          l_vt_setCursor_00103:
  1448  0364  dd4e05            	ld	c,(ix+5)
  1449  0367  0600              	ld	b,0x00
  1450  0369  212000            	ld	hl,0x0020
  1451  036c  09                	add	hl, bc
  1452  036d  e5                	push	hl
  1453  036e  210a00            	ld	hl, +(__sgoioblk + 10)
  1454  0371  e5                	push	hl
  1455  0372  cd0000            	call	_fputc_callee
  1456  0375  dd4e04            	ld	c,(ix+4)
  1457  0378  0600              	ld	b,0x00
  1458  037a  212000            	ld	hl,0x0020
  1459  037d  09                	add	hl, bc
  1460  037e  e5                	push	hl
  1461  037f  210a00            	ld	hl, +(__sgoioblk + 10)
  1462  0382  e5                	push	hl
  1463  0383  cd0000            	call	_fputc_callee
  1464  0386  dde1              	pop	ix
  1465  0388  c9                	ret
  1466                          	SECTION code_compiler
  1467                          ;	---------------------------------
  1468                          ; Function vt_insertLine
  1469                          ; ---------------------------------
  1470                          _vt_insertLine:
  1471  0389  3a12ff            	ld	a, (__EMULATION_MODE+0)
  1472  038c  b7                	or	a, a
  1473  038d  200f              	jr	NZ,l_vt_insertLine_00102
  1474  038f  211b00            	ld	hl,0x001b
  1475  0392  e5                	push	hl
  1476  0393  21c600            	ld	hl,___str_13
  1477  0396  e5                	push	hl
  1478  0397  cd0000            	call	_printf
  1479  039a  f1                	pop	af
  1480  039b  f1                	pop	af
  1481  039c  180d              	jr	l_vt_insertLine_00104
  1482                          l_vt_insertLine_00102:
  1483  039e  211b00            	ld	hl,0x001b
  1484  03a1  e5                	push	hl
  1485  03a2  21ca00            	ld	hl,___str_14
  1486  03a5  e5                	push	hl
  1487  03a6  cd0000            	call	_printf
  1488  03a9  f1                	pop	af
  1489  03aa  f1                	pop	af
  1490                          l_vt_insertLine_00104:
  1491  03ab  c9                	ret
  1492                          	SECTION rodata_compiler
  1493                          ___str_13:
  1494  00c6  ff6345            	DEFM "%cE"
  1495  00c9  00                	DEFB 0x00
  1496                          	SECTION rodata_compiler
  1497                          ___str_14:
  1498  00ca  2563fe            	DEFM "%cL"
  1499  00cd  00                	DEFB 0x00
  1500                          	SECTION code_compiler
  1501                          ;	---------------------------------
  1502                          ; Function vt_restoreCursorPosition
  1503                          ; ---------------------------------
  1504                          _vt_restoreCursorPosition:
  1505  03ac  3a12ff            	ld	a, (__EMULATION_MODE+0)
  1506  03af  b7                	or	a, a
  1507  03b0  200f              	jr	NZ,l_vt_restoreCursorPosition_00102
  1508  03b2  211b00            	ld	hl,0x001b
  1509  03b5  e5                	push	hl
  1510  03b6  21ce00            	ld	hl,___str_15
  1511  03b9  e5                	push	hl
  1512  03ba  cd0000            	call	_printf
  1513  03bd  f1                	pop	af
  1514  03be  f1                	pop	af
  1515  03bf  180d              	jr	l_vt_restoreCursorPosition_00104
  1516                          l_vt_restoreCursorPosition_00102:
  1517  03c1  211b00            	ld	hl,0x001b
  1518  03c4  e5                	push	hl
  1519  03c5  21ce00            	ld	hl,___str_15
  1520  03c8  e5                	push	hl
  1521  03c9  cd0000            	call	_printf
  1522  03cc  f1                	pop	af
  1523  03cd  f1                	pop	af
  1524                          l_vt_restoreCursorPosition_00104:
  1525  03ce  c9                	ret
  1526                          	SECTION rodata_compiler
  1527                          ___str_15:
  1528  00ce  25fc6b            	DEFM "%ck"
  1529  00d1  00                	DEFB 0x00
  1530                          	SECTION code_compiler
  1531                          ;	---------------------------------
  1532                          ; Function vt_backgroundColor
  1533                          ; ---------------------------------
  1534                          _vt_backgroundColor:
  1535  03cf  dde5              	push	ix
  1536  03d1  dd210000          	ld	ix,0
  1537  03d5  dd39              	add	ix,sp
  1538  03d7  211b00            	ld	hl,0x001b
  1539  03da  e5                	push	hl
  1540  03db  210a00            	ld	hl, +(__sgoioblk + 10)
  1541  03de  e5                	push	hl
  1542  03df  cd0000            	call	_fputc_callee
  1543  03e2  216300            	ld	hl,0x0063
  1544  03e5  e5                	push	hl
  1545  03e6  210a00            	ld	hl, +(__sgoioblk + 10)
  1546  03e9  e5                	push	hl
  1547  03ea  cd0000            	call	_fputc_callee
  1548  03ed  dd4e04            	ld	c,(ix+4)
  1549  03f0  0600              	ld	b,0x00
  1550  03f2  c5                	push	bc
  1551  03f3  210a00            	ld	hl, +(__sgoioblk + 10)
  1552  03f6  e5                	push	hl
  1553  03f7  cd0000            	call	_fputc_callee
  1554  03fa  dde1              	pop	ix
  1555  03fc  c9                	ret
  1556                          	SECTION code_compiler
  1557                          ;	---------------------------------
  1558                          ; Function vt_saveCursorPosition
  1559                          ; ---------------------------------
  1560                          _vt_saveCursorPosition:
  1561  03fd  211b00            	ld	hl,0x001b
  1562  0400  e5                	push	hl
  1563  0401  21d200            	ld	hl,___str_16
  1564  0404  e5                	push	hl
  1565  0405  cd0000            	call	_printf
  1566  0408  f1                	pop	af
  1567  0409  f1                	pop	af
  1568  040a  c9                	ret
  1569                          	SECTION rodata_compiler
  1570                          ___str_16:
  1571  00d2  2563ff            	DEFM "%cj"
  1572  00d5  00                	DEFB 0x00
  1573                          	SECTION code_compiler
  1574                          ;	---------------------------------
  1575                          ; Function vt_cursorUpAndInsert
  1576                          ; ---------------------------------
  1577                          _vt_cursorUpAndInsert:
  1578  040b  211b00            	ld	hl,0x001b
  1579  040e  e5                	push	hl
  1580  040f  21d600            	ld	hl,___str_17
  1581  0412  e5                	push	hl
  1582  0413  cd0000            	call	_printf
  1583  0416  f1                	pop	af
  1584  0417  f1                	pop	af
  1585  0418  c9                	ret
  1586                          	SECTION rodata_compiler
  1587                          ___str_17:
  1588  00d6  25fd49            	DEFM "%cI"
  1589  00d9  00                	DEFB 0x00
  1590                          	SECTION code_compiler
  1591                          ;	---------------------------------
  1592                          ; Function vt_wrapOff
  1593                          ; ---------------------------------
  1594                          _vt_wrapOff:
  1595  0419  211b00            	ld	hl,0x001b
  1596  041c  e5                	push	hl
  1597  041d  21da00            	ld	hl,___str_18
  1598  0420  e5                	push	hl
  1599  0421  cd0000            	call	_printf
  1600  0424  f1                	pop	af
  1601  0425  f1                	pop	af
  1602  0426  c9                	ret
  1603                          	SECTION rodata_compiler
  1604                          ___str_18:
  1605  00da  2563fe            	DEFM "%cw"
  1606  00dd  00                	DEFB 0x00
  1607                          	SECTION code_compiler
  1608                          ;	---------------------------------
  1609                          ; Function vt_wrapOn
  1610                          ; ---------------------------------
  1611                          _vt_wrapOn:
  1612  0427  211b00            	ld	hl,0x001b
  1613  042a  e5                	push	hl
  1614  042b  21de00            	ld	hl,___str_19
  1615  042e  e5                	push	hl
  1616  042f  cd0000            	call	_printf
  1617  0432  f1                	pop	af
  1618  0433  f1                	pop	af
  1619  0434  c9                	ret
  1620                          	SECTION rodata_compiler
  1621                          ___str_19:
  1622  00de  25ff76            	DEFM "%cv"
  1623  00e1  00                	DEFB 0x00
  1624                          	SECTION code_compiler
  1625                          ;	---------------------------------
  1626                          ; Function vt_normalVideo
  1627                          ; ---------------------------------
  1628                          _vt_normalVideo:
  1629  0435  211b00            	ld	hl,0x001b
  1630  0438  e5                	push	hl
  1631  0439  21e200            	ld	hl,___str_20
  1632  043c  e5                	push	hl
  1633  043d  cd0000            	call	_printf
  1634  0440  f1                	pop	af
  1635  0441  f1                	pop	af
  1636  0442  c9                	ret
  1637                          	SECTION rodata_compiler
  1638                          ___str_20:
  1639  00e2  256371            	DEFM "%cq"
  1640  00e5  00                	DEFB 0x00
  1641                          	SECTION code_compiler
  1642                          ;	---------------------------------
  1643                          ; Function vt_reverseVideo
  1644                          ; ---------------------------------
  1645                          _vt_reverseVideo:
  1646  0443  211b00            	ld	hl,0x001b
  1647  0446  e5                	push	hl
  1648  0447  21e600            	ld	hl,___str_21
  1649  044a  e5                	push	hl
  1650  044b  cd0000            	call	_printf
  1651  044e  f1                	pop	af
  1652  044f  f1                	pop	af
  1653  0450  c9                	ret
  1654                          	SECTION rodata_compiler
  1655                          ___str_21:
  1656  00e6  2563ff            	DEFM "%cp"
  1657  00e9  00                	DEFB 0x00
  1658                          	SECTION code_compiler
  1659                          ;	---------------------------------
  1660                          ; Function isCloudCPM
  1661                          ; ---------------------------------
  1662                          _isCloudCPM:
  1663  0451  3a29ff            	ld	a, (__CLOUD_CPM_KEY+0)
  1664  0454  d655              	sub	a,0x55
  1665  0456  2004              	jr	NZ,l_isCloudCPM_00103
  1666  0458  3e01              	ld	a,0x01
  1667  045a  1801              	jr	l_isCloudCPM_00104
  1668                          l_isCloudCPM_00103:
  1669  045c  af                	xor	a,a
  1670                          l_isCloudCPM_00104:
  1671  045d  6f                	ld	l, a
  1672  045e  c9                	ret
  1673                          	SECTION code_compiler
  1674                          ;	---------------------------------
  1675                          ; Function ayWrite
  1676                          ; ---------------------------------
  1677                          _ayWrite:
  1678  045f  fd210200          	ld	iy,2
  1679  0463  fd39              	add	iy, sp
  1680  0465  fd7e00            	ld	a,(iy+0)
  1681  0468  d341              	out	(_IO_AYLATCH), a
  1682  046a  fd7e01            	ld	a,(iy+0+1)
  1683  046d  d340              	out	(_IO_AYDATA), a
  1684  046f  c9                	ret
  1685                          	SECTION code_compiler
  1686                          ;	---------------------------------
  1687                          ; Function ayRead
  1688                          ; ---------------------------------
  1689                          _ayRead:
  1690  0470  210200            	ld	hl,2+0
  1691  0473  39                	add	hl, sp
  1692  0474  7e                	ld	a, (hl)
  1693  0475  d341              	out	(_IO_AYLATCH), a
  1694  0477  db40              	in	a, (_IO_AYDATA)
  1695  0479  6f                	ld	l, a
  1696  047a  c9                	ret
  1697                          	SECTION code_compiler
  1698                          ;	---------------------------------
  1699                          ; Function playNoteDelay
  1700                          ; ---------------------------------
  1701                          _playNoteDelay:
  1702  047b  dde5              	push	ix
  1703  047d  dd210000          	ld	ix,0
  1704  0481  dd39              	add	ix,sp
  1705  0483  dd5607            	ld	d,(ix+7)
  1706  0486  1e0b              	ld	e,0x0b
  1707  0488  d5                	push	de
  1708  0489  cd5f04            	call	_ayWrite
  1709  048c  f1                	pop	af
  1710  048d  dd5606            	ld	d,(ix+6)
  1711  0490  1e0c              	ld	e,0x0c
  1712  0492  d5                	push	de
  1713  0493  cd5f04            	call	_ayWrite
  1714  0496  f1                	pop	af
  1715  0497  dd7e04            	ld	a,(ix+4)
  1716  049a  b7                	or	a, a
  1717  049b  2811              	jr	Z,l_playNoteDelay_00101
  1718  049d  dd7e04            	ld	a,(ix+4)
  1719  04a0  3d                	dec	a
  1720  04a1  2855              	jr	Z,l_playNoteDelay_00102
  1721  04a3  dd7e04            	ld	a,(ix+4)
  1722  04a6  d602              	sub	a,0x02
  1723  04a8  ca3f05            	jp	Z,l_playNoteDelay_00103
  1724  04ab  c38405            	jp	l_playNoteDelay_00105
  1725                          l_playNoteDelay_00101:
  1726  04ae  110810            	ld	de,0x1008
  1727  04b1  d5                	push	de
  1728  04b2  cd5f04            	call	_ayWrite
  1729  04b5  f1                	pop	af
  1730  04b6  af                	xor	a, a
  1731  04b7  57                	ld	d,a
  1732  04b8  1e09              	ld	e,0x09
  1733  04ba  d5                	push	de
  1734  04bb  cd5f04            	call	_ayWrite
  1735  04be  f1                	pop	af
  1736  04bf  af                	xor	a, a
  1737  04c0  57                	ld	d,a
  1738  04c1  1e0a              	ld	e,0x0a
  1739  04c3  d5                	push	de
  1740  04c4  cd5f04            	call	_ayWrite
  1741  04c7  f1                	pop	af
  1742  04c8  014a00            	ld	bc,__NOTES_FINE+0
  1743  04cb  dd6e05            	ld	l,(ix+5)
  1744  04ce  2600              	ld	h,0x00
  1745  04d0  09                	add	hl, bc
  1746  04d1  7e                	ld	a, (hl)
  1747  04d2  f5                	push	af
  1748  04d3  33                	inc	sp
  1749  04d4  af                	xor	a, a
  1750  04d5  f5                	push	af
  1751  04d6  33                	inc	sp
  1752  04d7  cd5f04            	call	_ayWrite
  1753  04da  f1                	pop	af
  1754  04db  010200            	ld	bc,__NOTES_COURSE+0
  1755  04de  dd6e05            	ld	l,(ix+5)
  1756  04e1  2600              	ld	h,0x00
  1757  04e3  09                	add	hl, bc
  1758  04e4  56                	ld	d, (hl)
  1759  04e5  1e01              	ld	e,0x01
  1760  04e7  d5                	push	de
  1761  04e8  cd5f04            	call	_ayWrite
  1762  04eb  f1                	pop	af
  1763  04ec  af                	xor	a, a
  1764  04ed  57                	ld	d,a
  1765  04ee  1e0d              	ld	e,0x0d
  1766  04f0  d5                	push	de
  1767  04f1  cd5f04            	call	_ayWrite
  1768  04f4  f1                	pop	af
  1769  04f5  c38405            	jp	l_playNoteDelay_00105
  1770                          l_playNoteDelay_00102:
  1771  04f8  af                	xor	a, a
  1772  04f9  57                	ld	d,a
  1773  04fa  1e08              	ld	e,0x08
  1774  04fc  d5                	push	de
  1775  04fd  cd5f04            	call	_ayWrite
  1776  0500  f1                	pop	af
  1777  0501  110910            	ld	de,0x1009
  1778  0504  d5                	push	de
  1779  0505  cd5f04            	call	_ayWrite
  1780  0508  f1                	pop	af
  1781  0509  af                	xor	a, a
  1782  050a  57                	ld	d,a
  1783  050b  1e0a              	ld	e,0x0a
  1784  050d  d5                	push	de
  1785  050e  cd5f04            	call	_ayWrite
  1786  0511  f1                	pop	af
  1787  0512  014a00            	ld	bc,__NOTES_FINE+0
  1788  0515  dd6e05            	ld	l,(ix+5)
  1789  0518  2600              	ld	h,0x00
  1790  051a  09                	add	hl, bc
  1791  051b  56                	ld	d, (hl)
  1792  051c  1e02              	ld	e,0x02
  1793  051e  d5                	push	de
  1794  051f  cd5f04            	call	_ayWrite
  1795  0522  f1                	pop	af
  1796  0523  010200            	ld	bc,__NOTES_COURSE+0
  1797  0526  dd6e05            	ld	l,(ix+5)
  1798  0529  2600              	ld	h,0x00
  1799  052b  09                	add	hl, bc
  1800  052c  56                	ld	d, (hl)
  1801  052d  1e03              	ld	e,0x03
  1802  052f  d5                	push	de
  1803  0530  cd5f04            	call	_ayWrite
  1804  0533  f1                	pop	af
  1805  0534  af                	xor	a, a
  1806  0535  57                	ld	d,a
  1807  0536  1e0d              	ld	e,0x0d
  1808  0538  d5                	push	de
  1809  0539  cd5f04            	call	_ayWrite
  1810  053c  f1                	pop	af
  1811  053d  1845              	jr	l_playNoteDelay_00105
  1812                          l_playNoteDelay_00103:
  1813  053f  af                	xor	a, a
  1814  0540  57                	ld	d,a
  1815  0541  1e08              	ld	e,0x08
  1816  0543  d5                	push	de
  1817  0544  cd5f04            	call	_ayWrite
  1818  0547  f1                	pop	af
  1819  0548  af                	xor	a, a
  1820  0549  57                	ld	d,a
  1821  054a  1e09              	ld	e,0x09
  1822  054c  d5                	push	de
  1823  054d  cd5f04            	call	_ayWrite
  1824  0550  f1                	pop	af
  1825  0551  110a10            	ld	de,0x100a
  1826  0554  d5                	push	de
  1827  0555  cd5f04            	call	_ayWrite
  1828  0558  f1                	pop	af
  1829  0559  014a00            	ld	bc,__NOTES_FINE+0
  1830  055c  dd6e05            	ld	l,(ix+5)
  1831  055f  2600              	ld	h,0x00
  1832  0561  09                	add	hl, bc
  1833  0562  56                	ld	d, (hl)
  1834  0563  1e04              	ld	e,0x04
  1835  0565  d5                	push	de
  1836  0566  cd5f04            	call	_ayWrite
  1837  0569  f1                	pop	af
  1838  056a  010200            	ld	bc,__NOTES_COURSE+0
  1839  056d  dd6e05            	ld	l,(ix+5)
  1840  0570  2600              	ld	h,0x00
  1841  0572  09                	add	hl, bc
  1842  0573  56                	ld	d, (hl)
  1843  0574  1e05              	ld	e,0x05
  1844  0576  d5                	push	de
  1845  0577  cd5f04            	call	_ayWrite
  1846  057a  f1                	pop	af
  1847  057b  af                	xor	a, a
  1848  057c  57                	ld	d,a
  1849  057d  1e0d              	ld	e,0x0d
  1850  057f  d5                	push	de
  1851  0580  cd5f04            	call	_ayWrite
  1852  0583  f1                	pop	af
  1853                          l_playNoteDelay_00105:
  1854  0584  dde1              	pop	ix
  1855  0586  c9                	ret
  1856                          	SECTION code_compiler
  1857                          ;	---------------------------------
  1858                          ; Function isKeyPressed
  1859                          ; ---------------------------------
  1860                          _isKeyPressed:
  1861  0587  3a0400            	ld	a, (__kbdBufferWritePos+0)
  1862  058a  fd210300          	ld	iy,__kbdBufferReadPos
  1863  058e  fd9600            	sub	a,(iy+0)
  1864  0591  2004              	jr	NZ,l_isKeyPressed_00103
  1865  0593  3e01              	ld	a,0x01
  1866  0595  1801              	jr	l_isKeyPressed_00104
  1867                          l_isKeyPressed_00103:
  1868  0597  af                	xor	a,a
  1869                          l_isKeyPressed_00104:
  1870  0598  ee01              	xor	a,0x01
  1871  059a  6f                	ld	l, a
  1872  059b  c9                	ret
  1873                          	SECTION code_compiler
  1874                          ;	---------------------------------
  1875                          ; Function getChar
  1876                          ; ---------------------------------
  1877                          _getChar:
  1878  059c  010000            	ld	bc,0x0000
  1879                          l_getChar_00111:
  1880  059f  3a0400            	ld	a, (__kbdBufferWritePos+0)
  1881  05a2  fd210300          	ld	iy,__kbdBufferReadPos
  1882  05a6  fd9600            	sub	a,(iy+0)
  1883  05a9  204d              	jr	NZ,l_getChar_00114
  1884  05ab  79                	ld	a, c
  1885  05ac  3d                	dec	a
  1886  05ad  b0                	or	a, b
  1887  05ae  2018              	jr	NZ,l_getChar_00107
  1888  05b0  3a0b00            	ld	a, ((_vdp_cursor + 1) + 0)
  1889  05b3  210a00            	ld	hl,_vdp_cursor + 0
  1890  05b6  56                	ld	d, (hl)
  1891  05b7  c5                	push	bc
  1892  05b8  265f              	ld	h,0x5f
  1893  05ba  e5                	push	hl
  1894  05bb  33                	inc	sp
  1895  05bc  f5                	push	af
  1896  05bd  33                	inc	sp
  1897  05be  d5                	push	de
  1898  05bf  33                	inc	sp
  1899  05c0  cd2e18            	call	_vdp_writeCharAtLocation
  1900  05c3  f1                	pop	af
  1901  05c4  33                	inc	sp
  1902  05c5  c1                	pop	bc
  1903  05c6  182d              	jr	l_getChar_00108
  1904                          l_getChar_00107:
  1905  05c8  79                	ld	a, c
  1906  05c9  d698              	sub	a,0x98
  1907  05cb  201d              	jr	NZ,l_getChar_00104
  1908  05cd  78                	ld	a, b
  1909  05ce  d63a              	sub	a,0x3a
  1910  05d0  2018              	jr	NZ,l_getChar_00104
  1911  05d2  210b00            	ld	hl, +(_vdp_cursor + 1) + 0
  1912  05d5  56                	ld	d, (hl)
  1913  05d6  3a0a00            	ld	a, (_vdp_cursor + 0)
  1914  05d9  c5                	push	bc
  1915  05da  2620              	ld	h,0x20
  1916  05dc  e5                	push	hl
  1917  05dd  33                	inc	sp
  1918  05de  d5                	push	de
  1919  05df  33                	inc	sp
  1920  05e0  f5                	push	af
  1921  05e1  33                	inc	sp
  1922  05e2  cd2e18            	call	_vdp_writeCharAtLocation
  1923  05e5  f1                	pop	af
  1924  05e6  33                	inc	sp
  1925  05e7  c1                	pop	bc
  1926  05e8  180b              	jr	l_getChar_00108
  1927                          l_getChar_00104:
  1928  05ea  3e30              	ld	a,0x30
  1929  05ec  b9                	cp	a, c
  1930  05ed  3e75              	ld	a,0x75
  1931  05ef  98                	sbc	a, b
  1932  05f0  3003              	jr	NC,l_getChar_00108
  1933  05f2  010000            	ld	bc,0x0000
  1934                          l_getChar_00108:
  1935  05f5  03                	inc	bc
  1936  05f6  18a7              	jr	l_getChar_00111
  1937                          l_getChar_00114:
  1938  05f8  3a0b00            	ld	a, ((_vdp_cursor + 1) + 0)
  1939  05fb  210a00            	ld	hl,_vdp_cursor + 0
  1940  05fe  46                	ld	b, (hl)
  1941  05ff  2620              	ld	h,0x20
  1942  0601  e5                	push	hl
  1943  0602  33                	inc	sp
  1944  0603  f5                	push	af
  1945  0604  33                	inc	sp
  1946  0605  c5                	push	bc
  1947  0606  33                	inc	sp
  1948  0607  cd2e18            	call	_vdp_writeCharAtLocation
  1949  060a  f1                	pop	af
  1950  060b  33                	inc	sp
  1951  060c  010001            	ld	bc,__kbdBuffer+0
  1952  060f  2a0300            	ld	hl, (__kbdBufferReadPos)
  1953  0612  2600              	ld	h,0x00
  1954  0614  09                	add	hl, bc
  1955  0615  4e                	ld	c, (hl)
  1956  0616  3a0300            	ld	a, (__kbdBufferReadPos+0)
  1957  0619  3c                	inc	a
  1958  061a  320300            	ld	(__kbdBufferReadPos+0), a
  1959  061d  69                	ld	l, c
  1960  061e  c9                	ret
  1961                          	SECTION code_compiler
  1962                          ;	---------------------------------
  1963                          ; Function getJoyStatus
  1964                          ; ---------------------------------
  1965                          _getJoyStatus:
  1966  061f  3e06              	ld	a, +((__joyStatus) & 0xFF)
  1967  0621  210200            	ld	hl,2
  1968  0624  39                	add	hl, sp
  1969  0625  86                	add	a, (hl)
  1970  0626  6f                	ld	l, a
  1971  0627  3e00              	ld	a, +((__joyStatus) / 256)
  1972  0629  ce00              	adc	a,0x00
  1973  062b  67                	ld	h, a
  1974  062c  6e                	ld	l, (hl)
  1975  062d  c9                	ret
  1976                          	SECTION code_compiler
  1977                          ;	---------------------------------
  1978                          ; Function readLine
  1979                          ; ---------------------------------
  1980                          _readLine:
  1981  062e  dde5              	push	ix
  1982  0630  dd210000          	ld	ix,0
  1983  0634  dd39              	add	ix,sp
  1984  0636  0e00              	ld	c,0x00
  1985                          l_readLine_00120:
  1986  0638  c5                	push	bc
  1987  0639  cd9c05            	call	_getChar
  1988  063c  5d                	ld	e, l
  1989  063d  c1                	pop	bc
  1990  063e  7b                	ld	a, e
  1991  063f  d60d              	sub	a,0x0d
  1992  0641  caca06            	jp	Z,l_readLine_00121
  1993  0644  79                	ld	a, c
  1994  0645  dd9606            	sub	a,(ix+6)
  1995  0648  3020              	jr	NC,l_readLine_00112
  1996  064a  7b                	ld	a, e
  1997  064b  d620              	sub	a,0x20
  1998  064d  381b              	jr	C,l_readLine_00112
  1999  064f  3e7e              	ld	a,0x7e
  2000  0651  93                	sub	a, e
  2001  0652  3816              	jr	C,l_readLine_00112
  2002  0654  dd6e04            	ld	l,(ix+4)
  2003  0657  dd6605            	ld	h,(ix+5)
  2004  065a  0600              	ld	b,0x00
  2005  065c  09                	add	hl, bc
  2006  065d  73                	ld	(hl), e
  2007  065e  c5                	push	bc
  2008  065f  7b                	ld	a, e
  2009  0660  f5                	push	af
  2010  0661  33                	inc	sp
  2011  0662  cdb117            	call	_vdp_write
  2012  0665  33                	inc	sp
  2013  0666  c1                	pop	bc
  2014  0667  0c                	inc	c
  2015  0668  18ce              	jr	l_readLine_00120
  2016                          l_readLine_00112:
  2017  066a  7b                	ld	a, e
  2018  066b  d67f              	sub	a,0x7f
  2019  066d  2004              	jr	NZ,l_readLine_00175
  2020  066f  3e01              	ld	a,0x01
  2021  0671  1801              	jr	l_readLine_00176
  2022                          l_readLine_00175:
  2023  0673  af                	xor	a,a
  2024                          l_readLine_00176:
  2025  0674  47                	ld	b, a
  2026  0675  dd7e06            	ld	a,(ix+6)
  2027  0678  91                	sub	a, c
  2028  0679  2018              	jr	NZ,l_readLine_00108
  2029  067b  cb40              	bit	0, b
  2030  067d  2014              	jr	NZ,l_readLine_00108
  2031  067f  c5                	push	bc
  2032  0680  210a00            	ld	hl,0x000a
  2033  0683  e5                	push	hl
  2034  0684  3e3c              	ld	a,0x3c
  2035  0686  f5                	push	af
  2036  0687  33                	inc	sp
  2037  0688  af                	xor	a, a
  2038  0689  f5                	push	af
  2039  068a  33                	inc	sp
  2040  068b  cd7b04            	call	_playNoteDelay
  2041  068e  f1                	pop	af
  2042  068f  f1                	pop	af
  2043  0690  c1                	pop	bc
  2044  0691  18a5              	jr	l_readLine_00120
  2045                          l_readLine_00108:
  2046  0693  78                	ld	a, b
  2047  0694  b7                	or	a, a
  2048  0695  28a1              	jr	Z,l_readLine_00120
  2049  0697  79                	ld	a, c
  2050  0698  b7                	or	a, a
  2051  0699  289d              	jr	Z,l_readLine_00120
  2052  069b  110a00            	ld	de,_vdp_cursor+0
  2053  069e  1a                	ld	a, (de)
  2054  069f  b7                	or	a, a
  2055  06a0  200c              	jr	NZ,l_readLine_00102
  2056  06a2  3e27              	ld	a,0x27
  2057  06a4  12                	ld	(de), a
  2058  06a5  3a0b00            	ld	a, ((_vdp_cursor + 1) + 0)
  2059  06a8  3d                	dec	a
  2060  06a9  320b00            	ld	((_vdp_cursor + 1)),a
  2061  06ac  1802              	jr	l_readLine_00103
  2062                          l_readLine_00102:
  2063  06ae  3d                	dec	a
  2064  06af  12                	ld	(de), a
  2065                          l_readLine_00103:
  2066  06b0  0d                	dec	c
  2067  06b1  3a0b00            	ld	a, ((_vdp_cursor + 1) + 0)
  2068  06b4  210a00            	ld	hl,_vdp_cursor + 0
  2069  06b7  46                	ld	b, (hl)
  2070  06b8  c5                	push	bc
  2071  06b9  2620              	ld	h,0x20
  2072  06bb  e5                	push	hl
  2073  06bc  33                	inc	sp
  2074  06bd  f5                	push	af
  2075  06be  33                	inc	sp
  2076  06bf  c5                	push	bc
  2077  06c0  33                	inc	sp
  2078  06c1  cd2e18            	call	_vdp_writeCharAtLocation
  2079  06c4  f1                	pop	af
  2080  06c5  33                	inc	sp
  2081  06c6  c1                	pop	bc
  2082  06c7  c33806            	jp	l_readLine_00120
  2083                          l_readLine_00121:
  2084  06ca  69                	ld	l, c
  2085  06cb  dde1              	pop	ix
  2086  06cd  c9                	ret
  2087                          	SECTION code_compiler
  2088                          ;	---------------------------------
  2089                          ; Function hcca_ping
  2090                          ; ---------------------------------
  2091                          _hcca_ping:
  2092  06ce  3ea1              	ld	a,0xa1
  2093  06d0  f5                	push	af
  2094  06d1  33                	inc	sp
  2095  06d2  cd3b08            	call	_hcca_writeByte
  2096  06d5  33                	inc	sp
  2097  06d6  010000            	ld	bc,0x0000
  2098  06d9  110000            	ld	de,0x0000
  2099                          l_hcca_ping_00103:
  2100  06dc  3a0200            	ld	a, (__rxBufferWritePos+0)
  2101  06df  fd210100          	ld	iy,__rxBufferReadPos
  2102  06e3  fd9600            	sub	a,(iy+0)
  2103  06e6  2016              	jr	NZ,l_hcca_ping_00105
  2104  06e8  0c                	inc	c
  2105  06e9  2004              	jr	NZ,l_hcca_ping_00132
  2106  06eb  04                	inc	b
  2107  06ec  2001              	jr	NZ,l_hcca_ping_00132
  2108  06ee  13                	inc	de
  2109                          l_hcca_ping_00132:
  2110  06ef  79                	ld	a, c
  2111  06f0  d650              	sub	a,0x50
  2112  06f2  20e8              	jr	NZ,l_hcca_ping_00103
  2113  06f4  78                	ld	a, b
  2114  06f5  d6c3              	sub	a,0xc3
  2115  06f7  b3                	or	a, e
  2116  06f8  b2                	or	a,d
  2117  06f9  20e1              	jr	NZ,l_hcca_ping_00103
  2118  06fb  6f                	ld	l,a
  2119  06fc  180e              	jr	l_hcca_ping_00108
  2120                          l_hcca_ping_00105:
  2121  06fe  cd5007            	call	_hcca_readByte
  2122  0701  7d                	ld	a, l
  2123  0702  d655              	sub	a,0x55
  2124  0704  2004              	jr	NZ,l_hcca_ping_00107
  2125  0706  2e01              	ld	l,0x01
  2126  0708  1802              	jr	l_hcca_ping_00108
  2127                          l_hcca_ping_00107:
  2128  070a  2e00              	ld	l,0x00
  2129                          l_hcca_ping_00108:
  2130  070c  c9                	ret
  2131                          	SECTION code_compiler
  2132                          ;	---------------------------------
  2133                          ; Function hcca_isRxBufferAvailable
  2134                          ; ---------------------------------
  2135                          _hcca_isRxBufferAvailable:
  2136  070d  3a0200            	ld	a, (__rxBufferWritePos+0)
  2137  0710  fd210100          	ld	iy,__rxBufferReadPos
  2138  0714  fd9600            	sub	a,(iy+0)
  2139  0717  2004              	jr	NZ,l_hcca_isRxBufferAvailable_00103
  2140  0719  3e01              	ld	a,0x01
  2141  071b  1801              	jr	l_hcca_isRxBufferAvailable_00104
  2142                          l_hcca_isRxBufferAvailable_00103:
  2143  071d  af                	xor	a,a
  2144                          l_hcca_isRxBufferAvailable_00104:
  2145  071e  ee01              	xor	a,0x01
  2146  0720  6f                	ld	l, a
  2147  0721  c9                	ret
  2148                          	SECTION code_compiler
  2149                          ;	---------------------------------
  2150                          ; Function hcca_getSizeOfDataInBuffer
  2151                          ; ---------------------------------
  2152                          _hcca_getSizeOfDataInBuffer:
  2153  0722  3b                	dec	sp
  2154  0723  3a0200            	ld	a,(__rxBufferWritePos)
  2155  0726  fd210100          	ld	iy,__rxBufferReadPos
  2156  072a  fd9600            	sub	a,(iy+0)
  2157  072d  3017              	jr	NC,l_hcca_getSizeOfDataInBuffer_00102
  2158  072f  3a0100            	ld	a, (__rxBufferReadPos+0)
  2159  0732  4f                	ld	c, a
  2160  0733  210000            	ld	hl,0
  2161  0736  39                	add	hl, sp
  2162  0737  3eff              	ld	a,0xff
  2163  0739  91                	sub	a, c
  2164  073a  77                	ld	(hl), a
  2165  073b  3a0200            	ld	a, (__rxBufferWritePos+0)
  2166  073e  210000            	ld	hl,0
  2167  0741  39                	add	hl, sp
  2168  0742  86                	add	a, (hl)
  2169  0743  6f                	ld	l, a
  2170  0744  1808              	jr	l_hcca_getSizeOfDataInBuffer_00103
  2171                          l_hcca_getSizeOfDataInBuffer_00102:
  2172  0746  210100            	ld	hl,__rxBufferReadPos
  2173  0749  3a0200            	ld	a, (__rxBufferWritePos+0)
  2174  074c  96                	sub	a, (hl)
  2175  074d  6f                	ld	l, a
  2176                          l_hcca_getSizeOfDataInBuffer_00103:
  2177  074e  33                	inc	sp
  2178  074f  c9                	ret
  2179                          	SECTION code_compiler
  2180                          ;	---------------------------------
  2181                          ; Function hcca_readByte
  2182                          ; ---------------------------------
  2183                          _hcca_readByte:
  2184                          l_hcca_readByte_00101:
  2185  0750  3a0200            	ld	a, (__rxBufferWritePos+0)
  2186  0753  fd210100          	ld	iy,__rxBufferReadPos
  2187  0757  fd9600            	sub	a,(iy+0)
  2188  075a  28f4              	jr	Z,l_hcca_readByte_00101
  2189  075c  010000            	ld	bc,__rxBuffer+0
  2190  075f  2a0100            	ld	hl, (__rxBufferReadPos)
  2191  0762  2600              	ld	h,0x00
  2192  0764  09                	add	hl, bc
  2193  0765  4e                	ld	c, (hl)
  2194  0766  3a0100            	ld	a, (__rxBufferReadPos+0)
  2195  0769  3c                	inc	a
  2196  076a  320100            	ld	(__rxBufferReadPos+0), a
  2197  076d  69                	ld	l, c
  2198  076e  c9                	ret
  2199                          	SECTION code_compiler
  2200                          ;	---------------------------------
  2201                          ; Function hcca_readUInt16
  2202                          ; ---------------------------------
  2203                          _hcca_readUInt16:
  2204  076f  cd5007            	call	_hcca_readByte
  2205  0772  4d                	ld	c, l
  2206  0773  0600              	ld	b,0x00
  2207  0775  c5                	push	bc
  2208  0776  cd5007            	call	_hcca_readByte
  2209  0779  c1                	pop	bc
  2210  077a  65                	ld	h, l
  2211  077b  2e00              	ld	l,0x00
  2212  077d  09                	add	hl, bc
  2213  077e  c9                	ret
  2214                          	SECTION code_compiler
  2215                          ;	---------------------------------
  2216                          ; Function hcca_readInt16
  2217                          ; ---------------------------------
  2218                          _hcca_readInt16:
  2219  077f  cd5007            	call	_hcca_readByte
  2220  0782  4d                	ld	c, l
  2221  0783  0600              	ld	b,0x00
  2222  0785  c5                	push	bc
  2223  0786  cd5007            	call	_hcca_readByte
  2224  0789  c1                	pop	bc
  2225  078a  65                	ld	h, l
  2226  078b  2e00              	ld	l,0x00
  2227  078d  09                	add	hl, bc
  2228  078e  c9                	ret
  2229                          	SECTION code_compiler
  2230                          ;	---------------------------------
  2231                          ; Function hcca_readUInt32
  2232                          ; ---------------------------------
  2233                          _hcca_readUInt32:
  2234  078f  dde5              	push	ix
  2235  0791  dd210000          	ld	ix,0
  2236  0795  dd39              	add	ix,sp
  2237  0797  f5                	push	af
  2238  0798  f5                	push	af
  2239  0799  cd5007            	call	_hcca_readByte
  2240  079c  dd75fc            	ld	(ix-4),l
  2241  079f  cd5007            	call	_hcca_readByte
  2242  07a2  dd75fd            	ld	(ix-3),l
  2243  07a5  cd5007            	call	_hcca_readByte
  2244  07a8  dd75fe            	ld	(ix-2),l
  2245  07ab  cd5007            	call	_hcca_readByte
  2246  07ae  dd75ff            	ld	(ix-1),l
  2247  07b1  e1                	pop	hl
  2248  07b2  e5                	push	hl
  2249  07b3  dd5efe            	ld	e,(ix-2)
  2250  07b6  dd56ff            	ld	d,(ix-1)
  2251  07b9  ddf9              	ld	sp, ix
  2252  07bb  dde1              	pop	ix
  2253  07bd  c9                	ret
  2254                          	SECTION code_compiler
  2255                          ;	---------------------------------
  2256                          ; Function hcca_readInt32
  2257                          ; ---------------------------------
  2258                          _hcca_readInt32:
  2259  07be  dde5              	push	ix
  2260  07c0  dd210000          	ld	ix,0
  2261  07c4  dd39              	add	ix,sp
  2262  07c6  f5                	push	af
  2263  07c7  f5                	push	af
  2264  07c8  cd5007            	call	_hcca_readByte
  2265  07cb  dd75fc            	ld	(ix-4),l
  2266  07ce  cd5007            	call	_hcca_readByte
  2267  07d1  dd75fd            	ld	(ix-3),l
  2268  07d4  cd5007            	call	_hcca_readByte
  2269  07d7  dd75fe            	ld	(ix-2),l
  2270  07da  cd5007            	call	_hcca_readByte
  2271  07dd  dd75ff            	ld	(ix-1),l
  2272  07e0  e1                	pop	hl
  2273  07e1  e5                	push	hl
  2274  07e2  dd5efe            	ld	e,(ix-2)
  2275  07e5  dd56ff            	ld	d,(ix-1)
  2276  07e8  ddf9              	ld	sp, ix
  2277  07ea  dde1              	pop	ix
  2278  07ec  c9                	ret
  2279                          	SECTION code_compiler
  2280                          ;	---------------------------------
  2281                          ; Function hcca_readBytes
  2282                          ; ---------------------------------
  2283                          _hcca_readBytes:
  2284  07ed  dde5              	push	ix
  2285  07ef  dd210000          	ld	ix,0
  2286  07f3  dd39              	add	ix,sp
  2287  07f5  dd7e08            	ld	a,(ix+8)
  2288  07f8  dd8604            	add	a,(ix+4)
  2289  07fb  4f                	ld	c, a
  2290  07fc  dd7e09            	ld	a,(ix+9)
  2291  07ff  dd8e05            	adc	a,(ix+5)
  2292  0802  47                	ld	b, a
  2293  0803  dd6e06            	ld	l,(ix+6)
  2294  0806  dd6607            	ld	h,(ix+7)
  2295  0809  09                	add	hl, bc
  2296  080a  eb                	ex	de, hl
  2297                          l_hcca_readBytes_00101:
  2298  080b  3a0200            	ld	a, (__rxBufferWritePos+0)
  2299  080e  fd210100          	ld	iy,__rxBufferReadPos
  2300  0812  fd9600            	sub	a,(iy+0)
  2301  0815  28f4              	jr	Z,l_hcca_readBytes_00101
  2302  0817  fd210000          	ld	iy,__rxBuffer
  2303  081b  c5                	push	bc
  2304  081c  ed4b0100          	ld	bc, (__rxBufferReadPos)
  2305  0820  0600              	ld	b,0x00
  2306  0822  fd09              	add	iy, bc
  2307  0824  c1                	pop	bc
  2308  0825  fd7e00            	ld	a,(iy+0)
  2309  0828  02                	ld	(bc), a
  2310  0829  03                	inc	bc
  2311  082a  3a0100            	ld	a, (__rxBufferReadPos+0)
  2312  082d  3c                	inc	a
  2313  082e  320100            	ld	(__rxBufferReadPos+0), a
  2314  0831  69                	ld	l, c
  2315  0832  60                	ld	h, b
  2316  0833  bf                	cp	a, a
  2317  0834  ed52              	sbc	hl, de
  2318  0836  20d3              	jr	NZ,l_hcca_readBytes_00101
  2319  0838  dde1              	pop	ix
  2320  083a  c9                	ret
  2321                          	SECTION code_compiler
  2322                          ;	---------------------------------
  2323                          ; Function hcca_writeByte
  2324                          ; ---------------------------------
  2325                          _hcca_writeByte:
  2326  083b  cd8e00            	call	_NABU_DisableInterrupts
  2327  083e  3e0e              	ld	a,0x0e
  2328  0840  f5                	push	af
  2329  0841  33                	inc	sp
  2330  0842  cd7004            	call	_ayRead
  2331  0845  33                	inc	sp
  2332  0846  45                	ld	b, l
  2333  0847  c5                	push	bc
  2334  0848  110e40            	ld	de,0x400e
  2335  084b  d5                	push	de
  2336  084c  cd5f04            	call	_ayWrite
  2337  084f  f1                	pop	af
  2338  0850  c1                	pop	bc
  2339  0851  3e0f              	ld	a,0x0f
  2340  0853  d341              	out	(_IO_AYLATCH), a
  2341                          l_hcca_writeByte_00101:
  2342  0855  db40              	in	a, (_IO_AYDATA)
  2343  0857  cb57              	bit	2, a
  2344  0859  20fa              	jr	NZ,l_hcca_writeByte_00101
  2345  085b  210200            	ld	hl,2+0
  2346  085e  39                	add	hl, sp
  2347  085f  7e                	ld	a, (hl)
  2348  0860  d380              	out	(_IO_HCCA), a
  2349  0862  c5                	push	bc
  2350  0863  33                	inc	sp
  2351  0864  3e0e              	ld	a,0x0e
  2352  0866  f5                	push	af
  2353  0867  33                	inc	sp
  2354  0868  cd5f04            	call	_ayWrite
  2355  086b  f1                	pop	af
  2356  086c  c39000            	jp	_NABU_EnableInterrupts
  2357                          	SECTION code_compiler
  2358                          ;	---------------------------------
  2359                          ; Function hcca_writeUInt32
  2360                          ; ---------------------------------
  2361                          _hcca_writeUInt32:
  2362  086f  210200            	ld	hl,2+0
  2363  0872  39                	add	hl, sp
  2364  0873  7e                	ld	a, (hl)
  2365  0874  f5                	push	af
  2366  0875  33                	inc	sp
  2367  0876  cd3b08            	call	_hcca_writeByte
  2368  0879  33                	inc	sp
  2369  087a  210300            	ld	hl,2+1
  2370  087d  39                	add	hl, sp
  2371  087e  7e                	ld	a, (hl)
  2372  087f  f5                	push	af
  2373  0880  33                	inc	sp
  2374  0881  cd3b08            	call	_hcca_writeByte
  2375  0884  33                	inc	sp
  2376  0885  210400            	ld	hl,2+2
  2377  0888  39                	add	hl, sp
  2378  0889  7e                	ld	a, (hl)
  2379  088a  f5                	push	af
  2380  088b  33                	inc	sp
  2381  088c  cd3b08            	call	_hcca_writeByte
  2382  088f  33                	inc	sp
  2383  0890  210500            	ld	hl,2+3
  2384  0893  39                	add	hl, sp
  2385  0894  7e                	ld	a, (hl)
  2386  0895  f5                	push	af
  2387  0896  33                	inc	sp
  2388  0897  cd3b08            	call	_hcca_writeByte
  2389  089a  33                	inc	sp
  2390  089b  c9                	ret
  2391                          	SECTION code_compiler
  2392                          ;	---------------------------------
  2393                          ; Function hcca_writeInt32
  2394                          ; ---------------------------------
  2395                          _hcca_writeInt32:
  2396  089c  210200            	ld	hl,2+0
  2397  089f  39                	add	hl, sp
  2398  08a0  7e                	ld	a, (hl)
  2399  08a1  f5                	push	af
  2400  08a2  33                	inc	sp
  2401  08a3  cd3b08            	call	_hcca_writeByte
  2402  08a6  33                	inc	sp
  2403  08a7  210300            	ld	hl,2+1
  2404  08aa  39                	add	hl, sp
  2405  08ab  7e                	ld	a, (hl)
  2406  08ac  f5                	push	af
  2407  08ad  33                	inc	sp
  2408  08ae  cd3b08            	call	_hcca_writeByte
  2409  08b1  33                	inc	sp
  2410  08b2  210400            	ld	hl,2+2
  2411  08b5  39                	add	hl, sp
  2412  08b6  7e                	ld	a, (hl)
  2413  08b7  f5                	push	af
  2414  08b8  33                	inc	sp
  2415  08b9  cd3b08            	call	_hcca_writeByte
  2416  08bc  33                	inc	sp
  2417  08bd  210500            	ld	hl,2+3
  2418  08c0  39                	add	hl, sp
  2419  08c1  7e                	ld	a, (hl)
  2420  08c2  f5                	push	af
  2421  08c3  33                	inc	sp
  2422  08c4  cd3b08            	call	_hcca_writeByte
  2423  08c7  33                	inc	sp
  2424  08c8  c9                	ret
  2425                          	SECTION code_compiler
  2426                          ;	---------------------------------
  2427                          ; Function hcca_writeUInt16
  2428                          ; ---------------------------------
  2429                          _hcca_writeUInt16:
  2430  08c9  210200            	ld	hl,2+0
  2431  08cc  39                	add	hl, sp
  2432  08cd  7e                	ld	a, (hl)
  2433  08ce  f5                	push	af
  2434  08cf  33                	inc	sp
  2435  08d0  cd3b08            	call	_hcca_writeByte
  2436  08d3  33                	inc	sp
  2437  08d4  210300            	ld	hl,2+1
  2438  08d7  39                	add	hl, sp
  2439  08d8  7e                	ld	a, (hl)
  2440  08d9  f5                	push	af
  2441  08da  33                	inc	sp
  2442  08db  cd3b08            	call	_hcca_writeByte
  2443  08de  33                	inc	sp
  2444  08df  c9                	ret
  2445                          	SECTION code_compiler
  2446                          ;	---------------------------------
  2447                          ; Function hcca_writeInt16
  2448                          ; ---------------------------------
  2449                          _hcca_writeInt16:
  2450  08e0  210200            	ld	hl,2+0
  2451  08e3  39                	add	hl, sp
  2452  08e4  7e                	ld	a, (hl)
  2453  08e5  f5                	push	af
  2454  08e6  33                	inc	sp
  2455  08e7  cd3b08            	call	_hcca_writeByte
  2456  08ea  33                	inc	sp
  2457  08eb  210300            	ld	hl,2+1
  2458  08ee  39                	add	hl, sp
  2459  08ef  7e                	ld	a, (hl)
  2460  08f0  f5                	push	af
  2461  08f1  33                	inc	sp
  2462  08f2  cd3b08            	call	_hcca_writeByte
  2463  08f5  33                	inc	sp
  2464  08f6  c9                	ret
  2465                          	SECTION code_compiler
  2466                          ;	---------------------------------
  2467                          ; Function hcca_writeString
  2468                          ; ---------------------------------
  2469                          _hcca_writeString:
  2470  08f7  010000            	ld	bc,0x0000
  2471                          l_hcca_writeString_00103:
  2472  08fa  210200            	ld	hl,2
  2473  08fd  39                	add	hl, sp
  2474  08fe  7e                	ld	a, (hl)
  2475  08ff  23                	inc	hl
  2476  0900  66                	ld	h, (hl)
  2477  0901  6f                	ld	l, a
  2478  0902  09                	add	hl, bc
  2479  0903  7e                	ld	a, (hl)
  2480  0904  b7                	or	a, a
  2481  0905  c8                	ret	Z
  2482  0906  c5                	push	bc
  2483  0907  f5                	push	af
  2484  0908  33                	inc	sp
  2485  0909  cd3b08            	call	_hcca_writeByte
  2486  090c  33                	inc	sp
  2487  090d  c1                	pop	bc
  2488  090e  03                	inc	bc
  2489  090f  18e9              	jr	l_hcca_writeString_00103
  2490                          	SECTION code_compiler
  2491                          ;	---------------------------------
  2492                          ; Function hcca_writeBytes
  2493                          ; ---------------------------------
  2494                          _hcca_writeBytes:
  2495  0911  dde5              	push	ix
  2496  0913  dd210000          	ld	ix,0
  2497  0917  dd39              	add	ix,sp
  2498  0919  dd7e08            	ld	a,(ix+8)
  2499  091c  dd8604            	add	a,(ix+4)
  2500  091f  4f                	ld	c, a
  2501  0920  dd7e09            	ld	a,(ix+9)
  2502  0923  dd8e05            	adc	a,(ix+5)
  2503  0926  47                	ld	b, a
  2504  0927  dd6e06            	ld	l,(ix+6)
  2505  092a  dd6607            	ld	h,(ix+7)
  2506  092d  09                	add	hl, bc
  2507  092e  eb                	ex	de, hl
  2508                          l_hcca_writeBytes_00101:
  2509  092f  69                	ld	l, c
  2510  0930  60                	ld	h, b
  2511  0931  bf                	cp	a, a
  2512  0932  ed52              	sbc	hl, de
  2513  0934  280e              	jr	Z,l_hcca_writeBytes_00104
  2514  0936  0a                	ld	a, (bc)
  2515  0937  c5                	push	bc
  2516  0938  d5                	push	de
  2517  0939  f5                	push	af
  2518  093a  33                	inc	sp
  2519  093b  cd3b08            	call	_hcca_writeByte
  2520  093e  33                	inc	sp
  2521  093f  d1                	pop	de
  2522  0940  c1                	pop	bc
  2523  0941  03                	inc	bc
  2524  0942  18eb              	jr	l_hcca_writeBytes_00101
  2525                          l_hcca_writeBytes_00104:
  2526  0944  dde1              	pop	ix
  2527  0946  c9                	ret
  2528                          	SECTION code_compiler
  2529                          ;	---------------------------------
  2530                          ; Function vdp_setRegister
  2531                          ; ---------------------------------
  2532                          _vdp_setRegister:
  2533  0947  fd210300          	ld	iy,3
  2534  094b  fd39              	add	iy, sp
  2535  094d  fd7e00            	ld	a,(iy+0)
  2536  0950  d3a1              	out	(_IO_VDPLATCH), a
  2537  0952  fd2b              	dec	iy
  2538  0954  fd7e00            	ld	a,(iy+0)
  2539  0957  f680              	or	a,0x80
  2540  0959  d3a1              	out	(_IO_VDPLATCH), a
  2541  095b  c9                	ret
  2542                          	SECTION code_compiler
  2543                          ;	---------------------------------
  2544                          ; Function vdp_setWriteAddress
  2545                          ; ---------------------------------
  2546                          _vdp_setWriteAddress:
  2547  095c  fd210200          	ld	iy,2
  2548  0960  fd39              	add	iy, sp
  2549  0962  fd7e00            	ld	a,(iy+0)
  2550  0965  d3a1              	out	(_IO_VDPLATCH), a
  2551  0967  fd7e01            	ld	a,(iy+1)
  2552  096a  f640              	or	a,0x40
  2553  096c  d3a1              	out	(_IO_VDPLATCH), a
  2554  096e  c9                	ret
  2555                          	SECTION code_compiler
  2556                          ;	---------------------------------
  2557                          ; Function vdp_setReadAddress
  2558                          ; ---------------------------------
  2559                          _vdp_setReadAddress:
  2560  096f  fd210200          	ld	iy,2
  2561  0973  fd39              	add	iy, sp
  2562  0975  fd7e00            	ld	a,(iy+0)
  2563  0978  d3a1              	out	(_IO_VDPLATCH), a
  2564  097a  fd7e01            	ld	a,(iy+1)
  2565  097d  d3a1              	out	(_IO_VDPLATCH), a
  2566  097f  c9                	ret
  2567                          	SECTION code_compiler
  2568                          ;	---------------------------------
  2569                          ; Function waitVdpISR
  2570                          ; ---------------------------------
  2571                          _waitVdpISR:
  2572  0980  f5                	push	af
  2573  0981  dba1              	in	a, (_IO_VDPLATCH)
  2574  0983  321000            	ld	(_vdpStatusRegVal), a
  2575  0986  3e01              	ld	a, 0x01
  2576  0988  321100            	ld	(_vdpIsReady), a
  2577  098b  f1                	pop	af
  2578  098c  fb                	ei
  2579  098d  ed4d              	reti
  2580                          ;	---------------------------------
  2581                          ; Function vdp_enableVDPReadyInt
  2582                          ; ---------------------------------
  2583                          _vdp_enableVDPReadyInt:
  2584  098f  cd8e00            	call	_NABU_DisableInterrupts
  2585  0992  218009            	ld	hl, _waitVdpISR
  2586  0995  2206ff            	ld	(0xff00 + 6), hl
  2587  0998  3e0e              	ld	a,0x0e
  2588  099a  f5                	push	af
  2589  099b  33                	inc	sp
  2590  099c  cd7004            	call	_ayRead
  2591  099f  33                	inc	sp
  2592  09a0  7d                	ld	a, l
  2593  09a1  cbe7              	set	4, a
  2594  09a3  57                	ld	d,a
  2595  09a4  1e0e              	ld	e,0x0e
  2596  09a6  d5                	push	de
  2597  09a7  cd5f04            	call	_ayWrite
  2598  09aa  f1                	pop	af
  2599  09ab  cd9000            	call	_NABU_EnableInterrupts
  2600  09ae  210f00            	ld	hl,__vdpInterruptEnabled + 0
  2601  09b1  3601              	ld	(hl),0x01
  2602  09b3  3a0c00            	ld	a, (__vdpReg1Val+0)
  2603  09b6  cbef              	set	5, a
  2604  09b8  57                	ld	d,a
  2605  09b9  1e01              	ld	e,0x01
  2606  09bb  d5                	push	de
  2607  09bc  cd4709            	call	_vdp_setRegister
  2608  09bf  f1                	pop	af
  2609  09c0  c9                	ret
  2610                          	SECTION code_compiler
  2611                          ;	---------------------------------
  2612                          ; Function vdp_waitVDPReadyInt
  2613                          ; ---------------------------------
  2614                          _vdp_waitVDPReadyInt:
  2615  09c1  211100            	ld	hl,_vdpIsReady + 0
  2616  09c4  3600              	ld	(hl),0x00
  2617                          l_vdp_waitVDPReadyInt_00101:
  2618  09c6  3a1100            	ld	a, (_vdpIsReady+0)
  2619  09c9  b7                	or	a, a
  2620  09ca  28fa              	jr	Z,l_vdp_waitVDPReadyInt_00101
  2621  09cc  c9                	ret
  2622                          	SECTION code_compiler
  2623                          ;	---------------------------------
  2624                          ; Function vdp_disableVDPReadyInt
  2625                          ; ---------------------------------
  2626                          _vdp_disableVDPReadyInt:
  2627  09cd  3a0c00            	ld	a, (__vdpReg1Val+0)
  2628  09d0  57                	ld	d,a
  2629  09d1  1e01              	ld	e,0x01
  2630  09d3  d5                	push	de
  2631  09d4  cd4709            	call	_vdp_setRegister
  2632  09d7  f1                	pop	af
  2633  09d8  cd8e00            	call	_NABU_DisableInterrupts
  2634  09db  210f00            	ld	hl,__vdpInterruptEnabled + 0
  2635  09de  3600              	ld	(hl),0x00
  2636  09e0  db41              	in	a, (_IO_AYLATCH)
  2637  09e2  3e0e              	ld	a,0x0e
  2638  09e4  f5                	push	af
  2639  09e5  33                	inc	sp
  2640  09e6  cd7004            	call	_ayRead
  2641  09e9  33                	inc	sp
  2642  09ea  7d                	ld	a, l
  2643  09eb  cb67              	bit	4, a
  2644  09ed  2802              	jr	Z,l_vdp_disableVDPReadyInt_00102
  2645  09ef  ee10              	xor	a,0x10
  2646                          l_vdp_disableVDPReadyInt_00102:
  2647  09f1  57                	ld	d,a
  2648  09f2  1e0e              	ld	e,0x0e
  2649  09f4  d5                	push	de
  2650  09f5  cd5f04            	call	_ayWrite
  2651  09f8  f1                	pop	af
  2652  09f9  c39000            	jp	_NABU_EnableInterrupts
  2653                          	SECTION code_compiler
  2654                          ;	---------------------------------
  2655                          ; Function vdp_addISR
  2656                          ; ---------------------------------
  2657                          _vdp_addISR:
  2658  09fc  cd8e00            	call	_NABU_DisableInterrupts
  2659  09ff  fd210200          	ld	iy,2
  2660  0a03  fd39              	add	iy, sp
  2661  0a05  fd7e00            	ld	a,(iy+0)
  2662  0a08  328009            	ld	(__vdp_ISR+0), a
  2663  0a0b  fd7e01            	ld	a,(iy+1)
  2664  0a0e  328109            	ld	(__vdp_ISR+1), a
  2665  0a11  2a8009            	ld	hl, (__vdp_ISR)
  2666  0a14  2206ff            	ld	(0xff00 + 6), hl
  2667  0a17  3e0e              	ld	a,0x0e
  2668  0a19  f5                	push	af
  2669  0a1a  33                	inc	sp
  2670  0a1b  cd7004            	call	_ayRead
  2671  0a1e  33                	inc	sp
  2672  0a1f  7d                	ld	a, l
  2673  0a20  cbe7              	set	4, a
  2674  0a22  57                	ld	d,a
  2675  0a23  1e0e              	ld	e,0x0e
  2676  0a25  d5                	push	de
  2677  0a26  cd5f04            	call	_ayWrite
  2678  0a29  f1                	pop	af
  2679  0a2a  cd9000            	call	_NABU_EnableInterrupts
  2680  0a2d  210f00            	ld	hl,__vdpInterruptEnabled + 0
  2681  0a30  3601              	ld	(hl),0x01
  2682  0a32  3a0c00            	ld	a, (__vdpReg1Val+0)
  2683  0a35  cbef              	set	5, a
  2684  0a37  57                	ld	d,a
  2685  0a38  1e01              	ld	e,0x01
  2686  0a3a  d5                	push	de
  2687  0a3b  cd4709            	call	_vdp_setRegister
  2688  0a3e  f1                	pop	af
  2689  0a3f  c9                	ret
  2690                          	SECTION code_compiler
  2691                          ;	---------------------------------
  2692                          ; Function vdp_removeISR
  2693                          ; ---------------------------------
  2694                          _vdp_removeISR:
  2695  0a40  3a0c00            	ld	a, (__vdpReg1Val+0)
  2696  0a43  57                	ld	d,a
  2697  0a44  1e01              	ld	e,0x01
  2698  0a46  d5                	push	de
  2699  0a47  cd4709            	call	_vdp_setRegister
  2700  0a4a  f1                	pop	af
  2701  0a4b  cd8e00            	call	_NABU_DisableInterrupts
  2702  0a4e  210f00            	ld	hl,__vdpInterruptEnabled + 0
  2703  0a51  3600              	ld	(hl),0x00
  2704  0a53  db41              	in	a, (_IO_AYLATCH)
  2705  0a55  3e0e              	ld	a,0x0e
  2706  0a57  f5                	push	af
  2707  0a58  33                	inc	sp
  2708  0a59  cd7004            	call	_ayRead
  2709  0a5c  33                	inc	sp
  2710  0a5d  7d                	ld	a, l
  2711  0a5e  cb67              	bit	4, a
  2712  0a60  2802              	jr	Z,l_vdp_removeISR_00102
  2713  0a62  ee10              	xor	a,0x10
  2714                          l_vdp_removeISR_00102:
  2715  0a64  57                	ld	d,a
  2716  0a65  1e0e              	ld	e,0x0e
  2717  0a67  d5                	push	de
  2718  0a68  cd5f04            	call	_ayWrite
  2719  0a6b  f1                	pop	af
  2720  0a6c  c39000            	jp	_NABU_EnableInterrupts
  2721                          	SECTION code_compiler
  2722                          ;	---------------------------------
  2723                          ; Function vdp_init
  2724                          ; ---------------------------------
  2725                          _vdp_init:
  2726  0a6f  dde5              	push	ix
  2727  0a71  dd210000          	ld	ix,0
  2728  0a75  dd39              	add	ix,sp
  2729  0a77  dd7e04            	ld	a,(ix+4)
  2730  0a7a  329109            	ld	(__vdpMode+0), a
  2731  0a7d  dd7e0a            	ld	a,(ix+10)
  2732  0a80  329309            	ld	(__vdpSplitThirds+0), a
  2733  0a83  dd7e07            	ld	a,(ix+7)
  2734  0a86  328609            	ld	(__vdpSpriteSizeSelected+0), a
  2735  0a89  dd7e09            	ld	a,(ix+9)
  2736  0a8c  329209            	ld	(__autoScroll+0), a
  2737  0a8f  210f00            	ld	hl,__vdpInterruptEnabled + 0
  2738  0a92  3600              	ld	(hl),0x00
  2739  0a94  210a00            	ld	hl,_vdp_cursor
  2740  0a97  3600              	ld	(hl),0x00
  2741  0a99  210b00            	ld	hl, +(_vdp_cursor + 1)
  2742  0a9c  3600              	ld	(hl),0x00
  2743  0a9e  dd7e07            	ld	a,(ix+7)
  2744  0aa1  87                	add	a, a
  2745  0aa2  4f                	ld	c, a
  2746  0aa3  dd7e04            	ld	a,(ix+4)
  2747  0aa6  3d                	dec	a
  2748  0aa7  281a              	jr	Z,l_vdp_init_00101
  2749  0aa9  dd7e04            	ld	a,(ix+4)
  2750  0aac  d602              	sub	a,0x02
  2751  0aae  cabb0b            	jp	Z,l_vdp_init_00107
  2752  0ab1  dd7e04            	ld	a,(ix+4)
  2753  0ab4  d603              	sub	a,0x03
  2754  0ab6  2875              	jr	Z,l_vdp_init_00105
  2755  0ab8  dd7e04            	ld	a,(ix+4)
  2756  0abb  d604              	sub	a,0x04
  2757  0abd  ca770b            	jp	Z,l_vdp_init_00106
  2758  0ac0  c3110c            	jp	l_vdp_init_00108
  2759                          l_vdp_init_00101:
  2760  0ac3  c5                	push	bc
  2761  0ac4  3e02              	ld	a,0x02
  2762  0ac6  f5                	push	af
  2763  0ac7  33                	inc	sp
  2764  0ac8  af                	xor	a, a
  2765  0ac9  f5                	push	af
  2766  0aca  33                	inc	sp
  2767  0acb  cd4709            	call	_vdp_setRegister
  2768  0ace  f1                	pop	af
  2769  0acf  c1                	pop	bc
  2770  0ad0  79                	ld	a, c
  2771  0ad1  f6c0              	or	a,0xc0
  2772  0ad3  ddb608            	or	a,(ix+8)
  2773  0ad6  320c00            	ld	(__vdpReg1Val+0), a
  2774  0ad9  3a0c00            	ld	a, (__vdpReg1Val+0)
  2775  0adc  57                	ld	d,a
  2776  0add  1e01              	ld	e,0x01
  2777  0adf  d5                	push	de
  2778  0ae0  cd4709            	call	_vdp_setRegister
  2779  0ae3  f1                	pop	af
  2780  0ae4  110206            	ld	de,0x0602
  2781  0ae7  d5                	push	de
  2782  0ae8  cd4709            	call	_vdp_setRegister
  2783  0aeb  f1                	pop	af
  2784  0aec  210018            	ld	hl,0x1800
  2785  0aef  228709            	ld	(__vdpPatternNameTableAddr), hl
  2786  0af2  3a9309            	ld	a, (__vdpSplitThirds+0)
  2787  0af5  b7                	or	a, a
  2788  0af6  280a              	jr	Z,l_vdp_init_00103
  2789  0af8  110403            	ld	de,0x0304
  2790  0afb  d5                	push	de
  2791  0afc  cd4709            	call	_vdp_setRegister
  2792  0aff  f1                	pop	af
  2793  0b00  1809              	jr	l_vdp_init_00104
  2794                          l_vdp_init_00103:
  2795  0b02  af                	xor	a, a
  2796  0b03  57                	ld	d,a
  2797  0b04  1e04              	ld	e,0x04
  2798  0b06  d5                	push	de
  2799  0b07  cd4709            	call	_vdp_setRegister
  2800  0b0a  f1                	pop	af
  2801                          l_vdp_init_00104:
  2802  0b0b  210000            	ld	hl,0x0000
  2803  0b0e  228b09            	ld	(__vdpPatternGeneratorTableAddr), hl
  2804  0b11  dd360500          	ld	(ix+5),0x00
  2805  0b15  fd218d09          	ld	iy,__vdpCursorMaxX
  2806  0b19  fd36001f          	ld	(iy+0),0x1f
  2807  0b1d  fd218e09          	ld	iy,__vdpCursorMaxXFull
  2808  0b21  fd360020          	ld	(iy+0),0x20
  2809  0b25  2603              	ld	h,0x03
  2810  0b27  228f09            	ld	(__vdpTextBufferSize), hl
  2811  0b2a  c3110c            	jp	l_vdp_init_00108
  2812                          l_vdp_init_00105:
  2813  0b2d  af                	xor	a, a
  2814  0b2e  f5                	push	af
  2815  0b2f  33                	inc	sp
  2816  0b30  af                	xor	a, a
  2817  0b31  f5                	push	af
  2818  0b32  33                	inc	sp
  2819  0b33  cd4709            	call	_vdp_setRegister
  2820  0b36  f1                	pop	af
  2821  0b37  210c00            	ld	hl,__vdpReg1Val + 0
  2822  0b3a  36d2              	ld	(hl),0xd2
  2823  0b3c  3a0c00            	ld	a, (__vdpReg1Val+0)
  2824  0b3f  57                	ld	d,a
  2825  0b40  1e01              	ld	e,0x01
  2826  0b42  d5                	push	de
  2827  0b43  cd4709            	call	_vdp_setRegister
  2828  0b46  f1                	pop	af
  2829  0b47  110206            	ld	de,0x0602
  2830  0b4a  d5                	push	de
  2831  0b4b  cd4709            	call	_vdp_setRegister
  2832  0b4e  f1                	pop	af
  2833  0b4f  210018            	ld	hl,0x1800
  2834  0b52  228709            	ld	(__vdpPatternNameTableAddr), hl
  2835  0b55  af                	xor	a, a
  2836  0b56  57                	ld	d,a
  2837  0b57  1e04              	ld	e,0x04
  2838  0b59  d5                	push	de
  2839  0b5a  cd4709            	call	_vdp_setRegister
  2840  0b5d  f1                	pop	af
  2841  0b5e  210000            	ld	hl,0x0000
  2842  0b61  228b09            	ld	(__vdpPatternGeneratorTableAddr), hl
  2843  0b64  218d09            	ld	hl,__vdpCursorMaxX + 0
  2844  0b67  3627              	ld	(hl),0x27
  2845  0b69  218e09            	ld	hl,__vdpCursorMaxXFull + 0
  2846  0b6c  3628              	ld	(hl),0x28
  2847  0b6e  21c003            	ld	hl,0x03c0
  2848  0b71  228f09            	ld	(__vdpTextBufferSize), hl
  2849  0b74  c3110c            	jp	l_vdp_init_00108
  2850                          l_vdp_init_00106:
  2851  0b77  3e04              	ld	a,0x04
  2852  0b79  f5                	push	af
  2853  0b7a  33                	inc	sp
  2854  0b7b  af                	xor	a, a
  2855  0b7c  f5                	push	af
  2856  0b7d  33                	inc	sp
  2857  0b7e  cd4709            	call	_vdp_setRegister
  2858  0b81  f1                	pop	af
  2859  0b82  210c00            	ld	hl,__vdpReg1Val + 0
  2860  0b85  36d2              	ld	(hl),0xd2
  2861  0b87  3a0c00            	ld	a, (__vdpReg1Val+0)
  2862  0b8a  57                	ld	d,a
  2863  0b8b  1e01              	ld	e,0x01
  2864  0b8d  d5                	push	de
  2865  0b8e  cd4709            	call	_vdp_setRegister
  2866  0b91  f1                	pop	af
  2867  0b92  110207            	ld	de,0x0702
  2868  0b95  d5                	push	de
  2869  0b96  cd4709            	call	_vdp_setRegister
  2870  0b99  f1                	pop	af
  2871  0b9a  210010            	ld	hl,0x1000
  2872  0b9d  228709            	ld	(__vdpPatternNameTableAddr), hl
  2873  0ba0  af                	xor	a, a
  2874  0ba1  57                	ld	d,a
  2875  0ba2  1e04              	ld	e,0x04
  2876  0ba4  d5                	push	de
  2877  0ba5  cd4709            	call	_vdp_setRegister
  2878  0ba8  f1                	pop	af
  2879  0ba9  218d09            	ld	hl,__vdpCursorMaxX + 0
  2880  0bac  364f              	ld	(hl),0x4f
  2881  0bae  218e09            	ld	hl,__vdpCursorMaxXFull + 0
  2882  0bb1  3650              	ld	(hl),0x50
  2883  0bb3  218007            	ld	hl,0x0780
  2884  0bb6  228f09            	ld	(__vdpTextBufferSize), hl
  2885  0bb9  1856              	jr	l_vdp_init_00108
  2886                          l_vdp_init_00107:
  2887  0bbb  c5                	push	bc
  2888  0bbc  af                	xor	a, a
  2889  0bbd  f5                	push	af
  2890  0bbe  33                	inc	sp
  2891  0bbf  af                	xor	a, a
  2892  0bc0  f5                	push	af
  2893  0bc1  33                	inc	sp
  2894  0bc2  cd4709            	call	_vdp_setRegister
  2895  0bc5  f1                	pop	af
  2896  0bc6  c1                	pop	bc
  2897  0bc7  79                	ld	a, c
  2898  0bc8  f6c8              	or	a,0xc8
  2899  0bca  ddb608            	or	a,(ix+8)
  2900  0bcd  320c00            	ld	(__vdpReg1Val+0), a
  2901  0bd0  3a0c00            	ld	a, (__vdpReg1Val+0)
  2902  0bd3  57                	ld	d,a
  2903  0bd4  1e01              	ld	e,0x01
  2904  0bd6  d5                	push	de
  2905  0bd7  cd4709            	call	_vdp_setRegister
  2906  0bda  f1                	pop	af
  2907  0bdb  110206            	ld	de,0x0602
  2908  0bde  d5                	push	de
  2909  0bdf  cd4709            	call	_vdp_setRegister
  2910  0be2  f1                	pop	af
  2911  0be3  210018            	ld	hl,0x1800
  2912  0be6  228709            	ld	(__vdpPatternNameTableAddr), hl
  2913  0be9  af                	xor	a, a
  2914  0bea  57                	ld	d,a
  2915  0beb  1e04              	ld	e,0x04
  2916  0bed  d5                	push	de
  2917  0bee  cd4709            	call	_vdp_setRegister
  2918  0bf1  f1                	pop	af
  2919  0bf2  210000            	ld	hl,0x0000
  2920  0bf5  228b09            	ld	(__vdpPatternGeneratorTableAddr), hl
  2921  0bf8  dd360500          	ld	(ix+5),0x00
  2922  0bfc  fd218d09          	ld	iy,__vdpCursorMaxX
  2923  0c00  fd36001f          	ld	(iy+0),0x1f
  2924  0c04  fd218e09          	ld	iy,__vdpCursorMaxXFull
  2925  0c08  fd360020          	ld	(iy+0),0x20
  2926  0c0c  2603              	ld	h,0x03
  2927  0c0e  228f09            	ld	(__vdpTextBufferSize), hl
  2928                          l_vdp_init_00108:
  2929  0c11  3a9309            	ld	a, (__vdpSplitThirds+0)
  2930  0c14  b7                	or	a, a
  2931  0c15  280a              	jr	Z,l_vdp_init_00110
  2932  0c17  1103ff            	ld	de,0xff03
  2933  0c1a  d5                	push	de
  2934  0c1b  cd4709            	call	_vdp_setRegister
  2935  0c1e  f1                	pop	af
  2936  0c1f  1808              	jr	l_vdp_init_00111
  2937                          l_vdp_init_00110:
  2938  0c21  11039f            	ld	de,0x9f03
  2939  0c24  d5                	push	de
  2940  0c25  cd4709            	call	_vdp_setRegister
  2941  0c28  f1                	pop	af
  2942                          l_vdp_init_00111:
  2943  0c29  210020            	ld	hl,0x2000
  2944  0c2c  228909            	ld	(__vdpColorTableAddr), hl
  2945  0c2f  110536            	ld	de,0x3605
  2946  0c32  d5                	push	de
  2947  0c33  cd4709            	call	_vdp_setRegister
  2948  0c36  f1                	pop	af
  2949  0c37  21001b            	ld	hl,0x1b00
  2950  0c3a  228209            	ld	(__vdpSpriteAttributeTableAddr), hl
  2951  0c3d  110607            	ld	de,0x0706
  2952  0c40  d5                	push	de
  2953  0c41  cd4709            	call	_vdp_setRegister
  2954  0c44  f1                	pop	af
  2955  0c45  210038            	ld	hl,0x3800
  2956  0c48  228409            	ld	(__vdpSpriteGeneratorTableAddr), hl
  2957  0c4b  dd7e05            	ld	a,(ix+5)
  2958  0c4e  87                	add	a, a
  2959  0c4f  87                	add	a, a
  2960  0c50  87                	add	a, a
  2961  0c51  87                	add	a, a
  2962  0c52  4f                	ld	c, a
  2963  0c53  dd7e06            	ld	a,(ix+6)
  2964  0c56  e60f              	and	a,0x0f
  2965  0c58  b1                	or	a, c
  2966  0c59  57                	ld	d,a
  2967  0c5a  1e07              	ld	e,0x07
  2968  0c5c  d5                	push	de
  2969  0c5d  cd4709            	call	_vdp_setRegister
  2970  0c60  f1                	pop	af
  2971  0c61  dde1              	pop	ix
  2972  0c63  c3700d            	jp	_vdp_clearScreen
  2973                          	SECTION code_compiler
  2974                          ;	---------------------------------
  2975                          ; Function vdp_clearVRAM
  2976                          ; ---------------------------------
  2977                          _vdp_clearVRAM:
  2978  0c66  210000            	ld	hl,0x0000
  2979  0c69  e5                	push	hl
  2980  0c6a  cd5c09            	call	_vdp_setWriteAddress
  2981  0c6d  f1                	pop	af
  2982  0c6e  010000            	ld	bc,0x0000
  2983                          l_vdp_clearVRAM_00103:
  2984  0c71  79                	ld	a, c
  2985  0c72  d6ff              	sub	a,0xff
  2986  0c74  78                	ld	a, b
  2987  0c75  de3f              	sbc	a,0x3f
  2988  0c77  d0                	ret	NC
  2989  0c78  3e00              	ld	a,0x00
  2990  0c7a  d3a0              	out	(_IO_VDPDATA), a
  2991  0c7c  03                	inc	bc
  2992  0c7d  18f2              	jr	l_vdp_clearVRAM_00103
  2993                          	SECTION code_compiler
  2994                          ;	---------------------------------
  2995                          ; Function vdp_initMSXMode
  2996                          ; ---------------------------------
  2997                          _vdp_initMSXMode:
  2998  0c7f  3e02              	ld	a,0x02
  2999  0c81  f5                	push	af
  3000  0c82  33                	inc	sp
  3001  0c83  af                	xor	a, a
  3002  0c84  f5                	push	af
  3003  0c85  33                	inc	sp
  3004  0c86  cd4709            	call	_vdp_setRegister
  3005  0c89  f1                	pop	af
  3006  0c8a  1101c0            	ld	de,0xc001
  3007  0c8d  d5                	push	de
  3008  0c8e  cd4709            	call	_vdp_setRegister
  3009  0c91  f1                	pop	af
  3010  0c92  110206            	ld	de,0x0602
  3011  0c95  d5                	push	de
  3012  0c96  cd4709            	call	_vdp_setRegister
  3013  0c99  f1                	pop	af
  3014  0c9a  1103ff            	ld	de,0xff03
  3015  0c9d  d5                	push	de
  3016  0c9e  cd4709            	call	_vdp_setRegister
  3017  0ca1  f1                	pop	af
  3018  0ca2  110403            	ld	de,0x0304
  3019  0ca5  d5                	push	de
  3020  0ca6  cd4709            	call	_vdp_setRegister
  3021  0ca9  f1                	pop	af
  3022  0caa  110536            	ld	de,0x3605
  3023  0cad  d5                	push	de
  3024  0cae  cd4709            	call	_vdp_setRegister
  3025  0cb1  f1                	pop	af
  3026  0cb2  110607            	ld	de,0x0706
  3027  0cb5  d5                	push	de
  3028  0cb6  cd4709            	call	_vdp_setRegister
  3029  0cb9  f1                	pop	af
  3030  0cba  210200            	ld	hl,2+0
  3031  0cbd  39                	add	hl, sp
  3032  0cbe  7e                	ld	a, (hl)
  3033  0cbf  e60f              	and	a,0x0f
  3034  0cc1  57                	ld	d,a
  3035  0cc2  1e07              	ld	e,0x07
  3036  0cc4  d5                	push	de
  3037  0cc5  cd4709            	call	_vdp_setRegister
  3038  0cc8  f1                	pop	af
  3039  0cc9  c9                	ret
  3040                          	SECTION code_compiler
  3041                          ;	---------------------------------
  3042                          ; Function vdp_initTextMode80
  3043                          ; ---------------------------------
  3044                          _vdp_initTextMode80:
  3045  0cca  af                	xor	a, a
  3046  0ccb  f5                	push	af
  3047  0ccc  33                	inc	sp
  3048  0ccd  fd210500          	ld	iy,5
  3049  0cd1  fd39              	add	iy, sp
  3050  0cd3  fd7e00            	ld	a,(iy+0)
  3051  0cd6  f5                	push	af
  3052  0cd7  33                	inc	sp
  3053  0cd8  af                	xor	a, a
  3054  0cd9  f5                	push	af
  3055  0cda  33                	inc	sp
  3056  0cdb  af                	xor	a, a
  3057  0cdc  f5                	push	af
  3058  0cdd  33                	inc	sp
  3059  0cde  fd2b              	dec	iy
  3060  0ce0  fd7e00            	ld	a,(iy+0)
  3061  0ce3  f5                	push	af
  3062  0ce4  33                	inc	sp
  3063  0ce5  fd2b              	dec	iy
  3064  0ce7  fd5600            	ld	d,(iy+0)
  3065  0cea  1e04              	ld	e,0x04
  3066  0cec  d5                	push	de
  3067  0ced  cd6f0a            	call	_vdp_init
  3068  0cf0  f1                	pop	af
  3069  0cf1  f1                	pop	af
  3070  0cf2  f1                	pop	af
  3071  0cf3  33                	inc	sp
  3072  0cf4  c9                	ret
  3073                          	SECTION code_compiler
  3074                          ;	---------------------------------
  3075                          ; Function vdp_initTextMode
  3076                          ; ---------------------------------
  3077                          _vdp_initTextMode:
  3078  0cf5  af                	xor	a, a
  3079  0cf6  f5                	push	af
  3080  0cf7  33                	inc	sp
  3081  0cf8  fd210500          	ld	iy,5
  3082  0cfc  fd39              	add	iy, sp
  3083  0cfe  fd7e00            	ld	a,(iy+0)
  3084  0d01  f5                	push	af
  3085  0d02  33                	inc	sp
  3086  0d03  af                	xor	a, a
  3087  0d04  f5                	push	af
  3088  0d05  33                	inc	sp
  3089  0d06  af                	xor	a, a
  3090  0d07  f5                	push	af
  3091  0d08  33                	inc	sp
  3092  0d09  fd2b              	dec	iy
  3093  0d0b  fd7e00            	ld	a,(iy+0)
  3094  0d0e  f5                	push	af
  3095  0d0f  33                	inc	sp
  3096  0d10  fd2b              	dec	iy
  3097  0d12  fd5600            	ld	d,(iy+0)
  3098  0d15  1e03              	ld	e,0x03
  3099  0d17  d5                	push	de
  3100  0d18  cd6f0a            	call	_vdp_init
  3101  0d1b  f1                	pop	af
  3102  0d1c  f1                	pop	af
  3103  0d1d  f1                	pop	af
  3104  0d1e  33                	inc	sp
  3105  0d1f  c9                	ret
  3106                          	SECTION code_compiler
  3107                          ;	---------------------------------
  3108                          ; Function vdp_initG2Mode
  3109                          ; ---------------------------------
  3110                          _vdp_initG2Mode:
  3111  0d20  fd210600          	ld	iy,6
  3112  0d24  fd39              	add	iy, sp
  3113  0d26  fd7e00            	ld	a,(iy+0)
  3114  0d29  f5                	push	af
  3115  0d2a  33                	inc	sp
  3116  0d2b  fd2b              	dec	iy
  3117  0d2d  fd7e00            	ld	a,(iy+0)
  3118  0d30  f5                	push	af
  3119  0d31  33                	inc	sp
  3120  0d32  fd2b              	dec	iy
  3121  0d34  fd7e00            	ld	a,(iy+0)
  3122  0d37  f5                	push	af
  3123  0d38  33                	inc	sp
  3124  0d39  fd2b              	dec	iy
  3125  0d3b  fd7e00            	ld	a,(iy+0)
  3126  0d3e  f5                	push	af
  3127  0d3f  33                	inc	sp
  3128  0d40  fd2b              	dec	iy
  3129  0d42  fd7e00            	ld	a,(iy+0)
  3130  0d45  f5                	push	af
  3131  0d46  33                	inc	sp
  3132  0d47  af                	xor	a, a
  3133  0d48  57                	ld	d,a
  3134  0d49  1e01              	ld	e,0x01
  3135  0d4b  d5                	push	de
  3136  0d4c  cd6f0a            	call	_vdp_init
  3137  0d4f  f1                	pop	af
  3138  0d50  f1                	pop	af
  3139  0d51  f1                	pop	af
  3140  0d52  33                	inc	sp
  3141  0d53  c9                	ret
  3142                          	SECTION code_compiler
  3143                          ;	---------------------------------
  3144                          ; Function vdp_initMultiColorMode
  3145                          ; ---------------------------------
  3146                          _vdp_initMultiColorMode:
  3147  0d54  af                	xor	a, a
  3148  0d55  f5                	push	af
  3149  0d56  33                	inc	sp
  3150  0d57  af                	xor	a, a
  3151  0d58  f5                	push	af
  3152  0d59  33                	inc	sp
  3153  0d5a  af                	xor	a, a
  3154  0d5b  f5                	push	af
  3155  0d5c  33                	inc	sp
  3156  0d5d  af                	xor	a, a
  3157  0d5e  f5                	push	af
  3158  0d5f  33                	inc	sp
  3159  0d60  af                	xor	a, a
  3160  0d61  f5                	push	af
  3161  0d62  33                	inc	sp
  3162  0d63  af                	xor	a, a
  3163  0d64  57                	ld	d,a
  3164  0d65  1e02              	ld	e,0x02
  3165  0d67  d5                	push	de
  3166  0d68  cd6f0a            	call	_vdp_init
  3167  0d6b  f1                	pop	af
  3168  0d6c  f1                	pop	af
  3169  0d6d  f1                	pop	af
  3170  0d6e  33                	inc	sp
  3171  0d6f  c9                	ret
  3172                          	SECTION code_compiler
  3173                          ;	---------------------------------
  3174                          ; Function vdp_clearScreen
  3175                          ; ---------------------------------
  3176                          _vdp_clearScreen:
  3177  0d70  2a8709            	ld	hl, (__vdpPatternNameTableAddr)
  3178  0d73  e5                	push	hl
  3179  0d74  cd5c09            	call	_vdp_setWriteAddress
  3180  0d77  f1                	pop	af
  3181  0d78  3a8e09            	ld	a, (__vdpCursorMaxXFull+0)
  3182  0d7b  4f                	ld	c, a
  3183  0d7c  0600              	ld	b,0x00
  3184  0d7e  69                	ld	l, c
  3185  0d7f  60                	ld	h, b
  3186  0d80  29                	add	hl, hl
  3187  0d81  09                	add	hl, bc
  3188  0d82  29                	add	hl, hl
  3189  0d83  29                	add	hl, hl
  3190  0d84  29                	add	hl, hl
  3191  0d85  110002            	ld	de,__vdp_textBuffer
  3192  0d88  19                	add	hl, de
  3193  0d89  eb                	ex	de, hl
  3194  0d8a  0e00              	ld	c,0x00
  3195  0d8c  3a9109            	ld	a, (__vdpMode+0)
  3196  0d8f  d603              	sub	a,0x03
  3197  0d91  2807              	jr	Z,l_vdp_clearScreen_00101
  3198  0d93  3a9109            	ld	a, (__vdpMode+0)
  3199  0d96  d604              	sub	a,0x04
  3200  0d98  2002              	jr	NZ,l_vdp_clearScreen_00110
  3201                          l_vdp_clearScreen_00101:
  3202  0d9a  0e20              	ld	c,0x20
  3203                          l_vdp_clearScreen_00110:
  3204  0d9c  210002            	ld	hl,__vdp_textBuffer
  3205                          l_vdp_clearScreen_00104:
  3206  0d9f  79                	ld	a, c
  3207  0da0  d3a0              	out	(_IO_VDPDATA), a
  3208  0da2  3620              	ld	(hl),0x20
  3209  0da4  23                	inc	hl
  3210  0da5  7d                	ld	a, l
  3211  0da6  93                	sub	a, e
  3212  0da7  20f6              	jr	NZ,l_vdp_clearScreen_00104
  3213  0da9  7c                	ld	a, h
  3214  0daa  92                	sub	a, d
  3215  0dab  20f2              	jr	NZ,l_vdp_clearScreen_00104
  3216  0dad  c9                	ret
  3217                          	SECTION code_compiler
  3218                          ;	---------------------------------
  3219                          ; Function vdp_fillScreen
  3220                          ; ---------------------------------
  3221                          _vdp_fillScreen:
  3222  0dae  dde5              	push	ix
  3223  0db0  dd210000          	ld	ix,0
  3224  0db4  dd39              	add	ix,sp
  3225  0db6  2a8709            	ld	hl, (__vdpPatternNameTableAddr)
  3226  0db9  e5                	push	hl
  3227  0dba  cd5c09            	call	_vdp_setWriteAddress
  3228  0dbd  f1                	pop	af
  3229  0dbe  010002            	ld	bc,__vdp_textBuffer+0
  3230  0dc1  3a8e09            	ld	a, (__vdpCursorMaxXFull+0)
  3231  0dc4  5f                	ld	e, a
  3232  0dc5  1600              	ld	d,0x00
  3233  0dc7  6b                	ld	l, e
  3234  0dc8  62                	ld	h, d
  3235  0dc9  29                	add	hl, hl
  3236  0dca  19                	add	hl, de
  3237  0dcb  29                	add	hl, hl
  3238  0dcc  29                	add	hl, hl
  3239  0dcd  29                	add	hl, hl
  3240  0dce  09                	add	hl, bc
  3241  0dcf  eb                	ex	de, hl
  3242                          l_vdp_fillScreen_00101:
  3243  0dd0  dd7e04            	ld	a,(ix+4)
  3244  0dd3  d3a0              	out	(_IO_VDPDATA), a
  3245  0dd5  dd7e04            	ld	a,(ix+4)
  3246  0dd8  02                	ld	(bc), a
  3247  0dd9  03                	inc	bc
  3248  0dda  69                	ld	l, c
  3249  0ddb  60                	ld	h, b
  3250  0ddc  bf                	cp	a, a
  3251  0ddd  ed52              	sbc	hl, de
  3252  0ddf  20ef              	jr	NZ,l_vdp_fillScreen_00101
  3253  0de1  dde1              	pop	ix
  3254  0de3  c9                	ret
  3255                          	SECTION code_compiler
  3256                          ;	---------------------------------
  3257                          ; Function vdp_clearRows
  3258                          ; ---------------------------------
  3259                          _vdp_clearRows:
  3260  0de4  dde5              	push	ix
  3261  0de6  dd210000          	ld	ix,0
  3262  0dea  dd39              	add	ix,sp
  3263  0dec  218e09            	ld	hl,__vdpCursorMaxXFull + 0
  3264  0def  5e                	ld	e, (hl)
  3265  0df0  dd6604            	ld	h,(ix+4)
  3266  0df3  2e00              	ld	l,0x00
  3267  0df5  55                	ld	d, l
  3268  0df6  0608              	ld	b,0x08
  3269                          l_vdp_clearRows_00112:
  3270  0df8  29                	add	hl, hl
  3271  0df9  3001              	jr	NC,l_vdp_clearRows_00113
  3272  0dfb  19                	add	hl, de
  3273                          l_vdp_clearRows_00113:
  3274  0dfc  10fa              	djnz	l_vdp_clearRows_00112
  3275  0dfe  eb                	ex	de, hl
  3276  0dff  2a8709            	ld	hl, (__vdpPatternNameTableAddr)
  3277  0e02  19                	add	hl, de
  3278  0e03  e5                	push	hl
  3279  0e04  cd5c09            	call	_vdp_setWriteAddress
  3280  0e07  f1                	pop	af
  3281  0e08  fd218e09          	ld	iy,__vdpCursorMaxXFull
  3282  0e0c  fd5e00            	ld	e,(iy+0)
  3283  0e0f  dd6604            	ld	h,(ix+4)
  3284  0e12  2e00              	ld	l,0x00
  3285  0e14  55                	ld	d, l
  3286  0e15  0608              	ld	b,0x08
  3287                          l_vdp_clearRows_00114:
  3288  0e17  29                	add	hl, hl
  3289  0e18  3001              	jr	NC,l_vdp_clearRows_00115
  3290  0e1a  19                	add	hl, de
  3291                          l_vdp_clearRows_00115:
  3292  0e1b  10fa              	djnz	l_vdp_clearRows_00114
  3293  0e1d  110002            	ld	de,__vdp_textBuffer
  3294  0e20  19                	add	hl, de
  3295  0e21  e5                	push	hl
  3296  0e22  fd5e00            	ld	e,(iy+0)
  3297  0e25  dd6605            	ld	h,(ix+5)
  3298  0e28  2e00              	ld	l,0x00
  3299  0e2a  55                	ld	d, l
  3300  0e2b  0608              	ld	b,0x08
  3301                          l_vdp_clearRows_00116:
  3302  0e2d  29                	add	hl, hl
  3303  0e2e  3001              	jr	NC,l_vdp_clearRows_00117
  3304  0e30  19                	add	hl, de
  3305                          l_vdp_clearRows_00117:
  3306  0e31  10fa              	djnz	l_vdp_clearRows_00116
  3307  0e33  c1                	pop	bc
  3308  0e34  110002            	ld	de,__vdp_textBuffer
  3309  0e37  19                	add	hl, de
  3310  0e38  eb                	ex	de, hl
  3311                          l_vdp_clearRows_00101:
  3312  0e39  3e20              	ld	a,0x20
  3313  0e3b  d3a0              	out	(_IO_VDPDATA), a
  3314  0e3d  3e20              	ld	a,0x20
  3315  0e3f  02                	ld	(bc), a
  3316  0e40  03                	inc	bc
  3317  0e41  6b                	ld	l, e
  3318  0e42  62                	ld	h, d
  3319  0e43  bf                	cp	a, a
  3320  0e44  ed42              	sbc	hl, bc
  3321  0e46  20f1              	jr	NZ,l_vdp_clearRows_00101
  3322  0e48  dde1              	pop	ix
  3323  0e4a  c9                	ret
  3324                          	SECTION code_compiler
  3325                          ;	---------------------------------
  3326                          ; Function vdp_loadASCIIFont
  3327                          ; ---------------------------------
  3328                          _vdp_loadASCIIFont:
  3329  0e4b  dde5              	push	ix
  3330  0e4d  dd210000          	ld	ix,0
  3331  0e51  dd39              	add	ix,sp
  3332  0e53  2a8b09            	ld	hl, (__vdpPatternGeneratorTableAddr)
  3333  0e56  110001            	ld	de,0x0100
  3334  0e59  19                	add	hl, de
  3335  0e5a  e5                	push	hl
  3336  0e5b  cd5c09            	call	_vdp_setWriteAddress
  3337  0e5e  f1                	pop	af
  3338  0e5f  dd4e04            	ld	c,(ix+4)
  3339  0e62  dd4605            	ld	b,(ix+5)
  3340  0e65  210003            	ld	hl,0x0300
  3341  0e68  09                	add	hl, bc
  3342  0e69  eb                	ex	de, hl
  3343                          l_vdp_loadASCIIFont_00101:
  3344  0e6a  0a                	ld	a, (bc)
  3345  0e6b  d3a0              	out	(_IO_VDPDATA), a
  3346  0e6d  03                	inc	bc
  3347  0e6e  69                	ld	l, c
  3348  0e6f  60                	ld	h, b
  3349  0e70  bf                	cp	a, a
  3350  0e71  ed52              	sbc	hl, de
  3351  0e73  20f5              	jr	NZ,l_vdp_loadASCIIFont_00101
  3352  0e75  dde1              	pop	ix
  3353  0e77  c9                	ret
  3354                          	SECTION code_compiler
  3355                          ;	---------------------------------
  3356                          ; Function vdp_loadASCIIFontWithInverse
  3357                          ; ---------------------------------
  3358                          _vdp_loadASCIIFontWithInverse:
  3359  0e78  dde5              	push	ix
  3360  0e7a  dd210000          	ld	ix,0
  3361  0e7e  dd39              	add	ix,sp
  3362  0e80  f5                	push	af
  3363  0e81  2a8b09            	ld	hl, (__vdpPatternGeneratorTableAddr)
  3364  0e84  110001            	ld	de,0x0100
  3365  0e87  19                	add	hl, de
  3366  0e88  e5                	push	hl
  3367  0e89  cd5c09            	call	_vdp_setWriteAddress
  3368  0e8c  f1                	pop	af
  3369  0e8d  dd4e04            	ld	c,(ix+4)
  3370  0e90  dd4605            	ld	b,(ix+5)
  3371  0e93  210003            	ld	hl,0x0300
  3372  0e96  09                	add	hl, bc
  3373  0e97  e3                	ex	(sp), hl
  3374  0e98  59                	ld	e, c
  3375  0e99  50                	ld	d, b
  3376                          l_vdp_loadASCIIFontWithInverse_00101:
  3377  0e9a  1a                	ld	a, (de)
  3378  0e9b  d3a0              	out	(_IO_VDPDATA), a
  3379  0e9d  13                	inc	de
  3380  0e9e  e1                	pop	hl
  3381  0e9f  e5                	push	hl
  3382  0ea0  bf                	cp	a, a
  3383  0ea1  ed52              	sbc	hl, de
  3384  0ea3  20f5              	jr	NZ,l_vdp_loadASCIIFontWithInverse_00101
  3385                          l_vdp_loadASCIIFontWithInverse_00104:
  3386  0ea5  0a                	ld	a, (bc)
  3387  0ea6  2f                	cpl
  3388  0ea7  d3a0              	out	(_IO_VDPDATA), a
  3389  0ea9  03                	inc	bc
  3390  0eaa  e1                	pop	hl
  3391  0eab  e5                	push	hl
  3392  0eac  bf                	cp	a, a
  3393  0ead  ed42              	sbc	hl, bc
  3394  0eaf  20f4              	jr	NZ,l_vdp_loadASCIIFontWithInverse_00104
  3395  0eb1  ddf9              	ld	sp, ix
  3396  0eb3  dde1              	pop	ix
  3397  0eb5  c9                	ret
  3398                          	SECTION code_compiler
  3399                          ;	---------------------------------
  3400                          ; Function vdp_putPattern
  3401                          ; ---------------------------------
  3402                          _vdp_putPattern:
  3403  0eb6  dde5              	push	ix
  3404  0eb8  dd210000          	ld	ix,0
  3405  0ebc  dd39              	add	ix,sp
  3406  0ebe  218e09            	ld	hl,__vdpCursorMaxXFull + 0
  3407  0ec1  5e                	ld	e, (hl)
  3408  0ec2  dd6605            	ld	h,(ix+5)
  3409  0ec5  2e00              	ld	l,0x00
  3410  0ec7  55                	ld	d, l
  3411  0ec8  0608              	ld	b,0x08
  3412                          l_vdp_putPattern_00103:
  3413  0eca  29                	add	hl, hl
  3414  0ecb  3001              	jr	NC,l_vdp_putPattern_00104
  3415  0ecd  19                	add	hl, de
  3416                          l_vdp_putPattern_00104:
  3417  0ece  10fa              	djnz	l_vdp_putPattern_00103
  3418  0ed0  dd4e04            	ld	c,(ix+4)
  3419  0ed3  0600              	ld	b,0x00
  3420  0ed5  09                	add	hl, bc
  3421  0ed6  eb                	ex	de, hl
  3422  0ed7  2a8709            	ld	hl, (__vdpPatternNameTableAddr)
  3423  0eda  19                	add	hl, de
  3424  0edb  d5                	push	de
  3425  0edc  e5                	push	hl
  3426  0edd  cd5c09            	call	_vdp_setWriteAddress
  3427  0ee0  f1                	pop	af
  3428  0ee1  d1                	pop	de
  3429  0ee2  210002            	ld	hl,__vdp_textBuffer+0
  3430  0ee5  19                	add	hl, de
  3431  0ee6  dd7e06            	ld	a,(ix+6)
  3432  0ee9  77                	ld	(hl), a
  3433  0eea  dd7e06            	ld	a,(ix+6)
  3434  0eed  d3a0              	out	(_IO_VDPDATA), a
  3435  0eef  dde1              	pop	ix
  3436  0ef1  c9                	ret
  3437                          	SECTION code_compiler
  3438                          ;	---------------------------------
  3439                          ; Function vdp_loadPatternToId
  3440                          ; ---------------------------------
  3441                          _vdp_loadPatternToId:
  3442  0ef2  dde5              	push	ix
  3443  0ef4  dd210000          	ld	ix,0
  3444  0ef8  dd39              	add	ix,sp
  3445  0efa  f5                	push	af
  3446  0efb  f5                	push	af
  3447  0efc  dd7e05            	ld	a,(ix+5)
  3448  0eff  dd77fc            	ld	(ix-4),a
  3449  0f02  dd7e06            	ld	a,(ix+6)
  3450  0f05  dd77fd            	ld	(ix-3),a
  3451  0f08  dd7efc            	ld	a,(ix-4)
  3452  0f0b  c608              	add	a,0x08
  3453  0f0d  dd77fe            	ld	(ix-2),a
  3454  0f10  dd7efd            	ld	a,(ix-3)
  3455  0f13  ce00              	adc	a,0x00
  3456  0f15  dd77ff            	ld	(ix-1),a
  3457  0f18  dd6e04            	ld	l,(ix+4)
  3458  0f1b  2600              	ld	h,0x00
  3459  0f1d  29                	add	hl, hl
  3460  0f1e  29                	add	hl, hl
  3461  0f1f  29                	add	hl, hl
  3462  0f20  4d                	ld	c, l
  3463  0f21  44                	ld	b, h
  3464  0f22  2a8b09            	ld	hl, (__vdpPatternGeneratorTableAddr)
  3465  0f25  09                	add	hl, bc
  3466  0f26  c5                	push	bc
  3467  0f27  e5                	push	hl
  3468  0f28  cd5c09            	call	_vdp_setWriteAddress
  3469  0f2b  f1                	pop	af
  3470  0f2c  c1                	pop	bc
  3471  0f2d  d1                	pop	de
  3472  0f2e  d5                	push	de
  3473                          l_vdp_loadPatternToId_00101:
  3474  0f2f  1a                	ld	a, (de)
  3475  0f30  d3a0              	out	(_IO_VDPDATA), a
  3476  0f32  13                	inc	de
  3477  0f33  dd6efe            	ld	l,(ix-2)
  3478  0f36  dd66ff            	ld	h,(ix-1)
  3479  0f39  bf                	cp	a, a
  3480  0f3a  ed52              	sbc	hl, de
  3481  0f3c  20f1              	jr	NZ,l_vdp_loadPatternToId_00101
  3482  0f3e  3a9309            	ld	a, (__vdpSplitThirds+0)
  3483  0f41  b7                	or	a, a
  3484  0f42  283c              	jr	Z,l_vdp_loadPatternToId_00112
  3485  0f44  2a8b09            	ld	hl, (__vdpPatternGeneratorTableAddr)
  3486  0f47  110008            	ld	de,0x0800
  3487  0f4a  19                	add	hl, de
  3488  0f4b  09                	add	hl, bc
  3489  0f4c  c5                	push	bc
  3490  0f4d  e5                	push	hl
  3491  0f4e  cd5c09            	call	_vdp_setWriteAddress
  3492  0f51  f1                	pop	af
  3493  0f52  c1                	pop	bc
  3494  0f53  d1                	pop	de
  3495  0f54  d5                	push	de
  3496                          l_vdp_loadPatternToId_00104:
  3497  0f55  1a                	ld	a, (de)
  3498  0f56  d3a0              	out	(_IO_VDPDATA), a
  3499  0f58  13                	inc	de
  3500  0f59  dd6efe            	ld	l,(ix-2)
  3501  0f5c  dd66ff            	ld	h,(ix-1)
  3502  0f5f  bf                	cp	a, a
  3503  0f60  ed52              	sbc	hl, de
  3504  0f62  20f1              	jr	NZ,l_vdp_loadPatternToId_00104
  3505  0f64  2a8b09            	ld	hl, (__vdpPatternGeneratorTableAddr)
  3506  0f67  110010            	ld	de,0x1000
  3507  0f6a  19                	add	hl, de
  3508  0f6b  09                	add	hl, bc
  3509  0f6c  e5                	push	hl
  3510  0f6d  cd5c09            	call	_vdp_setWriteAddress
  3511  0f70  f1                	pop	af
  3512  0f71  d1                	pop	de
  3513  0f72  d5                	push	de
  3514                          l_vdp_loadPatternToId_00107:
  3515  0f73  1a                	ld	a, (de)
  3516  0f74  d3a0              	out	(_IO_VDPDATA), a
  3517  0f76  13                	inc	de
  3518  0f77  c1                	pop	bc
  3519  0f78  e1                	pop	hl
  3520  0f79  e5                	push	hl
  3521  0f7a  c5                	push	bc
  3522  0f7b  bf                	cp	a, a
  3523  0f7c  ed52              	sbc	hl, de
  3524  0f7e  20f3              	jr	NZ,l_vdp_loadPatternToId_00107
  3525                          l_vdp_loadPatternToId_00112:
  3526  0f80  ddf9              	ld	sp, ix
  3527  0f82  dde1              	pop	ix
  3528  0f84  c9                	ret
  3529                          	SECTION code_compiler
  3530                          ;	---------------------------------
  3531                          ; Function vdp_loadPatternTable
  3532                          ; ---------------------------------
  3533                          _vdp_loadPatternTable:
  3534  0f85  dde5              	push	ix
  3535  0f87  dd210000          	ld	ix,0
  3536  0f8b  dd39              	add	ix,sp
  3537  0f8d  f5                	push	af
  3538  0f8e  dd5e04            	ld	e,(ix+4)
  3539  0f91  dd5605            	ld	d,(ix+5)
  3540  0f94  dd6e06            	ld	l,(ix+6)
  3541  0f97  dd6607            	ld	h,(ix+7)
  3542  0f9a  19                	add	hl, de
  3543  0f9b  e3                	ex	(sp), hl
  3544  0f9c  d5                	push	de
  3545  0f9d  2a8b09            	ld	hl, (__vdpPatternGeneratorTableAddr)
  3546  0fa0  e5                	push	hl
  3547  0fa1  cd5c09            	call	_vdp_setWriteAddress
  3548  0fa4  f1                	pop	af
  3549  0fa5  d1                	pop	de
  3550  0fa6  4b                	ld	c, e
  3551  0fa7  42                	ld	b, d
  3552                          l_vdp_loadPatternTable_00101:
  3553  0fa8  0a                	ld	a, (bc)
  3554  0fa9  d3a0              	out	(_IO_VDPDATA), a
  3555  0fab  03                	inc	bc
  3556  0fac  e1                	pop	hl
  3557  0fad  e5                	push	hl
  3558  0fae  bf                	cp	a, a
  3559  0faf  ed42              	sbc	hl, bc
  3560  0fb1  20f5              	jr	NZ,l_vdp_loadPatternTable_00101
  3561  0fb3  3a9309            	ld	a, (__vdpSplitThirds+0)
  3562  0fb6  b7                	or	a, a
  3563  0fb7  2834              	jr	Z,l_vdp_loadPatternTable_00112
  3564  0fb9  2a8b09            	ld	hl, (__vdpPatternGeneratorTableAddr)
  3565  0fbc  010008            	ld	bc,0x0800
  3566  0fbf  09                	add	hl, bc
  3567  0fc0  d5                	push	de
  3568  0fc1  e5                	push	hl
  3569  0fc2  cd5c09            	call	_vdp_setWriteAddress
  3570  0fc5  f1                	pop	af
  3571  0fc6  d1                	pop	de
  3572  0fc7  4b                	ld	c, e
  3573  0fc8  42                	ld	b, d
  3574                          l_vdp_loadPatternTable_00104:
  3575  0fc9  0a                	ld	a, (bc)
  3576  0fca  d3a0              	out	(_IO_VDPDATA), a
  3577  0fcc  03                	inc	bc
  3578  0fcd  e1                	pop	hl
  3579  0fce  e5                	push	hl
  3580  0fcf  bf                	cp	a, a
  3581  0fd0  ed42              	sbc	hl, bc
  3582  0fd2  20f5              	jr	NZ,l_vdp_loadPatternTable_00104
  3583  0fd4  2a8b09            	ld	hl, (__vdpPatternGeneratorTableAddr)
  3584  0fd7  010010            	ld	bc,0x1000
  3585  0fda  09                	add	hl, bc
  3586  0fdb  d5                	push	de
  3587  0fdc  e5                	push	hl
  3588  0fdd  cd5c09            	call	_vdp_setWriteAddress
  3589  0fe0  f1                	pop	af
  3590  0fe1  d1                	pop	de
  3591                          l_vdp_loadPatternTable_00107:
  3592  0fe2  1a                	ld	a, (de)
  3593  0fe3  d3a0              	out	(_IO_VDPDATA), a
  3594  0fe5  13                	inc	de
  3595  0fe6  e1                	pop	hl
  3596  0fe7  e5                	push	hl
  3597  0fe8  bf                	cp	a, a
  3598  0fe9  ed52              	sbc	hl, de
  3599  0feb  20f5              	jr	NZ,l_vdp_loadPatternTable_00107
  3600                          l_vdp_loadPatternTable_00112:
  3601  0fed  ddf9              	ld	sp, ix
  3602  0fef  dde1              	pop	ix
  3603  0ff1  c9                	ret
  3604                          	SECTION code_compiler
  3605                          ;	---------------------------------
  3606                          ; Function vdp_loadColorToId
  3607                          ; ---------------------------------
  3608                          _vdp_loadColorToId:
  3609  0ff2  dde5              	push	ix
  3610  0ff4  dd210000          	ld	ix,0
  3611  0ff8  dd39              	add	ix,sp
  3612  0ffa  f5                	push	af
  3613  0ffb  f5                	push	af
  3614  0ffc  dd7e05            	ld	a,(ix+5)
  3615  0fff  dd77fc            	ld	(ix-4),a
  3616  1002  dd7e06            	ld	a,(ix+6)
  3617  1005  dd77fd            	ld	(ix-3),a
  3618  1008  dd7efc            	ld	a,(ix-4)
  3619  100b  c608              	add	a,0x08
  3620  100d  dd77fe            	ld	(ix-2),a
  3621  1010  dd7efd            	ld	a,(ix-3)
  3622  1013  ce00              	adc	a,0x00
  3623  1015  dd77ff            	ld	(ix-1),a
  3624  1018  dd6e04            	ld	l,(ix+4)
  3625  101b  2600              	ld	h,0x00
  3626  101d  29                	add	hl, hl
  3627  101e  29                	add	hl, hl
  3628  101f  29                	add	hl, hl
  3629  1020  4d                	ld	c, l
  3630  1021  44                	ld	b, h
  3631  1022  2a8909            	ld	hl, (__vdpColorTableAddr)
  3632  1025  09                	add	hl, bc
  3633  1026  c5                	push	bc
  3634  1027  e5                	push	hl
  3635  1028  cd5c09            	call	_vdp_setWriteAddress
  3636  102b  f1                	pop	af
  3637  102c  c1                	pop	bc
  3638  102d  d1                	pop	de
  3639  102e  d5                	push	de
  3640                          l_vdp_loadColorToId_00101:
  3641  102f  1a                	ld	a, (de)
  3642  1030  d3a0              	out	(_IO_VDPDATA), a
  3643  1032  13                	inc	de
  3644  1033  dd6efe            	ld	l,(ix-2)
  3645  1036  dd66ff            	ld	h,(ix-1)
  3646  1039  bf                	cp	a, a
  3647  103a  ed52              	sbc	hl, de
  3648  103c  20f1              	jr	NZ,l_vdp_loadColorToId_00101
  3649  103e  3a9309            	ld	a, (__vdpSplitThirds+0)
  3650  1041  b7                	or	a, a
  3651  1042  283c              	jr	Z,l_vdp_loadColorToId_00112
  3652  1044  2a8909            	ld	hl, (__vdpColorTableAddr)
  3653  1047  110008            	ld	de,0x0800
  3654  104a  19                	add	hl, de
  3655  104b  09                	add	hl, bc
  3656  104c  c5                	push	bc
  3657  104d  e5                	push	hl
  3658  104e  cd5c09            	call	_vdp_setWriteAddress
  3659  1051  f1                	pop	af
  3660  1052  c1                	pop	bc
  3661  1053  d1                	pop	de
  3662  1054  d5                	push	de
  3663                          l_vdp_loadColorToId_00104:
  3664  1055  1a                	ld	a, (de)
  3665  1056  d3a0              	out	(_IO_VDPDATA), a
  3666  1058  13                	inc	de
  3667  1059  dd6efe            	ld	l,(ix-2)
  3668  105c  dd66ff            	ld	h,(ix-1)
  3669  105f  bf                	cp	a, a
  3670  1060  ed52              	sbc	hl, de
  3671  1062  20f1              	jr	NZ,l_vdp_loadColorToId_00104
  3672  1064  2a8909            	ld	hl, (__vdpColorTableAddr)
  3673  1067  110010            	ld	de,0x1000
  3674  106a  19                	add	hl, de
  3675  106b  09                	add	hl, bc
  3676  106c  e5                	push	hl
  3677  106d  cd5c09            	call	_vdp_setWriteAddress
  3678  1070  f1                	pop	af
  3679  1071  d1                	pop	de
  3680  1072  d5                	push	de
  3681                          l_vdp_loadColorToId_00107:
  3682  1073  1a                	ld	a, (de)
  3683  1074  d3a0              	out	(_IO_VDPDATA), a
  3684  1076  13                	inc	de
  3685  1077  c1                	pop	bc
  3686  1078  e1                	pop	hl
  3687  1079  e5                	push	hl
  3688  107a  c5                	push	bc
  3689  107b  bf                	cp	a, a
  3690  107c  ed52              	sbc	hl, de
  3691  107e  20f3              	jr	NZ,l_vdp_loadColorToId_00107
  3692                          l_vdp_loadColorToId_00112:
  3693  1080  ddf9              	ld	sp, ix
  3694  1082  dde1              	pop	ix
  3695  1084  c9                	ret
  3696                          	SECTION code_compiler
  3697                          ;	---------------------------------
  3698                          ; Function vdp_loadColorTable
  3699                          ; ---------------------------------
  3700                          _vdp_loadColorTable:
  3701  1085  dde5              	push	ix
  3702  1087  dd210000          	ld	ix,0
  3703  108b  dd39              	add	ix,sp
  3704  108d  f5                	push	af
  3705  108e  dd5e04            	ld	e,(ix+4)
  3706  1091  dd5605            	ld	d,(ix+5)
  3707  1094  dd6e06            	ld	l,(ix+6)
  3708  1097  dd6607            	ld	h,(ix+7)
  3709  109a  19                	add	hl, de
  3710  109b  e3                	ex	(sp), hl
  3711  109c  d5                	push	de
  3712  109d  2a8909            	ld	hl, (__vdpColorTableAddr)
  3713  10a0  e5                	push	hl
  3714  10a1  cd5c09            	call	_vdp_setWriteAddress
  3715  10a4  f1                	pop	af
  3716  10a5  d1                	pop	de
  3717  10a6  4b                	ld	c, e
  3718  10a7  42                	ld	b, d
  3719                          l_vdp_loadColorTable_00101:
  3720  10a8  0a                	ld	a, (bc)
  3721  10a9  d3a0              	out	(_IO_VDPDATA), a
  3722  10ab  03                	inc	bc
  3723  10ac  e1                	pop	hl
  3724  10ad  e5                	push	hl
  3725  10ae  bf                	cp	a, a
  3726  10af  ed42              	sbc	hl, bc
  3727  10b1  20f5              	jr	NZ,l_vdp_loadColorTable_00101
  3728  10b3  3a9309            	ld	a, (__vdpSplitThirds+0)
  3729  10b6  b7                	or	a, a
  3730  10b7  2834              	jr	Z,l_vdp_loadColorTable_00112
  3731  10b9  2a8909            	ld	hl, (__vdpColorTableAddr)
  3732  10bc  010008            	ld	bc,0x0800
  3733  10bf  09                	add	hl, bc
  3734  10c0  d5                	push	de
  3735  10c1  e5                	push	hl
  3736  10c2  cd5c09            	call	_vdp_setWriteAddress
  3737  10c5  f1                	pop	af
  3738  10c6  d1                	pop	de
  3739  10c7  4b                	ld	c, e
  3740  10c8  42                	ld	b, d
  3741                          l_vdp_loadColorTable_00104:
  3742  10c9  0a                	ld	a, (bc)
  3743  10ca  d3a0              	out	(_IO_VDPDATA), a
  3744  10cc  03                	inc	bc
  3745  10cd  e1                	pop	hl
  3746  10ce  e5                	push	hl
  3747  10cf  bf                	cp	a, a
  3748  10d0  ed42              	sbc	hl, bc
  3749  10d2  20f5              	jr	NZ,l_vdp_loadColorTable_00104
  3750  10d4  2a8909            	ld	hl, (__vdpColorTableAddr)
  3751  10d7  010010            	ld	bc,0x1000
  3752  10da  09                	add	hl, bc
  3753  10db  d5                	push	de
  3754  10dc  e5                	push	hl
  3755  10dd  cd5c09            	call	_vdp_setWriteAddress
  3756  10e0  f1                	pop	af
  3757  10e1  d1                	pop	de
  3758                          l_vdp_loadColorTable_00107:
  3759  10e2  1a                	ld	a, (de)
  3760  10e3  d3a0              	out	(_IO_VDPDATA), a
  3761  10e5  13                	inc	de
  3762  10e6  e1                	pop	hl
  3763  10e7  e5                	push	hl
  3764  10e8  bf                	cp	a, a
  3765  10e9  ed52              	sbc	hl, de
  3766  10eb  20f5              	jr	NZ,l_vdp_loadColorTable_00107
  3767                          l_vdp_loadColorTable_00112:
  3768  10ed  ddf9              	ld	sp, ix
  3769  10ef  dde1              	pop	ix
  3770  10f1  c9                	ret
  3771                          	SECTION code_compiler
  3772                          ;	---------------------------------
  3773                          ; Function vdp_colorizePattern
  3774                          ; ---------------------------------
  3775                          _vdp_colorizePattern:
  3776  10f2  dde5              	push	ix
  3777  10f4  dd210000          	ld	ix,0
  3778  10f8  dd39              	add	ix,sp
  3779  10fa  3b                	dec	sp
  3780  10fb  dd6e04            	ld	l,(ix+4)
  3781  10fe  2600              	ld	h,0x00
  3782  1100  29                	add	hl, hl
  3783  1101  29                	add	hl, hl
  3784  1102  29                	add	hl, hl
  3785  1103  4d                	ld	c, l
  3786  1104  44                	ld	b, h
  3787  1105  dd7e05            	ld	a,(ix+5)
  3788  1108  87                	add	a, a
  3789  1109  87                	add	a, a
  3790  110a  87                	add	a, a
  3791  110b  87                	add	a, a
  3792  110c  dd5e06            	ld	e,(ix+6)
  3793  110f  83                	add	a, e
  3794  1110  dd77ff            	ld	(ix-1),a
  3795  1113  2a8909            	ld	hl, (__vdpColorTableAddr)
  3796  1116  09                	add	hl, bc
  3797  1117  c5                	push	bc
  3798  1118  e5                	push	hl
  3799  1119  cd5c09            	call	_vdp_setWriteAddress
  3800  111c  f1                	pop	af
  3801  111d  c1                	pop	bc
  3802  111e  1e00              	ld	e,0x00
  3803                          l_vdp_colorizePattern_00107:
  3804  1120  7b                	ld	a, e
  3805  1121  d608              	sub	a,0x08
  3806  1123  3008              	jr	NC,l_vdp_colorizePattern_00101
  3807  1125  dd7eff            	ld	a,(ix-1)
  3808  1128  d3a0              	out	(_IO_VDPDATA), a
  3809  112a  1c                	inc	e
  3810  112b  18f3              	jr	l_vdp_colorizePattern_00107
  3811                          l_vdp_colorizePattern_00101:
  3812  112d  3a9309            	ld	a, (__vdpSplitThirds+0)
  3813  1130  b7                	or	a, a
  3814  1131  283a              	jr	Z,l_vdp_colorizePattern_00115
  3815  1133  2a8909            	ld	hl, (__vdpColorTableAddr)
  3816  1136  110008            	ld	de,0x0800
  3817  1139  19                	add	hl, de
  3818  113a  09                	add	hl, bc
  3819  113b  c5                	push	bc
  3820  113c  e5                	push	hl
  3821  113d  cd5c09            	call	_vdp_setWriteAddress
  3822  1140  f1                	pop	af
  3823  1141  c1                	pop	bc
  3824  1142  1e00              	ld	e,0x00
  3825                          l_vdp_colorizePattern_00110:
  3826  1144  7b                	ld	a, e
  3827  1145  d608              	sub	a,0x08
  3828  1147  3008              	jr	NC,l_vdp_colorizePattern_00102
  3829  1149  dd7eff            	ld	a,(ix-1)
  3830  114c  d3a0              	out	(_IO_VDPDATA), a
  3831  114e  1c                	inc	e
  3832  114f  18f3              	jr	l_vdp_colorizePattern_00110
  3833                          l_vdp_colorizePattern_00102:
  3834  1151  2a8909            	ld	hl, (__vdpColorTableAddr)
  3835  1154  110010            	ld	de,0x1000
  3836  1157  19                	add	hl, de
  3837  1158  09                	add	hl, bc
  3838  1159  e5                	push	hl
  3839  115a  cd5c09            	call	_vdp_setWriteAddress
  3840  115d  f1                	pop	af
  3841  115e  0e00              	ld	c,0x00
  3842                          l_vdp_colorizePattern_00113:
  3843  1160  79                	ld	a, c
  3844  1161  d608              	sub	a,0x08
  3845  1163  3008              	jr	NC,l_vdp_colorizePattern_00115
  3846  1165  dd7eff            	ld	a,(ix-1)
  3847  1168  d3a0              	out	(_IO_VDPDATA), a
  3848  116a  0c                	inc	c
  3849  116b  18f3              	jr	l_vdp_colorizePattern_00113
  3850                          l_vdp_colorizePattern_00115:
  3851  116d  33                	inc	sp
  3852  116e  dde1              	pop	ix
  3853  1170  c9                	ret
  3854                          	SECTION code_compiler
  3855                          ;	---------------------------------
  3856                          ; Function vdp_plotHires
  3857                          ; ---------------------------------
  3858                          _vdp_plotHires:
  3859  1171  dde5              	push	ix
  3860  1173  dd210000          	ld	ix,0
  3861  1177  dd39              	add	ix,sp
  3862  1179  f5                	push	af
  3863  117a  3b                	dec	sp
  3864  117b  dd7e04            	ld	a,(ix+4)
  3865  117e  dd77fd            	ld	(ix-3),a
  3866  1181  dd36fe00          	ld	(ix-2),0x00
  3867  1185  e1                	pop	hl
  3868  1186  e5                	push	hl
  3869  1187  ddcbfe7e          	bit	7,(ix-2)
  3870  118b  2806              	jr	Z,l_vdp_plotHires_00106
  3871  118d  e1                	pop	hl
  3872  118e  e5                	push	hl
  3873  118f  110700            	ld	de,0x0007
  3874  1192  19                	add	hl, de
  3875                          l_vdp_plotHires_00106:
  3876  1193  cb2c              	sra	h
  3877  1195  cb1d              	rr	l
  3878  1197  cb2c              	sra	h
  3879  1199  cb1d              	rr	l
  3880  119b  cb2c              	sra	h
  3881  119d  cb1d              	rr	l
  3882  119f  29                	add	hl, hl
  3883  11a0  29                	add	hl, hl
  3884  11a1  29                	add	hl, hl
  3885  11a2  dd4e05            	ld	c,(ix+5)
  3886  11a5  0600              	ld	b,0x00
  3887  11a7  79                	ld	a, c
  3888  11a8  e607              	and	a,0x07
  3889  11aa  5f                	ld	e, a
  3890  11ab  1600              	ld	d,0x00
  3891  11ad  19                	add	hl, de
  3892  11ae  eb                	ex	de, hl
  3893  11af  69                	ld	l, c
  3894  11b0  60                	ld	h, b
  3895  11b1  cb78              	bit	7, b
  3896  11b3  2804              	jr	Z,l_vdp_plotHires_00107
  3897  11b5  210700            	ld	hl,0x0007
  3898  11b8  09                	add	hl, bc
  3899                          l_vdp_plotHires_00107:
  3900  11b9  cb2c              	sra	h
  3901  11bb  cb1d              	rr	l
  3902  11bd  cb2c              	sra	h
  3903  11bf  cb1d              	rr	l
  3904  11c1  cb2c              	sra	h
  3905  11c3  cb1d              	rr	l
  3906  11c5  65                	ld	h, l
  3907  11c6  2e00              	ld	l,0x00
  3908  11c8  19                	add	hl, de
  3909  11c9  eb                	ex	de, hl
  3910  11ca  2a8b09            	ld	hl, (__vdpPatternGeneratorTableAddr)
  3911  11cd  19                	add	hl, de
  3912  11ce  d5                	push	de
  3913  11cf  e5                	push	hl
  3914  11d0  cd6f09            	call	_vdp_setReadAddress
  3915  11d3  f1                	pop	af
  3916  11d4  d1                	pop	de
  3917  11d5  dba0              	in	a, (_IO_VDPDATA)
  3918  11d7  dd77ff            	ld	(ix-1),a
  3919  11da  2a8909            	ld	hl, (__vdpColorTableAddr)
  3920  11dd  19                	add	hl, de
  3921  11de  d5                	push	de
  3922  11df  e5                	push	hl
  3923  11e0  cd6f09            	call	_vdp_setReadAddress
  3924  11e3  f1                	pop	af
  3925  11e4  d1                	pop	de
  3926  11e5  dba0              	in	a, (_IO_VDPDATA)
  3927  11e7  6f                	ld	l, a
  3928  11e8  dd7efd            	ld	a,(ix-3)
  3929  11eb  e607              	and	a,0x07
  3930  11ed  f5                	push	af
  3931  11ee  018000            	ld	bc,0x0080
  3932  11f1  f1                	pop	af
  3933  11f2  3c                	inc	a
  3934  11f3  1804              	jr	l_vdp_plotHires_00124
  3935                          l_vdp_plotHires_00123:
  3936  11f5  cb28              	sra	b
  3937  11f7  cb19              	rr	c
  3938                          l_vdp_plotHires_00124:
  3939  11f9  3d                	dec	a
  3940  11fa  20f9              	jr	NZ, l_vdp_plotHires_00123
  3941  11fc  dd7e06            	ld	a,(ix+6)
  3942  11ff  b7                	or	a, a
  3943  1200  2814              	jr	Z,l_vdp_plotHires_00102
  3944  1202  79                	ld	a, c
  3945  1203  ddb6ff            	or	a,(ix-1)
  3946  1206  4f                	ld	c, a
  3947  1207  7d                	ld	a, l
  3948  1208  e60f              	and	a,0x0f
  3949  120a  6f                	ld	l, a
  3950  120b  dd7e06            	ld	a,(ix+6)
  3951  120e  87                	add	a, a
  3952  120f  87                	add	a, a
  3953  1210  87                	add	a, a
  3954  1211  87                	add	a, a
  3955  1212  b5                	or	a, l
  3956  1213  47                	ld	b, a
  3957  1214  1811              	jr	l_vdp_plotHires_00103
  3958                          l_vdp_plotHires_00102:
  3959  1216  79                	ld	a, c
  3960  1217  2f                	cpl
  3961  1218  dda6ff            	and	a,(ix-1)
  3962  121b  4f                	ld	c, a
  3963  121c  7d                	ld	a, l
  3964  121d  e6f0              	and	a,0xf0
  3965  121f  6f                	ld	l, a
  3966  1220  dd7e07            	ld	a,(ix+7)
  3967  1223  e60f              	and	a,0x0f
  3968  1225  b5                	or	a, l
  3969  1226  47                	ld	b, a
  3970                          l_vdp_plotHires_00103:
  3971  1227  fd2a8b09          	ld	iy, (__vdpPatternGeneratorTableAddr)
  3972  122b  fd19              	add	iy, de
  3973  122d  c5                	push	bc
  3974  122e  d5                	push	de
  3975  122f  fde5              	push	iy
  3976  1231  cd5c09            	call	_vdp_setWriteAddress
  3977  1234  f1                	pop	af
  3978  1235  d1                	pop	de
  3979  1236  c1                	pop	bc
  3980  1237  79                	ld	a, c
  3981  1238  d3a0              	out	(_IO_VDPDATA), a
  3982  123a  fd2a8909          	ld	iy, (__vdpColorTableAddr)
  3983  123e  fd19              	add	iy, de
  3984  1240  c5                	push	bc
  3985  1241  fde5              	push	iy
  3986  1243  cd5c09            	call	_vdp_setWriteAddress
  3987  1246  f1                	pop	af
  3988  1247  c1                	pop	bc
  3989  1248  78                	ld	a, b
  3990  1249  d3a0              	out	(_IO_VDPDATA), a
  3991  124b  ddf9              	ld	sp, ix
  3992  124d  dde1              	pop	ix
  3993  124f  c9                	ret
  3994                          	SECTION code_compiler
  3995                          ;	---------------------------------
  3996                          ; Function vdp_plotColor
  3997                          ; ---------------------------------
  3998                          _vdp_plotColor:
  3999  1250  dde5              	push	ix
  4000  1252  dd210000          	ld	ix,0
  4001  1256  dd39              	add	ix,sp
  4002  1258  21f4ff            	ld	hl, -12
  4003  125b  39                	add	hl, sp
  4004  125c  f9                	ld	sp, hl
  4005  125d  dd7e04            	ld	a,(ix+4)
  4006  1260  dd77f4            	ld	(ix-12),a
  4007  1263  dd36f500          	ld	(ix-11),0x00
  4008  1267  dd7e05            	ld	a,(ix+5)
  4009  126a  dd77f6            	ld	(ix-10),a
  4010  126d  dd36f700          	ld	(ix-9),0x00
  4011  1271  dd7ef5            	ld	a,(ix-11)
  4012  1274  07                	rlca
  4013  1275  e601              	and	a,0x01
  4014  1277  dd77f8            	ld	(ix-8),a
  4015  127a  dd7ef4            	ld	a,(ix-12)
  4016  127d  c601              	add	a,0x01
  4017  127f  dd77f9            	ld	(ix-7),a
  4018  1282  dd7ef5            	ld	a,(ix-11)
  4019  1285  ce00              	adc	a,0x00
  4020  1287  dd77fa            	ld	(ix-6),a
  4021  128a  dd7ef6            	ld	a,(ix-10)
  4022  128d  e607              	and	a,0x07
  4023  128f  dd77fb            	ld	(ix-5),a
  4024  1292  dd36fc00          	ld	(ix-4),0x00
  4025  1296  dd7ef7            	ld	a,(ix-9)
  4026  1299  07                	rlca
  4027  129a  e601              	and	a,0x01
  4028  129c  dd77fd            	ld	(ix-3),a
  4029  129f  dd7ef6            	ld	a,(ix-10)
  4030  12a2  c607              	add	a,0x07
  4031  12a4  dd77fe            	ld	(ix-2),a
  4032  12a7  dd7ef7            	ld	a,(ix-9)
  4033  12aa  ce00              	adc	a,0x00
  4034  12ac  dd77ff            	ld	(ix-1),a
  4035  12af  3a9109            	ld	a, (__vdpMode+0)
  4036  12b2  d602              	sub	a,0x02
  4037  12b4  2078              	jr	NZ,l_vdp_plotColor_00110
  4038  12b6  e1                	pop	hl
  4039  12b7  e5                	push	hl
  4040  12b8  dd7ef8            	ld	a,(ix-8)
  4041  12bb  b7                	or	a, a
  4042  12bc  2806              	jr	Z,l_vdp_plotColor_00114
  4043  12be  dd6ef9            	ld	l,(ix-7)
  4044  12c1  dd66fa            	ld	h,(ix-6)
  4045                          l_vdp_plotColor_00114:
  4046  12c4  cb2c              	sra	h
  4047  12c6  cb1d              	rr	l
  4048  12c8  29                	add	hl, hl
  4049  12c9  29                	add	hl, hl
  4050  12ca  29                	add	hl, hl
  4051  12cb  eb                	ex	de, hl
  4052  12cc  2a8b09            	ld	hl, (__vdpPatternGeneratorTableAddr)
  4053  12cf  19                	add	hl, de
  4054  12d0  dd4efb            	ld	c,(ix-5)
  4055  12d3  dd46fc            	ld	b,(ix-4)
  4056  12d6  09                	add	hl, bc
  4057  12d7  d1                	pop	de
  4058  12d8  c1                	pop	bc
  4059  12d9  c5                	push	bc
  4060  12da  d5                	push	de
  4061  12db  dd7efd            	ld	a,(ix-3)
  4062  12de  b7                	or	a, a
  4063  12df  2806              	jr	Z,l_vdp_plotColor_00115
  4064  12e1  dd4efe            	ld	c,(ix-2)
  4065  12e4  dd46ff            	ld	b,(ix-1)
  4066                          l_vdp_plotColor_00115:
  4067  12e7  cb28              	sra	b
  4068  12e9  cb19              	rr	c
  4069  12eb  cb28              	sra	b
  4070  12ed  cb19              	rr	c
  4071  12ef  cb28              	sra	b
  4072  12f1  cb19              	rr	c
  4073  12f3  41                	ld	b, c
  4074  12f4  0e00              	ld	c,0x00
  4075  12f6  09                	add	hl, bc
  4076  12f7  e5                	push	hl
  4077  12f8  e5                	push	hl
  4078  12f9  cd6f09            	call	_vdp_setReadAddress
  4079  12fc  f1                	pop	af
  4080  12fd  e1                	pop	hl
  4081  12fe  dba0              	in	a, (_IO_VDPDATA)
  4082  1300  47                	ld	b, a
  4083  1301  c5                	push	bc
  4084  1302  e5                	push	hl
  4085  1303  cd5c09            	call	_vdp_setWriteAddress
  4086  1306  f1                	pop	af
  4087  1307  c1                	pop	bc
  4088  1308  dd4e04            	ld	c,(ix+4)
  4089  130b  78                	ld	a, b
  4090  130c  cb41              	bit	0, c
  4091  130e  280e              	jr	Z,l_vdp_plotColor_00102
  4092  1310  e6f0              	and	a,0xf0
  4093  1312  4f                	ld	c, a
  4094  1313  dd7e06            	ld	a,(ix+6)
  4095  1316  e60f              	and	a,0x0f
  4096  1318  81                	add	a, c
  4097  1319  d3a0              	out	(_IO_VDPDATA), a
  4098  131b  c3f913            	jp	l_vdp_plotColor_00112
  4099                          l_vdp_plotColor_00102:
  4100  131e  e60f              	and	a,0x0f
  4101  1320  4f                	ld	c, a
  4102  1321  dd7e06            	ld	a,(ix+6)
  4103  1324  87                	add	a, a
  4104  1325  87                	add	a, a
  4105  1326  87                	add	a, a
  4106  1327  87                	add	a, a
  4107  1328  81                	add	a, c
  4108  1329  d3a0              	out	(_IO_VDPDATA), a
  4109  132b  c3f913            	jp	l_vdp_plotColor_00112
  4110                          l_vdp_plotColor_00110:
  4111  132e  3a9109            	ld	a, (__vdpMode+0)
  4112  1331  3d                	dec	a
  4113  1332  c2f913            	jp	NZ,l_vdp_plotColor_00112
  4114  1335  e1                	pop	hl
  4115  1336  e5                	push	hl
  4116  1337  dd7ef8            	ld	a,(ix-8)
  4117  133a  b7                	or	a, a
  4118  133b  2806              	jr	Z,l_vdp_plotColor_00116
  4119  133d  dd6ef9            	ld	l,(ix-7)
  4120  1340  dd66fa            	ld	h,(ix-6)
  4121                          l_vdp_plotColor_00116:
  4122  1343  cb2c              	sra	h
  4123  1345  cb1d              	rr	l
  4124  1347  29                	add	hl, hl
  4125  1348  29                	add	hl, hl
  4126  1349  29                	add	hl, hl
  4127  134a  dd5efb            	ld	e,(ix-5)
  4128  134d  dd56fc            	ld	d,(ix-4)
  4129  1350  19                	add	hl, de
  4130  1351  dd5ef6            	ld	e,(ix-10)
  4131  1354  dd56f7            	ld	d,(ix-9)
  4132  1357  dd7efd            	ld	a,(ix-3)
  4133  135a  b7                	or	a, a
  4134  135b  2806              	jr	Z,l_vdp_plotColor_00117
  4135  135d  dd5efe            	ld	e,(ix-2)
  4136  1360  dd56ff            	ld	d,(ix-1)
  4137                          l_vdp_plotColor_00117:
  4138  1363  cb2a              	sra	d
  4139  1365  cb1b              	rr	e
  4140  1367  cb2a              	sra	d
  4141  1369  cb1b              	rr	e
  4142  136b  cb2a              	sra	d
  4143  136d  cb1b              	rr	e
  4144  136f  43                	ld	b, e
  4145  1370  0e00              	ld	c,0x00
  4146  1372  09                	add	hl, bc
  4147  1373  dd75fc            	ld	(ix-4),l
  4148  1376  dd74fd            	ld	(ix-3),h
  4149  1379  fd2a8909          	ld	iy, (__vdpColorTableAddr)
  4150  137d  dd5efc            	ld	e,(ix-4)
  4151  1380  dd56fd            	ld	d,(ix-3)
  4152  1383  fd19              	add	iy, de
  4153  1385  fde5              	push	iy
  4154  1387  cd6f09            	call	_vdp_setReadAddress
  4155  138a  f1                	pop	af
  4156  138b  dba0              	in	a, (_IO_VDPDATA)
  4157  138d  dd77ff            	ld	(ix-1),a
  4158  1390  dd7e04            	ld	a,(ix+4)
  4159  1393  0f                	rrca
  4160  1394  381d              	jr	C,l_vdp_plotColor_00105
  4161  1396  dd7eff            	ld	a,(ix-1)
  4162  1399  e60f              	and	a,0x0f
  4163  139b  dd77fb            	ld	(ix-5),a
  4164  139e  dd7e06            	ld	a,(ix+6)
  4165  13a1  dd77ff            	ld	(ix-1),a
  4166  13a4  87                	add	a, a
  4167  13a5  87                	add	a, a
  4168  13a6  87                	add	a, a
  4169  13a7  87                	add	a, a
  4170  13a8  dd77ff            	ld	(ix-1),a
  4171  13ab  ddb6fb            	or	a,(ix-5)
  4172  13ae  dd77ff            	ld	(ix-1),a
  4173  13b1  1819              	jr	l_vdp_plotColor_00106
  4174                          l_vdp_plotColor_00105:
  4175  13b3  dd7eff            	ld	a,(ix-1)
  4176  13b6  e6f0              	and	a,0xf0
  4177  13b8  dd77fe            	ld	(ix-2),a
  4178  13bb  dd7e06            	ld	a,(ix+6)
  4179  13be  dd77ff            	ld	(ix-1),a
  4180  13c1  e60f              	and	a,0x0f
  4181  13c3  dd77ff            	ld	(ix-1),a
  4182  13c6  ddb6fe            	or	a,(ix-2)
  4183  13c9  dd77ff            	ld	(ix-1),a
  4184                          l_vdp_plotColor_00106:
  4185  13cc  fd2a8b09          	ld	iy, (__vdpPatternGeneratorTableAddr)
  4186  13d0  dd5efc            	ld	e,(ix-4)
  4187  13d3  dd56fd            	ld	d,(ix-3)
  4188  13d6  fd19              	add	iy, de
  4189  13d8  fde5              	push	iy
  4190  13da  cd5c09            	call	_vdp_setWriteAddress
  4191  13dd  f1                	pop	af
  4192  13de  3ef0              	ld	a,0xf0
  4193  13e0  d3a0              	out	(_IO_VDPDATA), a
  4194  13e2  fd2a8909          	ld	iy, (__vdpColorTableAddr)
  4195  13e6  dd5efc            	ld	e,(ix-4)
  4196  13e9  dd56fd            	ld	d,(ix-3)
  4197  13ec  fd19              	add	iy, de
  4198  13ee  fde5              	push	iy
  4199  13f0  cd5c09            	call	_vdp_setWriteAddress
  4200  13f3  f1                	pop	af
  4201  13f4  dd7eff            	ld	a,(ix-1)
  4202  13f7  d3a0              	out	(_IO_VDPDATA), a
  4203                          l_vdp_plotColor_00112:
  4204  13f9  ddf9              	ld	sp, ix
  4205  13fb  dde1              	pop	ix
  4206  13fd  c9                	ret
  4207                          	SECTION code_compiler
  4208                          ;	---------------------------------
  4209                          ; Function vdp_disableSprite
  4210                          ; ---------------------------------
  4211                          _vdp_disableSprite:
  4212  13fe  fd210200          	ld	iy,2
  4213  1402  fd39              	add	iy, sp
  4214  1404  fd6e00            	ld	l,(iy+0)
  4215  1407  2600              	ld	h,0x00
  4216  1409  29                	add	hl, hl
  4217  140a  29                	add	hl, hl
  4218  140b  eb                	ex	de, hl
  4219  140c  2a8209            	ld	hl, (__vdpSpriteAttributeTableAddr)
  4220  140f  19                	add	hl, de
  4221  1410  e5                	push	hl
  4222  1411  cd5c09            	call	_vdp_setWriteAddress
  4223  1414  f1                	pop	af
  4224  1415  3ec0              	ld	a,0xc0
  4225  1417  d3a0              	out	(_IO_VDPDATA), a
  4226  1419  3e00              	ld	a,0x00
  4227  141b  d3a0              	out	(_IO_VDPDATA), a
  4228  141d  3e00              	ld	a,0x00
  4229  141f  d3a0              	out	(_IO_VDPDATA), a
  4230  1421  3e80              	ld	a,0x80
  4231  1423  d3a0              	out	(_IO_VDPDATA), a
  4232  1425  c9                	ret
  4233                          	SECTION code_compiler
  4234                          ;	---------------------------------
  4235                          ; Function vdp_loadSpritePatternNameTable
  4236                          ; ---------------------------------
  4237                          _vdp_loadSpritePatternNameTable:
  4238  1426  dde5              	push	ix
  4239  1428  dd210000          	ld	ix,0
  4240  142c  dd39              	add	ix,sp
  4241  142e  0600              	ld	b,0x00
  4242                          l_vdp_loadSpritePatternNameTable_00108:
  4243  1430  78                	ld	a, b
  4244  1431  d620              	sub	a,0x20
  4245  1433  300b              	jr	NC,l_vdp_loadSpritePatternNameTable_00101
  4246  1435  c5                	push	bc
  4247  1436  c5                	push	bc
  4248  1437  33                	inc	sp
  4249  1438  cdfe13            	call	_vdp_disableSprite
  4250  143b  33                	inc	sp
  4251  143c  c1                	pop	bc
  4252  143d  04                	inc	b
  4253  143e  18f0              	jr	l_vdp_loadSpritePatternNameTable_00108
  4254                          l_vdp_loadSpritePatternNameTable_00101:
  4255  1440  3a8609            	ld	a, (__vdpSpriteSizeSelected+0)
  4256  1443  b7                	or	a, a
  4257  1444  282a              	jr	Z,l_vdp_loadSpritePatternNameTable_00105
  4258  1446  2a8409            	ld	hl, (__vdpSpriteGeneratorTableAddr)
  4259  1449  e5                	push	hl
  4260  144a  cd5c09            	call	_vdp_setWriteAddress
  4261  144d  f1                	pop	af
  4262  144e  dd6e04            	ld	l,(ix+4)
  4263  1451  dd6605            	ld	h,(ix+5)
  4264  1454  29                	add	hl, hl
  4265  1455  29                	add	hl, hl
  4266  1456  29                	add	hl, hl
  4267  1457  29                	add	hl, hl
  4268  1458  29                	add	hl, hl
  4269  1459  eb                	ex	de,hl
  4270  145a  010000            	ld	bc,0x0000
  4271                          l_vdp_loadSpritePatternNameTable_00111:
  4272  145d  79                	ld	a, c
  4273  145e  93                	sub	a, e
  4274  145f  78                	ld	a, b
  4275  1460  9a                	sbc	a, d
  4276  1461  3035              	jr	NC,l_vdp_loadSpritePatternNameTable_00116
  4277  1463  dd6e06            	ld	l,(ix+6)
  4278  1466  dd6607            	ld	h,(ix+7)
  4279  1469  09                	add	hl, bc
  4280  146a  7e                	ld	a, (hl)
  4281  146b  d3a0              	out	(_IO_VDPDATA), a
  4282  146d  03                	inc	bc
  4283  146e  18ed              	jr	l_vdp_loadSpritePatternNameTable_00111
  4284                          l_vdp_loadSpritePatternNameTable_00105:
  4285  1470  2a8409            	ld	hl, (__vdpSpriteGeneratorTableAddr)
  4286  1473  e5                	push	hl
  4287  1474  cd5c09            	call	_vdp_setWriteAddress
  4288  1477  f1                	pop	af
  4289  1478  dd6e04            	ld	l,(ix+4)
  4290  147b  dd6605            	ld	h,(ix+5)
  4291  147e  29                	add	hl, hl
  4292  147f  29                	add	hl, hl
  4293  1480  29                	add	hl, hl
  4294  1481  eb                	ex	de,hl
  4295  1482  010000            	ld	bc,0x0000
  4296                          l_vdp_loadSpritePatternNameTable_00114:
  4297  1485  79                	ld	a, c
  4298  1486  93                	sub	a, e
  4299  1487  78                	ld	a, b
  4300  1488  9a                	sbc	a, d
  4301  1489  300d              	jr	NC,l_vdp_loadSpritePatternNameTable_00116
  4302  148b  dd6e06            	ld	l,(ix+6)
  4303  148e  dd6607            	ld	h,(ix+7)
  4304  1491  09                	add	hl, bc
  4305  1492  7e                	ld	a, (hl)
  4306  1493  d3a0              	out	(_IO_VDPDATA), a
  4307  1495  03                	inc	bc
  4308  1496  18ed              	jr	l_vdp_loadSpritePatternNameTable_00114
  4309                          l_vdp_loadSpritePatternNameTable_00116:
  4310  1498  dde1              	pop	ix
  4311  149a  c9                	ret
  4312                          	SECTION code_compiler
  4313                          ;	---------------------------------
  4314                          ; Function vdp_spriteInit
  4315                          ; ---------------------------------
  4316                          _vdp_spriteInit:
  4317  149b  dde5              	push	ix
  4318  149d  dd210000          	ld	ix,0
  4319  14a1  dd39              	add	ix,sp
  4320  14a3  dd6e04            	ld	l,(ix+4)
  4321  14a6  2600              	ld	h,0x00
  4322  14a8  29                	add	hl, hl
  4323  14a9  29                	add	hl, hl
  4324  14aa  eb                	ex	de, hl
  4325  14ab  2a8209            	ld	hl, (__vdpSpriteAttributeTableAddr)
  4326  14ae  19                	add	hl, de
  4327  14af  e5                	push	hl
  4328  14b0  cd5c09            	call	_vdp_setWriteAddress
  4329  14b3  f1                	pop	af
  4330  14b4  dd7e07            	ld	a,(ix+7)
  4331  14b7  d3a0              	out	(_IO_VDPDATA), a
  4332  14b9  dd7e06            	ld	a,(ix+6)
  4333  14bc  d3a0              	out	(_IO_VDPDATA), a
  4334  14be  dd4e05            	ld	c,(ix+5)
  4335  14c1  3a8609            	ld	a, (__vdpSpriteSizeSelected+0)
  4336  14c4  b7                	or	a, a
  4337  14c5  2807              	jr	Z,l_vdp_spriteInit_00102
  4338  14c7  79                	ld	a, c
  4339  14c8  87                	add	a, a
  4340  14c9  87                	add	a, a
  4341  14ca  d3a0              	out	(_IO_VDPDATA), a
  4342  14cc  1803              	jr	l_vdp_spriteInit_00103
  4343                          l_vdp_spriteInit_00102:
  4344  14ce  79                	ld	a, c
  4345  14cf  d3a0              	out	(_IO_VDPDATA), a
  4346                          l_vdp_spriteInit_00103:
  4347  14d1  dd7e08            	ld	a,(ix+8)
  4348  14d4  e60f              	and	a,0x0f
  4349  14d6  d3a0              	out	(_IO_VDPDATA), a
  4350  14d8  dd6e04            	ld	l,(ix+4)
  4351  14db  dde1              	pop	ix
  4352  14dd  c9                	ret
  4353                          	SECTION code_compiler
  4354                          ;	---------------------------------
  4355                          ; Function vdp_setSpriteColor
  4356                          ; ---------------------------------
  4357                          _vdp_setSpriteColor:
  4358  14de  fd210200          	ld	iy,2
  4359  14e2  fd39              	add	iy, sp
  4360  14e4  fd6e00            	ld	l,(iy+0)
  4361  14e7  2600              	ld	h,0x00
  4362  14e9  29                	add	hl, hl
  4363  14ea  29                	add	hl, hl
  4364  14eb  eb                	ex	de, hl
  4365  14ec  2a8209            	ld	hl, (__vdpSpriteAttributeTableAddr)
  4366  14ef  19                	add	hl, de
  4367  14f0  23                	inc	hl
  4368  14f1  23                	inc	hl
  4369  14f2  23                	inc	hl
  4370  14f3  e5                	push	hl
  4371  14f4  cd5c09            	call	_vdp_setWriteAddress
  4372  14f7  f1                	pop	af
  4373  14f8  210300            	ld	hl,3+0
  4374  14fb  39                	add	hl, sp
  4375  14fc  7e                	ld	a, (hl)
  4376  14fd  e60f              	and	a,0x0f
  4377  14ff  d3a0              	out	(_IO_VDPDATA), a
  4378  1501  c9                	ret
  4379                          	SECTION code_compiler
  4380                          ;	---------------------------------
  4381                          ; Function vdp_setSpritePosition
  4382                          ; ---------------------------------
  4383                          _vdp_setSpritePosition:
  4384  1502  fd210200          	ld	iy,2
  4385  1506  fd39              	add	iy, sp
  4386  1508  fd6e00            	ld	l,(iy+0)
  4387  150b  2600              	ld	h,0x00
  4388  150d  29                	add	hl, hl
  4389  150e  29                	add	hl, hl
  4390  150f  eb                	ex	de, hl
  4391  1510  2a8209            	ld	hl, (__vdpSpriteAttributeTableAddr)
  4392  1513  19                	add	hl, de
  4393  1514  e5                	push	hl
  4394  1515  cd5c09            	call	_vdp_setWriteAddress
  4395  1518  f1                	pop	af
  4396  1519  fd210400          	ld	iy,4
  4397  151d  fd39              	add	iy, sp
  4398  151f  fd7e00            	ld	a,(iy+0)
  4399  1522  d3a0              	out	(_IO_VDPDATA), a
  4400  1524  fd2b              	dec	iy
  4401  1526  fd7e00            	ld	a,(iy+0)
  4402  1529  d3a0              	out	(_IO_VDPDATA), a
  4403  152b  c9                	ret
  4404                          	SECTION code_compiler
  4405                          ;	---------------------------------
  4406                          ; Function vdp_setSpritePositionAndColor
  4407                          ; ---------------------------------
  4408                          _vdp_setSpritePositionAndColor:
  4409  152c  fd210200          	ld	iy,2
  4410  1530  fd39              	add	iy, sp
  4411  1532  fd6e00            	ld	l,(iy+0)
  4412  1535  2600              	ld	h,0x00
  4413  1537  29                	add	hl, hl
  4414  1538  29                	add	hl, hl
  4415  1539  eb                	ex	de, hl
  4416  153a  2a8209            	ld	hl, (__vdpSpriteAttributeTableAddr)
  4417  153d  19                	add	hl, de
  4418  153e  e5                	push	hl
  4419  153f  cd5c09            	call	_vdp_setWriteAddress
  4420  1542  f1                	pop	af
  4421  1543  fd210400          	ld	iy,4
  4422  1547  fd39              	add	iy, sp
  4423  1549  fd7e00            	ld	a,(iy+0)
  4424  154c  d3a0              	out	(_IO_VDPDATA), a
  4425  154e  fd2b              	dec	iy
  4426  1550  fd7e00            	ld	a,(iy+0)
  4427  1553  d3a0              	out	(_IO_VDPDATA), a
  4428  1555  fd2b              	dec	iy
  4429  1557  fd7e00            	ld	a,(iy+0)
  4430  155a  d3a0              	out	(_IO_VDPDATA), a
  4431  155c  fd7e03            	ld	a,(iy+0+1+1+1)
  4432  155f  e60f              	and	a,0x0f
  4433  1561  d3a0              	out	(_IO_VDPDATA), a
  4434  1563  c9                	ret
  4435                          	SECTION code_compiler
  4436                          ;	---------------------------------
  4437                          ; Function vdp_getSpritePosition
  4438                          ; ---------------------------------
  4439                          _vdp_getSpritePosition:
  4440  1564  fd210200          	ld	iy,2
  4441  1568  fd39              	add	iy, sp
  4442  156a  fd6e00            	ld	l,(iy+0)
  4443  156d  2600              	ld	h,0x00
  4444  156f  29                	add	hl, hl
  4445  1570  29                	add	hl, hl
  4446  1571  eb                	ex	de, hl
  4447  1572  2a8209            	ld	hl, (__vdpSpriteAttributeTableAddr)
  4448  1575  19                	add	hl, de
  4449  1576  e5                	push	hl
  4450  1577  cd6f09            	call	_vdp_setReadAddress
  4451  157a  f1                	pop	af
  4452  157b  fd210500          	ld	iy,5
  4453  157f  fd39              	add	iy, sp
  4454  1581  fd4e00            	ld	c,(iy+0)
  4455  1584  fd4601            	ld	b,(iy+1)
  4456  1587  dba0              	in	a, (_IO_VDPDATA)
  4457  1589  02                	ld	(bc), a
  4458  158a  fd2b              	dec	iy
  4459  158c  fd2b              	dec	iy
  4460  158e  fd4e00            	ld	c,(iy+0)
  4461  1591  fd4601            	ld	b,(iy+1)
  4462  1594  dba0              	in	a, (_IO_VDPDATA)
  4463  1596  02                	ld	(bc), a
  4464  1597  c9                	ret
  4465                          	SECTION code_compiler
  4466                          ;	---------------------------------
  4467                          ; Function vdp_print
  4468                          ; ---------------------------------
  4469                          _vdp_print:
  4470  1598  e1                	pop	hl
  4471  1599  c1                	pop	bc
  4472  159a  c5                	push	bc
  4473  159b  e5                	push	hl
  4474                          l_vdp_print_00101:
  4475  159c  0a                	ld	a, (bc)
  4476  159d  b7                	or	a, a
  4477  159e  c8                	ret	Z
  4478  159f  c5                	push	bc
  4479  15a0  f5                	push	af
  4480  15a1  33                	inc	sp
  4481  15a2  cdb117            	call	_vdp_write
  4482  15a5  33                	inc	sp
  4483  15a6  c1                	pop	bc
  4484  15a7  03                	inc	bc
  4485  15a8  18f2              	jr	l_vdp_print_00101
  4486                          	SECTION code_compiler
  4487                          ;	---------------------------------
  4488                          ; Function vdp_printJustified
  4489                          ; ---------------------------------
  4490                          _vdp_printJustified:
  4491  15aa  dde5              	push	ix
  4492  15ac  dd210000          	ld	ix,0
  4493  15b0  dd39              	add	ix,sp
  4494  15b2  3b                	dec	sp
  4495                          l_vdp_printJustified_00117:
  4496  15b3  dd4e04            	ld	c,(ix+4)
  4497  15b6  dd4605            	ld	b,(ix+5)
  4498  15b9  0a                	ld	a, (bc)
  4499  15ba  b7                	or	a, a
  4500  15bb  ca5216            	jp	Z, l_vdp_printJustified_00120
  4501  15be  d620              	sub	a,0x20
  4502  15c0  2069              	jr	NZ,l_vdp_printJustified_00114
  4503  15c2  03                	inc	bc
  4504  15c3  dd7104            	ld	(ix+4),c
  4505  15c6  dd7005            	ld	(ix+5),b
  4506  15c9  dd4e04            	ld	c,(ix+4)
  4507  15cc  dd4605            	ld	b,(ix+5)
  4508  15cf  59                	ld	e, c
  4509  15d0  50                	ld	d, b
  4510                          l_vdp_printJustified_00105:
  4511  15d1  1a                	ld	a, (de)
  4512  15d2  fe20              	cp	a,0x20
  4513  15d4  2812              	jr	Z,l_vdp_printJustified_00107
  4514  15d6  fe2e              	cp	a,0x2e
  4515  15d8  280e              	jr	Z,l_vdp_printJustified_00107
  4516  15da  fe2c              	cp	a,0x2c
  4517  15dc  280a              	jr	Z,l_vdp_printJustified_00107
  4518  15de  fe21              	cp	a,0x21
  4519  15e0  2806              	jr	Z,l_vdp_printJustified_00107
  4520  15e2  b7                	or	a, a
  4521  15e3  2803              	jr	Z,l_vdp_printJustified_00107
  4522  15e5  13                	inc	de
  4523  15e6  18e9              	jr	l_vdp_printJustified_00105
  4524                          l_vdp_printJustified_00107:
  4525  15e8  7b                	ld	a, e
  4526  15e9  dd5e04            	ld	e,(ix+4)
  4527  15ec  93                	sub	a, e
  4528  15ed  5f                	ld	e, a
  4529  15ee  3a0a00            	ld	a,(_vdp_cursor + 0)
  4530  15f1  dd77ff            	ld	(ix-1),a
  4531  15f4  6f                	ld	l, a
  4532  15f5  2600              	ld	h,0x00
  4533  15f7  1600              	ld	d,0x00
  4534  15f9  19                	add	hl, de
  4535  15fa  dd5e07            	ld	e,(ix+7)
  4536  15fd  1600              	ld	d,0x00
  4537  15ff  7d                	ld	a, l
  4538  1600  93                	sub	a, e
  4539  1601  7c                	ld	a, h
  4540  1602  9a                	sbc	a, d
  4541  1603  e20816            	jp	PO, l_vdp_printJustified_00189
  4542  1606  ee80              	xor	a,0x80
  4543                          l_vdp_printJustified_00189:
  4544  1608  fa1916            	jp	M, l_vdp_printJustified_00111
  4545  160b  c5                	push	bc
  4546  160c  cdba16            	call	_vdp_newLine
  4547  160f  c1                	pop	bc
  4548  1610  210a00            	ld	hl,_vdp_cursor
  4549  1613  dd7e06            	ld	a,(ix+6)
  4550  1616  77                	ld	(hl), a
  4551  1617  1812              	jr	l_vdp_printJustified_00114
  4552                          l_vdp_printJustified_00111:
  4553  1619  dd7e06            	ld	a,(ix+6)
  4554  161c  dd96ff            	sub	a,(ix-1)
  4555  161f  280a              	jr	Z,l_vdp_printJustified_00114
  4556  1621  c5                	push	bc
  4557  1622  3e20              	ld	a,0x20
  4558  1624  f5                	push	af
  4559  1625  33                	inc	sp
  4560  1626  cdb117            	call	_vdp_write
  4561  1629  33                	inc	sp
  4562  162a  c1                	pop	bc
  4563                          l_vdp_printJustified_00114:
  4564  162b  210a00            	ld	hl,_vdp_cursor+0
  4565  162e  7e                	ld	a, (hl)
  4566  162f  dd9607            	sub	a,(ix+7)
  4567  1632  380b              	jr	C,l_vdp_printJustified_00116
  4568  1634  e5                	push	hl
  4569  1635  c5                	push	bc
  4570  1636  cdba16            	call	_vdp_newLine
  4571  1639  c1                	pop	bc
  4572  163a  e1                	pop	hl
  4573  163b  dd7e06            	ld	a,(ix+6)
  4574  163e  77                	ld	(hl), a
  4575                          l_vdp_printJustified_00116:
  4576  163f  0a                	ld	a, (bc)
  4577  1640  c5                	push	bc
  4578  1641  f5                	push	af
  4579  1642  33                	inc	sp
  4580  1643  cdb117            	call	_vdp_write
  4581  1646  33                	inc	sp
  4582  1647  c1                	pop	bc
  4583  1648  03                	inc	bc
  4584  1649  dd7104            	ld	(ix+4),c
  4585  164c  dd7005            	ld	(ix+5),b
  4586  164f  c3b315            	jp	l_vdp_printJustified_00117
  4587                          l_vdp_printJustified_00120:
  4588  1652  33                	inc	sp
  4589  1653  dde1              	pop	ix
  4590  1655  c9                	ret
  4591                          	SECTION code_compiler
  4592                          ;	---------------------------------
  4593                          ; Function vdp_printColorized
  4594                          ; ---------------------------------
  4595                          _vdp_printColorized:
  4596  1656  e1                	pop	hl
  4597  1657  c1                	pop	bc
  4598  1658  c5                	push	bc
  4599  1659  e5                	push	hl
  4600                          l_vdp_printColorized_00101:
  4601  165a  0a                	ld	a, (bc)
  4602  165b  b7                	or	a, a
  4603  165c  c8                	ret	Z
  4604  165d  c5                	push	bc
  4605  165e  fd210700          	ld	iy,7
  4606  1662  fd39              	add	iy, sp
  4607  1664  fd6600            	ld	h,(iy+0)
  4608  1667  e5                	push	hl
  4609  1668  33                	inc	sp
  4610  1669  fd2b              	dec	iy
  4611  166b  fd6600            	ld	h,(iy+0)
  4612  166e  e5                	push	hl
  4613  166f  33                	inc	sp
  4614  1670  f5                	push	af
  4615  1671  33                	inc	sp
  4616  1672  cdf210            	call	_vdp_colorizePattern
  4617  1675  f1                	pop	af
  4618  1676  33                	inc	sp
  4619  1677  c1                	pop	bc
  4620  1678  0a                	ld	a, (bc)
  4621  1679  c5                	push	bc
  4622  167a  f5                	push	af
  4623  167b  33                	inc	sp
  4624  167c  cdb117            	call	_vdp_write
  4625  167f  33                	inc	sp
  4626  1680  c1                	pop	bc
  4627  1681  03                	inc	bc
  4628  1682  18d6              	jr	l_vdp_printColorized_00101
  4629                          	SECTION code_compiler
  4630                          ;	---------------------------------
  4631                          ; Function vdp_printPart
  4632                          ; ---------------------------------
  4633                          _vdp_printPart:
  4634  1684  dde5              	push	ix
  4635  1686  dd210000          	ld	ix,0
  4636  168a  dd39              	add	ix,sp
  4637  168c  dd7e08            	ld	a,(ix+8)
  4638  168f  dd8604            	add	a,(ix+4)
  4639  1692  4f                	ld	c, a
  4640  1693  dd7e09            	ld	a,(ix+9)
  4641  1696  dd8e05            	adc	a,(ix+5)
  4642  1699  47                	ld	b, a
  4643  169a  dd6e06            	ld	l,(ix+6)
  4644  169d  dd6607            	ld	h,(ix+7)
  4645  16a0  09                	add	hl, bc
  4646  16a1  eb                	ex	de, hl
  4647                          l_vdp_printPart_00101:
  4648  16a2  69                	ld	l, c
  4649  16a3  60                	ld	h, b
  4650  16a4  bf                	cp	a, a
  4651  16a5  ed52              	sbc	hl, de
  4652  16a7  280e              	jr	Z,l_vdp_printPart_00104
  4653  16a9  0a                	ld	a, (bc)
  4654  16aa  c5                	push	bc
  4655  16ab  d5                	push	de
  4656  16ac  f5                	push	af
  4657  16ad  33                	inc	sp
  4658  16ae  cdb117            	call	_vdp_write
  4659  16b1  33                	inc	sp
  4660  16b2  d1                	pop	de
  4661  16b3  c1                	pop	bc
  4662  16b4  03                	inc	bc
  4663  16b5  18eb              	jr	l_vdp_printPart_00101
  4664                          l_vdp_printPart_00104:
  4665  16b7  dde1              	pop	ix
  4666  16b9  c9                	ret
  4667                          	SECTION code_compiler
  4668                          ;	---------------------------------
  4669                          ; Function vdp_newLine
  4670                          ; ---------------------------------
  4671                          _vdp_newLine:
  4672  16ba  110b00            	ld	de,_vdp_cursor + 1
  4673  16bd  1a                	ld	a, (de)
  4674  16be  4f                	ld	c, a
  4675  16bf  3a0e00            	ld	a, (__autoScrollBottomRow+0)
  4676  16c2  91                	sub	a, c
  4677  16c3  201b              	jr	NZ,l_vdp_newLine_00104
  4678  16c5  3a9209            	ld	a, (__autoScroll+0)
  4679  16c8  b7                	or	a, a
  4680  16c9  280e              	jr	Z,l_vdp_newLine_00102
  4681  16cb  3a0e00            	ld	a, (__autoScrollBottomRow+0)
  4682  16ce  f5                	push	af
  4683  16cf  33                	inc	sp
  4684  16d0  3a0d00            	ld	a, (__autoScrollTopRow+0)
  4685  16d3  f5                	push	af
  4686  16d4  33                	inc	sp
  4687  16d5  cd0919            	call	_vdp_scrollTextUp
  4688  16d8  f1                	pop	af
  4689                          l_vdp_newLine_00102:
  4690  16d9  210a00            	ld	hl,_vdp_cursor
  4691  16dc  3600              	ld	(hl),0x00
  4692  16de  180c              	jr	l_vdp_newLine_00106
  4693                          l_vdp_newLine_00104:
  4694  16e0  79                	ld	a, c
  4695  16e1  3c                	inc	a
  4696  16e2  12                	ld	(de), a
  4697  16e3  f5                	push	af
  4698  16e4  33                	inc	sp
  4699  16e5  af                	xor	a, a
  4700  16e6  f5                	push	af
  4701  16e7  33                	inc	sp
  4702  16e8  cdfa16            	call	_vdp_setCursor2
  4703  16eb  f1                	pop	af
  4704                          l_vdp_newLine_00106:
  4705  16ec  c9                	ret
  4706                          	SECTION code_compiler
  4707                          ;	---------------------------------
  4708                          ; Function vdp_setBackDropColor
  4709                          ; ---------------------------------
  4710                          _vdp_setBackDropColor:
  4711  16ed  210200            	ld	hl,2+0
  4712  16f0  39                	add	hl, sp
  4713  16f1  56                	ld	d, (hl)
  4714  16f2  1e07              	ld	e,0x07
  4715  16f4  d5                	push	de
  4716  16f5  cd4709            	call	_vdp_setRegister
  4717  16f8  f1                	pop	af
  4718  16f9  c9                	ret
  4719                          	SECTION code_compiler
  4720                          ;	---------------------------------
  4721                          ; Function vdp_setCursor2
  4722                          ; ---------------------------------
  4723                          _vdp_setCursor2:
  4724  16fa  dde5              	push	ix
  4725  16fc  dd210000          	ld	ix,0
  4726  1700  dd39              	add	ix,sp
  4727  1702  3a8d09            	ld	a,(__vdpCursorMaxX)
  4728  1705  dd9604            	sub	a,(ix+4)
  4729  1708  3007              	jr	NC,l_vdp_setCursor2_00102
  4730  170a  dd360400          	ld	(ix+4),0x00
  4731  170e  dd3405            	inc	(ix+5)
  4732                          l_vdp_setCursor2_00102:
  4733  1711  3a0000            	ld	a, (__vdpCursorMaxY+0)
  4734  1714  4f                	ld	c,a
  4735  1715  dd9605            	sub	a,(ix+5)
  4736  1718  3003              	jr	NC,l_vdp_setCursor2_00104
  4737  171a  dd7105            	ld	(ix+5),c
  4738                          l_vdp_setCursor2_00104:
  4739  171d  210a00            	ld	hl,_vdp_cursor
  4740  1720  dd7e04            	ld	a,(ix+4)
  4741  1723  77                	ld	(hl), a
  4742  1724  210b00            	ld	hl, +(_vdp_cursor + 1)
  4743  1727  dd7e05            	ld	a,(ix+5)
  4744  172a  77                	ld	(hl), a
  4745  172b  dde1              	pop	ix
  4746  172d  c9                	ret
  4747                          	SECTION code_compiler
  4748                          ;	---------------------------------
  4749                          ; Function vdp_setCursor
  4750                          ; ---------------------------------
  4751                          _vdp_setCursor:
  4752  172e  fd210200          	ld	iy,2
  4753  1732  fd39              	add	iy, sp
  4754  1734  fd7e00            	ld	a,(iy+0)
  4755  1737  b7                	or	a, a
  4756  1738  2816              	jr	Z,l_vdp_setCursor_00101
  4757  173a  fd7e00            	ld	a,(iy+0)
  4758  173d  3d                	dec	a
  4759  173e  2822              	jr	Z,l_vdp_setCursor_00102
  4760  1740  fd7e00            	ld	a,(iy+0)
  4761  1743  d602              	sub	a,0x02
  4762  1745  282d              	jr	Z,l_vdp_setCursor_00103
  4763  1747  fd7e00            	ld	a,(iy+0)
  4764  174a  d603              	sub	a,0x03
  4765  174c  2838              	jr	Z,l_vdp_setCursor_00104
  4766  174e  1846              	jr	l_vdp_setCursor_00106
  4767                          l_vdp_setCursor_00101:
  4768  1750  3a0b00            	ld	a, (_vdp_cursor + 1)
  4769  1753  3d                	dec	a
  4770  1754  210a00            	ld	hl,_vdp_cursor + 0
  4771  1757  46                	ld	b, (hl)
  4772  1758  f5                	push	af
  4773  1759  33                	inc	sp
  4774  175a  c5                	push	bc
  4775  175b  33                	inc	sp
  4776  175c  cdfa16            	call	_vdp_setCursor2
  4777  175f  f1                	pop	af
  4778  1760  1834              	jr	l_vdp_setCursor_00106
  4779                          l_vdp_setCursor_00102:
  4780  1762  3a0b00            	ld	a, (_vdp_cursor + 1)
  4781  1765  3c                	inc	a
  4782  1766  210a00            	ld	hl,_vdp_cursor + 0
  4783  1769  46                	ld	b, (hl)
  4784  176a  f5                	push	af
  4785  176b  33                	inc	sp
  4786  176c  c5                	push	bc
  4787  176d  33                	inc	sp
  4788  176e  cdfa16            	call	_vdp_setCursor2
  4789  1771  f1                	pop	af
  4790  1772  1822              	jr	l_vdp_setCursor_00106
  4791                          l_vdp_setCursor_00103:
  4792  1774  210b00            	ld	hl,_vdp_cursor + 1
  4793  1777  46                	ld	b, (hl)
  4794  1778  3a0a00            	ld	a, (_vdp_cursor + 0)
  4795  177b  3d                	dec	a
  4796  177c  c5                	push	bc
  4797  177d  33                	inc	sp
  4798  177e  f5                	push	af
  4799  177f  33                	inc	sp
  4800  1780  cdfa16            	call	_vdp_setCursor2
  4801  1783  f1                	pop	af
  4802  1784  1810              	jr	l_vdp_setCursor_00106
  4803                          l_vdp_setCursor_00104:
  4804  1786  210b00            	ld	hl,_vdp_cursor + 1
  4805  1789  46                	ld	b, (hl)
  4806  178a  3a0a00            	ld	a, (_vdp_cursor + 0)
  4807  178d  3c                	inc	a
  4808  178e  c5                	push	bc
  4809  178f  33                	inc	sp
  4810  1790  f5                	push	af
  4811  1791  33                	inc	sp
  4812  1792  cdfa16            	call	_vdp_setCursor2
  4813  1795  f1                	pop	af
  4814                          l_vdp_setCursor_00106:
  4815  1796  c9                	ret
  4816                          	SECTION code_compiler
  4817                          ;	---------------------------------
  4818                          ; Function vdp_setTextColor
  4819                          ; ---------------------------------
  4820                          _vdp_setTextColor:
  4821  1797  fd210200          	ld	iy,2
  4822  179b  fd39              	add	iy, sp
  4823  179d  fd7e00            	ld	a,(iy+0)
  4824  17a0  87                	add	a, a
  4825  17a1  87                	add	a, a
  4826  17a2  87                	add	a, a
  4827  17a3  87                	add	a, a
  4828  17a4  fd4e01            	ld	c,(iy+0+1)
  4829  17a7  81                	add	a, c
  4830  17a8  57                	ld	d,a
  4831  17a9  1e07              	ld	e,0x07
  4832  17ab  d5                	push	de
  4833  17ac  cd4709            	call	_vdp_setRegister
  4834  17af  f1                	pop	af
  4835  17b0  c9                	ret
  4836                          	SECTION code_compiler
  4837                          ;	---------------------------------
  4838                          ; Function vdp_write
  4839                          ; ---------------------------------
  4840                          _vdp_write:
  4841  17b1  dde5              	push	ix
  4842  17b3  dd210000          	ld	ix,0
  4843  17b7  dd39              	add	ix,sp
  4844  17b9  210b00            	ld	hl, +(_vdp_cursor + 1) + 0
  4845  17bc  5e                	ld	e, (hl)
  4846  17bd  218e09            	ld	hl,__vdpCursorMaxXFull + 0
  4847  17c0  66                	ld	h, (hl)
  4848  17c1  2e00              	ld	l,0x00
  4849  17c3  55                	ld	d, l
  4850  17c4  0608              	ld	b,0x08
  4851                          l_vdp_write_00122:
  4852  17c6  29                	add	hl, hl
  4853  17c7  3001              	jr	NC,l_vdp_write_00123
  4854  17c9  19                	add	hl, de
  4855                          l_vdp_write_00123:
  4856  17ca  10fa              	djnz	l_vdp_write_00122
  4857  17cc  eb                	ex	de, hl
  4858  17cd  3a0a00            	ld	a, (_vdp_cursor + 0)
  4859  17d0  2600              	ld	h,0x00
  4860  17d2  6f                	ld	l, a
  4861  17d3  19                	add	hl, de
  4862  17d4  eb                	ex	de, hl
  4863  17d5  2a8709            	ld	hl, (__vdpPatternNameTableAddr)
  4864  17d8  19                	add	hl, de
  4865  17d9  d5                	push	de
  4866  17da  e5                	push	hl
  4867  17db  cd5c09            	call	_vdp_setWriteAddress
  4868  17de  f1                	pop	af
  4869  17df  d1                	pop	de
  4870  17e0  dd7e04            	ld	a,(ix+4)
  4871  17e3  d3a0              	out	(_IO_VDPDATA), a
  4872  17e5  210002            	ld	hl,__vdp_textBuffer
  4873  17e8  19                	add	hl, de
  4874  17e9  dd7e04            	ld	a,(ix+4)
  4875  17ec  77                	ld	(hl), a
  4876  17ed  3a9209            	ld	a, (__autoScroll+0)
  4877  17f0  b7                	or	a, a
  4878  17f1  2827              	jr	Z,l_vdp_write_00102
  4879  17f3  210a00            	ld	hl,_vdp_cursor + 0
  4880  17f6  46                	ld	b, (hl)
  4881  17f7  3a8d09            	ld	a, (__vdpCursorMaxX+0)
  4882  17fa  90                	sub	a, b
  4883  17fb  201d              	jr	NZ,l_vdp_write_00102
  4884  17fd  210b00            	ld	hl, +(_vdp_cursor + 1) + 0
  4885  1800  46                	ld	b, (hl)
  4886  1801  3a0e00            	ld	a, (__autoScrollBottomRow+0)
  4887  1804  90                	sub	a, b
  4888  1805  2013              	jr	NZ,l_vdp_write_00102
  4889  1807  3a0e00            	ld	a, (__autoScrollBottomRow+0)
  4890  180a  f5                	push	af
  4891  180b  33                	inc	sp
  4892  180c  3a0d00            	ld	a, (__autoScrollTopRow+0)
  4893  180f  f5                	push	af
  4894  1810  33                	inc	sp
  4895  1811  cd0919            	call	_vdp_scrollTextUp
  4896  1814  f1                	pop	af
  4897  1815  210a00            	ld	hl,_vdp_cursor
  4898  1818  3600              	ld	(hl),0x00
  4899                          l_vdp_write_00102:
  4900  181a  3a0b00            	ld	a, ((_vdp_cursor + 1) + 0)
  4901  181d  210a00            	ld	hl,_vdp_cursor + 0
  4902  1820  4e                	ld	c, (hl)
  4903  1821  0c                	inc	c
  4904  1822  f5                	push	af
  4905  1823  33                	inc	sp
  4906  1824  79                	ld	a, c
  4907  1825  f5                	push	af
  4908  1826  33                	inc	sp
  4909  1827  cdfa16            	call	_vdp_setCursor2
  4910  182a  f1                	pop	af
  4911  182b  dde1              	pop	ix
  4912  182d  c9                	ret
  4913                          	SECTION code_compiler
  4914                          ;	---------------------------------
  4915                          ; Function vdp_writeCharAtLocation
  4916                          ; ---------------------------------
  4917                          _vdp_writeCharAtLocation:
  4918  182e  dde5              	push	ix
  4919  1830  dd210000          	ld	ix,0
  4920  1834  dd39              	add	ix,sp
  4921  1836  218e09            	ld	hl,__vdpCursorMaxXFull + 0
  4922  1839  5e                	ld	e, (hl)
  4923  183a  dd6605            	ld	h,(ix+5)
  4924  183d  2e00              	ld	l,0x00
  4925  183f  55                	ld	d, l
  4926  1840  0608              	ld	b,0x08
  4927                          l_vdp_writeCharAtLocation_00103:
  4928  1842  29                	add	hl, hl
  4929  1843  3001              	jr	NC,l_vdp_writeCharAtLocation_00104
  4930  1845  19                	add	hl, de
  4931                          l_vdp_writeCharAtLocation_00104:
  4932  1846  10fa              	djnz	l_vdp_writeCharAtLocation_00103
  4933  1848  dd4e04            	ld	c,(ix+4)
  4934  184b  0600              	ld	b,0x00
  4935  184d  09                	add	hl, bc
  4936  184e  eb                	ex	de, hl
  4937  184f  210002            	ld	hl,__vdp_textBuffer+0
  4938  1852  19                	add	hl, de
  4939  1853  dd7e06            	ld	a,(ix+6)
  4940  1856  77                	ld	(hl), a
  4941  1857  2a8709            	ld	hl, (__vdpPatternNameTableAddr)
  4942  185a  19                	add	hl, de
  4943  185b  e5                	push	hl
  4944  185c  cd5c09            	call	_vdp_setWriteAddress
  4945  185f  f1                	pop	af
  4946  1860  dd7e06            	ld	a,(ix+6)
  4947  1863  d3a0              	out	(_IO_VDPDATA), a
  4948  1865  dde1              	pop	ix
  4949  1867  c9                	ret
  4950                          	SECTION code_compiler
  4951                          ;	---------------------------------
  4952                          ; Function vdp_getCharAtLocationVRAM
  4953                          ; ---------------------------------
  4954                          _vdp_getCharAtLocationVRAM:
  4955  1868  dde5              	push	ix
  4956  186a  dd210000          	ld	ix,0
  4957  186e  dd39              	add	ix,sp
  4958  1870  218e09            	ld	hl,__vdpCursorMaxXFull + 0
  4959  1873  5e                	ld	e, (hl)
  4960  1874  dd6605            	ld	h,(ix+5)
  4961  1877  2e00              	ld	l,0x00
  4962  1879  55                	ld	d, l
  4963  187a  0608              	ld	b,0x08
  4964                          l_vdp_getCharAtLocationVRAM_00103:
  4965  187c  29                	add	hl, hl
  4966  187d  3001              	jr	NC,l_vdp_getCharAtLocationVRAM_00104
  4967  187f  19                	add	hl, de
  4968                          l_vdp_getCharAtLocationVRAM_00104:
  4969  1880  10fa              	djnz	l_vdp_getCharAtLocationVRAM_00103
  4970  1882  dd4e04            	ld	c,(ix+4)
  4971  1885  0600              	ld	b,0x00
  4972  1887  09                	add	hl, bc
  4973  1888  eb                	ex	de, hl
  4974  1889  2a8709            	ld	hl, (__vdpPatternNameTableAddr)
  4975  188c  19                	add	hl, de
  4976  188d  e5                	push	hl
  4977  188e  cd6f09            	call	_vdp_setReadAddress
  4978  1891  f1                	pop	af
  4979  1892  dba0              	in	a, (_IO_VDPDATA)
  4980  1894  6f                	ld	l, a
  4981  1895  dde1              	pop	ix
  4982  1897  c9                	ret
  4983                          	SECTION code_compiler
  4984                          ;	---------------------------------
  4985                          ; Function vdp_getCharAtLocationBuf
  4986                          ; ---------------------------------
  4987                          _vdp_getCharAtLocationBuf:
  4988  1898  dde5              	push	ix
  4989  189a  dd210000          	ld	ix,0
  4990  189e  dd39              	add	ix,sp
  4991  18a0  218e09            	ld	hl,__vdpCursorMaxXFull + 0
  4992  18a3  5e                	ld	e, (hl)
  4993  18a4  dd6605            	ld	h,(ix+5)
  4994  18a7  2e00              	ld	l,0x00
  4995  18a9  55                	ld	d, l
  4996  18aa  0608              	ld	b,0x08
  4997                          l_vdp_getCharAtLocationBuf_00103:
  4998  18ac  29                	add	hl, hl
  4999  18ad  3001              	jr	NC,l_vdp_getCharAtLocationBuf_00104
  5000  18af  19                	add	hl, de
  5001                          l_vdp_getCharAtLocationBuf_00104:
  5002  18b0  10fa              	djnz	l_vdp_getCharAtLocationBuf_00103
  5003  18b2  dd4e04            	ld	c,(ix+4)
  5004  18b5  0600              	ld	b,0x00
  5005  18b7  09                	add	hl, bc
  5006  18b8  110002            	ld	de,__vdp_textBuffer
  5007  18bb  19                	add	hl, de
  5008  18bc  6e                	ld	l, (hl)
  5009  18bd  dde1              	pop	ix
  5010  18bf  c9                	ret
  5011                          	SECTION code_compiler
  5012                          ;	---------------------------------
  5013                          ; Function vdp_setCharAtLocationBuf
  5014                          ; ---------------------------------
  5015                          _vdp_setCharAtLocationBuf:
  5016  18c0  dde5              	push	ix
  5017  18c2  dd210000          	ld	ix,0
  5018  18c6  dd39              	add	ix,sp
  5019  18c8  218e09            	ld	hl,__vdpCursorMaxXFull + 0
  5020  18cb  5e                	ld	e, (hl)
  5021  18cc  dd6605            	ld	h,(ix+5)
  5022  18cf  2e00              	ld	l,0x00
  5023  18d1  55                	ld	d, l
  5024  18d2  0608              	ld	b,0x08
  5025                          l_vdp_setCharAtLocationBuf_00103:
  5026  18d4  29                	add	hl, hl
  5027  18d5  3001              	jr	NC,l_vdp_setCharAtLocationBuf_00104
  5028  18d7  19                	add	hl, de
  5029                          l_vdp_setCharAtLocationBuf_00104:
  5030  18d8  10fa              	djnz	l_vdp_setCharAtLocationBuf_00103
  5031  18da  dd4e04            	ld	c,(ix+4)
  5032  18dd  0600              	ld	b,0x00
  5033  18df  09                	add	hl, bc
  5034  18e0  110002            	ld	de,__vdp_textBuffer
  5035  18e3  19                	add	hl, de
  5036  18e4  dd7e06            	ld	a,(ix+6)
  5037  18e7  77                	ld	(hl), a
  5038  18e8  dde1              	pop	ix
  5039  18ea  c9                	ret
  5040                          	SECTION code_compiler
  5041                          ;	---------------------------------
  5042                          ; Function vdp_refreshViewPort
  5043                          ; ---------------------------------
  5044                          _vdp_refreshViewPort:
  5045  18eb  2a8709            	ld	hl, (__vdpPatternNameTableAddr)
  5046  18ee  e5                	push	hl
  5047  18ef  cd5c09            	call	_vdp_setWriteAddress
  5048  18f2  f1                	pop	af
  5049  18f3  e5                	push	hl
  5050  18f4  d5                	push	de
  5051  18f5  210002            	ld	hl, __vdp_textBuffer
  5052  18f8  ed5b8f09          	ld	de, (__vdpTextBufferSize)
  5053                          vdp_refreshViewPortLoop3:
  5054  18fc  7e                	ld	a, (hl)
  5055  18fd  d3a0              	out	(0xa0), a
  5056  18ff  23                	inc	hl
  5057  1900  1b                	dec	de
  5058  1901  7a                	ld	A, D
  5059  1902  b3                	or	E
  5060  1903  c2fc18            	jp	nz, vdp_refreshViewPortLoop3
  5061  1906  d1                	pop	de
  5062  1907  e1                	pop	hl
  5063  1908  c9                	ret
  5064                          	SECTION code_compiler
  5065                          ;	---------------------------------
  5066                          ; Function vdp_scrollTextUp
  5067                          ; ---------------------------------
  5068                          _vdp_scrollTextUp:
  5069  1909  dde5              	push	ix
  5070  190b  dd210000          	ld	ix,0
  5071  190f  dd39              	add	ix,sp
  5072  1911  f5                	push	af
  5073  1912  218e09            	ld	hl,__vdpCursorMaxXFull + 0
  5074  1915  5e                	ld	e, (hl)
  5075  1916  dd6604            	ld	h,(ix+4)
  5076  1919  2e00              	ld	l,0x00
  5077  191b  55                	ld	d, l
  5078  191c  0608              	ld	b,0x08
  5079                          l_vdp_scrollTextUp_00125:
  5080  191e  29                	add	hl, hl
  5081  191f  3001              	jr	NC,l_vdp_scrollTextUp_00126
  5082  1921  19                	add	hl, de
  5083                          l_vdp_scrollTextUp_00126:
  5084  1922  10fa              	djnz	l_vdp_scrollTextUp_00125
  5085  1924  eb                	ex	de, hl
  5086  1925  2a8709            	ld	hl, (__vdpPatternNameTableAddr)
  5087  1928  19                	add	hl, de
  5088  1929  e5                	push	hl
  5089  192a  cd5c09            	call	_vdp_setWriteAddress
  5090  192d  f1                	pop	af
  5091  192e  218e09            	ld	hl,__vdpCursorMaxXFull + 0
  5092  1931  5e                	ld	e, (hl)
  5093  1932  dd6604            	ld	h,(ix+4)
  5094  1935  2e00              	ld	l,0x00
  5095  1937  55                	ld	d, l
  5096  1938  0608              	ld	b,0x08
  5097                          l_vdp_scrollTextUp_00127:
  5098  193a  29                	add	hl, hl
  5099  193b  3001              	jr	NC,l_vdp_scrollTextUp_00128
  5100  193d  19                	add	hl, de
  5101                          l_vdp_scrollTextUp_00128:
  5102  193e  10fa              	djnz	l_vdp_scrollTextUp_00127
  5103  1940  110002            	ld	de,__vdp_textBuffer
  5104  1943  19                	add	hl, de
  5105  1944  eb                	ex	de, hl
  5106  1945  2a8e09            	ld	hl, (__vdpCursorMaxXFull)
  5107  1948  2600              	ld	h,0x00
  5108  194a  19                	add	hl, de
  5109  194b  e3                	ex	(sp), hl
  5110  194c  dd4e05            	ld	c,(ix+5)
  5111  194f  0600              	ld	b,0x00
  5112  1951  03                	inc	bc
  5113  1952  3a8e09            	ld	a, (__vdpCursorMaxXFull+0)
  5114  1955  2600              	ld	h,0x00
  5115  1957  d5                	push	de
  5116  1958  6f                	ld	l, a
  5117  1959  e5                	push	hl
  5118  195a  c5                	push	bc
  5119  195b  cd0000            	call	__mulint_callee
  5120  195e  d1                	pop	de
  5121  195f  010002            	ld	bc,__vdp_textBuffer
  5122  1962  09                	add	hl, bc
  5123  1963  4d                	ld	c, l
  5124  1964  44                	ld	b, h
  5125  1965  eb                	ex	de, hl
  5126  1966  d1                	pop	de
  5127  1967  d5                	push	de
  5128                          l_vdp_scrollTextUp_00101:
  5129  1968  1a                	ld	a, (de)
  5130  1969  77                	ld	(hl), a
  5131  196a  d3a0              	out	(_IO_VDPDATA), a
  5132  196c  23                	inc	hl
  5133  196d  13                	inc	de
  5134  196e  7b                	ld	a, e
  5135  196f  91                	sub	a, c
  5136  1970  20f6              	jr	NZ,l_vdp_scrollTextUp_00101
  5137  1972  7a                	ld	a, d
  5138  1973  90                	sub	a, b
  5139  1974  20f2              	jr	NZ,l_vdp_scrollTextUp_00101
  5140  1976  eb                	ex	de, hl
  5141                          l_vdp_scrollTextUp_00104:
  5142  1977  3e20              	ld	a,0x20
  5143  1979  12                	ld	(de),a
  5144  197a  d3a0              	out	(_IO_VDPDATA), a
  5145  197c  13                	inc	de
  5146  197d  6b                	ld	l, e
  5147  197e  62                	ld	h, d
  5148  197f  bf                	cp	a, a
  5149  1980  ed42              	sbc	hl, bc
  5150  1982  20f3              	jr	NZ,l_vdp_scrollTextUp_00104
  5151  1984  ddf9              	ld	sp, ix
  5152  1986  dde1              	pop	ix
  5153  1988  c9                	ret
  5154                          	SECTION code_compiler
  5155                          ;	---------------------------------
  5156                          ; Function vdp_scrollTextDown
  5157                          ; ---------------------------------
  5158                          _vdp_scrollTextDown:
  5159  1989  dde5              	push	ix
  5160  198b  dd210000          	ld	ix,0
  5161  198f  dd39              	add	ix,sp
  5162  1991  f5                	push	af
  5163  1992  fd218e09          	ld	iy,__vdpCursorMaxXFull
  5164  1996  fd5e00            	ld	e,(iy+0)
  5165  1999  dd6605            	ld	h,(ix+5)
  5166  199c  2e00              	ld	l,0x00
  5167  199e  55                	ld	d, l
  5168  199f  0608              	ld	b,0x08
  5169                          l_vdp_scrollTextDown_00139:
  5170  19a1  29                	add	hl, hl
  5171  19a2  3001              	jr	NC,l_vdp_scrollTextDown_00140
  5172  19a4  19                	add	hl, de
  5173                          l_vdp_scrollTextDown_00140:
  5174  19a5  10fa              	djnz	l_vdp_scrollTextDown_00139
  5175  19a7  110002            	ld	de,__vdp_textBuffer
  5176  19aa  19                	add	hl, de
  5177  19ab  2b                	dec	hl
  5178  19ac  eb                	ex	de, hl
  5179  19ad  3a8e09            	ld	a, (__vdpCursorMaxXFull+0)
  5180  19b0  83                	add	a, e
  5181  19b1  4f                	ld	c, a
  5182  19b2  3e00              	ld	a,0x00
  5183  19b4  8a                	adc	a, d
  5184  19b5  47                	ld	b, a
  5185  19b6  d5                	push	de
  5186  19b7  c5                	push	bc
  5187  19b8  fd5e00            	ld	e,(iy+0)
  5188  19bb  dd6604            	ld	h,(ix+4)
  5189  19be  2e00              	ld	l,0x00
  5190  19c0  55                	ld	d, l
  5191  19c1  0608              	ld	b,0x08
  5192                          l_vdp_scrollTextDown_00141:
  5193  19c3  29                	add	hl, hl
  5194  19c4  3001              	jr	NC,l_vdp_scrollTextDown_00142
  5195  19c6  19                	add	hl, de
  5196                          l_vdp_scrollTextDown_00142:
  5197  19c7  10fa              	djnz	l_vdp_scrollTextDown_00141
  5198  19c9  c1                	pop	bc
  5199  19ca  d1                	pop	de
  5200  19cb  3eff              	ld	a, +((__vdp_textBuffer - 1) & 0xFF)
  5201  19cd  85                	add	a, l
  5202  19ce  6f                	ld	l, a
  5203  19cf  3e01              	ld	a, +((__vdp_textBuffer - 1) / 256)
  5204  19d1  8c                	adc	a, h
  5205  19d2  67                	ld	h, a
  5206  19d3  e3                	ex	(sp), hl
  5207                          l_vdp_scrollTextDown_00101:
  5208  19d4  1a                	ld	a, (de)
  5209  19d5  02                	ld	(bc), a
  5210  19d6  0b                	dec	bc
  5211  19d7  1b                	dec	de
  5212  19d8  e1                	pop	hl
  5213  19d9  e5                	push	hl
  5214  19da  bf                	cp	a, a
  5215  19db  ed52              	sbc	hl, de
  5216  19dd  20f5              	jr	NZ,l_vdp_scrollTextDown_00101
  5217                          l_vdp_scrollTextDown_00104:
  5218  19df  3e20              	ld	a,0x20
  5219  19e1  02                	ld	(bc), a
  5220  19e2  0b                	dec	bc
  5221  19e3  e1                	pop	hl
  5222  19e4  e5                	push	hl
  5223  19e5  bf                	cp	a, a
  5224  19e6  ed42              	sbc	hl, bc
  5225  19e8  20f5              	jr	NZ,l_vdp_scrollTextDown_00104
  5226  19ea  218e09            	ld	hl,__vdpCursorMaxXFull + 0
  5227  19ed  5e                	ld	e, (hl)
  5228  19ee  dd6604            	ld	h,(ix+4)
  5229  19f1  2e00              	ld	l,0x00
  5230  19f3  55                	ld	d, l
  5231  19f4  0608              	ld	b,0x08
  5232                          l_vdp_scrollTextDown_00147:
  5233  19f6  29                	add	hl, hl
  5234  19f7  3001              	jr	NC,l_vdp_scrollTextDown_00148
  5235  19f9  19                	add	hl, de
  5236                          l_vdp_scrollTextDown_00148:
  5237  19fa  10fa              	djnz	l_vdp_scrollTextDown_00147
  5238  19fc  eb                	ex	de, hl
  5239  19fd  2a8709            	ld	hl, (__vdpPatternNameTableAddr)
  5240  1a00  19                	add	hl, de
  5241  1a01  e5                	push	hl
  5242  1a02  cd5c09            	call	_vdp_setWriteAddress
  5243  1a05  f1                	pop	af
  5244  1a06  218e09            	ld	hl,__vdpCursorMaxXFull + 0
  5245  1a09  5e                	ld	e, (hl)
  5246  1a0a  dd6604            	ld	h,(ix+4)
  5247  1a0d  2e00              	ld	l,0x00
  5248  1a0f  55                	ld	d, l
  5249  1a10  0608              	ld	b,0x08
  5250                          l_vdp_scrollTextDown_00149:
  5251  1a12  29                	add	hl, hl
  5252  1a13  3001              	jr	NC,l_vdp_scrollTextDown_00150
  5253  1a15  19                	add	hl, de
  5254                          l_vdp_scrollTextDown_00150:
  5255  1a16  10fa              	djnz	l_vdp_scrollTextDown_00149
  5256  1a18  110002            	ld	de,__vdp_textBuffer
  5257  1a1b  19                	add	hl, de
  5258  1a1c  eb                	ex	de, hl
  5259  1a1d  dd4e05            	ld	c,(ix+5)
  5260  1a20  0600              	ld	b,0x00
  5261  1a22  03                	inc	bc
  5262  1a23  3a8e09            	ld	a, (__vdpCursorMaxXFull+0)
  5263  1a26  2600              	ld	h,0x00
  5264  1a28  d5                	push	de
  5265  1a29  6f                	ld	l, a
  5266  1a2a  e5                	push	hl
  5267  1a2b  c5                	push	bc
  5268  1a2c  cd0000            	call	__mulint_callee
  5269  1a2f  d1                	pop	de
  5270  1a30  010002            	ld	bc,__vdp_textBuffer
  5271  1a33  09                	add	hl, bc
  5272  1a34  4d                	ld	c, l
  5273  1a35  44                	ld	b, h
  5274                          l_vdp_scrollTextDown_00107:
  5275  1a36  1a                	ld	a, (de)
  5276  1a37  d3a0              	out	(_IO_VDPDATA), a
  5277  1a39  13                	inc	de
  5278  1a3a  6b                	ld	l, e
  5279  1a3b  62                	ld	h, d
  5280  1a3c  bf                	cp	a, a
  5281  1a3d  ed42              	sbc	hl, bc
  5282  1a3f  20f5              	jr	NZ,l_vdp_scrollTextDown_00107
  5283  1a41  ddf9              	ld	sp, ix
  5284  1a43  dde1              	pop	ix
  5285  1a45  c9                	ret
  5286                          	SECTION code_compiler
  5287                          ;	---------------------------------
  5288                          ; Function vdp_writeUInt8ToBinary
  5289                          ; ---------------------------------
  5290                          _vdp_writeUInt8ToBinary:
  5291  1a46  dde5              	push	ix
  5292  1a48  dd210000          	ld	ix,0
  5293  1a4c  dd39              	add	ix,sp
  5294  1a4e  21f7ff            	ld	hl, -9
  5295  1a51  39                	add	hl, sp
  5296  1a52  f9                	ld	sp, hl
  5297  1a53  0e00              	ld	c,0x00
  5298                          l_vdp_writeUInt8ToBinary_00106:
  5299  1a55  79                	ld	a, c
  5300  1a56  d608              	sub	a,0x08
  5301  1a58  302a              	jr	NC,l_vdp_writeUInt8ToBinary_00104
  5302  1a5a  41                	ld	b, c
  5303  1a5b  dd6e04            	ld	l,(ix+4)
  5304  1a5e  04                	inc	b
  5305  1a5f  1802              	jr	l_vdp_writeUInt8ToBinary_00127
  5306                          l_vdp_writeUInt8ToBinary_00126:
  5307  1a61  cb3d              	srl	l
  5308                          l_vdp_writeUInt8ToBinary_00127:
  5309  1a63  10fc              	djnz	l_vdp_writeUInt8ToBinary_00126
  5310  1a65  59                	ld	e, c
  5311  1a66  3e07              	ld	a,0x07
  5312  1a68  93                	sub	a, e
  5313  1a69  5f                	ld	e, a
  5314  1a6a  07                	rlca
  5315  1a6b  9f                	sbc	a, a
  5316  1a6c  57                	ld	d, a
  5317  1a6d  cb45              	bit	0, l
  5318  1a6f  2809              	jr	Z,l_vdp_writeUInt8ToBinary_00102
  5319  1a71  210000            	ld	hl,0
  5320  1a74  39                	add	hl, sp
  5321  1a75  19                	add	hl, de
  5322  1a76  3631              	ld	(hl),0x31
  5323  1a78  1807              	jr	l_vdp_writeUInt8ToBinary_00107
  5324                          l_vdp_writeUInt8ToBinary_00102:
  5325  1a7a  210000            	ld	hl,0
  5326  1a7d  39                	add	hl, sp
  5327  1a7e  19                	add	hl, de
  5328  1a7f  3630              	ld	(hl),0x30
  5329                          l_vdp_writeUInt8ToBinary_00107:
  5330  1a81  0c                	inc	c
  5331  1a82  18d1              	jr	l_vdp_writeUInt8ToBinary_00106
  5332                          l_vdp_writeUInt8ToBinary_00104:
  5333  1a84  dd36ff00          	ld	(ix-1),0x00
  5334  1a88  210000            	ld	hl,0
  5335  1a8b  39                	add	hl, sp
  5336  1a8c  e5                	push	hl
  5337  1a8d  cd9815            	call	_vdp_print
  5338  1a90  ddf9              	ld	sp,ix
  5339  1a92  dde1              	pop	ix
  5340  1a94  c9                	ret
  5341                          	SECTION code_compiler
  5342                          ;	---------------------------------
  5343                          ; Function vdp_writeUInt16ToBinary
  5344                          ; ---------------------------------
  5345                          _vdp_writeUInt16ToBinary:
  5346  1a95  dde5              	push	ix
  5347  1a97  dd210000          	ld	ix,0
  5348  1a9b  dd39              	add	ix,sp
  5349  1a9d  21edff            	ld	hl, -19
  5350  1aa0  39                	add	hl, sp
  5351  1aa1  f9                	ld	sp, hl
  5352  1aa2  0e00              	ld	c,0x00
  5353                          l_vdp_writeUInt16ToBinary_00106:
  5354  1aa4  79                	ld	a, c
  5355  1aa5  d610              	sub	a,0x10
  5356  1aa7  303f              	jr	NC,l_vdp_writeUInt16ToBinary_00104
  5357  1aa9  41                	ld	b, c
  5358  1aaa  dd5e04            	ld	e,(ix+4)
  5359  1aad  dd5605            	ld	d,(ix+5)
  5360  1ab0  04                	inc	b
  5361  1ab1  1804              	jr	l_vdp_writeUInt16ToBinary_00127
  5362                          l_vdp_writeUInt16ToBinary_00126:
  5363  1ab3  cb3a              	srl	d
  5364  1ab5  cb1b              	rr	e
  5365                          l_vdp_writeUInt16ToBinary_00127:
  5366  1ab7  10fa              	djnz	l_vdp_writeUInt16ToBinary_00126
  5367  1ab9  41                	ld	b, c
  5368  1aba  3e0f              	ld	a,0x0f
  5369  1abc  90                	sub	a, b
  5370  1abd  dd77fe            	ld	(ix-2),a
  5371  1ac0  07                	rlca
  5372  1ac1  9f                	sbc	a, a
  5373  1ac2  dd77ff            	ld	(ix-1),a
  5374  1ac5  cb43              	bit	0, e
  5375  1ac7  280f              	jr	Z,l_vdp_writeUInt16ToBinary_00102
  5376  1ac9  dd5efe            	ld	e,(ix-2)
  5377  1acc  dd56ff            	ld	d,(ix-1)
  5378  1acf  210000            	ld	hl,0
  5379  1ad2  39                	add	hl, sp
  5380  1ad3  19                	add	hl, de
  5381  1ad4  3631              	ld	(hl),0x31
  5382  1ad6  180d              	jr	l_vdp_writeUInt16ToBinary_00107
  5383                          l_vdp_writeUInt16ToBinary_00102:
  5384  1ad8  dd5efe            	ld	e,(ix-2)
  5385  1adb  dd56ff            	ld	d,(ix-1)
  5386  1ade  210000            	ld	hl,0
  5387  1ae1  39                	add	hl, sp
  5388  1ae2  19                	add	hl, de
  5389  1ae3  3630              	ld	(hl),0x30
  5390                          l_vdp_writeUInt16ToBinary_00107:
  5391  1ae5  0c                	inc	c
  5392  1ae6  18bc              	jr	l_vdp_writeUInt16ToBinary_00106
  5393                          l_vdp_writeUInt16ToBinary_00104:
  5394  1ae8  dd36fd00          	ld	(ix-3),0x00
  5395  1aec  210000            	ld	hl,0
  5396  1aef  39                	add	hl, sp
  5397  1af0  e5                	push	hl
  5398  1af1  cd9815            	call	_vdp_print
  5399  1af4  ddf9              	ld	sp,ix
  5400  1af6  dde1              	pop	ix
  5401  1af8  c9                	ret
  5402                          	SECTION code_compiler
  5403                          ;	---------------------------------
  5404                          ; Function vdp_writeUInt32ToBinary
  5405                          ; ---------------------------------
  5406                          _vdp_writeUInt32ToBinary:
  5407  1af9  dde5              	push	ix
  5408  1afb  dd210000          	ld	ix,0
  5409  1aff  dd39              	add	ix,sp
  5410  1b01  21daff            	ld	hl, -38
  5411  1b04  39                	add	hl, sp
  5412  1b05  f9                	ld	sp, hl
  5413  1b06  dd36ff00          	ld	(ix-1),0x00
  5414                          l_vdp_writeUInt32ToBinary_00106:
  5415  1b0a  dd7eff            	ld	a,(ix-1)
  5416  1b0d  d620              	sub	a,0x20
  5417  1b0f  3067              	jr	NC,l_vdp_writeUInt32ToBinary_00104
  5418  1b11  dd46ff            	ld	b,(ix-1)
  5419  1b14  dd4e04            	ld	c,(ix+4)
  5420  1b17  dd5e05            	ld	e,(ix+5)
  5421  1b1a  dd6e06            	ld	l,(ix+6)
  5422  1b1d  dd6607            	ld	h,(ix+7)
  5423  1b20  04                	inc	b
  5424  1b21  1808              	jr	l_vdp_writeUInt32ToBinary_00127
  5425                          l_vdp_writeUInt32ToBinary_00126:
  5426  1b23  cb3c              	srl	h
  5427  1b25  cb1d              	rr	l
  5428  1b27  cb1b              	rr	e
  5429  1b29  cb19              	rr	c
  5430                          l_vdp_writeUInt32ToBinary_00127:
  5431  1b2b  10f6              	djnz	l_vdp_writeUInt32ToBinary_00126
  5432  1b2d  dd46ff            	ld	b,(ix-1)
  5433  1b30  3e1f              	ld	a,0x1f
  5434  1b32  90                	sub	a, b
  5435  1b33  dd77fb            	ld	(ix-5),a
  5436  1b36  07                	rlca
  5437  1b37  9f                	sbc	a, a
  5438  1b38  dd77fc            	ld	(ix-4),a
  5439  1b3b  cb41              	bit	0, c
  5440  1b3d  281b              	jr	Z,l_vdp_writeUInt32ToBinary_00102
  5441  1b3f  dd5efb            	ld	e,(ix-5)
  5442  1b42  dd56fc            	ld	d,(ix-4)
  5443  1b45  210000            	ld	hl,0
  5444  1b48  39                	add	hl, sp
  5445  1b49  19                	add	hl, de
  5446  1b4a  dd75fd            	ld	(ix-3),l
  5447  1b4d  dd74fe            	ld	(ix-2),h
  5448  1b50  dd6efd            	ld	l,(ix-3)
  5449  1b53  dd66fe            	ld	h,(ix-2)
  5450  1b56  3631              	ld	(hl),0x31
  5451  1b58  1819              	jr	l_vdp_writeUInt32ToBinary_00107
  5452                          l_vdp_writeUInt32ToBinary_00102:
  5453  1b5a  dd5efb            	ld	e,(ix-5)
  5454  1b5d  dd56fc            	ld	d,(ix-4)
  5455  1b60  210000            	ld	hl,0
  5456  1b63  39                	add	hl, sp
  5457  1b64  19                	add	hl, de
  5458  1b65  dd75fd            	ld	(ix-3),l
  5459  1b68  dd74fe            	ld	(ix-2),h
  5460  1b6b  dd6efd            	ld	l,(ix-3)
  5461  1b6e  dd66fe            	ld	h,(ix-2)
  5462  1b71  3630              	ld	(hl),0x30
  5463                          l_vdp_writeUInt32ToBinary_00107:
  5464  1b73  dd34ff            	inc	(ix-1)
  5465  1b76  1892              	jr	l_vdp_writeUInt32ToBinary_00106
  5466                          l_vdp_writeUInt32ToBinary_00104:
  5467  1b78  dd36fa00          	ld	(ix-6),0x00
  5468  1b7c  210000            	ld	hl,0
  5469  1b7f  39                	add	hl, sp
  5470  1b80  e5                	push	hl
  5471  1b81  cd9815            	call	_vdp_print
  5472  1b84  ddf9              	ld	sp,ix
  5473  1b86  dde1              	pop	ix
  5474  1b88  c9                	ret
  5475                          	SECTION code_compiler
  5476                          ;	---------------------------------
  5477                          ; Function main
  5478                          ; ---------------------------------
  5479                          _main:
  5480  1b89  cd1d1d            	call	_playGame
  5481  1b8c  210000            	ld	hl,0x0000
  5482  1b8f  c9                	ret
  5483                          	SECTION code_compiler
  5484                          ;	---------------------------------
  5485                          ; Function initGame
  5486                          ; ---------------------------------
  5487                          _initGame:
  5488  1b90  cddb01            	call	_vt_clearScreen
  5489  1b93  c36002            	jp	_vt_cursorHome
  5490                          	SECTION code_compiler
  5491                          ;	---------------------------------
  5492                          ; Function drawBoard
  5493                          ; ---------------------------------
  5494                          _drawBoard:
  5495  1b96  dde5              	push	ix
  5496  1b98  dd210000          	ld	ix,0
  5497  1b9c  dd39              	add	ix,sp
  5498  1b9e  f5                	push	af
  5499  1b9f  cddb01            	call	_vt_clearScreen
  5500  1ba2  010000            	ld	bc,0x0000
  5501                          l_drawBoard_00109:
  5502  1ba5  79                	ld	a, c
  5503  1ba6  d603              	sub	a,0x03
  5504  1ba8  78                	ld	a, b
  5505  1ba9  17                	rla
  5506  1baa  3f                	ccf
  5507  1bab  1f                	rra
  5508  1bac  de80              	sbc	a,0x80
  5509  1bae  305a              	jr	NC,l_drawBoard_00111
  5510  1bb0  69                	ld	l, c
  5511  1bb1  60                	ld	h, b
  5512  1bb2  29                	add	hl, hl
  5513  1bb3  09                	add	hl, bc
  5514  1bb4  eb                	ex	de, hl
  5515  1bb5  7b                	ld	a, e
  5516  1bb6  dd8604            	add	a,(ix+4)
  5517  1bb9  dd77fe            	ld	(ix-2),a
  5518  1bbc  7a                	ld	a, d
  5519  1bbd  dd8e05            	adc	a,(ix+5)
  5520  1bc0  dd77ff            	ld	(ix-1),a
  5521  1bc3  110000            	ld	de,0x0000
  5522                          l_drawBoard_00106:
  5523  1bc6  7b                	ld	a, e
  5524  1bc7  d603              	sub	a,0x03
  5525  1bc9  7a                	ld	a, d
  5526  1bca  17                	rla
  5527  1bcb  3f                	ccf
  5528  1bcc  1f                	rra
  5529  1bcd  de80              	sbc	a,0x80
  5530  1bcf  3017              	jr	NC,l_drawBoard_00101
  5531  1bd1  e1                	pop	hl
  5532  1bd2  e5                	push	hl
  5533  1bd3  19                	add	hl, de
  5534  1bd4  6e                	ld	l, (hl)
  5535  1bd5  2600              	ld	h,0x00
  5536  1bd7  c5                	push	bc
  5537  1bd8  d5                	push	de
  5538  1bd9  e5                	push	hl
  5539  1bda  21ea00            	ld	hl,___str_22
  5540  1bdd  e5                	push	hl
  5541  1bde  cd0000            	call	_printf
  5542  1be1  f1                	pop	af
  5543  1be2  f1                	pop	af
  5544  1be3  d1                	pop	de
  5545  1be4  c1                	pop	bc
  5546  1be5  13                	inc	de
  5547  1be6  18de              	jr	l_drawBoard_00106
  5548                          l_drawBoard_00101:
  5549  1be8  c5                	push	bc
  5550  1be9  21f000            	ld	hl,___str_24
  5551  1bec  e5                	push	hl
  5552  1bed  cd0000            	call	_puts
  5553  1bf0  f1                	pop	af
  5554  1bf1  c1                	pop	bc
  5555  1bf2  79                	ld	a, c
  5556  1bf3  d602              	sub	a,0x02
  5557  1bf5  78                	ld	a, b
  5558  1bf6  17                	rla
  5559  1bf7  3f                	ccf
  5560  1bf8  1f                	rra
  5561  1bf9  de80              	sbc	a,0x80
  5562  1bfb  300a              	jr	NC,l_drawBoard_00110
  5563  1bfd  c5                	push	bc
  5564  1bfe  21f300            	ld	hl,___str_26
  5565  1c01  e5                	push	hl
  5566  1c02  cd0000            	call	_puts
  5567  1c05  f1                	pop	af
  5568  1c06  c1                	pop	bc
  5569                          l_drawBoard_00110:
  5570  1c07  03                	inc	bc
  5571  1c08  189b              	jr	l_drawBoard_00109
  5572                          l_drawBoard_00111:
  5573  1c0a  ddf9              	ld	sp, ix
  5574  1c0c  dde1              	pop	ix
  5575  1c0e  c9                	ret
  5576                          	SECTION rodata_compiler
  5577                          ___str_22:
  5578  00ea  2025fe207c        	DEFM " %c |"
  5579  00ef  00                	DEFB 0x00
  5580                          	SECTION rodata_compiler
  5581                          ___str_24:
  5582  00f0  08                	DEFB 0x08
  5583  00f1  d8                	DEFM " "
  5584  00f2  00                	DEFB 0x00
  5585                          	SECTION rodata_compiler
  5586                          ___str_26:
  5587  00f3  2d2d047c2d052d7c  	DEFM "---|---|---"
              2d2dfc            
  5588  00fe  00                	DEFB 0x00
  5589                          	SECTION code_compiler
  5590                          ;	---------------------------------
  5591                          ; Function checkWin
  5592                          ; ---------------------------------
  5593                          _checkWin:
  5594  1c0f  dde5              	push	ix
  5595  1c11  dd210000          	ld	ix,0
  5596  1c15  dd39              	add	ix,sp
  5597  1c17  f5                	push	af
  5598  1c18  f5                	push	af
  5599  1c19  af                	xor	a, a
  5600  1c1a  dd77fe            	ld	(ix-2),a
  5601  1c1d  dd77ff            	ld	(ix-1),a
  5602                          l_checkWin_00119:
  5603  1c20  dd7e04            	ld	a,(ix+4)
  5604  1c23  dd77fc            	ld	(ix-4),a
  5605  1c26  dd7e05            	ld	a,(ix+5)
  5606  1c29  dd77fd            	ld	(ix-3),a
  5607  1c2c  dd7efe            	ld	a,(ix-2)
  5608  1c2f  d603              	sub	a,0x03
  5609  1c31  dd7eff            	ld	a,(ix-1)
  5610  1c34  17                	rla
  5611  1c35  3f                	ccf
  5612  1c36  1f                	rra
  5613  1c37  de80              	sbc	a,0x80
  5614  1c39  d2c41c            	jp	NC, l_checkWin_00109
  5615  1c3c  dd4efe            	ld	c,(ix-2)
  5616  1c3f  dd46ff            	ld	b,(ix-1)
  5617  1c42  69                	ld	l, c
  5618  1c43  60                	ld	h, b
  5619  1c44  29                	add	hl, hl
  5620  1c45  09                	add	hl, bc
  5621  1c46  eb                	ex	de, hl
  5622  1c47  7b                	ld	a, e
  5623  1c48  dd8604            	add	a,(ix+4)
  5624  1c4b  5f                	ld	e, a
  5625  1c4c  7a                	ld	a, d
  5626  1c4d  dd8e05            	adc	a,(ix+5)
  5627  1c50  57                	ld	d, a
  5628  1c51  6b                	ld	l, e
  5629  1c52  62                	ld	h, d
  5630  1c53  1a                	ld	a, (de)
  5631  1c54  23                	inc	hl
  5632  1c55  4e                	ld	c, (hl)
  5633  1c56  b9                	cp	a, c
  5634  1c57  201a              	jr	NZ,l_checkWin_00102
  5635  1c59  eb                	ex	de, hl
  5636  1c5a  23                	inc	hl
  5637  1c5b  23                	inc	hl
  5638  1c5c  4e                	ld	c, (hl)
  5639  1c5d  b9                	cp	a, c
  5640  1c5e  2013              	jr	NZ,l_checkWin_00102
  5641  1c60  fe20              	cp	a,0x20
  5642  1c62  280f              	jr	Z,l_checkWin_00102
  5643  1c64  d658              	sub	a,0x58
  5644  1c66  2005              	jr	NZ,l_checkWin_00123
  5645  1c68  210100            	ld	hl,0x0001
  5646  1c6b  1803              	jr	l_checkWin_00124
  5647                          l_checkWin_00123:
  5648  1c6d  210200            	ld	hl,0x0002
  5649                          l_checkWin_00124:
  5650  1c70  c3181d            	jp	l_checkWin_00121
  5651                          l_checkWin_00102:
  5652  1c73  dd7efc            	ld	a,(ix-4)
  5653  1c76  dd86fe            	add	a,(ix-2)
  5654  1c79  4f                	ld	c, a
  5655  1c7a  dd7efd            	ld	a,(ix-3)
  5656  1c7d  dd8eff            	adc	a,(ix-1)
  5657  1c80  47                	ld	b, a
  5658  1c81  d1                	pop	de
  5659  1c82  d5                	push	de
  5660  1c83  13                	inc	de
  5661  1c84  13                	inc	de
  5662  1c85  13                	inc	de
  5663  1c86  dd6efe            	ld	l,(ix-2)
  5664  1c89  dd66ff            	ld	h,(ix-1)
  5665  1c8c  19                	add	hl, de
  5666  1c8d  0a                	ld	a, (bc)
  5667  1c8e  4f                	ld	c, a
  5668  1c8f  5e                	ld	e, (hl)
  5669  1c90  79                	ld	a, c
  5670  1c91  93                	sub	a, e
  5671  1c92  2024              	jr	NZ,l_checkWin_00120
  5672  1c94  e1                	pop	hl
  5673  1c95  e5                	push	hl
  5674  1c96  110600            	ld	de,0x0006
  5675  1c99  19                	add	hl, de
  5676  1c9a  dd5efe            	ld	e,(ix-2)
  5677  1c9d  dd56ff            	ld	d,(ix-1)
  5678  1ca0  19                	add	hl, de
  5679  1ca1  46                	ld	b, (hl)
  5680  1ca2  79                	ld	a,c
  5681  1ca3  b8                	cp	a,b
  5682  1ca4  2012              	jr	NZ,l_checkWin_00120
  5683  1ca6  fe20              	cp	a,0x20
  5684  1ca8  280e              	jr	Z,l_checkWin_00120
  5685  1caa  d658              	sub	a,0x58
  5686  1cac  2005              	jr	NZ,l_checkWin_00125
  5687  1cae  210100            	ld	hl,0x0001
  5688  1cb1  1803              	jr	l_checkWin_00126
  5689                          l_checkWin_00125:
  5690  1cb3  210200            	ld	hl,0x0002
  5691                          l_checkWin_00126:
  5692  1cb6  1860              	jr	l_checkWin_00121
  5693                          l_checkWin_00120:
  5694  1cb8  dd34fe            	inc	(ix-2)
  5695  1cbb  c2201c            	jp	NZ,l_checkWin_00119
  5696  1cbe  dd34ff            	inc	(ix-1)
  5697  1cc1  c3201c            	jp	l_checkWin_00119
  5698                          l_checkWin_00109:
  5699  1cc4  c1                	pop	bc
  5700  1cc5  c5                	push	bc
  5701  1cc6  e1                	pop	hl
  5702  1cc7  e5                	push	hl
  5703  1cc8  5e                	ld	e, (hl)
  5704  1cc9  210400            	ld	hl,4
  5705  1ccc  09                	add	hl, bc
  5706  1ccd  4e                	ld	c, (hl)
  5707  1cce  7b                	ld	a, e
  5708  1ccf  91                	sub	a, c
  5709  1cd0  201f              	jr	NZ,l_checkWin_00111
  5710  1cd2  e1                	pop	hl
  5711  1cd3  e5                	push	hl
  5712  1cd4  c5                	push	bc
  5713  1cd5  010800            	ld	bc,0x0008
  5714  1cd8  09                	add	hl, bc
  5715  1cd9  c1                	pop	bc
  5716  1cda  7e                	ld	a, (hl)
  5717  1cdb  93                	sub	a, e
  5718  1cdc  2013              	jr	NZ,l_checkWin_00111
  5719  1cde  7b                	ld	a,e
  5720  1cdf  fe20              	cp	a,0x20
  5721  1ce1  280e              	jr	Z,l_checkWin_00111
  5722  1ce3  d658              	sub	a,0x58
  5723  1ce5  2005              	jr	NZ,l_checkWin_00127
  5724  1ce7  210100            	ld	hl,0x0001
  5725  1cea  1803              	jr	l_checkWin_00128
  5726                          l_checkWin_00127:
  5727  1cec  210200            	ld	hl,0x0002
  5728                          l_checkWin_00128:
  5729  1cef  1827              	jr	l_checkWin_00121
  5730                          l_checkWin_00111:
  5731  1cf1  d1                	pop	de
  5732  1cf2  d5                	push	de
  5733  1cf3  13                	inc	de
  5734  1cf4  13                	inc	de
  5735  1cf5  1a                	ld	a, (de)
  5736  1cf6  b9                	cp	a, c
  5737  1cf7  201c              	jr	NZ,l_checkWin_00115
  5738  1cf9  c1                	pop	bc
  5739  1cfa  c5                	push	bc
  5740  1cfb  210600            	ld	hl,6
  5741  1cfe  09                	add	hl, bc
  5742  1cff  4e                	ld	c, (hl)
  5743  1d00  b9                	cp	a, c
  5744  1d01  2012              	jr	NZ,l_checkWin_00115
  5745  1d03  fe20              	cp	a,0x20
  5746  1d05  280e              	jr	Z,l_checkWin_00115
  5747  1d07  d658              	sub	a,0x58
  5748  1d09  2005              	jr	NZ,l_checkWin_00129
  5749  1d0b  210100            	ld	hl,0x0001
  5750  1d0e  1803              	jr	l_checkWin_00130
  5751                          l_checkWin_00129:
  5752  1d10  210200            	ld	hl,0x0002
  5753                          l_checkWin_00130:
  5754  1d13  1803              	jr	l_checkWin_00121
  5755                          l_checkWin_00115:
  5756  1d15  210000            	ld	hl,0x0000
  5757                          l_checkWin_00121:
  5758  1d18  ddf9              	ld	sp, ix
  5759  1d1a  dde1              	pop	ix
  5760  1d1c  c9                	ret
  5761                          	SECTION code_compiler
  5762                          ;	---------------------------------
  5763                          ; Function playGame
  5764                          ; ---------------------------------
  5765                          _playGame:
  5766  1d1d  dde5              	push	ix
  5767  1d1f  dd210000          	ld	ix,0
  5768  1d23  dd39              	add	ix,sp
  5769  1d25  21e8ff            	ld	hl, -24
  5770  1d28  39                	add	hl, sp
  5771  1d29  f9                	ld	sp, hl
  5772  1d2a  216c01            	ld	hl,___str_52
  5773  1d2d  e5                	push	hl
  5774  1d2e  cd0000            	call	_puts
  5775  1d31  210000            	ld	hl,__sgoioblk
  5776  1d34  e3                	ex	(sp),hl
  5777  1d35  cd0000            	call	_fgetc
  5778  1d38  f1                	pop	af
  5779  1d39  dd36ea20          	ld	(ix-22),0x20
  5780  1d3d  dd36eb20          	ld	(ix-21),0x20
  5781  1d41  dd36ec20          	ld	(ix-20),0x20
  5782  1d45  dd36ed20          	ld	(ix-19),0x20
  5783  1d49  dd36ee20          	ld	(ix-18),0x20
  5784  1d4d  dd36ef20          	ld	(ix-17),0x20
  5785  1d51  dd36f020          	ld	(ix-16),0x20
  5786  1d55  dd36f120          	ld	(ix-15),0x20
  5787  1d59  dd36f220          	ld	(ix-14),0x20
  5788  1d5d  dd36fc01          	ld	(ix-4),0x01
  5789  1d61  af                	xor	a, a
  5790  1d62  dd77fd            	ld	(ix-3),a
  5791  1d65  af                	xor	a, a
  5792  1d66  dd77f6            	ld	(ix-10),a
  5793  1d69  dd77f7            	ld	(ix-9),a
  5794  1d6c  cd901b            	call	_initGame
  5795  1d6f  af                	xor	a, a
  5796  1d70  dd77fe            	ld	(ix-2),a
  5797  1d73  dd77ff            	ld	(ix-1),a
  5798                          l_playGame_00114:
  5799  1d76  dd7ef7            	ld	a,(ix-9)
  5800  1d79  ddb6f6            	or	a,(ix-10)
  5801  1d7c  c2f91e            	jp	NZ, l_playGame_00116
  5802  1d7f  dd7efe            	ld	a,(ix-2)
  5803  1d82  d609              	sub	a,0x09
  5804  1d84  dd7eff            	ld	a,(ix-1)
  5805  1d87  17                	rla
  5806  1d88  3f                	ccf
  5807  1d89  1f                	rra
  5808  1d8a  de80              	sbc	a,0x80
  5809  1d8c  d2f91e            	jp	NC, l_playGame_00116
  5810  1d8f  dd36e900          	ld	(ix-23),0x00
  5811                          l_playGame_00110:
  5812  1d93  210200            	ld	hl,2
  5813  1d96  39                	add	hl, sp
  5814  1d97  e5                	push	hl
  5815  1d98  cd961b            	call	_drawBoard
  5816  1d9b  2606              	ld	h,0x06
  5817  1d9d  e3                	ex	(sp),hl
  5818  1d9e  33                	inc	sp
  5819  1d9f  af                	xor	a, a
  5820  1da0  f5                	push	af
  5821  1da1  33                	inc	sp
  5822  1da2  cd3303            	call	_vt_setCursor
  5823  1da5  f1                	pop	af
  5824  1da6  dd7ee9            	ld	a,(ix-23)
  5825  1da9  b7                	or	a, a
  5826  1daa  2808              	jr	Z,l_playGame_00102
  5827  1dac  21ff00            	ld	hl,___str_35
  5828  1daf  e5                	push	hl
  5829  1db0  cd0000            	call	_puts
  5830  1db3  f1                	pop	af
  5831                          l_playGame_00102:
  5832  1db4  dd6efc            	ld	l,(ix-4)
  5833  1db7  dd66fd            	ld	h,(ix-3)
  5834  1dba  e5                	push	hl
  5835  1dbb  212301            	ld	hl,___str_36
  5836  1dbe  e5                	push	hl
  5837  1dbf  cd0000            	call	_printf
  5838  1dc2  f1                	pop	af
  5839  1dc3  215502            	ld	hl,___str_54
  5840  1dc6  e3                	ex	(sp),hl
  5841  1dc7  cd0000            	call	_puts
  5842  1dca  f1                	pop	af
  5843  1dcb  211200            	ld	hl,18
  5844  1dce  39                	add	hl, sp
  5845  1dcf  e5                	push	hl
  5846  1dd0  211200            	ld	hl,18
  5847  1dd3  39                	add	hl, sp
  5848  1dd4  e5                	push	hl
  5849  1dd5  212d01            	ld	hl,___str_39
  5850  1dd8  e5                	push	hl
  5851  1dd9  cd0000            	call	_scanf
  5852  1ddc  f1                	pop	af
  5853  1ddd  f1                	pop	af
  5854  1dde  f1                	pop	af
  5855  1ddf  dd7ef9            	ld	a,(ix-7)
  5856  1de2  ddb6f8            	or	a,(ix-8)
  5857  1de5  2013              	jr	NZ,l_playGame_00104
  5858  1de7  dd7efb            	ld	a,(ix-5)
  5859  1dea  ddb6fa            	or	a,(ix-6)
  5860  1ded  200b              	jr	NZ,l_playGame_00104
  5861  1def  213301            	ld	hl,___str_40
  5862  1df2  e5                	push	hl
  5863  1df3  cd0000            	call	_puts
  5864  1df6  f1                	pop	af
  5865  1df7  c31b1f            	jp	l_playGame_00120
  5866                          l_playGame_00104:
  5867  1dfa  dd6ef8            	ld	l,(ix-8)
  5868  1dfd  dd66f9            	ld	h,(ix-7)
  5869  1e00  2b                	dec	hl
  5870  1e01  dd75f8            	ld	(ix-8),l
  5871  1e04  dd74f9            	ld	(ix-7),h
  5872  1e07  dd6efa            	ld	l,(ix-6)
  5873  1e0a  dd66fb            	ld	h,(ix-5)
  5874  1e0d  2b                	dec	hl
  5875  1e0e  dd75fa            	ld	(ix-6),l
  5876  1e11  dd74fb            	ld	(ix-5),h
  5877  1e14  dd4ef8            	ld	c,(ix-8)
  5878  1e17  dd46f9            	ld	b,(ix-7)
  5879  1e1a  69                	ld	l, c
  5880  1e1b  60                	ld	h, b
  5881  1e1c  29                	add	hl, hl
  5882  1e1d  09                	add	hl, bc
  5883  1e1e  dd75f6            	ld	(ix-10),l
  5884  1e21  dd74f7            	ld	(ix-9),h
  5885  1e24  eb                	ex	de,hl
  5886  1e25  210200            	ld	hl,2
  5887  1e28  39                	add	hl, sp
  5888  1e29  19                	add	hl, de
  5889  1e2a  e3                	ex	(sp), hl
  5890  1e2b  dd7efa            	ld	a,(ix-6)
  5891  1e2e  dd77f3            	ld	(ix-13),a
  5892  1e31  dd7efb            	ld	a,(ix-5)
  5893  1e34  dd77f4            	ld	(ix-12),a
  5894  1e37  dd7ee8            	ld	a,(ix-24)
  5895  1e3a  dd86f3            	add	a,(ix-13)
  5896  1e3d  dd77f5            	ld	(ix-11),a
  5897  1e40  dd7ee9            	ld	a,(ix-23)
  5898  1e43  dd8ef4            	adc	a,(ix-12)
  5899  1e46  dd77f6            	ld	(ix-10),a
  5900  1e49  dd6ef5            	ld	l,(ix-11)
  5901  1e4c  dd66f6            	ld	h,(ix-10)
  5902  1e4f  7e                	ld	a, (hl)
  5903  1e50  dd77f7            	ld	(ix-9),a
  5904  1e53  d620              	sub	a,0x20
  5905  1e55  2004              	jr	NZ,l_playGame_00194
  5906  1e57  3e01              	ld	a,0x01
  5907  1e59  1801              	jr	l_playGame_00195
  5908                          l_playGame_00194:
  5909  1e5b  af                	xor	a,a
  5910                          l_playGame_00195:
  5911  1e5c  dd77f7            	ld	(ix-9),a
  5912  1e5f  ee01              	xor	a,0x01
  5913  1e61  dd77e9            	ld	(ix-23),a
  5914  1e64  ddcbf97e          	bit	7,(ix-7)
  5915  1e68  c2931d            	jp	NZ, l_playGame_00110
  5916  1e6b  dd7ef8            	ld	a,(ix-8)
  5917  1e6e  d603              	sub	a,0x03
  5918  1e70  dd7ef9            	ld	a,(ix-7)
  5919  1e73  17                	rla
  5920  1e74  3f                	ccf
  5921  1e75  1f                	rra
  5922  1e76  de80              	sbc	a,0x80
  5923  1e78  d2931d            	jp	NC, l_playGame_00110
  5924  1e7b  ddcbf47e          	bit	7,(ix-12)
  5925  1e7f  c2931d            	jp	NZ, l_playGame_00110
  5926  1e82  dd7ef3            	ld	a,(ix-13)
  5927  1e85  d603              	sub	a,0x03
  5928  1e87  dd7ef4            	ld	a,(ix-12)
  5929  1e8a  17                	rla
  5930  1e8b  3f                	ccf
  5931  1e8c  1f                	rra
  5932  1e8d  de80              	sbc	a,0x80
  5933  1e8f  d2931d            	jp	NC, l_playGame_00110
  5934  1e92  ddcbf746          	bit	0,(ix-9)
  5935  1e96  ca931d            	jp	Z, l_playGame_00110
  5936  1e99  dd7ef5            	ld	a,(ix-11)
  5937  1e9c  dd77e8            	ld	(ix-24),a
  5938  1e9f  dd7ef6            	ld	a,(ix-10)
  5939  1ea2  dd77e9            	ld	(ix-23),a
  5940  1ea5  dd7efc            	ld	a,(ix-4)
  5941  1ea8  3d                	dec	a
  5942  1ea9  ddb6fd            	or	a,(ix-3)
  5943  1eac  200a              	jr	NZ,l_playGame_00122
  5944  1eae  dd36f658          	ld	(ix-10),0x58
  5945  1eb2  af                	xor	a, a
  5946  1eb3  dd77f7            	ld	(ix-9),a
  5947  1eb6  1808              	jr	l_playGame_00123
  5948                          l_playGame_00122:
  5949  1eb8  dd36f64f          	ld	(ix-10),0x4f
  5950  1ebc  af                	xor	a, a
  5951  1ebd  dd77f7            	ld	(ix-9),a
  5952                          l_playGame_00123:
  5953  1ec0  dd7ef6            	ld	a,(ix-10)
  5954  1ec3  e1                	pop	hl
  5955  1ec4  e5                	push	hl
  5956  1ec5  77                	ld	(hl), a
  5957  1ec6  210200            	ld	hl,2
  5958  1ec9  39                	add	hl, sp
  5959  1eca  e5                	push	hl
  5960  1ecb  cd961b            	call	_drawBoard
  5961  1ece  f1                	pop	af
  5962  1ecf  210200            	ld	hl,2
  5963  1ed2  39                	add	hl, sp
  5964  1ed3  e5                	push	hl
  5965  1ed4  cd0f1c            	call	_checkWin
  5966  1ed7  f1                	pop	af
  5967  1ed8  dd75f6            	ld	(ix-10),l
  5968  1edb  dd74f7            	ld	(ix-9),h
  5969  1ede  3e03              	ld	a,0x03
  5970  1ee0  dd96fc            	sub	a,(ix-4)
  5971  1ee3  dd77fc            	ld	(ix-4),a
  5972  1ee6  9f                	sbc	a, a
  5973  1ee7  dd96fd            	sub	a,(ix-3)
  5974  1eea  dd77fd            	ld	(ix-3),a
  5975  1eed  dd34fe            	inc	(ix-2)
  5976  1ef0  c2761d            	jp	NZ,l_playGame_00114
  5977  1ef3  dd34ff            	inc	(ix-1)
  5978  1ef6  c3761d            	jp	l_playGame_00114
  5979                          l_playGame_00116:
  5980  1ef9  dd7ef7            	ld	a,(ix-9)
  5981  1efc  ddb6f6            	or	a,(ix-10)
  5982  1eff  2812              	jr	Z,l_playGame_00118
  5983  1f01  dd6ef6            	ld	l,(ix-10)
  5984  1f04  dd66f7            	ld	h,(ix-9)
  5985  1f07  e5                	push	hl
  5986  1f08  213e01            	ld	hl,___str_41
  5987  1f0b  e5                	push	hl
  5988  1f0c  cd0000            	call	_printf
  5989  1f0f  f1                	pop	af
  5990  1f10  f1                	pop	af
  5991  1f11  1808              	jr	l_playGame_00120
  5992                          l_playGame_00118:
  5993  1f13  215701            	ld	hl,___str_43
  5994  1f16  e5                	push	hl
  5995  1f17  cd0000            	call	_puts
  5996  1f1a  f1                	pop	af
  5997                          l_playGame_00120:
  5998  1f1b  ddf9              	ld	sp, ix
  5999  1f1d  dde1              	pop	ix
  6000  1f1f  c9                	ret
  6001                          	SECTION rodata_compiler
  6002                          ___str_35:
  6003  00ff  066f6d65fd68056e  	DEFM "Something already there, try again!"
              202061ef72656164  
              7920746865720000  
              2002007900616780  
              696e02            
  6004  0122  00                	DEFB 0x00
  6005                          	SECTION rodata_compiler
  6006                          ___str_36:
  6007  0123  506c020065722025  	DEFM "Player %d"
              64                
  6008  012c  00                	DEFB 0x00
  6009                          	SECTION rodata_compiler
  6010                          ___str_39:
  6011  012d  2564202564        	DEFM "%d %d"
  6012  0132  00                	DEFB 0x00
  6013                          	SECTION rodata_compiler
  6014                          ___str_40:
  6015  0133  45786900006e902e  	DEFM "Exiting..."
              2e80              
  6016  013d  00                	DEFB 0x00
  6017                          	SECTION rodata_compiler
  6018                          ___str_41:
  6019  013e  1b                	DEFB 0x1b
  6020  013f  5b83303b09304805  	DEFM "[10;10HPlayer %d wins!"
              0061790072692564  
              9077056e9521      
  6021  0155  0a                	DEFB 0x0a
  6022  0156  00                	DEFB 0x00
  6023                          	SECTION rodata_compiler
  6024                          ___str_43:
  6025  0157  1b                	DEFB 0x1b
  6026  0158  05003080310e4881  	DEFM "[10;10HIt's a draw!"
              7418738261226483  
              612c21            
  6027  016b  00                	DEFB 0x00
  6028                          	SECTION rodata_compiler
  6029                          ___str_52:
  6030  016c  0a                	DEFB 0x0a
  6031  016d  0a                	DEFB 0x0a
  6032  016e  0500697300006106  	DEFM "This game was created by Chat GPT on "
              0020773c73200500  
              6561000064070079  
              202e686105004750  
              00006f0800        
  6033  0193  0a                	DEFB 0x0a
  6034  0194  4d20792005002032  	DEFM "May 1, 2024 prompted by DJ Sures. The "
              0000340900726f12  
              7000016420040020  
              004a205304006573  
              040054686520      
  6035  01ba  0a                	DEFB 0x0a
  6036  01bb  70726f6d701b0077  	DEFM "prompt was asked to create a CPM "
              6192006173000064  
              20746f1b00726596  
              006520000043504d  
              20                
  6037  01dc  0a                	DEFB 0x0a
  6038  01dd  ff65780d2d1a0073  	DEFM "text-based tik tak toe game using VT "
              650a007469000074  
              0d6b1b006f659a00  
              616d00007573696e  
              1b0056549e        
  6039  0202  0a                	DEFB 0x0a
  6040  0203  54650000696e616c  	DEFM "Terminal commands and the NABU-LIB.H "
              1b006f6da2006e64  
              0000616e64201b00  
              6520a60042550000  
              49422e4820        
  6041  0228  0a                	DEFB 0x0a
  6042  0229  6600006520770073  	DEFM "file was pasted in."
              20700473276512ff  
              696e0f            
  6043  023c  0a                	DEFB 0x0a
  6044  023d  0a                	DEFB 0x0a
  6045  023e  0a0065730a00616e  	DEFM "Press any key to begin"
              00006b650f20741b  
              006265aa006e      
  6046  0254  00                	DEFB 0x00
  6047                          	SECTION rodata_compiler
  6048                          ___str_54:
  6049  0255  0a                	DEFB 0x0a
  6050  0256  006e74657220d36f  	DEFM "Enter row [1-3] and column [1-3]"
              77205b1b00335dae  
              006e6400006f6c75  
              6d002002002d335d  
  6051  0276  0a                	DEFB 0x0a
  6052  0277  167412ff65200d20  	DEFM "(type 0 0 to quit)"
              3008006f200a0069  
              7400              
  6053  0289  00                	DEFB 0x00
  6054                          	SECTION data_compiler
  6055                          __randomSeed:
  6056  0000  00                	DEFB +0x00
  6057                          __rxBufferReadPos:
  6058  0001  00                	DEFB +0x00
  6059                          __rxBufferWritePos:
  6060  0002  00                	DEFB +0x00
  6061                          __kbdBufferReadPos:
  6062  0003  00                	DEFB +0x00
  6063                          __kbdBufferWritePos:
  6064  0004  00                	DEFB +0x00
  6065                          __lastKeyboardIntVal:
  6066  0005  00                	DEFB +0x00
  6067                          __joyStatus:
  6068  0006  00                	DEFB +0x00
  6069  0007  00                	DEFB 0x00
  6070  0008  00                	DEFB 0x00
  6071  0009  00                	DEFB 0x00
  6072                          _vdp_cursor:
  6073  000a  00                	DEFB +0x00
  6074  000b  00                	DEFB +0x00
  6075                          __vdpReg1Val:
  6076  000c  00                	DEFB +0x00
  6077                          __autoScrollTopRow:
  6078  000d  00                	DEFB +0x00
  6079                          __autoScrollBottomRow:
  6080  000e  17                	DEFB +0x17
  6081                          __vdpInterruptEnabled:
  6082  000f  00                	DEFB +0x00
  6083                          _vdpStatusRegVal:
  6084  0010  00                	DEFB +0x00
  6085                          _vdpIsReady:
  6086  0011  00                	DEFB +0x00
  6087                          	SECTION IGNORE
  6088                          
