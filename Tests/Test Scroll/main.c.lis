C:/Users/dj/AppData/Local/Temp/zcc000041CC9EDF2.asm:
     1                          MODULE main_c
     2                          LINE 0, "main.c"
main.c:
                                
     1                          ;--------------------------------------------------------
     2                          ; File Created by SDCC : free open source ANSI-C Compiler
     3                          ; Version 4.2.0 #13081 (MINGW64)
     4                          ;--------------------------------------------------------
     5                          ; Processed by Z88DK
     6                          ;--------------------------------------------------------
     7                          
     8                          	EXTERN __divschar
     9                          	EXTERN __divschar_callee
    10                          	EXTERN __divsint
    11                          	EXTERN __divsint_callee
    12                          	EXTERN __divslong
    13                          	EXTERN __divslong_callee
    14                          	EXTERN __divslonglong
    15                          	EXTERN __divslonglong_callee
    16                          	EXTERN __divsuchar
    17                          	EXTERN __divsuchar_callee
    18                          	EXTERN __divuchar
    19                          	EXTERN __divuchar_callee
    20                          	EXTERN __divuint
    21                          	EXTERN __divuint_callee
    22                          	EXTERN __divulong
    23                          	EXTERN __divulong_callee
    24                          	EXTERN __divulonglong
    25                          	EXTERN __divulonglong_callee
    26                          	EXTERN __divuschar
    27                          	EXTERN __divuschar_callee
    28                          	EXTERN __modschar
    29                          	EXTERN __modschar_callee
    30                          	EXTERN __modsint
    31                          	EXTERN __modsint_callee
    32                          	EXTERN __modslong
    33                          	EXTERN __modslong_callee
    34                          	EXTERN __modslonglong
    35                          	EXTERN __modslonglong_callee
    36                          	EXTERN __modsuchar
    37                          	EXTERN __modsuchar_callee
    38                          	EXTERN __moduchar
    39                          	EXTERN __moduchar_callee
    40                          	EXTERN __moduint
    41                          	EXTERN __moduint_callee
    42                          	EXTERN __modulong
    43                          	EXTERN __modulong_callee
    44                          	EXTERN __modulonglong
    45                          	EXTERN __modulonglong_callee
    46                          	EXTERN __moduschar
    47                          	EXTERN __moduschar_callee
    48                          	EXTERN __mulint
    49                          	EXTERN __mulint_callee
    50                          	EXTERN __mullong
    51                          	EXTERN __mullong_callee
    52                          	EXTERN __mullonglong
    53                          	EXTERN __mullonglong_callee
    54                          	EXTERN __mulschar
    55                          	EXTERN __mulschar_callee
    56                          	EXTERN __mulsuchar
    57                          	EXTERN __mulsuchar_callee
    58                          	EXTERN __muluchar
    59                          	EXTERN __muluchar_callee
    60                          	EXTERN __muluschar
    61                          	EXTERN __muluschar_callee
    62                          	EXTERN __rlslonglong
    63                          	EXTERN __rlslonglong_callee
    64                          	EXTERN __rlulonglong
    65                          	EXTERN __rlulonglong_callee
    66                          	EXTERN __rrslonglong
    67                          	EXTERN __rrslonglong_callee
    68                          	EXTERN __rrulonglong
    69                          	EXTERN __rrulonglong_callee
    70                          	EXTERN ___mulsint2slong
    71                          	EXTERN ___mulsint2slong_callee
    72                          	EXTERN ___muluint2ulong
    73                          	EXTERN ___muluint2ulong_callee
    74                          	EXTERN ___sdcc_call_hl
    75                          	EXTERN ___sdcc_call_iy
    76                          	EXTERN ___sdcc_enter_ix
    77                          	EXTERN banked_call
    78                          	EXTERN _banked_ret
    79                          	EXTERN ___fs2schar
    80                          	EXTERN ___fs2schar_callee
    81                          	EXTERN ___fs2sint
    82                          	EXTERN ___fs2sint_callee
    83                          	EXTERN ___fs2slong
    84                          	EXTERN ___fs2slong_callee
    85                          	EXTERN ___fs2slonglong
    86                          	EXTERN ___fs2slonglong_callee
    87                          	EXTERN ___fs2uchar
    88                          	EXTERN ___fs2uchar_callee
    89                          	EXTERN ___fs2uint
    90                          	EXTERN ___fs2uint_callee
    91                          	EXTERN ___fs2ulong
    92                          	EXTERN ___fs2ulong_callee
    93                          	EXTERN ___fs2ulonglong
    94                          	EXTERN ___fs2ulonglong_callee
    95                          	EXTERN ___fsadd
    96                          	EXTERN ___fsadd_callee
    97                          	EXTERN ___fsdiv
    98                          	EXTERN ___fsdiv_callee
    99                          	EXTERN ___fseq
   100                          	EXTERN ___fseq_callee
   101                          	EXTERN ___fsgt
   102                          	EXTERN ___fsgt_callee
   103                          	EXTERN ___fslt
   104                          	EXTERN ___fslt_callee
   105                          	EXTERN ___fsmul
   106                          	EXTERN ___fsmul_callee
   107                          	EXTERN ___fsneq
   108                          	EXTERN ___fsneq_callee
   109                          	EXTERN ___fssub
   110                          	EXTERN ___fssub_callee
   111                          	EXTERN ___schar2fs
   112                          	EXTERN ___schar2fs_callee
   113                          	EXTERN ___sint2fs
   114                          	EXTERN ___sint2fs_callee
   115                          	EXTERN ___slong2fs
   116                          	EXTERN ___slong2fs_callee
   117                          	EXTERN ___slonglong2fs
   118                          	EXTERN ___slonglong2fs_callee
   119                          	EXTERN ___uchar2fs
   120                          	EXTERN ___uchar2fs_callee
   121                          	EXTERN ___uint2fs
   122                          	EXTERN ___uint2fs_callee
   123                          	EXTERN ___ulong2fs
   124                          	EXTERN ___ulong2fs_callee
   125                          	EXTERN ___ulonglong2fs
   126                          	EXTERN ___ulonglong2fs_callee
   127                          	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
   128                          	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
   129                          	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
   130                          	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
   131                          	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
   132                          	EXTERN ____sdcc_4_ldi_nosave_bc
   133                          	EXTERN ____sdcc_4_ldi_save_bc
   134                          	EXTERN ____sdcc_4_push_hlix
   135                          	EXTERN ____sdcc_4_push_mhl
   136                          	EXTERN ____sdcc_lib_setmem_hl
   137                          	EXTERN ____sdcc_ll_add_de_bc_hl
   138                          	EXTERN ____sdcc_ll_add_de_bc_hlix
   139                          	EXTERN ____sdcc_ll_add_de_hlix_bc
   140                          	EXTERN ____sdcc_ll_add_de_hlix_bcix
   141                          	EXTERN ____sdcc_ll_add_deix_bc_hl
   142                          	EXTERN ____sdcc_ll_add_deix_hlix
   143                          	EXTERN ____sdcc_ll_add_hlix_bc_deix
   144                          	EXTERN ____sdcc_ll_add_hlix_deix_bc
   145                          	EXTERN ____sdcc_ll_add_hlix_deix_bcix
   146                          	EXTERN ____sdcc_ll_asr_hlix_a
   147                          	EXTERN ____sdcc_ll_asr_mbc_a
   148                          	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
   149                          	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
   150                          	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
   151                          	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
   152                          	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
   153                          	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
   154                          	EXTERN ____sdcc_ll_copy_src_hl_dst_de
   155                          	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
   156                          	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
   157                          	EXTERN ____sdcc_ll_lsl_hlix_a
   158                          	EXTERN ____sdcc_ll_lsl_mbc_a
   159                          	EXTERN ____sdcc_ll_lsr_hlix_a
   160                          	EXTERN ____sdcc_ll_lsr_mbc_a
   161                          	EXTERN ____sdcc_ll_push_hlix
   162                          	EXTERN ____sdcc_ll_push_mhl
   163                          	EXTERN ____sdcc_ll_sub_de_bc_hl
   164                          	EXTERN ____sdcc_ll_sub_de_bc_hlix
   165                          	EXTERN ____sdcc_ll_sub_de_hlix_bc
   166                          	EXTERN ____sdcc_ll_sub_de_hlix_bcix
   167                          	EXTERN ____sdcc_ll_sub_deix_bc_hl
   168                          	EXTERN ____sdcc_ll_sub_deix_hlix
   169                          	EXTERN ____sdcc_ll_sub_hlix_bc_deix
   170                          	EXTERN ____sdcc_ll_sub_hlix_deix_bc
   171                          	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
   172                          	EXTERN ____sdcc_load_debc_deix
   173                          	EXTERN ____sdcc_load_dehl_deix
   174                          	EXTERN ____sdcc_load_debc_mhl
   175                          	EXTERN ____sdcc_load_hlde_mhl
   176                          	EXTERN ____sdcc_store_dehl_bcix
   177                          	EXTERN ____sdcc_store_debc_hlix
   178                          	EXTERN ____sdcc_store_debc_mhl
   179                          	EXTERN ____sdcc_cpu_pop_ei
   180                          	EXTERN ____sdcc_cpu_pop_ei_jp
   181                          	EXTERN ____sdcc_cpu_push_di
   182                          	EXTERN ____sdcc_outi
   183                          	EXTERN ____sdcc_outi_128
   184                          	EXTERN ____sdcc_outi_256
   185                          	EXTERN ____sdcc_ldi
   186                          	EXTERN ____sdcc_ldi_128
   187                          	EXTERN ____sdcc_ldi_256
   188                          	EXTERN ____sdcc_4_copy_srcd_hlix_dst_deix
   189                          	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_deix
   190                          	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_deix
   191                          	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_deix
   192                          	EXTERN ____sdcc_4_or_src_dehl_dst_bcix
   193                          	EXTERN ____sdcc_4_xor_src_dehl_dst_bcix
   194                          	EXTERN ____sdcc_4_and_src_dehl_dst_bcix
   195                          	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_debc
   196                          	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_debc
   197                          	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_debc
   198                          	EXTERN ____sdcc_4_cpl_src_mhl_dst_debc
   199                          	EXTERN ____sdcc_4_xor_src_debc_mhl_dst_debc
   200                          	EXTERN ____sdcc_4_or_src_debc_mhl_dst_debc
   201                          	EXTERN ____sdcc_4_and_src_debc_mhl_dst_debc
   202                          	EXTERN ____sdcc_4_and_src_debc_hlix_dst_debc
   203                          	EXTERN ____sdcc_4_or_src_debc_hlix_dst_debc
   204                          	EXTERN ____sdcc_4_xor_src_debc_hlix_dst_debc
   205                          
   206                          ;--------------------------------------------------------
   207                          ; Public variables in this module
   208                          ;--------------------------------------------------------
   209                          	GLOBAL _main
   210                          	GLOBAL _vdp_scrollTextDown
   211                          	GLOBAL _vdp_refreshViewPort
   212                          	GLOBAL _waitVdpISR
   213                          	GLOBAL _isrKeyboard
   214                          	GLOBAL _vdpIsReady
   215                          	GLOBAL _vdpStatusRegVal
   216                          	GLOBAL __vdpInterruptEnabled
   217                          	GLOBAL __autoScrollBottomRow
   218                          	GLOBAL __autoScrollTopRow
   219                          	GLOBAL __vdpReg1Val
   220                          	GLOBAL _vdp_cursor
   221                          	GLOBAL __joyStatus
   222                          	GLOBAL __lastKeyboardIntVal
   223                          	GLOBAL __kbdBufferWritePos
   224                          	GLOBAL __kbdBufferReadPos
   225                          	GLOBAL __randomSeed
   226                          	GLOBAL __vdpSplitThirds
   227                          	GLOBAL __autoScroll
   228                          	GLOBAL __vdpMode
   229                          	GLOBAL __vdpTextBufferSize
   230                          	GLOBAL __vdpCursorMaxXFull
   231                          	GLOBAL __vdpCursorMaxX
   232                          	GLOBAL __vdpPatternGeneratorTableAddr
   233                          	GLOBAL __vdpColorTableAddr
   234                          	GLOBAL __vdpPatternNameTableAddr
   235                          	GLOBAL __vdpSpriteSizeSelected
   236                          	GLOBAL __vdpSpriteGeneratorTableAddr
   237                          	GLOBAL __vdpSpriteAttributeTableAddr
   238                          	GLOBAL __vdp_ISR
   239                          	GLOBAL __vdp_textBuffer
   240                          	GLOBAL __kbdBuffer
   241                          	GLOBAL _ASCII
   242                          	GLOBAL __NOTES_FINE
   243                          	GLOBAL __NOTES_COURSE
   244                          	GLOBAL __vdpCursorMaxYFull
   245                          	GLOBAL __vdpCursorMaxY
   246                          	GLOBAL _initNABULib
   247                          	GLOBAL _initNABULIBAudio
   248                          	GLOBAL _nop
   249                          	GLOBAL _NABU_DisableInterrupts
   250                          	GLOBAL _NABU_EnableInterrupts
   251                          	GLOBAL _RightShift
   252                          	GLOBAL _ayWrite
   253                          	GLOBAL _ayRead
   254                          	GLOBAL _playNoteDelay
   255                          	GLOBAL _isKeyPressed
   256                          	GLOBAL _getChar
   257                          	GLOBAL _getJoyStatus
   258                          	GLOBAL _readLine
   259                          	GLOBAL _vdp_setRegister
   260                          	GLOBAL _vdp_setWriteAddress
   261                          	GLOBAL _vdp_setReadAddress
   262                          	GLOBAL _vdp_enableVDPReadyInt
   263                          	GLOBAL _vdp_waitVDPReadyInt
   264                          	GLOBAL _vdp_disableVDPReadyInt
   265                          	GLOBAL _vdp_addISR
   266                          	GLOBAL _vdp_removeISR
   267                          	GLOBAL _vdp_init
   268                          	GLOBAL _vdp_clearVRAM
   269                          	GLOBAL _vdp_initMSXMode
   270                          	GLOBAL _vdp_initTextMode
   271                          	GLOBAL _vdp_initG2Mode
   272                          	GLOBAL _vdp_initMultiColorMode
   273                          	GLOBAL _vdp_clearScreen
   274                          	GLOBAL _vdp_fillScreen
   275                          	GLOBAL _vdp_clearRows
   276                          	GLOBAL _vdp_loadASCIIFont
   277                          	GLOBAL _vdp_loadASCIIFontWithInverse
   278                          	GLOBAL _vdp_putPattern
   279                          	GLOBAL _vdp_loadPatternTable
   280                          	GLOBAL _vdp_loadColorTable
   281                          	GLOBAL _vdp_colorizePattern
   282                          	GLOBAL _vdp_plotHires
   283                          	GLOBAL _vdp_plotColor
   284                          	GLOBAL _vdp_disableSprite
   285                          	GLOBAL _vdp_loadSpritePatternNameTable
   286                          	GLOBAL _vdp_spriteInit
   287                          	GLOBAL _vdp_setSpriteColor
   288                          	GLOBAL _vdp_setSpritePosition
   289                          	GLOBAL _vdp_setSpritePositionAndColor
   290                          	GLOBAL _vdp_getSpritePosition
   291                          	GLOBAL _vdp_print
   292                          	GLOBAL _vdp_printColorized
   293                          	GLOBAL _vdp_printPart
   294                          	GLOBAL _vdp_newLine
   295                          	GLOBAL _vdp_setBackDropColor
   296                          	GLOBAL _vdp_setCursor2
   297                          	GLOBAL _vdp_setCursor
   298                          	GLOBAL _vdp_setTextColor
   299                          	GLOBAL _vdp_write
   300                          	GLOBAL _vdp_writeCharAtLocation
   301                          	GLOBAL _vdp_getCharAtLocationVRAM
   302                          	GLOBAL _vdp_getCharAtLocationBuf
   303                          	GLOBAL _vdp_setCharAtLocationBuf
   304                          	GLOBAL _vdp_scrollTextUp
   305                          	GLOBAL _vdp_writeUInt8ToBinary
   306                          	GLOBAL _vdp_writeUInt16ToBinary
   307                          	GLOBAL _vdp_writeUInt32ToBinary
   308                          ;--------------------------------------------------------
   309                          ; Externals used
   310                          ;--------------------------------------------------------
   311                          	GLOBAL _fputc_cons_ansi
   312                          	GLOBAL _fputc_cons_generic
   313                          	GLOBAL _fputc_cons_native
   314                          	GLOBAL _set_fputc_cons
   315                          	GLOBAL _perror
   316                          	GLOBAL _printk
   317                          	GLOBAL _getk_inkey
   318                          	GLOBAL _getk
   319                          	GLOBAL _remove
   320                          	GLOBAL _rename
   321                          	GLOBAL _fdgetpos
   322                          	GLOBAL _fdtell
   323                          	GLOBAL _fabandon
   324                          	GLOBAL _puts_cons
   325                          	GLOBAL _fgets_cons
   326                          	GLOBAL _fputc_cons
   327                          	GLOBAL _fgetc_cons_inkey
   328                          	GLOBAL _fgetc_cons
   329                          	GLOBAL _fchkstd
   330                          	GLOBAL _getarg
   331                          	GLOBAL _vsscanf
   332                          	GLOBAL _vfscanf
   333                          	GLOBAL _sscanf
   334                          	GLOBAL _fscanf
   335                          	GLOBAL _scanf
   336                          	GLOBAL _printn
   337                          	GLOBAL _vsnprintf
   338                          	GLOBAL _vfprintf
   339                          	GLOBAL _snprintf
   340                          	GLOBAL _sprintf
   341                          	GLOBAL _fprintf
   342                          	GLOBAL _printf
   343                          	GLOBAL _gets
   344                          	GLOBAL _fwrite
   345                          	GLOBAL _fread
   346                          	GLOBAL _fseek
   347                          	GLOBAL _fgetpos
   348                          	GLOBAL _ftell
   349                          	GLOBAL _puts
   350                          	GLOBAL _ferror
   351                          	GLOBAL _feof
   352                          	GLOBAL _ungetc
   353                          	GLOBAL _fgetc
   354                          	GLOBAL _fputc_callee
   355                          	GLOBAL _fputs_callee
   356                          	GLOBAL _fputc
   357                          	GLOBAL _fputs
   358                          	GLOBAL _fgets
   359                          	GLOBAL _closeall
   360                          	GLOBAL _fflush
   361                          	GLOBAL _fclose
   362                          	GLOBAL _funopen
   363                          	GLOBAL _fmemopen
   364                          	GLOBAL __freopen1
   365                          	GLOBAL _fdopen
   366                          	GLOBAL _freopen
   367                          	GLOBAL _fopen
   368                          	GLOBAL _fileno
   369                          	GLOBAL _fopen_zsock
   370                          	GLOBAL _rnd_erase
   371                          	GLOBAL _rnd_saveblock
   372                          	GLOBAL _rnd_loadblock
   373                          	GLOBAL _rmdir
   374                          	GLOBAL _getwd
   375                          	GLOBAL _chdir
   376                          	GLOBAL _getcwd
   377                          	GLOBAL _writebyte
   378                          	GLOBAL _readbyte
   379                          	GLOBAL _lseek
   380                          	GLOBAL _write
   381                          	GLOBAL _read
   382                          	GLOBAL _close
   383                          	GLOBAL _creat
   384                          	GLOBAL _open
   385                          	GLOBAL _unbcd
   386                          	GLOBAL _wcmatch
   387                          	GLOBAL _extract_bits_callee
   388                          	GLOBAL _extract_bits
   389                          	GLOBAL _msleep
   390                          	GLOBAL _sleep
   391                          	GLOBAL _t_delay
   392                          	GLOBAL _wpeek
   393                          	GLOBAL _bpeek
   394                          	GLOBAL _wpoke_callee
   395                          	GLOBAL _wpoke
   396                          	GLOBAL _bpoke_callee
   397                          	GLOBAL _bpoke
   398                          	GLOBAL _swapendian
   399                          	GLOBAL _outp_callee
   400                          	GLOBAL _outp
   401                          	GLOBAL _inp
   402                          	GLOBAL _isqrt
   403                          	GLOBAL _labs
   404                          	GLOBAL _abs
   405                          	GLOBAL __ldivu__callee
   406                          	GLOBAL __ldivu_
   407                          	GLOBAL __ldiv__callee
   408                          	GLOBAL __ldiv_
   409                          	GLOBAL __divu__callee
   410                          	GLOBAL __divu_
   411                          	GLOBAL __div__callee
   412                          	GLOBAL __div_
   413                          	GLOBAL _qsort_sdcc_callee
   414                          	GLOBAL _qsort_sdcc
   415                          	GLOBAL _qsort_sccz80_callee
   416                          	GLOBAL _qsort_sccz80
   417                          	GLOBAL _l_qsort_callee
   418                          	GLOBAL _l_qsort
   419                          	GLOBAL _l_bsearch_callee
   420                          	GLOBAL _l_bsearch
   421                          	GLOBAL _getopt
   422                          	GLOBAL _unsetenv
   423                          	GLOBAL _setenv
   424                          	GLOBAL _getenv_r
   425                          	GLOBAL _getenv
   426                          	GLOBAL _atexit
   427                          	GLOBAL _exit
   428                          	GLOBAL _HeapInfo_callee
   429                          	GLOBAL _HeapInfo
   430                          	GLOBAL _HeapRealloc_callee
   431                          	GLOBAL _HeapRealloc
   432                          	GLOBAL _HeapAlloc_callee
   433                          	GLOBAL _HeapAlloc
   434                          	GLOBAL _HeapFree_callee
   435                          	GLOBAL _HeapFree
   436                          	GLOBAL _HeapCalloc_callee
   437                          	GLOBAL _HeapCalloc
   438                          	GLOBAL _HeapSbrk_callee
   439                          	GLOBAL _HeapSbrk
   440                          	GLOBAL _HeapCreate
   441                          	GLOBAL _mallinfo_callee
   442                          	GLOBAL _mallinfo
   443                          	GLOBAL _realloc_callee
   444                          	GLOBAL _realloc
   445                          	GLOBAL _malloc
   446                          	GLOBAL _free
   447                          	GLOBAL _calloc_callee
   448                          	GLOBAL _calloc
   449                          	GLOBAL _sbrk_callee
   450                          	GLOBAL _sbrk
   451                          	GLOBAL _mallinit
   452                          	GLOBAL _srand
   453                          	GLOBAL _rand
   454                          	GLOBAL _ulltoa_callee
   455                          	GLOBAL _ulltoa
   456                          	GLOBAL _strtoull_callee
   457                          	GLOBAL _strtoull
   458                          	GLOBAL _strtoll_callee
   459                          	GLOBAL _strtoll
   460                          	GLOBAL _lltoa_callee
   461                          	GLOBAL _lltoa
   462                          	GLOBAL _atoll_callee
   463                          	GLOBAL _atoll
   464                          	GLOBAL _utoa_callee
   465                          	GLOBAL _utoa
   466                          	GLOBAL _ultoa_callee
   467                          	GLOBAL _ultoa
   468                          	GLOBAL _strtoul_callee
   469                          	GLOBAL _strtoul
   470                          	GLOBAL _strtol_callee
   471                          	GLOBAL _strtol
   472                          	GLOBAL _ltoa_callee
   473                          	GLOBAL _ltoa
   474                          	GLOBAL _itoa_callee
   475                          	GLOBAL _itoa
   476                          	GLOBAL _atol
   477                          	GLOBAL _atoi
   478                          	GLOBAL __sgoioblk_end
   479                          	GLOBAL __sgoioblk
   480                          	GLOBAL __FOPEN_MAX
   481                          	GLOBAL __RND_BLOCKSIZE
   482                          	GLOBAL _optreset
   483                          	GLOBAL _optopt
   484                          	GLOBAL _optind
   485                          	GLOBAL _opterr
   486                          	GLOBAL _optarg
   487                          ;--------------------------------------------------------
   488                          ; special function registers
   489                          ;--------------------------------------------------------
   490                          defc _IO_VDPDATA	=	0x00a0
   491                          defc _IO_VDPLATCH	=	0x00a1
   492                          defc _IO_AYDATA	=	0x0040
   493                          defc _IO_AYLATCH	=	0x0041
   494                          defc _IO_HCCA	=	0x0080
   495                          defc _IO_KEYBOARD	=	0x0090
   496                          defc _IO_KEYBOARD_STATUS	=	0x0091
   497                          defc _IO_CONTROL	=	0x0000
   498                          ;--------------------------------------------------------
   499                          ; ram data
   500                          ;--------------------------------------------------------
   501                          	SECTION bss_compiler
   502                          __kbdBuffer:
   503  0000  0000000000000000  	DEFS 256
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
   504                          __vdp_textBuffer:
   505  0100  0000000000000000  	DEFS 960
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
   506                          __vdp_ISR:
   507  04c0  0000              	DEFS 2
   508                          __vdpSpriteAttributeTableAddr:
   509  04c2  0000              	DEFS 2
   510                          __vdpSpriteGeneratorTableAddr:
   511  04c4  0000              	DEFS 2
   512                          __vdpSpriteSizeSelected:
   513  04c6  00                	DEFS 1
   514                          __vdpPatternNameTableAddr:
   515  04c7  0000              	DEFS 2
   516                          __vdpColorTableAddr:
   517  04c9  0000              	DEFS 2
   518                          __vdpPatternGeneratorTableAddr:
   519  04cb  0000              	DEFS 2
   520                          __vdpCursorMaxX:
   521  04cd  00                	DEFS 1
   522                          __vdpCursorMaxXFull:
   523  04ce  00                	DEFS 1
   524                          __vdpTextBufferSize:
   525  04cf  0000              	DEFS 2
   526                          __vdpMode:
   527  04d1  00                	DEFS 1
   528                          __autoScroll:
   529  04d2  00                	DEFS 1
   530                          __vdpSplitThirds:
   531  04d3  00                	DEFS 1
   532                          ;--------------------------------------------------------
   533                          ; ram data
   534                          ;--------------------------------------------------------
   535                          
   536                          IF 0
   537                          
   538                          ; .area _INITIALIZED removed by z88dk
   539                          
   540                          __randomSeed:
   541                          	DEFS 1
   542                          __kbdBufferReadPos:
   543                          	DEFS 1
   544                          __kbdBufferWritePos:
   545                          	DEFS 1
   546                          __lastKeyboardIntVal:
   547                          	DEFS 1
   548                          __joyStatus:
   549                          	DEFS 4
   550                          _vdp_cursor:
   551                          	DEFS 2
   552                          __vdpReg1Val:
   553                          	DEFS 1
   554                          __autoScrollTopRow:
   555                          	DEFS 1
   556                          __autoScrollBottomRow:
   557                          	DEFS 1
   558                          __vdpInterruptEnabled:
   559                          	DEFS 1
   560                          _vdpStatusRegVal:
   561                          	DEFS 1
   562                          _vdpIsReady:
   563                          	DEFS 1
   564                          
   565                          ENDIF
   566                          
   567                          ;--------------------------------------------------------
   568                          ; absolute external ram data
   569                          ;--------------------------------------------------------
   570                          	SECTION IGNORE
   571                          ;--------------------------------------------------------
   572                          ; global & static initialisations
   573                          ;--------------------------------------------------------
   574                          	SECTION code_crt_init
   575                          ;--------------------------------------------------------
   576                          ; Home
   577                          ;--------------------------------------------------------
   578                          	SECTION IGNORE
   579                          ;--------------------------------------------------------
   580                          ; code
   581                          ;--------------------------------------------------------
   582                          	SECTION code_compiler
   583                          ;	---------------------------------
   584                          ; Function initNABULib
   585                          ; ---------------------------------
   586                          _initNABULib:
   587  0000  3e00              	ld	a,0x03
   588  0002  d300              	out	(_IO_CONTROL), a
   589  0004  cd0000            	call	_NABU_DisableInterrupts
   590  0007  f5                	push	af
   591  0008  ed5f              	ld	a, r
   592  000a  320000            	ld	(__randomSeed), a
   593  000d  f1                	pop	af
   594  000e  3a0000            	ld	a, (__randomSeed+0)
   595  0011  6f                	ld	l, a
   596  0012  2600              	ld	h,0x00
   597  0014  cd0000            	call	_srand
   598  0017  ed5e              	IM	2
   599  0019  3e00              	ld	a, 0xff
   600  001b  ed47              	ld	i, a
   601  001d  210000            	ld	hl, _isrKeyboard
   602  0020  220000            	ld	(0xff00 + 4), hl
   603  0023  110000            	ld	de,0x200e
   604  0026  d5                	push	de
   605  0027  cd0000            	call	_ayWrite
   606  002a  f1                	pop	af
   607  002b  cd0000            	call	_NABU_EnableInterrupts
   608  002e  c30000            	jp	_initNABULIBAudio
   609                          	SECTION rodata_compiler
   610                          __vdpCursorMaxY:
   611  0000  00                	DEFB +0x17
   612                          __vdpCursorMaxYFull:
   613  0001  00                	DEFB +0x18
   614                          __NOTES_COURSE:
   615  0002  00                	DEFB +0x0d
   616  0003  00                	DEFB +0x0c
   617  0004  00                	DEFB +0x0b
   618  0005  00                	DEFB +0x0b
   619  0006  00                	DEFB +0x0a
   620  0007  00                	DEFB +0x0a
   621  0008  00                	DEFB +0x09
   622  0009  00                	DEFB +0x08
   623  000a  00                	DEFB +0x08
   624  000b  00                	DEFB +0x07
   625  000c  00                	DEFB +0x07
   626  000d  00                	DEFB +0x07
   627  000e  00                	DEFB +0x06
   628  000f  00                	DEFB +0x06
   629  0010  05                	DEFB +0x05
   630  0011  05                	DEFB +0x05
   631  0012  05                	DEFB +0x05
   632  0013  05                	DEFB +0x05
   633  0014  04                	DEFB +0x04
   634  0015  04                	DEFB +0x04
   635  0016  04                	DEFB +0x04
   636  0017  03                	DEFB +0x03
   637  0018  03                	DEFB +0x03
   638  0019  03                	DEFB +0x03
   639  001a  03                	DEFB +0x03
   640  001b  03                	DEFB +0x03
   641  001c  02                	DEFB +0x02
   642  001d  02                	DEFB +0x02
   643  001e  02                	DEFB +0x02
   644  001f  02                	DEFB +0x02
   645  0020  02                	DEFB +0x02
   646  0021  02                	DEFB +0x02
   647  0022  02                	DEFB +0x02
   648  0023  01                	DEFB +0x01
   649  0024  01                	DEFB +0x01
   650  0025  01                	DEFB +0x01
   651  0026  01                	DEFB +0x01
   652  0027  01                	DEFB +0x01
   653  0028  01                	DEFB +0x01
   654  0029  01                	DEFB +0x01
   655  002a  01                	DEFB +0x01
   656  002b  01                	DEFB +0x01
   657  002c  01                	DEFB +0x01
   658  002d  01                	DEFB +0x01
   659  002e  01                	DEFB +0x01
   660  002f  00                	DEFB +0x00
   661  0030  00                	DEFB +0x00
   662  0031  00                	DEFB +0x00
   663  0032  00                	DEFB +0x00
   664  0033  00                	DEFB +0x00
   665  0034  00                	DEFB +0x00
   666  0035  00                	DEFB +0x00
   667  0036  00                	DEFB +0x00
   668  0037  00                	DEFB +0x00
   669  0038  00                	DEFB +0x00
   670  0039  00                	DEFB +0x00
   671  003a  00                	DEFB +0x00
   672  003b  00                	DEFB +0x00
   673  003c  00                	DEFB +0x00
   674  003d  00                	DEFB +0x00
   675  003e  00                	DEFB +0x00
   676  003f  00                	DEFB +0x00
   677  0040  00                	DEFB +0x00
   678  0041  00                	DEFB +0x00
   679  0042  00                	DEFB +0x00
   680  0043  00                	DEFB +0x00
   681  0044  00                	DEFB +0x00
   682  0045  00                	DEFB +0x00
   683  0046  00                	DEFB +0x00
   684  0047  00                	DEFB +0x00
   685  0048  00                	DEFB +0x00
   686  0049  00                	DEFB +0x00
   687                          __NOTES_FINE:
   688  004a  00                	DEFB +0x5c
   689  004b  00                	DEFB +0x9c
   690  004c  00                	DEFB +0xe7
   691  004d  00                	DEFB +0x3c
   692  004e  00                	DEFB +0x9b
   693  004f  00                	DEFB +0x02
   694  0050  00                	DEFB +0x72
   695  0051  00                	DEFB +0xeb
   696  0052  00                	DEFB +0x6a
   697  0053  00                	DEFB +0xf2
   698  0054  00                	DEFB +0x7f
   699  0055  00                	DEFB +0x14
   700  0056  00                	DEFB +0xae
   701  0057  00                	DEFB +0x4e
   702  0058  00                	DEFB +0xf3
   703  0059  00                	DEFB +0x9e
   704  005a  00                	DEFB +0x4d
   705  005b  00                	DEFB +0x01
   706  005c  00                	DEFB +0xb9
   707  005d  00                	DEFB +0x75
   708  005e  00                	DEFB +0x35
   709  005f  00                	DEFB +0xf9
   710  0060  00                	DEFB +0xbf
   711  0061  00                	DEFB +0x8a
   712  0062  00                	DEFB +0x57
   713  0063  00                	DEFB +0x27
   714  0064  00                	DEFB +0xf9
   715  0065  00                	DEFB +0xcf
   716  0066  00                	DEFB +0xa6
   717  0067  00                	DEFB +0x80
   718  0068  00                	DEFB +0x5c
   719  0069  00                	DEFB +0x3a
   720  006a  00                	DEFB +0x1a
   721  006b  00                	DEFB +0xfc
   722  006c  00                	DEFB +0xdf
   723  006d  00                	DEFB +0xc5
   724  006e  00                	DEFB +0xab
   725  006f  00                	DEFB +0x93
   726  0070  00                	DEFB +0x7c
   727  0071  00                	DEFB +0x67
   728  0072  00                	DEFB +0x53
   729  0073  00                	DEFB +0x40
   730  0074  00                	DEFB +0x2e
   731  0075  00                	DEFB +0x1d
   732  0076  00                	DEFB +0x0d
   733  0077  00                	DEFB +0xfe
   734  0078  00                	DEFB +0xef
   735  0079  00                	DEFB +0xe2
   736  007a  00                	DEFB +0xd5
   737  007b  00                	DEFB +0xc9
   738  007c  00                	DEFB +0xbe
   739  007d  00                	DEFB +0xb3
   740  007e  00                	DEFB +0xa9
   741  007f  00                	DEFB +0xa0
   742  0080  00                	DEFB +0x97
   743  0081  00                	DEFB +0x8e
   744  0082  00                	DEFB +0x86
   745  0083  00                	DEFB +0x7f
   746  0084  00                	DEFB +0x77
   747  0085  00                	DEFB +0x71
   748  0086  00                	DEFB +0x6a
   749  0087  00                	DEFB +0x64
   750  0088  00                	DEFB +0x5f
   751  0089  00                	DEFB +0x59
   752  008a  00                	DEFB +0x54
   753  008b  00                	DEFB +0x50
   754  008c  00                	DEFB +0x4b
   755  008d  00                	DEFB +0x47
   756  008e  00                	DEFB +0x43
   757  008f  00                	DEFB +0x3f
   758  0090  00                	DEFB +0x3b
   759  0091  00                	DEFB +0x38
   760                          	SECTION code_compiler
   761                          ;	---------------------------------
   762                          ; Function initNABULIBAudio
   763                          ; ---------------------------------
   764                          _initNABULIBAudio:
   765  0031  00                	xor	a, a
   766  0032  00                	ld	d,a
   767  0033  0006              	ld	e,0x06
   768  0035  00                	push	de
   769  0036  008e01            	call	_ayWrite
   770  0039  00                	pop	af
   771  003a  00                	xor	a, a
   772  003b  00                	ld	d,a
   773  003c  0008              	ld	e,0x08
   774  003e  00                	push	de
   775  003f  008e01            	call	_ayWrite
   776  0042  00                	pop	af
   777  0043  00                	xor	a, a
   778  0044  00                	ld	d,a
   779  0045  0009              	ld	e,0x09
   780  0047  00                	push	de
   781  0048  008e01            	call	_ayWrite
   782  004b  9c                	pop	af
   783  004c  e7                	xor	a, a
   784  004d  3c                	ld	d,a
   785  004e  9b0a              	ld	e,0x0a
   786  0050  72                	push	de
   787  0051  eb8e01            	call	_ayWrite
   788  0054  7f                	pop	af
   789  0055  140778            	ld	de,0x7807
   790  0058  f3                	push	de
   791  0059  9e8e01            	call	_ayWrite
   792  005c  b9                	pop	af
   793  005d  75                	xor	a, a
   794  005e  35                	ld	d,a
   795  005f  f90b              	ld	e,0x0b
   796  0061  8a                	push	de
   797  0062  578e01            	call	_ayWrite
   798  0065  cf                	pop	af
   799  0066  a6                	xor	a, a
   800  0067  80                	ld	d,a
   801  0068  5c0c              	ld	e,0x0c
   802  006a  1a                	push	de
   803  006b  fc8e01            	call	_ayWrite
   804  006e  ab                	pop	af
   805  006f  93                	xor	a, a
   806  0070  7c                	ld	d,a
   807  0071  670d              	ld	e,0x0d
   808  0073  40                	push	de
   809  0074  2e8e01            	call	_ayWrite
   810  0077  fe                	pop	af
   811  0078  ef                	ret
   812                          	SECTION code_compiler
   813                          ;	---------------------------------
   814                          ; Function nop
   815                          ; ---------------------------------
   816                          _nop:
   817  0079  e2                	NOP
   818  007a  d5                	ret
   819                          	SECTION code_compiler
   820                          ;	---------------------------------
   821                          ; Function NABU_DisableInterrupts
   822                          ; ---------------------------------
   823                          _NABU_DisableInterrupts:
   824  007b  c9                	di
   825  007c  be                	ret
   826                          	SECTION code_compiler
   827                          ;	---------------------------------
   828                          ; Function NABU_EnableInterrupts
   829                          ; ---------------------------------
   830                          _NABU_EnableInterrupts:
   831  007d  b3                	ei
   832  007e  a9                	ret
   833                          	SECTION code_compiler
   834                          ;	---------------------------------
   835                          ; Function RightShift
   836                          ; ---------------------------------
   837                          _RightShift:
   838  007f  a097              	push	ix
   839  0081  8e860000          	ld	ix,0
   840  0085  716a              	add	ix,sp
   841  0087  64                	push	af
   842  0088  5f                	push	af
   843  0089  595406            	ld	c,(ix+6)
   844  008c  4b4707            	ld	b,(ix+7)
   845  008f  3f                	dec	bc
   846  0090  3b3800            	ld	l,(ix+4)
   847  0093  dd6600            	ld	h,(ix+5)
   848  0096  09                	add	hl, bc
   849  0097  eb                	ex	de, hl
   850  0098  dd4e00            	ld	c,(ix+8)
   851  009b  0600              	ld	b,0x00
   852  009d  7b                	ld	a, e
   853  009e  91                	sub	a, c
   854  009f  dd7700            	ld	(ix-2),a
   855  00a2  7a                	ld	a, d
   856  00a3  98                	sbc	a, b
   857  00a4  dd7700            	ld	(ix-1),a
   858  00a7  dd7e00            	ld	a,(ix+4)
   859  00aa  c600              	add	a,0xff
   860  00ac  dd7700            	ld	(ix-4),a
   861  00af  dd7e00            	ld	a,(ix+5)
   862  00b2  ce00              	adc	a,0xff
   863  00b4  dd7700            	ld	(ix-3),a
   864                          l_RightShift_00101:
   865  00b7  dd7e00            	ld	a,(ix-2)
   866  00ba  dd9600            	sub	a,(ix-4)
   867  00bd  2000              	jr	NZ,l_RightShift_00131
   868  00bf  dd7e00            	ld	a,(ix-1)
   869  00c2  dd9600            	sub	a,(ix-3)
   870  00c5  2800              	jr	Z,l_RightShift_00103
   871                          l_RightShift_00131:
   872  00c7  dd6e00            	ld	l,(ix-2)
   873  00ca  dd6600            	ld	h,(ix-1)
   874  00cd  7e                	ld	a, (hl)
   875  00ce  12                	ld	(de), a
   876  00cf  1b                	dec	de
   877  00d0  dd6e00            	ld	l,(ix-2)
   878  00d3  dd6600            	ld	h,(ix-1)
   879  00d6  2b                	dec	hl
   880  00d7  dd7500            	ld	(ix-2),l
   881  00da  dd7400            	ld	(ix-1),h
   882  00dd  1800              	jr	l_RightShift_00101
   883                          l_RightShift_00103:
   884  00df  0b                	dec	bc
   885  00e0  dd6e00            	ld	l,(ix+4)
   886  00e3  dd6600            	ld	h,(ix+5)
   887  00e6  09                	add	hl, bc
   888                          l_RightShift_00104:
   889  00e7  7d                	ld	a, l
   890  00e8  dd9600            	sub	a,(ix-4)
   891  00eb  2000              	jr	NZ,l_RightShift_00132
   892  00ed  7c                	ld	a, h
   893  00ee  dd9600            	sub	a,(ix-3)
   894  00f1  2800              	jr	Z,l_RightShift_00107
   895                          l_RightShift_00132:
   896  00f3  3600              	ld	(hl),0x20
   897  00f5  2b                	dec	hl
   898  00f6  1800              	jr	l_RightShift_00104
   899                          l_RightShift_00107:
   900  00f8  ddf9              	ld	sp, ix
   901  00fa  dde1              	pop	ix
   902  00fc  c9                	ret
   903                          	SECTION code_compiler
   904                          ;	---------------------------------
   905                          ; Function isrKeyboard
   906                          ; ---------------------------------
   907                          _isrKeyboard:
   908  00fd  c5                	push	bc
   909  00fe  d5                	push	de
   910  00ff  e5                	push	hl
   911  0100  f5                	push	af
   912  0101  fde5              	push	iy
   913  0103  fd210000          	ld	iy, 0
   914  0107  db00              	in	a, (_IO_KEYBOARD)
   915  0109  4f                	ld	c,a
   916  010a  d600              	sub	a,0x80
   917  010c  3800              	jr	C,l_isrKeyboard_00111
   918  010e  3e00              	ld	a,0x83
   919  0110  91                	sub	a, c
   920  0111  3800              	jr	C,l_isrKeyboard_00111
   921  0113  fd210000          	ld	iy,__lastKeyboardIntVal
   922  0117  fd7100            	ld	(iy+0),c
   923  011a  1800              	jr	l_isrKeyboard_00112
   924                          l_isrKeyboard_00111:
   925  011c  79                	ld	a, c
   926  011d  d600              	sub	a,0x90
   927  011f  3800              	jr	C,l_isrKeyboard_00107
   928  0121  3e00              	ld	a,0x95
   929  0123  91                	sub	a, c
   930  0124  3000              	jr	NC,l_isrKeyboard_00112
   931                          l_isrKeyboard_00107:
   932  0126  3a0000            	ld	a, (__lastKeyboardIntVal+0)
   933  0129  fe00              	cp	a,0x80
   934  012b  2800              	jr	Z,l_isrKeyboard_00101
   935  012d  fe00              	cp	a,0x81
   936  012f  2800              	jr	Z,l_isrKeyboard_00102
   937  0131  fe00              	cp	a,0x82
   938  0133  2800              	jr	Z,l_isrKeyboard_00103
   939  0135  d600              	sub	a,0x83
   940  0137  2800              	jr	Z,l_isrKeyboard_00104
   941  0139  1800              	jr	l_isrKeyboard_00105
   942                          l_isrKeyboard_00101:
   943  013b  fd210000          	ld	iy,__lastKeyboardIntVal
   944  013f  fd360000          	ld	(iy+0),0x00
   945  0143  210000            	ld	hl,__joyStatus
   946  0146  71                	ld	(hl), c
   947  0147  1800              	jr	l_isrKeyboard_00112
   948                          l_isrKeyboard_00102:
   949  0149  fd210000          	ld	iy,__lastKeyboardIntVal
   950  014d  fd360000          	ld	(iy+0),0x00
   951  0151  210000            	ld	hl, +(__joyStatus + 1)
   952  0154  71                	ld	(hl), c
   953  0155  1800              	jr	l_isrKeyboard_00112
   954                          l_isrKeyboard_00103:
   955  0157  fd210000          	ld	iy,__lastKeyboardIntVal
   956  015b  fd360000          	ld	(iy+0),0x00
   957  015f  210000            	ld	hl, +(__joyStatus + 2)
   958  0162  71                	ld	(hl), c
   959  0163  1800              	jr	l_isrKeyboard_00112
   960                          l_isrKeyboard_00104:
   961  0165  fd210000          	ld	iy,__lastKeyboardIntVal
   962  0169  fd360000          	ld	(iy+0),0x00
   963  016d  210000            	ld	hl, +(__joyStatus + 3)
   964  0170  71                	ld	(hl), c
   965  0171  1800              	jr	l_isrKeyboard_00112
   966                          l_isrKeyboard_00105:
   967  0173  210000            	ld	hl,__kbdBuffer+0
   968  0176  ed5b0000          	ld	de, (__kbdBufferWritePos)
   969  017a  1600              	ld	d,0x00
   970  017c  19                	add	hl, de
   971  017d  71                	ld	(hl), c
   972  017e  3a0000            	ld	a, (__kbdBufferWritePos+0)
   973  0181  3c                	inc	a
   974  0182  320000            	ld	(__kbdBufferWritePos+0), a
   975                          l_isrKeyboard_00112:
   976  0185  fde1              	pop	iy
   977  0187  f1                	pop	af
   978  0188  e1                	pop	hl
   979  0189  d1                	pop	de
   980  018a  c1                	pop	bc
   981  018b  fb                	ei
   982  018c  ed4d              	reti
   983                          ;	---------------------------------
   984                          ; Function ayWrite
   985                          ; ---------------------------------
   986                          _ayWrite:
   987  018e  fd210000          	ld	iy,2
   988  0192  fd39              	add	iy, sp
   989  0194  fd7e00            	ld	a,(iy+0)
   990  0197  d300              	out	(_IO_AYLATCH), a
   991  0199  fd7e00            	ld	a,(iy+0+1)
   992  019c  d300              	out	(_IO_AYDATA), a
   993  019e  c9                	ret
   994                          	SECTION code_compiler
   995                          ;	---------------------------------
   996                          ; Function ayRead
   997                          ; ---------------------------------
   998                          _ayRead:
   999  019f  210000            	ld	hl,2+0
  1000  01a2  39                	add	hl, sp
  1001  01a3  7e                	ld	a, (hl)
  1002  01a4  d300              	out	(_IO_AYLATCH), a
  1003  01a6  db00              	in	a, (_IO_AYDATA)
  1004  01a8  6f                	ld	l, a
  1005  01a9  c9                	ret
  1006                          	SECTION code_compiler
  1007                          ;	---------------------------------
  1008                          ; Function playNoteDelay
  1009                          ; ---------------------------------
  1010                          _playNoteDelay:
  1011  01aa  dde5              	push	ix
  1012  01ac  dd210000          	ld	ix,0
  1013  01b0  dd39              	add	ix,sp
  1014  01b2  dd5600            	ld	d,(ix+7)
  1015  01b5  1e00              	ld	e,0x0b
  1016  01b7  d5                	push	de
  1017  01b8  cd0000            	call	_ayWrite
  1018  01bb  f1                	pop	af
  1019  01bc  dd5600            	ld	d,(ix+6)
  1020  01bf  1e00              	ld	e,0x0c
  1021  01c1  d5                	push	de
  1022  01c2  cd0000            	call	_ayWrite
  1023  01c5  f1                	pop	af
  1024  01c6  dd7e00            	ld	a,(ix+4)
  1025  01c9  b7                	or	a, a
  1026  01ca  2800              	jr	Z,l_playNoteDelay_00101
  1027  01cc  dd7e00            	ld	a,(ix+4)
  1028  01cf  3d                	dec	a
  1029  01d0  2800              	jr	Z,l_playNoteDelay_00102
  1030  01d2  dd7e00            	ld	a,(ix+4)
  1031  01d5  d600              	sub	a,0x02
  1032  01d7  ca0000            	jp	Z,l_playNoteDelay_00103
  1033  01da  c30000            	jp	l_playNoteDelay_00105
  1034                          l_playNoteDelay_00101:
  1035  01dd  110000            	ld	de,0x1008
  1036  01e0  d5                	push	de
  1037  01e1  cd0000            	call	_ayWrite
  1038  01e4  f1                	pop	af
  1039  01e5  af                	xor	a, a
  1040  01e6  57                	ld	d,a
  1041  01e7  1e00              	ld	e,0x09
  1042  01e9  d5                	push	de
  1043  01ea  cd0000            	call	_ayWrite
  1044  01ed  f1                	pop	af
  1045  01ee  af                	xor	a, a
  1046  01ef  57                	ld	d,a
  1047  01f0  1e00              	ld	e,0x0a
  1048  01f2  d5                	push	de
  1049  01f3  cd0000            	call	_ayWrite
  1050  01f6  f1                	pop	af
  1051  01f7  010000            	ld	bc,__NOTES_FINE+0
  1052  01fa  dd6e00            	ld	l,(ix+5)
  1053  01fd  2600              	ld	h,0x00
  1054  01ff  09                	add	hl, bc
  1055  0200  7e                	ld	a, (hl)
  1056  0201  f5                	push	af
  1057  0202  33                	inc	sp
  1058  0203  af                	xor	a, a
  1059  0204  f5                	push	af
  1060  0205  33                	inc	sp
  1061  0206  cd0000            	call	_ayWrite
  1062  0209  f1                	pop	af
  1063  020a  010000            	ld	bc,__NOTES_COURSE+0
  1064  020d  dd6e00            	ld	l,(ix+5)
  1065  0210  2600              	ld	h,0x00
  1066  0212  09                	add	hl, bc
  1067  0213  56                	ld	d, (hl)
  1068  0214  1e00              	ld	e,0x01
  1069  0216  d5                	push	de
  1070  0217  cd0000            	call	_ayWrite
  1071  021a  f1                	pop	af
  1072  021b  af                	xor	a, a
  1073  021c  57                	ld	d,a
  1074  021d  1e00              	ld	e,0x0d
  1075  021f  d5                	push	de
  1076  0220  cd0000            	call	_ayWrite
  1077  0223  f1                	pop	af
  1078  0224  c30000            	jp	l_playNoteDelay_00105
  1079                          l_playNoteDelay_00102:
  1080  0227  af                	xor	a, a
  1081  0228  57                	ld	d,a
  1082  0229  1e00              	ld	e,0x08
  1083  022b  d5                	push	de
  1084  022c  cd0000            	call	_ayWrite
  1085  022f  f1                	pop	af
  1086  0230  110000            	ld	de,0x1009
  1087  0233  d5                	push	de
  1088  0234  cd0000            	call	_ayWrite
  1089  0237  f1                	pop	af
  1090  0238  af                	xor	a, a
  1091  0239  57                	ld	d,a
  1092  023a  1e00              	ld	e,0x0a
  1093  023c  d5                	push	de
  1094  023d  cd0000            	call	_ayWrite
  1095  0240  f1                	pop	af
  1096  0241  010000            	ld	bc,__NOTES_FINE+0
  1097  0244  dd6e00            	ld	l,(ix+5)
  1098  0247  2600              	ld	h,0x00
  1099  0249  09                	add	hl, bc
  1100  024a  56                	ld	d, (hl)
  1101  024b  1e00              	ld	e,0x02
  1102  024d  d5                	push	de
  1103  024e  cd0000            	call	_ayWrite
  1104  0251  f1                	pop	af
  1105  0252  010000            	ld	bc,__NOTES_COURSE+0
  1106  0255  dd6e00            	ld	l,(ix+5)
  1107  0258  2600              	ld	h,0x00
  1108  025a  09                	add	hl, bc
  1109  025b  56                	ld	d, (hl)
  1110  025c  1e00              	ld	e,0x03
  1111  025e  d5                	push	de
  1112  025f  cd0000            	call	_ayWrite
  1113  0262  f1                	pop	af
  1114  0263  af                	xor	a, a
  1115  0264  57                	ld	d,a
  1116  0265  1e00              	ld	e,0x0d
  1117  0267  d5                	push	de
  1118  0268  cd0000            	call	_ayWrite
  1119  026b  f1                	pop	af
  1120  026c  1800              	jr	l_playNoteDelay_00105
  1121                          l_playNoteDelay_00103:
  1122  026e  af                	xor	a, a
  1123  026f  57                	ld	d,a
  1124  0270  1e00              	ld	e,0x08
  1125  0272  d5                	push	de
  1126  0273  cd0000            	call	_ayWrite
  1127  0276  f1                	pop	af
  1128  0277  af                	xor	a, a
  1129  0278  57                	ld	d,a
  1130  0279  1e00              	ld	e,0x09
  1131  027b  d5                	push	de
  1132  027c  cd0000            	call	_ayWrite
  1133  027f  f1                	pop	af
  1134  0280  110000            	ld	de,0x100a
  1135  0283  d5                	push	de
  1136  0284  cd0000            	call	_ayWrite
  1137  0287  f1                	pop	af
  1138  0288  010000            	ld	bc,__NOTES_FINE+0
  1139  028b  dd6e00            	ld	l,(ix+5)
  1140  028e  2600              	ld	h,0x00
  1141  0290  09                	add	hl, bc
  1142  0291  56                	ld	d, (hl)
  1143  0292  1e00              	ld	e,0x04
  1144  0294  d5                	push	de
  1145  0295  cd0000            	call	_ayWrite
  1146  0298  f1                	pop	af
  1147  0299  010000            	ld	bc,__NOTES_COURSE+0
  1148  029c  dd6e00            	ld	l,(ix+5)
  1149  029f  2600              	ld	h,0x00
  1150  02a1  09                	add	hl, bc
  1151  02a2  56                	ld	d, (hl)
  1152  02a3  1e00              	ld	e,0x05
  1153  02a5  d5                	push	de
  1154  02a6  cd0000            	call	_ayWrite
  1155  02a9  f1                	pop	af
  1156  02aa  af                	xor	a, a
  1157  02ab  57                	ld	d,a
  1158  02ac  1e00              	ld	e,0x0d
  1159  02ae  d5                	push	de
  1160  02af  cd0000            	call	_ayWrite
  1161  02b2  f1                	pop	af
  1162                          l_playNoteDelay_00105:
  1163  02b3  dde1              	pop	ix
  1164  02b5  c9                	ret
  1165                          	SECTION code_compiler
  1166                          ;	---------------------------------
  1167                          ; Function isKeyPressed
  1168                          ; ---------------------------------
  1169                          _isKeyPressed:
  1170  02b6  3a0000            	ld	a, (__kbdBufferWritePos+0)
  1171  02b9  fd210000          	ld	iy,__kbdBufferReadPos
  1172  02bd  fd9600            	sub	a,(iy+0)
  1173  02c0  2000              	jr	NZ,l_isKeyPressed_00103
  1174  02c2  3e00              	ld	a,0x01
  1175  02c4  1800              	jr	l_isKeyPressed_00104
  1176                          l_isKeyPressed_00103:
  1177  02c6  af                	xor	a,a
  1178                          l_isKeyPressed_00104:
  1179  02c7  ee00              	xor	a,0x01
  1180  02c9  6f                	ld	l, a
  1181  02ca  c9                	ret
  1182                          	SECTION code_compiler
  1183                          ;	---------------------------------
  1184                          ; Function getChar
  1185                          ; ---------------------------------
  1186                          _getChar:
  1187                          l_getChar_00101:
  1188  02cb  3a0000            	ld	a, (__kbdBufferWritePos+0)
  1189  02ce  fd210000          	ld	iy,__kbdBufferReadPos
  1190  02d2  fd9600            	sub	a,(iy+0)
  1191  02d5  2800              	jr	Z,l_getChar_00101
  1192  02d7  010000            	ld	bc,__kbdBuffer+0
  1193  02da  2a0000            	ld	hl, (__kbdBufferReadPos)
  1194  02dd  2600              	ld	h,0x00
  1195  02df  09                	add	hl, bc
  1196  02e0  4e                	ld	c, (hl)
  1197  02e1  3a0000            	ld	a, (__kbdBufferReadPos+0)
  1198  02e4  3c                	inc	a
  1199  02e5  320000            	ld	(__kbdBufferReadPos+0), a
  1200  02e8  69                	ld	l, c
  1201  02e9  c9                	ret
  1202                          	SECTION code_compiler
  1203                          ;	---------------------------------
  1204                          ; Function getJoyStatus
  1205                          ; ---------------------------------
  1206                          _getJoyStatus:
  1207  02ea  3e00              	ld	a, +((__joyStatus) & 0xFF)
  1208  02ec  210000            	ld	hl,2
  1209  02ef  39                	add	hl, sp
  1210  02f0  86                	add	a, (hl)
  1211  02f1  6f                	ld	l, a
  1212  02f2  3e00              	ld	a, +((__joyStatus) / 256)
  1213  02f4  ce00              	adc	a,0x00
  1214  02f6  67                	ld	h, a
  1215  02f7  6e                	ld	l, (hl)
  1216  02f8  c9                	ret
  1217                          	SECTION code_compiler
  1218                          ;	---------------------------------
  1219                          ; Function readLine
  1220                          ; ---------------------------------
  1221                          _readLine:
  1222  02f9  dde5              	push	ix
  1223  02fb  dd210000          	ld	ix,0
  1224  02ff  dd39              	add	ix,sp
  1225  0301  0e00              	ld	c,0x00
  1226                          l_readLine_00120:
  1227  0303  c5                	push	bc
  1228  0304  cd0000            	call	_getChar
  1229  0307  5d                	ld	e, l
  1230  0308  c1                	pop	bc
  1231  0309  7b                	ld	a, e
  1232  030a  d600              	sub	a,0x0d
  1233  030c  ca0000            	jp	Z,l_readLine_00121
  1234  030f  79                	ld	a, c
  1235  0310  dd9600            	sub	a,(ix+6)
  1236  0313  3000              	jr	NC,l_readLine_00112
  1237  0315  7b                	ld	a, e
  1238  0316  d600              	sub	a,0x20
  1239  0318  3800              	jr	C,l_readLine_00112
  1240  031a  3e00              	ld	a,0x7e
  1241  031c  93                	sub	a, e
  1242  031d  3800              	jr	C,l_readLine_00112
  1243  031f  dd6e00            	ld	l,(ix+4)
  1244  0322  dd6600            	ld	h,(ix+5)
  1245  0325  0600              	ld	b,0x00
  1246  0327  09                	add	hl, bc
  1247  0328  73                	ld	(hl), e
  1248  0329  c5                	push	bc
  1249  032a  7b                	ld	a, e
  1250  032b  f5                	push	af
  1251  032c  33                	inc	sp
  1252  032d  cd0000            	call	_vdp_write
  1253  0330  33                	inc	sp
  1254  0331  c1                	pop	bc
  1255  0332  0c                	inc	c
  1256  0333  1800              	jr	l_readLine_00120
  1257                          l_readLine_00112:
  1258  0335  7b                	ld	a, e
  1259  0336  d600              	sub	a,0x7f
  1260  0338  2000              	jr	NZ,l_readLine_00175
  1261  033a  3e00              	ld	a,0x01
  1262  033c  1800              	jr	l_readLine_00176
  1263                          l_readLine_00175:
  1264  033e  af                	xor	a,a
  1265                          l_readLine_00176:
  1266  033f  47                	ld	b, a
  1267  0340  dd7e00            	ld	a,(ix+6)
  1268  0343  91                	sub	a, c
  1269  0344  2000              	jr	NZ,l_readLine_00108
  1270  0346  cb40              	bit	0, b
  1271  0348  2000              	jr	NZ,l_readLine_00108
  1272  034a  c5                	push	bc
  1273  034b  210000            	ld	hl,0x000a
  1274  034e  e5                	push	hl
  1275  034f  3e00              	ld	a,0x3c
  1276  0351  f5                	push	af
  1277  0352  33                	inc	sp
  1278  0353  af                	xor	a, a
  1279  0354  f5                	push	af
  1280  0355  33                	inc	sp
  1281  0356  cd0000            	call	_playNoteDelay
  1282  0359  f1                	pop	af
  1283  035a  f1                	pop	af
  1284  035b  c1                	pop	bc
  1285  035c  1800              	jr	l_readLine_00120
  1286                          l_readLine_00108:
  1287  035e  78                	ld	a, b
  1288  035f  b7                	or	a, a
  1289  0360  2800              	jr	Z,l_readLine_00120
  1290  0362  79                	ld	a, c
  1291  0363  b7                	or	a, a
  1292  0364  2800              	jr	Z,l_readLine_00120
  1293  0366  110000            	ld	de,_vdp_cursor+0
  1294  0369  1a                	ld	a, (de)
  1295  036a  b7                	or	a, a
  1296  036b  2000              	jr	NZ,l_readLine_00102
  1297  036d  3e00              	ld	a,0x27
  1298  036f  12                	ld	(de), a
  1299  0370  3a0000            	ld	a, ((_vdp_cursor + 1) + 0)
  1300  0373  3d                	dec	a
  1301  0374  320000            	ld	((_vdp_cursor + 1)),a
  1302  0377  1800              	jr	l_readLine_00103
  1303                          l_readLine_00102:
  1304  0379  3d                	dec	a
  1305  037a  12                	ld	(de), a
  1306                          l_readLine_00103:
  1307  037b  0d                	dec	c
  1308  037c  3a0000            	ld	a, ((_vdp_cursor + 1) + 0)
  1309  037f  210000            	ld	hl,_vdp_cursor + 0
  1310  0382  46                	ld	b, (hl)
  1311  0383  c5                	push	bc
  1312  0384  2600              	ld	h,0x20
  1313  0386  e5                	push	hl
  1314  0387  33                	inc	sp
  1315  0388  f5                	push	af
  1316  0389  33                	inc	sp
  1317  038a  c5                	push	bc
  1318  038b  33                	inc	sp
  1319  038c  cd0000            	call	_vdp_writeCharAtLocation
  1320  038f  f1                	pop	af
  1321  0390  33                	inc	sp
  1322  0391  c1                	pop	bc
  1323  0392  c30303            	jp	l_readLine_00120
  1324                          l_readLine_00121:
  1325  0395  69                	ld	l, c
  1326  0396  dde1              	pop	ix
  1327  0398  c9                	ret
  1328                          	SECTION code_compiler
  1329                          ;	---------------------------------
  1330                          ; Function vdp_setRegister
  1331                          ; ---------------------------------
  1332                          _vdp_setRegister:
  1333  0399  fd210300          	ld	iy,3
  1334  039d  fd39              	add	iy, sp
  1335  039f  fd7e00            	ld	a,(iy+0)
  1336  03a2  d3a1              	out	(_IO_VDPLATCH), a
  1337  03a4  fd2b              	dec	iy
  1338  03a6  fd7e00            	ld	a,(iy+0)
  1339  03a9  f680              	or	a,0x80
  1340  03ab  d3a1              	out	(_IO_VDPLATCH), a
  1341  03ad  c9                	ret
  1342                          	SECTION code_compiler
  1343                          ;	---------------------------------
  1344                          ; Function vdp_setWriteAddress
  1345                          ; ---------------------------------
  1346                          _vdp_setWriteAddress:
  1347  03ae  fd210200          	ld	iy,2
  1348  03b2  fd39              	add	iy, sp
  1349  03b4  fd7e00            	ld	a,(iy+0)
  1350  03b7  d3a1              	out	(_IO_VDPLATCH), a
  1351  03b9  fd7e01            	ld	a,(iy+1)
  1352  03bc  e63f              	and	a,0x3f
  1353  03be  f640              	or	a,0x40
  1354  03c0  d3a1              	out	(_IO_VDPLATCH), a
  1355  03c2  c9                	ret
  1356                          	SECTION code_compiler
  1357                          ;	---------------------------------
  1358                          ; Function vdp_setReadAddress
  1359                          ; ---------------------------------
  1360                          _vdp_setReadAddress:
  1361  03c3  fd210200          	ld	iy,2
  1362  03c7  fd39              	add	iy, sp
  1363  03c9  fd7e00            	ld	a,(iy+0)
  1364  03cc  d3a1              	out	(_IO_VDPLATCH), a
  1365  03ce  fd7e01            	ld	a,(iy+1)
  1366  03d1  e63f              	and	a,0x3f
  1367  03d3  d3a1              	out	(_IO_VDPLATCH), a
  1368  03d5  c9                	ret
  1369                          	SECTION code_compiler
  1370                          ;	---------------------------------
  1371                          ; Function waitVdpISR
  1372                          ; ---------------------------------
  1373                          _waitVdpISR:
  1374  03d6  f5                	push	af
  1375  03d7  dba1              	in	a, (_IO_VDPLATCH)
  1376  03d9  320e00            	ld	(_vdpStatusRegVal), a
  1377  03dc  3e01              	ld	a, 0x01
  1378  03de  320f00            	ld	(_vdpIsReady), a
  1379  03e1  f1                	pop	af
  1380  03e2  fb                	ei
  1381  03e3  ed4d              	reti
  1382                          ;	---------------------------------
  1383                          ; Function vdp_enableVDPReadyInt
  1384                          ; ---------------------------------
  1385                          _vdp_enableVDPReadyInt:
  1386  03e5  cd7b00            	call	_NABU_DisableInterrupts
  1387  03e8  21d603            	ld	hl, _waitVdpISR
  1388  03eb  2206ff            	ld	(0xff00 + 6), hl
  1389  03ee  3e0e              	ld	a,0x0e
  1390  03f0  f5                	push	af
  1391  03f1  33                	inc	sp
  1392  03f2  cd9f01            	call	_ayRead
  1393  03f5  33                	inc	sp
  1394  03f6  7d                	ld	a, l
  1395  03f7  cbe7              	set	4, a
  1396  03f9  57                	ld	d,a
  1397  03fa  1e0e              	ld	e,0x0e
  1398  03fc  d5                	push	de
  1399  03fd  cd8e01            	call	_ayWrite
  1400  0400  f1                	pop	af
  1401  0401  cd7d00            	call	_NABU_EnableInterrupts
  1402  0404  210d00            	ld	hl,__vdpInterruptEnabled + 0
  1403  0407  3601              	ld	(hl),0x01
  1404  0409  3a0a00            	ld	a, (__vdpReg1Val+0)
  1405  040c  cbef              	set	5, a
  1406  040e  57                	ld	d,a
  1407  040f  1e01              	ld	e,0x01
  1408  0411  d5                	push	de
  1409  0412  cd9903            	call	_vdp_setRegister
  1410  0415  f1                	pop	af
  1411  0416  c9                	ret
  1412                          	SECTION code_compiler
  1413                          ;	---------------------------------
  1414                          ; Function vdp_waitVDPReadyInt
  1415                          ; ---------------------------------
  1416                          _vdp_waitVDPReadyInt:
  1417                          l_vdp_waitVDPReadyInt_00101:
  1418  0417  3a0f00            	ld	a, (_vdpIsReady+0)
  1419  041a  b7                	or	a, a
  1420  041b  28fa              	jr	Z,l_vdp_waitVDPReadyInt_00101
  1421  041d  210f00            	ld	hl,_vdpIsReady + 0
  1422  0420  3600              	ld	(hl),0x00
  1423  0422  c9                	ret
  1424                          	SECTION code_compiler
  1425                          ;	---------------------------------
  1426                          ; Function vdp_disableVDPReadyInt
  1427                          ; ---------------------------------
  1428                          _vdp_disableVDPReadyInt:
  1429  0423  3a0a00            	ld	a, (__vdpReg1Val+0)
  1430  0426  57                	ld	d,a
  1431  0427  1e01              	ld	e,0x01
  1432  0429  d5                	push	de
  1433  042a  cd9903            	call	_vdp_setRegister
  1434  042d  f1                	pop	af
  1435  042e  cd7b00            	call	_NABU_DisableInterrupts
  1436  0431  210d00            	ld	hl,__vdpInterruptEnabled + 0
  1437  0434  3600              	ld	(hl),0x00
  1438  0436  db41              	in	a, (_IO_AYLATCH)
  1439  0438  3e0e              	ld	a,0x0e
  1440  043a  f5                	push	af
  1441  043b  33                	inc	sp
  1442  043c  cd9f01            	call	_ayRead
  1443  043f  33                	inc	sp
  1444  0440  7d                	ld	a, l
  1445  0441  cb67              	bit	4, a
  1446  0443  2802              	jr	Z,l_vdp_disableVDPReadyInt_00102
  1447  0445  ee10              	xor	a,0x10
  1448                          l_vdp_disableVDPReadyInt_00102:
  1449  0447  57                	ld	d,a
  1450  0448  1e0e              	ld	e,0x0e
  1451  044a  d5                	push	de
  1452  044b  cd8e01            	call	_ayWrite
  1453  044e  f1                	pop	af
  1454  044f  c37d00            	jp	_NABU_EnableInterrupts
  1455                          	SECTION code_compiler
  1456                          ;	---------------------------------
  1457                          ; Function vdp_addISR
  1458                          ; ---------------------------------
  1459                          _vdp_addISR:
  1460  0452  cd7b00            	call	_NABU_DisableInterrupts
  1461  0455  fd210200          	ld	iy,2
  1462  0459  fd39              	add	iy, sp
  1463  045b  fd7e00            	ld	a,(iy+0)
  1464  045e  32c004            	ld	(__vdp_ISR+0), a
  1465  0461  fd7e01            	ld	a,(iy+1)
  1466  0464  32c104            	ld	(__vdp_ISR+1), a
  1467  0467  2ac004            	ld	hl, (__vdp_ISR)
  1468  046a  2206ff            	ld	(0xff00 + 6), hl
  1469  046d  3e0e              	ld	a,0x0e
  1470  046f  f5                	push	af
  1471  0470  33                	inc	sp
  1472  0471  cd9f01            	call	_ayRead
  1473  0474  33                	inc	sp
  1474  0475  7d                	ld	a, l
  1475  0476  cbe7              	set	4, a
  1476  0478  57                	ld	d,a
  1477  0479  1e0e              	ld	e,0x0e
  1478  047b  d5                	push	de
  1479  047c  cd8e01            	call	_ayWrite
  1480  047f  f1                	pop	af
  1481  0480  cd7d00            	call	_NABU_EnableInterrupts
  1482  0483  210d00            	ld	hl,__vdpInterruptEnabled + 0
  1483  0486  3601              	ld	(hl),0x01
  1484  0488  3a0a00            	ld	a, (__vdpReg1Val+0)
  1485  048b  cbef              	set	5, a
  1486  048d  57                	ld	d,a
  1487  048e  1e01              	ld	e,0x01
  1488  0490  d5                	push	de
  1489  0491  cd9903            	call	_vdp_setRegister
  1490  0494  f1                	pop	af
  1491  0495  c9                	ret
  1492                          	SECTION code_compiler
  1493                          ;	---------------------------------
  1494                          ; Function vdp_removeISR
  1495                          ; ---------------------------------
  1496                          _vdp_removeISR:
  1497  0496  3a0a00            	ld	a, (__vdpReg1Val+0)
  1498  0499  57                	ld	d,a
  1499  049a  1e01              	ld	e,0x01
  1500  049c  d5                	push	de
  1501  049d  cd9903            	call	_vdp_setRegister
  1502  04a0  f1                	pop	af
  1503  04a1  cd7b00            	call	_NABU_DisableInterrupts
  1504  04a4  210d00            	ld	hl,__vdpInterruptEnabled + 0
  1505  04a7  3600              	ld	(hl),0x00
  1506  04a9  db41              	in	a, (_IO_AYLATCH)
  1507  04ab  3e0e              	ld	a,0x0e
  1508  04ad  f5                	push	af
  1509  04ae  33                	inc	sp
  1510  04af  cd9f01            	call	_ayRead
  1511  04b2  33                	inc	sp
  1512  04b3  7d                	ld	a, l
  1513  04b4  cb67              	bit	4, a
  1514  04b6  2802              	jr	Z,l_vdp_removeISR_00102
  1515  04b8  ee10              	xor	a,0x10
  1516                          l_vdp_removeISR_00102:
  1517  04ba  57                	ld	d,a
  1518  04bb  1e0e              	ld	e,0x0e
  1519  04bd  d5                	push	de
  1520  04be  cd8e01            	call	_ayWrite
  1521  04c1  f1                	pop	af
  1522  04c2  c37d00            	jp	_NABU_EnableInterrupts
  1523                          	SECTION code_compiler
  1524                          ;	---------------------------------
  1525                          ; Function vdp_init
  1526                          ; ---------------------------------
  1527                          _vdp_init:
  1528  04c5  dde5              	push	ix
  1529  04c7  dd210000          	ld	ix,0
  1530  04cb  dd39              	add	ix,sp
  1531  04cd  dd7e04            	ld	a,(ix+4)
  1532  04d0  32d104            	ld	(__vdpMode+0), a
  1533  04d3  dd7e0a            	ld	a,(ix+10)
  1534  04d6  32d304            	ld	(__vdpSplitThirds+0), a
  1535  04d9  dd7e07            	ld	a,(ix+7)
  1536  04dc  32c604            	ld	(__vdpSpriteSizeSelected+0), a
  1537  04df  dd7e09            	ld	a,(ix+9)
  1538  04e2  32d204            	ld	(__autoScroll+0), a
  1539  04e5  210d00            	ld	hl,__vdpInterruptEnabled + 0
  1540  04e8  3600              	ld	(hl),0x00
  1541  04ea  210800            	ld	hl,_vdp_cursor
  1542  04ed  3600              	ld	(hl),0x00
  1543  04ef  210900            	ld	hl, +(_vdp_cursor + 1)
  1544  04f2  3600              	ld	(hl),0x00
  1545  04f4  dd7e07            	ld	a,(ix+7)
  1546  04f7  87                	add	a, a
  1547  04f8  4f                	ld	c, a
  1548  04f9  dd7e04            	ld	a,(ix+4)
  1549  04fc  3d                	dec	a
  1550  04fd  2812              	jr	Z,l_vdp_init_00101
  1551  04ff  dd7e04            	ld	a,(ix+4)
  1552  0502  d602              	sub	a,0x02
  1553  0504  caa805            	jp	Z,l_vdp_init_00106
  1554  0507  dd7e04            	ld	a,(ix+4)
  1555  050a  d603              	sub	a,0x03
  1556  050c  285f              	jr	Z,l_vdp_init_00105
  1557  050e  c3f005            	jp	l_vdp_init_00107
  1558                          l_vdp_init_00101:
  1559  0511  c5                	push	bc
  1560  0512  3e02              	ld	a,0x02
  1561  0514  f5                	push	af
  1562  0515  33                	inc	sp
  1563  0516  af                	xor	a, a
  1564  0517  f5                	push	af
  1565  0518  33                	inc	sp
  1566  0519  cd9903            	call	_vdp_setRegister
  1567  051c  f1                	pop	af
  1568  051d  c1                	pop	bc
  1569  051e  79                	ld	a, c
  1570  051f  f6c0              	or	a,0xc0
  1571  0521  ddb608            	or	a,(ix+8)
  1572  0524  320a00            	ld	(__vdpReg1Val+0), a
  1573  0527  3a0a00            	ld	a, (__vdpReg1Val+0)
  1574  052a  57                	ld	d,a
  1575  052b  1e01              	ld	e,0x01
  1576  052d  d5                	push	de
  1577  052e  cd9903            	call	_vdp_setRegister
  1578  0531  f1                	pop	af
  1579  0532  3ad304            	ld	a, (__vdpSplitThirds+0)
  1580  0535  b7                	or	a, a
  1581  0536  280a              	jr	Z,l_vdp_init_00103
  1582  0538  110403            	ld	de,0x0304
  1583  053b  d5                	push	de
  1584  053c  cd9903            	call	_vdp_setRegister
  1585  053f  f1                	pop	af
  1586  0540  1809              	jr	l_vdp_init_00104
  1587                          l_vdp_init_00103:
  1588  0542  af                	xor	a, a
  1589  0543  57                	ld	d,a
  1590  0544  1e04              	ld	e,0x04
  1591  0546  d5                	push	de
  1592  0547  cd9903            	call	_vdp_setRegister
  1593  054a  f1                	pop	af
  1594                          l_vdp_init_00104:
  1595  054b  210000            	ld	hl,0x0000
  1596  054e  22cb04            	ld	(__vdpPatternGeneratorTableAddr), hl
  1597  0551  dd360500          	ld	(ix+5),0x00
  1598  0555  fd21cd04          	ld	iy,__vdpCursorMaxX
  1599  0559  fd36001f          	ld	(iy+0),0x1f
  1600  055d  fd21ce04          	ld	iy,__vdpCursorMaxXFull
  1601  0561  fd360020          	ld	(iy+0),0x20
  1602  0565  2603              	ld	h,0x03
  1603  0567  22cf04            	ld	(__vdpTextBufferSize), hl
  1604  056a  c3f005            	jp	l_vdp_init_00107
  1605                          l_vdp_init_00105:
  1606  056d  af                	xor	a, a
  1607  056e  f5                	push	af
  1608  056f  33                	inc	sp
  1609  0570  af                	xor	a, a
  1610  0571  f5                	push	af
  1611  0572  33                	inc	sp
  1612  0573  cd9903            	call	_vdp_setRegister
  1613  0576  f1                	pop	af
  1614  0577  210a00            	ld	hl,__vdpReg1Val + 0
  1615  057a  36d2              	ld	(hl),0xd2
  1616  057c  3a0a00            	ld	a, (__vdpReg1Val+0)
  1617  057f  57                	ld	d,a
  1618  0580  1e01              	ld	e,0x01
  1619  0582  d5                	push	de
  1620  0583  cd9903            	call	_vdp_setRegister
  1621  0586  f1                	pop	af
  1622  0587  af                	xor	a, a
  1623  0588  57                	ld	d,a
  1624  0589  1e04              	ld	e,0x04
  1625  058b  d5                	push	de
  1626  058c  cd9903            	call	_vdp_setRegister
  1627  058f  f1                	pop	af
  1628  0590  210000            	ld	hl,0x0000
  1629  0593  22cb04            	ld	(__vdpPatternGeneratorTableAddr), hl
  1630  0596  21cd04            	ld	hl,__vdpCursorMaxX + 0
  1631  0599  3627              	ld	(hl),0x27
  1632  059b  21ce04            	ld	hl,__vdpCursorMaxXFull + 0
  1633  059e  3628              	ld	(hl),0x28
  1634  05a0  21c003            	ld	hl,0x03c0
  1635  05a3  22cf04            	ld	(__vdpTextBufferSize), hl
  1636  05a6  1848              	jr	l_vdp_init_00107
  1637                          l_vdp_init_00106:
  1638  05a8  c5                	push	bc
  1639  05a9  af                	xor	a, a
  1640  05aa  f5                	push	af
  1641  05ab  33                	inc	sp
  1642  05ac  af                	xor	a, a
  1643  05ad  f5                	push	af
  1644  05ae  33                	inc	sp
  1645  05af  cd9903            	call	_vdp_setRegister
  1646  05b2  f1                	pop	af
  1647  05b3  c1                	pop	bc
  1648  05b4  79                	ld	a, c
  1649  05b5  f6c8              	or	a,0xc8
  1650  05b7  ddb608            	or	a,(ix+8)
  1651  05ba  320a00            	ld	(__vdpReg1Val+0), a
  1652  05bd  3a0a00            	ld	a, (__vdpReg1Val+0)
  1653  05c0  57                	ld	d,a
  1654  05c1  1e01              	ld	e,0x01
  1655  05c3  d5                	push	de
  1656  05c4  cd9903            	call	_vdp_setRegister
  1657  05c7  f1                	pop	af
  1658  05c8  af                	xor	a, a
  1659  05c9  57                	ld	d,a
  1660  05ca  1e04              	ld	e,0x04
  1661  05cc  d5                	push	de
  1662  05cd  cd9903            	call	_vdp_setRegister
  1663  05d0  f1                	pop	af
  1664  05d1  210000            	ld	hl,0x0000
  1665  05d4  22cb04            	ld	(__vdpPatternGeneratorTableAddr), hl
  1666  05d7  dd360500          	ld	(ix+5),0x00
  1667  05db  fd21cd04          	ld	iy,__vdpCursorMaxX
  1668  05df  fd36001f          	ld	(iy+0),0x1f
  1669  05e3  fd21ce04          	ld	iy,__vdpCursorMaxXFull
  1670  05e7  fd360020          	ld	(iy+0),0x20
  1671  05eb  2603              	ld	h,0x03
  1672  05ed  22cf04            	ld	(__vdpTextBufferSize), hl
  1673                          l_vdp_init_00107:
  1674  05f0  110206            	ld	de,0x0602
  1675  05f3  d5                	push	de
  1676  05f4  cd9903            	call	_vdp_setRegister
  1677  05f7  f1                	pop	af
  1678  05f8  210018            	ld	hl,0x1800
  1679  05fb  22c704            	ld	(__vdpPatternNameTableAddr), hl
  1680  05fe  3ad304            	ld	a, (__vdpSplitThirds+0)
  1681  0601  b7                	or	a, a
  1682  0602  280a              	jr	Z,l_vdp_init_00109
  1683  0604  1103ff            	ld	de,0xff03
  1684  0607  d5                	push	de
  1685  0608  cd9903            	call	_vdp_setRegister
  1686  060b  f1                	pop	af
  1687  060c  1808              	jr	l_vdp_init_00110
  1688                          l_vdp_init_00109:
  1689  060e  11039f            	ld	de,0x9f03
  1690  0611  d5                	push	de
  1691  0612  cd9903            	call	_vdp_setRegister
  1692  0615  f1                	pop	af
  1693                          l_vdp_init_00110:
  1694  0616  210020            	ld	hl,0x2000
  1695  0619  22c904            	ld	(__vdpColorTableAddr), hl
  1696  061c  110536            	ld	de,0x3605
  1697  061f  d5                	push	de
  1698  0620  cd9903            	call	_vdp_setRegister
  1699  0623  f1                	pop	af
  1700  0624  21001b            	ld	hl,0x1b00
  1701  0627  22c204            	ld	(__vdpSpriteAttributeTableAddr), hl
  1702  062a  110607            	ld	de,0x0706
  1703  062d  d5                	push	de
  1704  062e  cd9903            	call	_vdp_setRegister
  1705  0631  f1                	pop	af
  1706  0632  210038            	ld	hl,0x3800
  1707  0635  22c404            	ld	(__vdpSpriteGeneratorTableAddr), hl
  1708  0638  dd7e05            	ld	a,(ix+5)
  1709  063b  87                	add	a, a
  1710  063c  87                	add	a, a
  1711  063d  87                	add	a, a
  1712  063e  87                	add	a, a
  1713  063f  4f                	ld	c, a
  1714  0640  dd7e06            	ld	a,(ix+6)
  1715  0643  e60f              	and	a,0x0f
  1716  0645  b1                	or	a, c
  1717  0646  57                	ld	d,a
  1718  0647  1e07              	ld	e,0x07
  1719  0649  d5                	push	de
  1720  064a  cd9903            	call	_vdp_setRegister
  1721  064d  f1                	pop	af
  1722  064e  dde1              	pop	ix
  1723  0650  c33207            	jp	_vdp_clearScreen
  1724                          	SECTION code_compiler
  1725                          ;	---------------------------------
  1726                          ; Function vdp_clearVRAM
  1727                          ; ---------------------------------
  1728                          _vdp_clearVRAM:
  1729  0653  210000            	ld	hl,0x0000
  1730  0656  e5                	push	hl
  1731  0657  cdae03            	call	_vdp_setWriteAddress
  1732  065a  f1                	pop	af
  1733  065b  010000            	ld	bc,0x0000
  1734                          l_vdp_clearVRAM_00103:
  1735  065e  79                	ld	a, c
  1736  065f  d6ff              	sub	a,0xff
  1737  0661  78                	ld	a, b
  1738  0662  de3f              	sbc	a,0x3f
  1739  0664  d0                	ret	NC
  1740  0665  3e00              	ld	a,0x00
  1741  0667  d3a0              	out	(_IO_VDPDATA), a
  1742  0669  03                	inc	bc
  1743  066a  18f2              	jr	l_vdp_clearVRAM_00103
  1744                          	SECTION code_compiler
  1745                          ;	---------------------------------
  1746                          ; Function vdp_initMSXMode
  1747                          ; ---------------------------------
  1748                          _vdp_initMSXMode:
  1749  066c  3e02              	ld	a,0x02
  1750  066e  f5                	push	af
  1751  066f  33                	inc	sp
  1752  0670  af                	xor	a, a
  1753  0671  f5                	push	af
  1754  0672  33                	inc	sp
  1755  0673  cd9903            	call	_vdp_setRegister
  1756  0676  f1                	pop	af
  1757  0677  1101c0            	ld	de,0xc001
  1758  067a  d5                	push	de
  1759  067b  cd9903            	call	_vdp_setRegister
  1760  067e  f1                	pop	af
  1761  067f  110206            	ld	de,0x0602
  1762  0682  d5                	push	de
  1763  0683  cd9903            	call	_vdp_setRegister
  1764  0686  f1                	pop	af
  1765  0687  1103ff            	ld	de,0xff03
  1766  068a  d5                	push	de
  1767  068b  cd9903            	call	_vdp_setRegister
  1768  068e  f1                	pop	af
  1769  068f  110403            	ld	de,0x0304
  1770  0692  d5                	push	de
  1771  0693  cd9903            	call	_vdp_setRegister
  1772  0696  f1                	pop	af
  1773  0697  110536            	ld	de,0x3605
  1774  069a  d5                	push	de
  1775  069b  cd9903            	call	_vdp_setRegister
  1776  069e  f1                	pop	af
  1777  069f  110607            	ld	de,0x0706
  1778  06a2  d5                	push	de
  1779  06a3  cd9903            	call	_vdp_setRegister
  1780  06a6  f1                	pop	af
  1781  06a7  210200            	ld	hl,2+0
  1782  06aa  39                	add	hl, sp
  1783  06ab  7e                	ld	a, (hl)
  1784  06ac  e60f              	and	a,0x0f
  1785  06ae  57                	ld	d,a
  1786  06af  1e07              	ld	e,0x07
  1787  06b1  d5                	push	de
  1788  06b2  cd9903            	call	_vdp_setRegister
  1789  06b5  f1                	pop	af
  1790  06b6  c9                	ret
  1791                          	SECTION code_compiler
  1792                          ;	---------------------------------
  1793                          ; Function vdp_initTextMode
  1794                          ; ---------------------------------
  1795                          _vdp_initTextMode:
  1796  06b7  af                	xor	a, a
  1797  06b8  f5                	push	af
  1798  06b9  33                	inc	sp
  1799  06ba  fd210500          	ld	iy,5
  1800  06be  fd39              	add	iy, sp
  1801  06c0  fd7e00            	ld	a,(iy+0)
  1802  06c3  f5                	push	af
  1803  06c4  33                	inc	sp
  1804  06c5  af                	xor	a, a
  1805  06c6  f5                	push	af
  1806  06c7  33                	inc	sp
  1807  06c8  af                	xor	a, a
  1808  06c9  f5                	push	af
  1809  06ca  33                	inc	sp
  1810  06cb  fd2b              	dec	iy
  1811  06cd  fd7e00            	ld	a,(iy+0)
  1812  06d0  f5                	push	af
  1813  06d1  33                	inc	sp
  1814  06d2  fd2b              	dec	iy
  1815  06d4  fd5600            	ld	d,(iy+0)
  1816  06d7  1e03              	ld	e,0x03
  1817  06d9  d5                	push	de
  1818  06da  cdc504            	call	_vdp_init
  1819  06dd  f1                	pop	af
  1820  06de  f1                	pop	af
  1821  06df  f1                	pop	af
  1822  06e0  33                	inc	sp
  1823  06e1  c9                	ret
  1824                          	SECTION code_compiler
  1825                          ;	---------------------------------
  1826                          ; Function vdp_initG2Mode
  1827                          ; ---------------------------------
  1828                          _vdp_initG2Mode:
  1829  06e2  fd210600          	ld	iy,6
  1830  06e6  fd39              	add	iy, sp
  1831  06e8  fd7e00            	ld	a,(iy+0)
  1832  06eb  f5                	push	af
  1833  06ec  33                	inc	sp
  1834  06ed  fd2b              	dec	iy
  1835  06ef  fd7e00            	ld	a,(iy+0)
  1836  06f2  f5                	push	af
  1837  06f3  33                	inc	sp
  1838  06f4  fd2b              	dec	iy
  1839  06f6  fd7e00            	ld	a,(iy+0)
  1840  06f9  f5                	push	af
  1841  06fa  33                	inc	sp
  1842  06fb  fd2b              	dec	iy
  1843  06fd  fd7e00            	ld	a,(iy+0)
  1844  0700  f5                	push	af
  1845  0701  33                	inc	sp
  1846  0702  fd2b              	dec	iy
  1847  0704  fd7e00            	ld	a,(iy+0)
  1848  0707  f5                	push	af
  1849  0708  33                	inc	sp
  1850  0709  af                	xor	a, a
  1851  070a  57                	ld	d,a
  1852  070b  1e01              	ld	e,0x01
  1853  070d  d5                	push	de
  1854  070e  cdc504            	call	_vdp_init
  1855  0711  f1                	pop	af
  1856  0712  f1                	pop	af
  1857  0713  f1                	pop	af
  1858  0714  33                	inc	sp
  1859  0715  c9                	ret
  1860                          	SECTION code_compiler
  1861                          ;	---------------------------------
  1862                          ; Function vdp_initMultiColorMode
  1863                          ; ---------------------------------
  1864                          _vdp_initMultiColorMode:
  1865  0716  af                	xor	a, a
  1866  0717  f5                	push	af
  1867  0718  33                	inc	sp
  1868  0719  af                	xor	a, a
  1869  071a  f5                	push	af
  1870  071b  33                	inc	sp
  1871  071c  af                	xor	a, a
  1872  071d  f5                	push	af
  1873  071e  33                	inc	sp
  1874  071f  af                	xor	a, a
  1875  0720  f5                	push	af
  1876  0721  33                	inc	sp
  1877  0722  af                	xor	a, a
  1878  0723  f5                	push	af
  1879  0724  33                	inc	sp
  1880  0725  af                	xor	a, a
  1881  0726  57                	ld	d,a
  1882  0727  1e02              	ld	e,0x02
  1883  0729  d5                	push	de
  1884  072a  cdc504            	call	_vdp_init
  1885  072d  f1                	pop	af
  1886  072e  f1                	pop	af
  1887  072f  f1                	pop	af
  1888  0730  33                	inc	sp
  1889  0731  c9                	ret
  1890                          	SECTION code_compiler
  1891                          ;	---------------------------------
  1892                          ; Function vdp_clearScreen
  1893                          ; ---------------------------------
  1894                          _vdp_clearScreen:
  1895  0732  2ac704            	ld	hl, (__vdpPatternNameTableAddr)
  1896  0735  e5                	push	hl
  1897  0736  cdae03            	call	_vdp_setWriteAddress
  1898  0739  f1                	pop	af
  1899  073a  3ace04            	ld	a, (__vdpCursorMaxXFull+0)
  1900  073d  4f                	ld	c, a
  1901  073e  0600              	ld	b,0x00
  1902  0740  69                	ld	l, c
  1903  0741  60                	ld	h, b
  1904  0742  29                	add	hl, hl
  1905  0743  09                	add	hl, bc
  1906  0744  29                	add	hl, hl
  1907  0745  29                	add	hl, hl
  1908  0746  29                	add	hl, hl
  1909  0747  110001            	ld	de,__vdp_textBuffer
  1910  074a  19                	add	hl, de
  1911  074b  eb                	ex	de, hl
  1912  074c  0e00              	ld	c,0x00
  1913  074e  3ad104            	ld	a, (__vdpMode+0)
  1914  0751  d603              	sub	a,0x03
  1915  0753  2002              	jr	NZ,l_vdp_clearScreen_00109
  1916  0755  0e20              	ld	c,0x20
  1917                          l_vdp_clearScreen_00109:
  1918  0757  210001            	ld	hl,__vdp_textBuffer
  1919                          l_vdp_clearScreen_00103:
  1920  075a  79                	ld	a, c
  1921  075b  d3a0              	out	(_IO_VDPDATA), a
  1922  075d  3620              	ld	(hl),0x20
  1923  075f  23                	inc	hl
  1924  0760  7d                	ld	a, l
  1925  0761  93                	sub	a, e
  1926  0762  20f6              	jr	NZ,l_vdp_clearScreen_00103
  1927  0764  7c                	ld	a, h
  1928  0765  92                	sub	a, d
  1929  0766  20f2              	jr	NZ,l_vdp_clearScreen_00103
  1930  0768  c9                	ret
  1931                          	SECTION code_compiler
  1932                          ;	---------------------------------
  1933                          ; Function vdp_fillScreen
  1934                          ; ---------------------------------
  1935                          _vdp_fillScreen:
  1936  0769  dde5              	push	ix
  1937  076b  dd210000          	ld	ix,0
  1938  076f  dd39              	add	ix,sp
  1939  0771  2ac704            	ld	hl, (__vdpPatternNameTableAddr)
  1940  0774  e5                	push	hl
  1941  0775  cdae03            	call	_vdp_setWriteAddress
  1942  0778  f1                	pop	af
  1943  0779  010001            	ld	bc,__vdp_textBuffer+0
  1944  077c  3ace04            	ld	a, (__vdpCursorMaxXFull+0)
  1945  077f  5f                	ld	e, a
  1946  0780  1600              	ld	d,0x00
  1947  0782  6b                	ld	l, e
  1948  0783  62                	ld	h, d
  1949  0784  29                	add	hl, hl
  1950  0785  19                	add	hl, de
  1951  0786  29                	add	hl, hl
  1952  0787  29                	add	hl, hl
  1953  0788  29                	add	hl, hl
  1954  0789  09                	add	hl, bc
  1955  078a  eb                	ex	de, hl
  1956                          l_vdp_fillScreen_00101:
  1957  078b  dd7e04            	ld	a,(ix+4)
  1958  078e  d3a0              	out	(_IO_VDPDATA), a
  1959  0790  dd7e04            	ld	a,(ix+4)
  1960  0793  02                	ld	(bc), a
  1961  0794  03                	inc	bc
  1962  0795  69                	ld	l, c
  1963  0796  60                	ld	h, b
  1964  0797  bf                	cp	a, a
  1965  0798  ed52              	sbc	hl, de
  1966  079a  20ef              	jr	NZ,l_vdp_fillScreen_00101
  1967  079c  dde1              	pop	ix
  1968  079e  c9                	ret
  1969                          	SECTION code_compiler
  1970                          ;	---------------------------------
  1971                          ; Function vdp_clearRows
  1972                          ; ---------------------------------
  1973                          _vdp_clearRows:
  1974  079f  dde5              	push	ix
  1975  07a1  dd210000          	ld	ix,0
  1976  07a5  dd39              	add	ix,sp
  1977  07a7  21ce04            	ld	hl,__vdpCursorMaxXFull + 0
  1978  07aa  5e                	ld	e, (hl)
  1979  07ab  dd6604            	ld	h,(ix+4)
  1980  07ae  2e00              	ld	l,0x00
  1981  07b0  55                	ld	d, l
  1982  07b1  0608              	ld	b,0x08
  1983                          l_vdp_clearRows_00112:
  1984  07b3  29                	add	hl, hl
  1985  07b4  3001              	jr	NC,l_vdp_clearRows_00113
  1986  07b6  19                	add	hl, de
  1987                          l_vdp_clearRows_00113:
  1988  07b7  10fa              	djnz	l_vdp_clearRows_00112
  1989  07b9  eb                	ex	de, hl
  1990  07ba  2ac704            	ld	hl, (__vdpPatternNameTableAddr)
  1991  07bd  19                	add	hl, de
  1992  07be  e5                	push	hl
  1993  07bf  cdae03            	call	_vdp_setWriteAddress
  1994  07c2  f1                	pop	af
  1995  07c3  fd21ce04          	ld	iy,__vdpCursorMaxXFull
  1996  07c7  fd5e00            	ld	e,(iy+0)
  1997  07ca  dd6604            	ld	h,(ix+4)
  1998  07cd  2e00              	ld	l,0x00
  1999  07cf  55                	ld	d, l
  2000  07d0  0608              	ld	b,0x08
  2001                          l_vdp_clearRows_00114:
  2002  07d2  29                	add	hl, hl
  2003  07d3  3001              	jr	NC,l_vdp_clearRows_00115
  2004  07d5  19                	add	hl, de
  2005                          l_vdp_clearRows_00115:
  2006  07d6  10fa              	djnz	l_vdp_clearRows_00114
  2007  07d8  110001            	ld	de,__vdp_textBuffer
  2008  07db  19                	add	hl, de
  2009  07dc  e5                	push	hl
  2010  07dd  fd5e00            	ld	e,(iy+0)
  2011  07e0  dd6605            	ld	h,(ix+5)
  2012  07e3  2e00              	ld	l,0x00
  2013  07e5  55                	ld	d, l
  2014  07e6  0608              	ld	b,0x08
  2015                          l_vdp_clearRows_00116:
  2016  07e8  29                	add	hl, hl
  2017  07e9  3001              	jr	NC,l_vdp_clearRows_00117
  2018  07eb  19                	add	hl, de
  2019                          l_vdp_clearRows_00117:
  2020  07ec  10fa              	djnz	l_vdp_clearRows_00116
  2021  07ee  c1                	pop	bc
  2022  07ef  110001            	ld	de,__vdp_textBuffer
  2023  07f2  19                	add	hl, de
  2024  07f3  eb                	ex	de, hl
  2025                          l_vdp_clearRows_00101:
  2026  07f4  3e20              	ld	a,0x20
  2027  07f6  d3a0              	out	(_IO_VDPDATA), a
  2028  07f8  3e20              	ld	a,0x20
  2029  07fa  02                	ld	(bc), a
  2030  07fb  03                	inc	bc
  2031  07fc  6b                	ld	l, e
  2032  07fd  62                	ld	h, d
  2033  07fe  bf                	cp	a, a
  2034  07ff  ed42              	sbc	hl, bc
  2035  0801  20f1              	jr	NZ,l_vdp_clearRows_00101
  2036  0803  dde1              	pop	ix
  2037  0805  c9                	ret
  2038                          	SECTION code_compiler
  2039                          ;	---------------------------------
  2040                          ; Function vdp_loadASCIIFont
  2041                          ; ---------------------------------
  2042                          _vdp_loadASCIIFont:
  2043  0806  dde5              	push	ix
  2044  0808  dd210000          	ld	ix,0
  2045  080c  dd39              	add	ix,sp
  2046  080e  2acb04            	ld	hl, (__vdpPatternGeneratorTableAddr)
  2047  0811  110001            	ld	de,0x0100
  2048  0814  19                	add	hl, de
  2049  0815  e5                	push	hl
  2050  0816  cdae03            	call	_vdp_setWriteAddress
  2051  0819  f1                	pop	af
  2052  081a  dd4e04            	ld	c,(ix+4)
  2053  081d  dd4605            	ld	b,(ix+5)
  2054  0820  210003            	ld	hl,0x0300
  2055  0823  09                	add	hl, bc
  2056  0824  eb                	ex	de, hl
  2057                          l_vdp_loadASCIIFont_00101:
  2058  0825  0a                	ld	a, (bc)
  2059  0826  d3a0              	out	(_IO_VDPDATA), a
  2060  0828  03                	inc	bc
  2061  0829  69                	ld	l, c
  2062  082a  60                	ld	h, b
  2063  082b  bf                	cp	a, a
  2064  082c  ed52              	sbc	hl, de
  2065  082e  20f5              	jr	NZ,l_vdp_loadASCIIFont_00101
  2066  0830  dde1              	pop	ix
  2067  0832  c9                	ret
  2068                          	SECTION code_compiler
  2069                          ;	---------------------------------
  2070                          ; Function vdp_loadASCIIFontWithInverse
  2071                          ; ---------------------------------
  2072                          _vdp_loadASCIIFontWithInverse:
  2073  0833  dde5              	push	ix
  2074  0835  dd210000          	ld	ix,0
  2075  0839  dd39              	add	ix,sp
  2076  083b  f5                	push	af
  2077  083c  2acb04            	ld	hl, (__vdpPatternGeneratorTableAddr)
  2078  083f  110001            	ld	de,0x0100
  2079  0842  19                	add	hl, de
  2080  0843  e5                	push	hl
  2081  0844  cdae03            	call	_vdp_setWriteAddress
  2082  0847  f1                	pop	af
  2083  0848  dd4e04            	ld	c,(ix+4)
  2084  084b  dd4605            	ld	b,(ix+5)
  2085  084e  210003            	ld	hl,0x0300
  2086  0851  09                	add	hl, bc
  2087  0852  e3                	ex	(sp), hl
  2088  0853  59                	ld	e, c
  2089  0854  50                	ld	d, b
  2090                          l_vdp_loadASCIIFontWithInverse_00101:
  2091  0855  1a                	ld	a, (de)
  2092  0856  d3a0              	out	(_IO_VDPDATA), a
  2093  0858  13                	inc	de
  2094  0859  e1                	pop	hl
  2095  085a  e5                	push	hl
  2096  085b  bf                	cp	a, a
  2097  085c  ed52              	sbc	hl, de
  2098  085e  20f5              	jr	NZ,l_vdp_loadASCIIFontWithInverse_00101
  2099                          l_vdp_loadASCIIFontWithInverse_00104:
  2100  0860  0a                	ld	a, (bc)
  2101  0861  2f                	cpl
  2102  0862  d3a0              	out	(_IO_VDPDATA), a
  2103  0864  03                	inc	bc
  2104  0865  e1                	pop	hl
  2105  0866  e5                	push	hl
  2106  0867  bf                	cp	a, a
  2107  0868  ed42              	sbc	hl, bc
  2108  086a  20f4              	jr	NZ,l_vdp_loadASCIIFontWithInverse_00104
  2109  086c  ddf9              	ld	sp, ix
  2110  086e  dde1              	pop	ix
  2111  0870  c9                	ret
  2112                          	SECTION code_compiler
  2113                          ;	---------------------------------
  2114                          ; Function vdp_putPattern
  2115                          ; ---------------------------------
  2116                          _vdp_putPattern:
  2117  0871  dde5              	push	ix
  2118  0873  dd210000          	ld	ix,0
  2119  0877  dd39              	add	ix,sp
  2120  0879  21ce04            	ld	hl,__vdpCursorMaxXFull + 0
  2121  087c  5e                	ld	e, (hl)
  2122  087d  dd6605            	ld	h,(ix+5)
  2123  0880  2e00              	ld	l,0x00
  2124  0882  55                	ld	d, l
  2125  0883  0608              	ld	b,0x08
  2126                          l_vdp_putPattern_00103:
  2127  0885  29                	add	hl, hl
  2128  0886  3001              	jr	NC,l_vdp_putPattern_00104
  2129  0888  19                	add	hl, de
  2130                          l_vdp_putPattern_00104:
  2131  0889  10fa              	djnz	l_vdp_putPattern_00103
  2132  088b  dd4e04            	ld	c,(ix+4)
  2133  088e  0600              	ld	b,0x00
  2134  0890  09                	add	hl, bc
  2135  0891  eb                	ex	de, hl
  2136  0892  2ac704            	ld	hl, (__vdpPatternNameTableAddr)
  2137  0895  19                	add	hl, de
  2138  0896  d5                	push	de
  2139  0897  e5                	push	hl
  2140  0898  cdae03            	call	_vdp_setWriteAddress
  2141  089b  f1                	pop	af
  2142  089c  d1                	pop	de
  2143  089d  210001            	ld	hl,__vdp_textBuffer+0
  2144  08a0  19                	add	hl, de
  2145  08a1  dd7e06            	ld	a,(ix+6)
  2146  08a4  77                	ld	(hl), a
  2147  08a5  dd7e06            	ld	a,(ix+6)
  2148  08a8  d3a0              	out	(_IO_VDPDATA), a
  2149  08aa  dde1              	pop	ix
  2150  08ac  c9                	ret
  2151                          	SECTION code_compiler
  2152                          ;	---------------------------------
  2153                          ; Function vdp_loadPatternTable
  2154                          ; ---------------------------------
  2155                          _vdp_loadPatternTable:
  2156  08ad  dde5              	push	ix
  2157  08af  dd210000          	ld	ix,0
  2158  08b3  dd39              	add	ix,sp
  2159  08b5  f5                	push	af
  2160  08b6  dd5e04            	ld	e,(ix+4)
  2161  08b9  dd5605            	ld	d,(ix+5)
  2162  08bc  dd6e06            	ld	l,(ix+6)
  2163  08bf  dd6607            	ld	h,(ix+7)
  2164  08c2  19                	add	hl, de
  2165  08c3  e3                	ex	(sp), hl
  2166  08c4  d5                	push	de
  2167  08c5  2acb04            	ld	hl, (__vdpPatternGeneratorTableAddr)
  2168  08c8  e5                	push	hl
  2169  08c9  cdae03            	call	_vdp_setWriteAddress
  2170  08cc  f1                	pop	af
  2171  08cd  d1                	pop	de
  2172  08ce  4b                	ld	c, e
  2173  08cf  42                	ld	b, d
  2174                          l_vdp_loadPatternTable_00101:
  2175  08d0  0a                	ld	a, (bc)
  2176  08d1  d3a0              	out	(_IO_VDPDATA), a
  2177  08d3  03                	inc	bc
  2178  08d4  e1                	pop	hl
  2179  08d5  e5                	push	hl
  2180  08d6  bf                	cp	a, a
  2181  08d7  ed42              	sbc	hl, bc
  2182  08d9  20f5              	jr	NZ,l_vdp_loadPatternTable_00101
  2183  08db  3ad304            	ld	a, (__vdpSplitThirds+0)
  2184  08de  b7                	or	a, a
  2185  08df  2834              	jr	Z,l_vdp_loadPatternTable_00112
  2186  08e1  2acb04            	ld	hl, (__vdpPatternGeneratorTableAddr)
  2187  08e4  010008            	ld	bc,0x0800
  2188  08e7  09                	add	hl, bc
  2189  08e8  d5                	push	de
  2190  08e9  e5                	push	hl
  2191  08ea  cdae03            	call	_vdp_setWriteAddress
  2192  08ed  f1                	pop	af
  2193  08ee  d1                	pop	de
  2194  08ef  4b                	ld	c, e
  2195  08f0  42                	ld	b, d
  2196                          l_vdp_loadPatternTable_00104:
  2197  08f1  0a                	ld	a, (bc)
  2198  08f2  d3a0              	out	(_IO_VDPDATA), a
  2199  08f4  03                	inc	bc
  2200  08f5  e1                	pop	hl
  2201  08f6  e5                	push	hl
  2202  08f7  bf                	cp	a, a
  2203  08f8  ed42              	sbc	hl, bc
  2204  08fa  20f5              	jr	NZ,l_vdp_loadPatternTable_00104
  2205  08fc  2acb04            	ld	hl, (__vdpPatternGeneratorTableAddr)
  2206  08ff  010010            	ld	bc,0x1000
  2207  0902  09                	add	hl, bc
  2208  0903  d5                	push	de
  2209  0904  e5                	push	hl
  2210  0905  cdae03            	call	_vdp_setWriteAddress
  2211  0908  f1                	pop	af
  2212  0909  d1                	pop	de
  2213                          l_vdp_loadPatternTable_00107:
  2214  090a  1a                	ld	a, (de)
  2215  090b  d3a0              	out	(_IO_VDPDATA), a
  2216  090d  13                	inc	de
  2217  090e  e1                	pop	hl
  2218  090f  e5                	push	hl
  2219  0910  bf                	cp	a, a
  2220  0911  ed52              	sbc	hl, de
  2221  0913  20f5              	jr	NZ,l_vdp_loadPatternTable_00107
  2222                          l_vdp_loadPatternTable_00112:
  2223  0915  ddf9              	ld	sp, ix
  2224  0917  dde1              	pop	ix
  2225  0919  c9                	ret
  2226                          	SECTION code_compiler
  2227                          ;	---------------------------------
  2228                          ; Function vdp_loadColorTable
  2229                          ; ---------------------------------
  2230                          _vdp_loadColorTable:
  2231  091a  dde5              	push	ix
  2232  091c  dd210000          	ld	ix,0
  2233  0920  dd39              	add	ix,sp
  2234  0922  f5                	push	af
  2235  0923  dd5e04            	ld	e,(ix+4)
  2236  0926  dd5605            	ld	d,(ix+5)
  2237  0929  dd6e06            	ld	l,(ix+6)
  2238  092c  dd6607            	ld	h,(ix+7)
  2239  092f  19                	add	hl, de
  2240  0930  e3                	ex	(sp), hl
  2241  0931  d5                	push	de
  2242  0932  2ac904            	ld	hl, (__vdpColorTableAddr)
  2243  0935  e5                	push	hl
  2244  0936  cdae03            	call	_vdp_setWriteAddress
  2245  0939  f1                	pop	af
  2246  093a  d1                	pop	de
  2247  093b  4b                	ld	c, e
  2248  093c  42                	ld	b, d
  2249                          l_vdp_loadColorTable_00101:
  2250  093d  0a                	ld	a, (bc)
  2251  093e  d3a0              	out	(_IO_VDPDATA), a
  2252  0940  03                	inc	bc
  2253  0941  e1                	pop	hl
  2254  0942  e5                	push	hl
  2255  0943  bf                	cp	a, a
  2256  0944  ed42              	sbc	hl, bc
  2257  0946  20f5              	jr	NZ,l_vdp_loadColorTable_00101
  2258  0948  3ad304            	ld	a, (__vdpSplitThirds+0)
  2259  094b  b7                	or	a, a
  2260  094c  2834              	jr	Z,l_vdp_loadColorTable_00112
  2261  094e  2ac904            	ld	hl, (__vdpColorTableAddr)
  2262  0951  010008            	ld	bc,0x0800
  2263  0954  09                	add	hl, bc
  2264  0955  d5                	push	de
  2265  0956  e5                	push	hl
  2266  0957  cdae03            	call	_vdp_setWriteAddress
  2267  095a  f1                	pop	af
  2268  095b  d1                	pop	de
  2269  095c  4b                	ld	c, e
  2270  095d  42                	ld	b, d
  2271                          l_vdp_loadColorTable_00104:
  2272  095e  0a                	ld	a, (bc)
  2273  095f  d3a0              	out	(_IO_VDPDATA), a
  2274  0961  03                	inc	bc
  2275  0962  e1                	pop	hl
  2276  0963  e5                	push	hl
  2277  0964  bf                	cp	a, a
  2278  0965  ed42              	sbc	hl, bc
  2279  0967  20f5              	jr	NZ,l_vdp_loadColorTable_00104
  2280  0969  2ac904            	ld	hl, (__vdpColorTableAddr)
  2281  096c  010010            	ld	bc,0x1000
  2282  096f  09                	add	hl, bc
  2283  0970  d5                	push	de
  2284  0971  e5                	push	hl
  2285  0972  cdae03            	call	_vdp_setWriteAddress
  2286  0975  f1                	pop	af
  2287  0976  d1                	pop	de
  2288                          l_vdp_loadColorTable_00107:
  2289  0977  1a                	ld	a, (de)
  2290  0978  d3a0              	out	(_IO_VDPDATA), a
  2291  097a  13                	inc	de
  2292  097b  e1                	pop	hl
  2293  097c  e5                	push	hl
  2294  097d  bf                	cp	a, a
  2295  097e  ed52              	sbc	hl, de
  2296  0980  20f5              	jr	NZ,l_vdp_loadColorTable_00107
  2297                          l_vdp_loadColorTable_00112:
  2298  0982  ddf9              	ld	sp, ix
  2299  0984  dde1              	pop	ix
  2300  0986  c9                	ret
  2301                          	SECTION code_compiler
  2302                          ;	---------------------------------
  2303                          ; Function vdp_colorizePattern
  2304                          ; ---------------------------------
  2305                          _vdp_colorizePattern:
  2306  0987  dde5              	push	ix
  2307  0989  dd210000          	ld	ix,0
  2308  098d  dd39              	add	ix,sp
  2309  098f  3b                	dec	sp
  2310  0990  dd6e04            	ld	l,(ix+4)
  2311  0993  2600              	ld	h,0x00
  2312  0995  29                	add	hl, hl
  2313  0996  29                	add	hl, hl
  2314  0997  29                	add	hl, hl
  2315  0998  4d                	ld	c, l
  2316  0999  44                	ld	b, h
  2317  099a  dd7e05            	ld	a,(ix+5)
  2318  099d  87                	add	a, a
  2319  099e  87                	add	a, a
  2320  099f  87                	add	a, a
  2321  09a0  87                	add	a, a
  2322  09a1  dd5e06            	ld	e,(ix+6)
  2323  09a4  83                	add	a, e
  2324  09a5  dd77ff            	ld	(ix-1),a
  2325  09a8  2ac904            	ld	hl, (__vdpColorTableAddr)
  2326  09ab  09                	add	hl, bc
  2327  09ac  c5                	push	bc
  2328  09ad  e5                	push	hl
  2329  09ae  cdae03            	call	_vdp_setWriteAddress
  2330  09b1  f1                	pop	af
  2331  09b2  c1                	pop	bc
  2332  09b3  1e00              	ld	e,0x00
  2333                          l_vdp_colorizePattern_00107:
  2334  09b5  7b                	ld	a, e
  2335  09b6  d608              	sub	a,0x08
  2336  09b8  3008              	jr	NC,l_vdp_colorizePattern_00101
  2337  09ba  dd7eff            	ld	a,(ix-1)
  2338  09bd  d3a0              	out	(_IO_VDPDATA), a
  2339  09bf  1c                	inc	e
  2340  09c0  18f3              	jr	l_vdp_colorizePattern_00107
  2341                          l_vdp_colorizePattern_00101:
  2342  09c2  3ad304            	ld	a, (__vdpSplitThirds+0)
  2343  09c5  b7                	or	a, a
  2344  09c6  283a              	jr	Z,l_vdp_colorizePattern_00115
  2345  09c8  2ac904            	ld	hl, (__vdpColorTableAddr)
  2346  09cb  110008            	ld	de,0x0800
  2347  09ce  19                	add	hl, de
  2348  09cf  09                	add	hl, bc
  2349  09d0  c5                	push	bc
  2350  09d1  e5                	push	hl
  2351  09d2  cdae03            	call	_vdp_setWriteAddress
  2352  09d5  f1                	pop	af
  2353  09d6  c1                	pop	bc
  2354  09d7  1e00              	ld	e,0x00
  2355                          l_vdp_colorizePattern_00110:
  2356  09d9  7b                	ld	a, e
  2357  09da  d608              	sub	a,0x08
  2358  09dc  3008              	jr	NC,l_vdp_colorizePattern_00102
  2359  09de  dd7eff            	ld	a,(ix-1)
  2360  09e1  d3a0              	out	(_IO_VDPDATA), a
  2361  09e3  1c                	inc	e
  2362  09e4  18f3              	jr	l_vdp_colorizePattern_00110
  2363                          l_vdp_colorizePattern_00102:
  2364  09e6  2ac904            	ld	hl, (__vdpColorTableAddr)
  2365  09e9  110010            	ld	de,0x1000
  2366  09ec  19                	add	hl, de
  2367  09ed  09                	add	hl, bc
  2368  09ee  e5                	push	hl
  2369  09ef  cdae03            	call	_vdp_setWriteAddress
  2370  09f2  f1                	pop	af
  2371  09f3  0e00              	ld	c,0x00
  2372                          l_vdp_colorizePattern_00113:
  2373  09f5  79                	ld	a, c
  2374  09f6  d608              	sub	a,0x08
  2375  09f8  3008              	jr	NC,l_vdp_colorizePattern_00115
  2376  09fa  dd7eff            	ld	a,(ix-1)
  2377  09fd  d3a0              	out	(_IO_VDPDATA), a
  2378  09ff  0c                	inc	c
  2379  0a00  18f3              	jr	l_vdp_colorizePattern_00113
  2380                          l_vdp_colorizePattern_00115:
  2381  0a02  33                	inc	sp
  2382  0a03  dde1              	pop	ix
  2383  0a05  c9                	ret
  2384                          	SECTION code_compiler
  2385                          ;	---------------------------------
  2386                          ; Function vdp_plotHires
  2387                          ; ---------------------------------
  2388                          _vdp_plotHires:
  2389  0a06  dde5              	push	ix
  2390  0a08  dd210000          	ld	ix,0
  2391  0a0c  dd39              	add	ix,sp
  2392  0a0e  f5                	push	af
  2393  0a0f  3b                	dec	sp
  2394  0a10  dd7e04            	ld	a,(ix+4)
  2395  0a13  dd77fd            	ld	(ix-3),a
  2396  0a16  dd36fe00          	ld	(ix-2),0x00
  2397  0a1a  e1                	pop	hl
  2398  0a1b  e5                	push	hl
  2399  0a1c  ddcbfe7e          	bit	7,(ix-2)
  2400  0a20  2806              	jr	Z,l_vdp_plotHires_00106
  2401  0a22  e1                	pop	hl
  2402  0a23  e5                	push	hl
  2403  0a24  110700            	ld	de,0x0007
  2404  0a27  19                	add	hl, de
  2405                          l_vdp_plotHires_00106:
  2406  0a28  cb2c              	sra	h
  2407  0a2a  cb1d              	rr	l
  2408  0a2c  cb2c              	sra	h
  2409  0a2e  cb1d              	rr	l
  2410  0a30  cb2c              	sra	h
  2411  0a32  cb1d              	rr	l
  2412  0a34  29                	add	hl, hl
  2413  0a35  29                	add	hl, hl
  2414  0a36  29                	add	hl, hl
  2415  0a37  dd4e05            	ld	c,(ix+5)
  2416  0a3a  0600              	ld	b,0x00
  2417  0a3c  79                	ld	a, c
  2418  0a3d  e607              	and	a,0x07
  2419  0a3f  5f                	ld	e, a
  2420  0a40  1600              	ld	d,0x00
  2421  0a42  19                	add	hl, de
  2422  0a43  eb                	ex	de, hl
  2423  0a44  69                	ld	l, c
  2424  0a45  60                	ld	h, b
  2425  0a46  cb78              	bit	7, b
  2426  0a48  2804              	jr	Z,l_vdp_plotHires_00107
  2427  0a4a  210700            	ld	hl,0x0007
  2428  0a4d  09                	add	hl, bc
  2429                          l_vdp_plotHires_00107:
  2430  0a4e  cb2c              	sra	h
  2431  0a50  cb1d              	rr	l
  2432  0a52  cb2c              	sra	h
  2433  0a54  cb1d              	rr	l
  2434  0a56  cb2c              	sra	h
  2435  0a58  cb1d              	rr	l
  2436  0a5a  65                	ld	h, l
  2437  0a5b  2e00              	ld	l,0x00
  2438  0a5d  19                	add	hl, de
  2439  0a5e  eb                	ex	de, hl
  2440  0a5f  2acb04            	ld	hl, (__vdpPatternGeneratorTableAddr)
  2441  0a62  19                	add	hl, de
  2442  0a63  d5                	push	de
  2443  0a64  e5                	push	hl
  2444  0a65  cdc303            	call	_vdp_setReadAddress
  2445  0a68  f1                	pop	af
  2446  0a69  d1                	pop	de
  2447  0a6a  dba0              	in	a, (_IO_VDPDATA)
  2448  0a6c  dd77ff            	ld	(ix-1),a
  2449  0a6f  2ac904            	ld	hl, (__vdpColorTableAddr)
  2450  0a72  19                	add	hl, de
  2451  0a73  d5                	push	de
  2452  0a74  e5                	push	hl
  2453  0a75  cdc303            	call	_vdp_setReadAddress
  2454  0a78  f1                	pop	af
  2455  0a79  d1                	pop	de
  2456  0a7a  dba0              	in	a, (_IO_VDPDATA)
  2457  0a7c  6f                	ld	l, a
  2458  0a7d  dd7efd            	ld	a,(ix-3)
  2459  0a80  e607              	and	a,0x07
  2460  0a82  f5                	push	af
  2461  0a83  018000            	ld	bc,0x0080
  2462  0a86  f1                	pop	af
  2463  0a87  3c                	inc	a
  2464  0a88  1804              	jr	l_vdp_plotHires_00124
  2465                          l_vdp_plotHires_00123:
  2466  0a8a  cb28              	sra	b
  2467  0a8c  cb19              	rr	c
  2468                          l_vdp_plotHires_00124:
  2469  0a8e  3d                	dec	a
  2470  0a8f  20f9              	jr	NZ, l_vdp_plotHires_00123
  2471  0a91  dd7e06            	ld	a,(ix+6)
  2472  0a94  b7                	or	a, a
  2473  0a95  2814              	jr	Z,l_vdp_plotHires_00102
  2474  0a97  79                	ld	a, c
  2475  0a98  ddb6ff            	or	a,(ix-1)
  2476  0a9b  4f                	ld	c, a
  2477  0a9c  7d                	ld	a, l
  2478  0a9d  e60f              	and	a,0x0f
  2479  0a9f  6f                	ld	l, a
  2480  0aa0  dd7e06            	ld	a,(ix+6)
  2481  0aa3  87                	add	a, a
  2482  0aa4  87                	add	a, a
  2483  0aa5  87                	add	a, a
  2484  0aa6  87                	add	a, a
  2485  0aa7  b5                	or	a, l
  2486  0aa8  47                	ld	b, a
  2487  0aa9  1811              	jr	l_vdp_plotHires_00103
  2488                          l_vdp_plotHires_00102:
  2489  0aab  79                	ld	a, c
  2490  0aac  2f                	cpl
  2491  0aad  dda6ff            	and	a,(ix-1)
  2492  0ab0  4f                	ld	c, a
  2493  0ab1  7d                	ld	a, l
  2494  0ab2  e6f0              	and	a,0xf0
  2495  0ab4  6f                	ld	l, a
  2496  0ab5  dd7e07            	ld	a,(ix+7)
  2497  0ab8  e60f              	and	a,0x0f
  2498  0aba  b5                	or	a, l
  2499  0abb  47                	ld	b, a
  2500                          l_vdp_plotHires_00103:
  2501  0abc  fd2acb04          	ld	iy, (__vdpPatternGeneratorTableAddr)
  2502  0ac0  fd19              	add	iy, de
  2503  0ac2  c5                	push	bc
  2504  0ac3  d5                	push	de
  2505  0ac4  fde5              	push	iy
  2506  0ac6  cdae03            	call	_vdp_setWriteAddress
  2507  0ac9  f1                	pop	af
  2508  0aca  d1                	pop	de
  2509  0acb  c1                	pop	bc
  2510  0acc  79                	ld	a, c
  2511  0acd  d3a0              	out	(_IO_VDPDATA), a
  2512  0acf  fd2ac904          	ld	iy, (__vdpColorTableAddr)
  2513  0ad3  fd19              	add	iy, de
  2514  0ad5  c5                	push	bc
  2515  0ad6  fde5              	push	iy
  2516  0ad8  cdae03            	call	_vdp_setWriteAddress
  2517  0adb  f1                	pop	af
  2518  0adc  c1                	pop	bc
  2519  0add  78                	ld	a, b
  2520  0ade  d3a0              	out	(_IO_VDPDATA), a
  2521  0ae0  ddf9              	ld	sp, ix
  2522  0ae2  dde1              	pop	ix
  2523  0ae4  c9                	ret
  2524                          	SECTION code_compiler
  2525                          ;	---------------------------------
  2526                          ; Function vdp_plotColor
  2527                          ; ---------------------------------
  2528                          _vdp_plotColor:
  2529  0ae5  dde5              	push	ix
  2530  0ae7  dd210000          	ld	ix,0
  2531  0aeb  dd39              	add	ix,sp
  2532  0aed  21f4ff            	ld	hl, -12
  2533  0af0  39                	add	hl, sp
  2534  0af1  f9                	ld	sp, hl
  2535  0af2  dd7e04            	ld	a,(ix+4)
  2536  0af5  dd77f4            	ld	(ix-12),a
  2537  0af8  dd36f500          	ld	(ix-11),0x00
  2538  0afc  dd7e05            	ld	a,(ix+5)
  2539  0aff  dd77f6            	ld	(ix-10),a
  2540  0b02  dd36f700          	ld	(ix-9),0x00
  2541  0b06  dd7ef5            	ld	a,(ix-11)
  2542  0b09  07                	rlca
  2543  0b0a  e601              	and	a,0x01
  2544  0b0c  dd77f8            	ld	(ix-8),a
  2545  0b0f  dd7ef4            	ld	a,(ix-12)
  2546  0b12  c601              	add	a,0x01
  2547  0b14  dd77f9            	ld	(ix-7),a
  2548  0b17  dd7ef5            	ld	a,(ix-11)
  2549  0b1a  ce00              	adc	a,0x00
  2550  0b1c  dd77fa            	ld	(ix-6),a
  2551  0b1f  dd7ef6            	ld	a,(ix-10)
  2552  0b22  e607              	and	a,0x07
  2553  0b24  dd77fb            	ld	(ix-5),a
  2554  0b27  dd36fc00          	ld	(ix-4),0x00
  2555  0b2b  dd7ef7            	ld	a,(ix-9)
  2556  0b2e  07                	rlca
  2557  0b2f  e601              	and	a,0x01
  2558  0b31  dd77fd            	ld	(ix-3),a
  2559  0b34  dd7ef6            	ld	a,(ix-10)
  2560  0b37  c607              	add	a,0x07
  2561  0b39  dd77fe            	ld	(ix-2),a
  2562  0b3c  dd7ef7            	ld	a,(ix-9)
  2563  0b3f  ce00              	adc	a,0x00
  2564  0b41  dd77ff            	ld	(ix-1),a
  2565  0b44  3ad104            	ld	a, (__vdpMode+0)
  2566  0b47  d602              	sub	a,0x02
  2567  0b49  2078              	jr	NZ,l_vdp_plotColor_00110
  2568  0b4b  e1                	pop	hl
  2569  0b4c  e5                	push	hl
  2570  0b4d  dd7ef8            	ld	a,(ix-8)
  2571  0b50  b7                	or	a, a
  2572  0b51  2806              	jr	Z,l_vdp_plotColor_00114
  2573  0b53  dd6ef9            	ld	l,(ix-7)
  2574  0b56  dd66fa            	ld	h,(ix-6)
  2575                          l_vdp_plotColor_00114:
  2576  0b59  cb2c              	sra	h
  2577  0b5b  cb1d              	rr	l
  2578  0b5d  29                	add	hl, hl
  2579  0b5e  29                	add	hl, hl
  2580  0b5f  29                	add	hl, hl
  2581  0b60  eb                	ex	de, hl
  2582  0b61  2acb04            	ld	hl, (__vdpPatternGeneratorTableAddr)
  2583  0b64  19                	add	hl, de
  2584  0b65  dd4efb            	ld	c,(ix-5)
  2585  0b68  dd46fc            	ld	b,(ix-4)
  2586  0b6b  09                	add	hl, bc
  2587  0b6c  d1                	pop	de
  2588  0b6d  c1                	pop	bc
  2589  0b6e  c5                	push	bc
  2590  0b6f  d5                	push	de
  2591  0b70  dd7efd            	ld	a,(ix-3)
  2592  0b73  b7                	or	a, a
  2593  0b74  2806              	jr	Z,l_vdp_plotColor_00115
  2594  0b76  dd4efe            	ld	c,(ix-2)
  2595  0b79  dd46ff            	ld	b,(ix-1)
  2596                          l_vdp_plotColor_00115:
  2597  0b7c  cb28              	sra	b
  2598  0b7e  cb19              	rr	c
  2599  0b80  cb28              	sra	b
  2600  0b82  cb19              	rr	c
  2601  0b84  cb28              	sra	b
  2602  0b86  cb19              	rr	c
  2603  0b88  41                	ld	b, c
  2604  0b89  0e00              	ld	c,0x00
  2605  0b8b  09                	add	hl, bc
  2606  0b8c  e5                	push	hl
  2607  0b8d  e5                	push	hl
  2608  0b8e  cdc303            	call	_vdp_setReadAddress
  2609  0b91  f1                	pop	af
  2610  0b92  e1                	pop	hl
  2611  0b93  dba0              	in	a, (_IO_VDPDATA)
  2612  0b95  47                	ld	b, a
  2613  0b96  c5                	push	bc
  2614  0b97  e5                	push	hl
  2615  0b98  cdae03            	call	_vdp_setWriteAddress
  2616  0b9b  f1                	pop	af
  2617  0b9c  c1                	pop	bc
  2618  0b9d  dd4e04            	ld	c,(ix+4)
  2619  0ba0  78                	ld	a, b
  2620  0ba1  cb41              	bit	0, c
  2621  0ba3  280e              	jr	Z,l_vdp_plotColor_00102
  2622  0ba5  e6f0              	and	a,0xf0
  2623  0ba7  4f                	ld	c, a
  2624  0ba8  dd7e06            	ld	a,(ix+6)
  2625  0bab  e60f              	and	a,0x0f
  2626  0bad  81                	add	a, c
  2627  0bae  d3a0              	out	(_IO_VDPDATA), a
  2628  0bb0  c38e0c            	jp	l_vdp_plotColor_00112
  2629                          l_vdp_plotColor_00102:
  2630  0bb3  e60f              	and	a,0x0f
  2631  0bb5  4f                	ld	c, a
  2632  0bb6  dd7e06            	ld	a,(ix+6)
  2633  0bb9  87                	add	a, a
  2634  0bba  87                	add	a, a
  2635  0bbb  87                	add	a, a
  2636  0bbc  87                	add	a, a
  2637  0bbd  81                	add	a, c
  2638  0bbe  d3a0              	out	(_IO_VDPDATA), a
  2639  0bc0  c38e0c            	jp	l_vdp_plotColor_00112
  2640                          l_vdp_plotColor_00110:
  2641  0bc3  3ad104            	ld	a, (__vdpMode+0)
  2642  0bc6  3d                	dec	a
  2643  0bc7  c28e0c            	jp	NZ,l_vdp_plotColor_00112
  2644  0bca  e1                	pop	hl
  2645  0bcb  e5                	push	hl
  2646  0bcc  dd7ef8            	ld	a,(ix-8)
  2647  0bcf  b7                	or	a, a
  2648  0bd0  2806              	jr	Z,l_vdp_plotColor_00116
  2649  0bd2  dd6ef9            	ld	l,(ix-7)
  2650  0bd5  dd66fa            	ld	h,(ix-6)
  2651                          l_vdp_plotColor_00116:
  2652  0bd8  cb2c              	sra	h
  2653  0bda  cb1d              	rr	l
  2654  0bdc  29                	add	hl, hl
  2655  0bdd  29                	add	hl, hl
  2656  0bde  29                	add	hl, hl
  2657  0bdf  dd5efb            	ld	e,(ix-5)
  2658  0be2  dd56fc            	ld	d,(ix-4)
  2659  0be5  19                	add	hl, de
  2660  0be6  dd5ef6            	ld	e,(ix-10)
  2661  0be9  dd56f7            	ld	d,(ix-9)
  2662  0bec  dd7efd            	ld	a,(ix-3)
  2663  0bef  b7                	or	a, a
  2664  0bf0  2806              	jr	Z,l_vdp_plotColor_00117
  2665  0bf2  dd5efe            	ld	e,(ix-2)
  2666  0bf5  dd56ff            	ld	d,(ix-1)
  2667                          l_vdp_plotColor_00117:
  2668  0bf8  cb2a              	sra	d
  2669  0bfa  cb1b              	rr	e
  2670  0bfc  cb2a              	sra	d
  2671  0bfe  cb1b              	rr	e
  2672  0c00  cb2a              	sra	d
  2673  0c02  cb1b              	rr	e
  2674  0c04  43                	ld	b, e
  2675  0c05  0e00              	ld	c,0x00
  2676  0c07  09                	add	hl, bc
  2677  0c08  dd75fc            	ld	(ix-4),l
  2678  0c0b  dd74fd            	ld	(ix-3),h
  2679  0c0e  fd2ac904          	ld	iy, (__vdpColorTableAddr)
  2680  0c12  dd5efc            	ld	e,(ix-4)
  2681  0c15  dd56fd            	ld	d,(ix-3)
  2682  0c18  fd19              	add	iy, de
  2683  0c1a  fde5              	push	iy
  2684  0c1c  cdc303            	call	_vdp_setReadAddress
  2685  0c1f  f1                	pop	af
  2686  0c20  dba0              	in	a, (_IO_VDPDATA)
  2687  0c22  dd77ff            	ld	(ix-1),a
  2688  0c25  dd7e04            	ld	a,(ix+4)
  2689  0c28  0f                	rrca
  2690  0c29  381d              	jr	C,l_vdp_plotColor_00105
  2691  0c2b  dd7eff            	ld	a,(ix-1)
  2692  0c2e  e60f              	and	a,0x0f
  2693  0c30  dd77fb            	ld	(ix-5),a
  2694  0c33  dd7e06            	ld	a,(ix+6)
  2695  0c36  dd77ff            	ld	(ix-1),a
  2696  0c39  87                	add	a, a
  2697  0c3a  87                	add	a, a
  2698  0c3b  87                	add	a, a
  2699  0c3c  87                	add	a, a
  2700  0c3d  dd77ff            	ld	(ix-1),a
  2701  0c40  ddb6fb            	or	a,(ix-5)
  2702  0c43  dd77ff            	ld	(ix-1),a
  2703  0c46  1819              	jr	l_vdp_plotColor_00106
  2704                          l_vdp_plotColor_00105:
  2705  0c48  dd7eff            	ld	a,(ix-1)
  2706  0c4b  e6f0              	and	a,0xf0
  2707  0c4d  dd77fe            	ld	(ix-2),a
  2708  0c50  dd7e06            	ld	a,(ix+6)
  2709  0c53  dd77ff            	ld	(ix-1),a
  2710  0c56  e60f              	and	a,0x0f
  2711  0c58  dd77ff            	ld	(ix-1),a
  2712  0c5b  ddb6fe            	or	a,(ix-2)
  2713  0c5e  dd77ff            	ld	(ix-1),a
  2714                          l_vdp_plotColor_00106:
  2715  0c61  fd2acb04          	ld	iy, (__vdpPatternGeneratorTableAddr)
  2716  0c65  dd5efc            	ld	e,(ix-4)
  2717  0c68  dd56fd            	ld	d,(ix-3)
  2718  0c6b  fd19              	add	iy, de
  2719  0c6d  fde5              	push	iy
  2720  0c6f  cdae03            	call	_vdp_setWriteAddress
  2721  0c72  f1                	pop	af
  2722  0c73  3ef0              	ld	a,0xf0
  2723  0c75  d3a0              	out	(_IO_VDPDATA), a
  2724  0c77  fd2ac904          	ld	iy, (__vdpColorTableAddr)
  2725  0c7b  dd5efc            	ld	e,(ix-4)
  2726  0c7e  dd56fd            	ld	d,(ix-3)
  2727  0c81  fd19              	add	iy, de
  2728  0c83  fde5              	push	iy
  2729  0c85  cdae03            	call	_vdp_setWriteAddress
  2730  0c88  f1                	pop	af
  2731  0c89  dd7eff            	ld	a,(ix-1)
  2732  0c8c  d3a0              	out	(_IO_VDPDATA), a
  2733                          l_vdp_plotColor_00112:
  2734  0c8e  ddf9              	ld	sp, ix
  2735  0c90  dde1              	pop	ix
  2736  0c92  c9                	ret
  2737                          	SECTION code_compiler
  2738                          ;	---------------------------------
  2739                          ; Function vdp_disableSprite
  2740                          ; ---------------------------------
  2741                          _vdp_disableSprite:
  2742  0c93  fd210200          	ld	iy,2
  2743  0c97  fd39              	add	iy, sp
  2744  0c99  fd6e00            	ld	l,(iy+0)
  2745  0c9c  2600              	ld	h,0x00
  2746  0c9e  29                	add	hl, hl
  2747  0c9f  29                	add	hl, hl
  2748  0ca0  eb                	ex	de, hl
  2749  0ca1  2ac204            	ld	hl, (__vdpSpriteAttributeTableAddr)
  2750  0ca4  19                	add	hl, de
  2751  0ca5  e5                	push	hl
  2752  0ca6  cdae03            	call	_vdp_setWriteAddress
  2753  0ca9  f1                	pop	af
  2754  0caa  3ec0              	ld	a,0xc0
  2755  0cac  d3a0              	out	(_IO_VDPDATA), a
  2756  0cae  3e00              	ld	a,0x00
  2757  0cb0  d3a0              	out	(_IO_VDPDATA), a
  2758  0cb2  3e00              	ld	a,0x00
  2759  0cb4  d3a0              	out	(_IO_VDPDATA), a
  2760  0cb6  3e80              	ld	a,0x80
  2761  0cb8  d3a0              	out	(_IO_VDPDATA), a
  2762  0cba  c9                	ret
  2763                          	SECTION code_compiler
  2764                          ;	---------------------------------
  2765                          ; Function vdp_loadSpritePatternNameTable
  2766                          ; ---------------------------------
  2767                          _vdp_loadSpritePatternNameTable:
  2768  0cbb  dde5              	push	ix
  2769  0cbd  dd210000          	ld	ix,0
  2770  0cc1  dd39              	add	ix,sp
  2771  0cc3  0600              	ld	b,0x00
  2772                          l_vdp_loadSpritePatternNameTable_00108:
  2773  0cc5  78                	ld	a, b
  2774  0cc6  d620              	sub	a,0x20
  2775  0cc8  300b              	jr	NC,l_vdp_loadSpritePatternNameTable_00101
  2776  0cca  c5                	push	bc
  2777  0ccb  c5                	push	bc
  2778  0ccc  33                	inc	sp
  2779  0ccd  cd930c            	call	_vdp_disableSprite
  2780  0cd0  33                	inc	sp
  2781  0cd1  c1                	pop	bc
  2782  0cd2  04                	inc	b
  2783  0cd3  18f0              	jr	l_vdp_loadSpritePatternNameTable_00108
  2784                          l_vdp_loadSpritePatternNameTable_00101:
  2785  0cd5  3ac604            	ld	a, (__vdpSpriteSizeSelected+0)
  2786  0cd8  b7                	or	a, a
  2787  0cd9  282a              	jr	Z,l_vdp_loadSpritePatternNameTable_00105
  2788  0cdb  2ac404            	ld	hl, (__vdpSpriteGeneratorTableAddr)
  2789  0cde  e5                	push	hl
  2790  0cdf  cdae03            	call	_vdp_setWriteAddress
  2791  0ce2  f1                	pop	af
  2792  0ce3  dd6e04            	ld	l,(ix+4)
  2793  0ce6  dd6605            	ld	h,(ix+5)
  2794  0ce9  29                	add	hl, hl
  2795  0cea  29                	add	hl, hl
  2796  0ceb  29                	add	hl, hl
  2797  0cec  29                	add	hl, hl
  2798  0ced  29                	add	hl, hl
  2799  0cee  eb                	ex	de,hl
  2800  0cef  010000            	ld	bc,0x0000
  2801                          l_vdp_loadSpritePatternNameTable_00111:
  2802  0cf2  79                	ld	a, c
  2803  0cf3  93                	sub	a, e
  2804  0cf4  78                	ld	a, b
  2805  0cf5  9a                	sbc	a, d
  2806  0cf6  3035              	jr	NC,l_vdp_loadSpritePatternNameTable_00116
  2807  0cf8  dd6e06            	ld	l,(ix+6)
  2808  0cfb  dd6607            	ld	h,(ix+7)
  2809  0cfe  09                	add	hl, bc
  2810  0cff  7e                	ld	a, (hl)
  2811  0d00  d3a0              	out	(_IO_VDPDATA), a
  2812  0d02  03                	inc	bc
  2813  0d03  18ed              	jr	l_vdp_loadSpritePatternNameTable_00111
  2814                          l_vdp_loadSpritePatternNameTable_00105:
  2815  0d05  2ac404            	ld	hl, (__vdpSpriteGeneratorTableAddr)
  2816  0d08  e5                	push	hl
  2817  0d09  cdae03            	call	_vdp_setWriteAddress
  2818  0d0c  f1                	pop	af
  2819  0d0d  dd6e04            	ld	l,(ix+4)
  2820  0d10  dd6605            	ld	h,(ix+5)
  2821  0d13  29                	add	hl, hl
  2822  0d14  29                	add	hl, hl
  2823  0d15  29                	add	hl, hl
  2824  0d16  eb                	ex	de,hl
  2825  0d17  010000            	ld	bc,0x0000
  2826                          l_vdp_loadSpritePatternNameTable_00114:
  2827  0d1a  79                	ld	a, c
  2828  0d1b  93                	sub	a, e
  2829  0d1c  78                	ld	a, b
  2830  0d1d  9a                	sbc	a, d
  2831  0d1e  300d              	jr	NC,l_vdp_loadSpritePatternNameTable_00116
  2832  0d20  dd6e06            	ld	l,(ix+6)
  2833  0d23  dd6607            	ld	h,(ix+7)
  2834  0d26  09                	add	hl, bc
  2835  0d27  7e                	ld	a, (hl)
  2836  0d28  d3a0              	out	(_IO_VDPDATA), a
  2837  0d2a  03                	inc	bc
  2838  0d2b  18ed              	jr	l_vdp_loadSpritePatternNameTable_00114
  2839                          l_vdp_loadSpritePatternNameTable_00116:
  2840  0d2d  dde1              	pop	ix
  2841  0d2f  c9                	ret
  2842                          	SECTION code_compiler
  2843                          ;	---------------------------------
  2844                          ; Function vdp_spriteInit
  2845                          ; ---------------------------------
  2846                          _vdp_spriteInit:
  2847  0d30  dde5              	push	ix
  2848  0d32  dd210000          	ld	ix,0
  2849  0d36  dd39              	add	ix,sp
  2850  0d38  dd6e04            	ld	l,(ix+4)
  2851  0d3b  2600              	ld	h,0x00
  2852  0d3d  29                	add	hl, hl
  2853  0d3e  29                	add	hl, hl
  2854  0d3f  eb                	ex	de, hl
  2855  0d40  2ac204            	ld	hl, (__vdpSpriteAttributeTableAddr)
  2856  0d43  19                	add	hl, de
  2857  0d44  e5                	push	hl
  2858  0d45  cdae03            	call	_vdp_setWriteAddress
  2859  0d48  f1                	pop	af
  2860  0d49  dd7e07            	ld	a,(ix+7)
  2861  0d4c  d3a0              	out	(_IO_VDPDATA), a
  2862  0d4e  dd7e06            	ld	a,(ix+6)
  2863  0d51  d3a0              	out	(_IO_VDPDATA), a
  2864  0d53  dd4e05            	ld	c,(ix+5)
  2865  0d56  3ac604            	ld	a, (__vdpSpriteSizeSelected+0)
  2866  0d59  b7                	or	a, a
  2867  0d5a  2807              	jr	Z,l_vdp_spriteInit_00102
  2868  0d5c  79                	ld	a, c
  2869  0d5d  87                	add	a, a
  2870  0d5e  87                	add	a, a
  2871  0d5f  d3a0              	out	(_IO_VDPDATA), a
  2872  0d61  1803              	jr	l_vdp_spriteInit_00103
  2873                          l_vdp_spriteInit_00102:
  2874  0d63  79                	ld	a, c
  2875  0d64  d3a0              	out	(_IO_VDPDATA), a
  2876                          l_vdp_spriteInit_00103:
  2877  0d66  dd7e08            	ld	a,(ix+8)
  2878  0d69  e60f              	and	a,0x0f
  2879  0d6b  d3a0              	out	(_IO_VDPDATA), a
  2880  0d6d  dd6e04            	ld	l,(ix+4)
  2881  0d70  dde1              	pop	ix
  2882  0d72  c9                	ret
  2883                          	SECTION code_compiler
  2884                          ;	---------------------------------
  2885                          ; Function vdp_setSpriteColor
  2886                          ; ---------------------------------
  2887                          _vdp_setSpriteColor:
  2888  0d73  fd210200          	ld	iy,2
  2889  0d77  fd39              	add	iy, sp
  2890  0d79  fd6e00            	ld	l,(iy+0)
  2891  0d7c  2600              	ld	h,0x00
  2892  0d7e  29                	add	hl, hl
  2893  0d7f  29                	add	hl, hl
  2894  0d80  eb                	ex	de, hl
  2895  0d81  2ac204            	ld	hl, (__vdpSpriteAttributeTableAddr)
  2896  0d84  19                	add	hl, de
  2897  0d85  23                	inc	hl
  2898  0d86  23                	inc	hl
  2899  0d87  23                	inc	hl
  2900  0d88  e5                	push	hl
  2901  0d89  cdae03            	call	_vdp_setWriteAddress
  2902  0d8c  f1                	pop	af
  2903  0d8d  210300            	ld	hl,3+0
  2904  0d90  39                	add	hl, sp
  2905  0d91  7e                	ld	a, (hl)
  2906  0d92  e60f              	and	a,0x0f
  2907  0d94  d3a0              	out	(_IO_VDPDATA), a
  2908  0d96  c9                	ret
  2909                          	SECTION code_compiler
  2910                          ;	---------------------------------
  2911                          ; Function vdp_setSpritePosition
  2912                          ; ---------------------------------
  2913                          _vdp_setSpritePosition:
  2914  0d97  fd210200          	ld	iy,2
  2915  0d9b  fd39              	add	iy, sp
  2916  0d9d  fd6e00            	ld	l,(iy+0)
  2917  0da0  2600              	ld	h,0x00
  2918  0da2  29                	add	hl, hl
  2919  0da3  29                	add	hl, hl
  2920  0da4  eb                	ex	de, hl
  2921  0da5  2ac204            	ld	hl, (__vdpSpriteAttributeTableAddr)
  2922  0da8  19                	add	hl, de
  2923  0da9  e5                	push	hl
  2924  0daa  cdae03            	call	_vdp_setWriteAddress
  2925  0dad  f1                	pop	af
  2926  0dae  fd210400          	ld	iy,4
  2927  0db2  fd39              	add	iy, sp
  2928  0db4  fd7e00            	ld	a,(iy+0)
  2929  0db7  d3a0              	out	(_IO_VDPDATA), a
  2930  0db9  fd2b              	dec	iy
  2931  0dbb  fd7e00            	ld	a,(iy+0)
  2932  0dbe  d3a0              	out	(_IO_VDPDATA), a
  2933  0dc0  c9                	ret
  2934                          	SECTION code_compiler
  2935                          ;	---------------------------------
  2936                          ; Function vdp_setSpritePositionAndColor
  2937                          ; ---------------------------------
  2938                          _vdp_setSpritePositionAndColor:
  2939  0dc1  fd210200          	ld	iy,2
  2940  0dc5  fd39              	add	iy, sp
  2941  0dc7  fd6e00            	ld	l,(iy+0)
  2942  0dca  2600              	ld	h,0x00
  2943  0dcc  29                	add	hl, hl
  2944  0dcd  29                	add	hl, hl
  2945  0dce  eb                	ex	de, hl
  2946  0dcf  2ac204            	ld	hl, (__vdpSpriteAttributeTableAddr)
  2947  0dd2  19                	add	hl, de
  2948  0dd3  e5                	push	hl
  2949  0dd4  cdae03            	call	_vdp_setWriteAddress
  2950  0dd7  f1                	pop	af
  2951  0dd8  fd210400          	ld	iy,4
  2952  0ddc  fd39              	add	iy, sp
  2953  0dde  fd7e00            	ld	a,(iy+0)
  2954  0de1  d3a0              	out	(_IO_VDPDATA), a
  2955  0de3  fd2b              	dec	iy
  2956  0de5  fd7e00            	ld	a,(iy+0)
  2957  0de8  d3a0              	out	(_IO_VDPDATA), a
  2958  0dea  fd2b              	dec	iy
  2959  0dec  fd7e00            	ld	a,(iy+0)
  2960  0def  d3a0              	out	(_IO_VDPDATA), a
  2961  0df1  fd7e03            	ld	a,(iy+0+1+1+1)
  2962  0df4  e60f              	and	a,0x0f
  2963  0df6  d3a0              	out	(_IO_VDPDATA), a
  2964  0df8  c9                	ret
  2965                          	SECTION code_compiler
  2966                          ;	---------------------------------
  2967                          ; Function vdp_getSpritePosition
  2968                          ; ---------------------------------
  2969                          _vdp_getSpritePosition:
  2970  0df9  fd210200          	ld	iy,2
  2971  0dfd  fd39              	add	iy, sp
  2972  0dff  fd6e00            	ld	l,(iy+0)
  2973  0e02  2600              	ld	h,0x00
  2974  0e04  29                	add	hl, hl
  2975  0e05  29                	add	hl, hl
  2976  0e06  eb                	ex	de, hl
  2977  0e07  2ac204            	ld	hl, (__vdpSpriteAttributeTableAddr)
  2978  0e0a  19                	add	hl, de
  2979  0e0b  e5                	push	hl
  2980  0e0c  cdc303            	call	_vdp_setReadAddress
  2981  0e0f  f1                	pop	af
  2982  0e10  fd210500          	ld	iy,5
  2983  0e14  fd39              	add	iy, sp
  2984  0e16  fd4e00            	ld	c,(iy+0)
  2985  0e19  fd4601            	ld	b,(iy+1)
  2986  0e1c  dba0              	in	a, (_IO_VDPDATA)
  2987  0e1e  02                	ld	(bc), a
  2988  0e1f  fd2b              	dec	iy
  2989  0e21  fd2b              	dec	iy
  2990  0e23  fd4e00            	ld	c,(iy+0)
  2991  0e26  fd4601            	ld	b,(iy+1)
  2992  0e29  dba0              	in	a, (_IO_VDPDATA)
  2993  0e2b  02                	ld	(bc), a
  2994  0e2c  c9                	ret
  2995                          	SECTION code_compiler
  2996                          ;	---------------------------------
  2997                          ; Function vdp_print
  2998                          ; ---------------------------------
  2999                          _vdp_print:
  3000  0e2d  e1                	pop	hl
  3001  0e2e  c1                	pop	bc
  3002  0e2f  c5                	push	bc
  3003  0e30  e5                	push	hl
  3004                          l_vdp_print_00101:
  3005  0e31  0a                	ld	a, (bc)
  3006  0e32  b7                	or	a, a
  3007  0e33  c8                	ret	Z
  3008  0e34  c5                	push	bc
  3009  0e35  f5                	push	af
  3010  0e36  33                	inc	sp
  3011  0e37  cd9a0f            	call	_vdp_write
  3012  0e3a  33                	inc	sp
  3013  0e3b  c1                	pop	bc
  3014  0e3c  03                	inc	bc
  3015  0e3d  18f2              	jr	l_vdp_print_00101
  3016                          	SECTION code_compiler
  3017                          ;	---------------------------------
  3018                          ; Function vdp_printColorized
  3019                          ; ---------------------------------
  3020                          _vdp_printColorized:
  3021  0e3f  e1                	pop	hl
  3022  0e40  c1                	pop	bc
  3023  0e41  c5                	push	bc
  3024  0e42  e5                	push	hl
  3025                          l_vdp_printColorized_00101:
  3026  0e43  0a                	ld	a, (bc)
  3027  0e44  b7                	or	a, a
  3028  0e45  c8                	ret	Z
  3029  0e46  c5                	push	bc
  3030  0e47  fd210700          	ld	iy,7
  3031  0e4b  fd39              	add	iy, sp
  3032  0e4d  fd6600            	ld	h,(iy+0)
  3033  0e50  e5                	push	hl
  3034  0e51  33                	inc	sp
  3035  0e52  fd2b              	dec	iy
  3036  0e54  fd6600            	ld	h,(iy+0)
  3037  0e57  e5                	push	hl
  3038  0e58  33                	inc	sp
  3039  0e59  f5                	push	af
  3040  0e5a  33                	inc	sp
  3041  0e5b  cd8709            	call	_vdp_colorizePattern
  3042  0e5e  f1                	pop	af
  3043  0e5f  33                	inc	sp
  3044  0e60  c1                	pop	bc
  3045  0e61  0a                	ld	a, (bc)
  3046  0e62  c5                	push	bc
  3047  0e63  f5                	push	af
  3048  0e64  33                	inc	sp
  3049  0e65  cd9a0f            	call	_vdp_write
  3050  0e68  33                	inc	sp
  3051  0e69  c1                	pop	bc
  3052  0e6a  03                	inc	bc
  3053  0e6b  18d6              	jr	l_vdp_printColorized_00101
  3054                          	SECTION code_compiler
  3055                          ;	---------------------------------
  3056                          ; Function vdp_printPart
  3057                          ; ---------------------------------
  3058                          _vdp_printPart:
  3059  0e6d  dde5              	push	ix
  3060  0e6f  dd210000          	ld	ix,0
  3061  0e73  dd39              	add	ix,sp
  3062  0e75  dd7e08            	ld	a,(ix+8)
  3063  0e78  dd8604            	add	a,(ix+4)
  3064  0e7b  4f                	ld	c, a
  3065  0e7c  dd7e09            	ld	a,(ix+9)
  3066  0e7f  dd8e05            	adc	a,(ix+5)
  3067  0e82  47                	ld	b, a
  3068  0e83  dd6e06            	ld	l,(ix+6)
  3069  0e86  dd6607            	ld	h,(ix+7)
  3070  0e89  09                	add	hl, bc
  3071  0e8a  eb                	ex	de, hl
  3072                          l_vdp_printPart_00101:
  3073  0e8b  69                	ld	l, c
  3074  0e8c  60                	ld	h, b
  3075  0e8d  bf                	cp	a, a
  3076  0e8e  ed52              	sbc	hl, de
  3077  0e90  280e              	jr	Z,l_vdp_printPart_00104
  3078  0e92  0a                	ld	a, (bc)
  3079  0e93  c5                	push	bc
  3080  0e94  d5                	push	de
  3081  0e95  f5                	push	af
  3082  0e96  33                	inc	sp
  3083  0e97  cd9a0f            	call	_vdp_write
  3084  0e9a  33                	inc	sp
  3085  0e9b  d1                	pop	de
  3086  0e9c  c1                	pop	bc
  3087  0e9d  03                	inc	bc
  3088  0e9e  18eb              	jr	l_vdp_printPart_00101
  3089                          l_vdp_printPart_00104:
  3090  0ea0  dde1              	pop	ix
  3091  0ea2  c9                	ret
  3092                          	SECTION code_compiler
  3093                          ;	---------------------------------
  3094                          ; Function vdp_newLine
  3095                          ; ---------------------------------
  3096                          _vdp_newLine:
  3097  0ea3  110900            	ld	de,_vdp_cursor + 1
  3098  0ea6  1a                	ld	a, (de)
  3099  0ea7  4f                	ld	c, a
  3100  0ea8  3a0c00            	ld	a, (__autoScrollBottomRow+0)
  3101  0eab  91                	sub	a, c
  3102  0eac  201b              	jr	NZ,l_vdp_newLine_00104
  3103  0eae  3ad204            	ld	a, (__autoScroll+0)
  3104  0eb1  b7                	or	a, a
  3105  0eb2  280e              	jr	Z,l_vdp_newLine_00102
  3106  0eb4  3a0c00            	ld	a, (__autoScrollBottomRow+0)
  3107  0eb7  f5                	push	af
  3108  0eb8  33                	inc	sp
  3109  0eb9  3a0b00            	ld	a, (__autoScrollTopRow+0)
  3110  0ebc  f5                	push	af
  3111  0ebd  33                	inc	sp
  3112  0ebe  cdf210            	call	_vdp_scrollTextUp
  3113  0ec1  f1                	pop	af
  3114                          l_vdp_newLine_00102:
  3115  0ec2  210800            	ld	hl,_vdp_cursor
  3116  0ec5  3600              	ld	(hl),0x00
  3117  0ec7  180c              	jr	l_vdp_newLine_00106
  3118                          l_vdp_newLine_00104:
  3119  0ec9  79                	ld	a, c
  3120  0eca  3c                	inc	a
  3121  0ecb  12                	ld	(de), a
  3122  0ecc  f5                	push	af
  3123  0ecd  33                	inc	sp
  3124  0ece  af                	xor	a, a
  3125  0ecf  f5                	push	af
  3126  0ed0  33                	inc	sp
  3127  0ed1  cde30e            	call	_vdp_setCursor2
  3128  0ed4  f1                	pop	af
  3129                          l_vdp_newLine_00106:
  3130  0ed5  c9                	ret
  3131                          	SECTION code_compiler
  3132                          ;	---------------------------------
  3133                          ; Function vdp_setBackDropColor
  3134                          ; ---------------------------------
  3135                          _vdp_setBackDropColor:
  3136  0ed6  210200            	ld	hl,2+0
  3137  0ed9  39                	add	hl, sp
  3138  0eda  56                	ld	d, (hl)
  3139  0edb  1e07              	ld	e,0x07
  3140  0edd  d5                	push	de
  3141  0ede  cd9903            	call	_vdp_setRegister
  3142  0ee1  f1                	pop	af
  3143  0ee2  c9                	ret
  3144                          	SECTION code_compiler
  3145                          ;	---------------------------------
  3146                          ; Function vdp_setCursor2
  3147                          ; ---------------------------------
  3148                          _vdp_setCursor2:
  3149  0ee3  dde5              	push	ix
  3150  0ee5  dd210000          	ld	ix,0
  3151  0ee9  dd39              	add	ix,sp
  3152  0eeb  3acd04            	ld	a,(__vdpCursorMaxX)
  3153  0eee  dd9604            	sub	a,(ix+4)
  3154  0ef1  3007              	jr	NC,l_vdp_setCursor2_00102
  3155  0ef3  dd360400          	ld	(ix+4),0x00
  3156  0ef7  dd3405            	inc	(ix+5)
  3157                          l_vdp_setCursor2_00102:
  3158  0efa  3a0000            	ld	a, (__vdpCursorMaxY+0)
  3159  0efd  4f                	ld	c,a
  3160  0efe  dd9605            	sub	a,(ix+5)
  3161  0f01  3003              	jr	NC,l_vdp_setCursor2_00104
  3162  0f03  dd7105            	ld	(ix+5),c
  3163                          l_vdp_setCursor2_00104:
  3164  0f06  210800            	ld	hl,_vdp_cursor
  3165  0f09  dd7e04            	ld	a,(ix+4)
  3166  0f0c  77                	ld	(hl), a
  3167  0f0d  210900            	ld	hl, +(_vdp_cursor + 1)
  3168  0f10  dd7e05            	ld	a,(ix+5)
  3169  0f13  77                	ld	(hl), a
  3170  0f14  dde1              	pop	ix
  3171  0f16  c9                	ret
  3172                          	SECTION code_compiler
  3173                          ;	---------------------------------
  3174                          ; Function vdp_setCursor
  3175                          ; ---------------------------------
  3176                          _vdp_setCursor:
  3177  0f17  fd210200          	ld	iy,2
  3178  0f1b  fd39              	add	iy, sp
  3179  0f1d  fd7e00            	ld	a,(iy+0)
  3180  0f20  b7                	or	a, a
  3181  0f21  2816              	jr	Z,l_vdp_setCursor_00101
  3182  0f23  fd7e00            	ld	a,(iy+0)
  3183  0f26  3d                	dec	a
  3184  0f27  2822              	jr	Z,l_vdp_setCursor_00102
  3185  0f29  fd7e00            	ld	a,(iy+0)
  3186  0f2c  d602              	sub	a,0x02
  3187  0f2e  282d              	jr	Z,l_vdp_setCursor_00103
  3188  0f30  fd7e00            	ld	a,(iy+0)
  3189  0f33  d603              	sub	a,0x03
  3190  0f35  2838              	jr	Z,l_vdp_setCursor_00104
  3191  0f37  1846              	jr	l_vdp_setCursor_00106
  3192                          l_vdp_setCursor_00101:
  3193  0f39  3a0900            	ld	a, (_vdp_cursor + 1)
  3194  0f3c  3d                	dec	a
  3195  0f3d  210800            	ld	hl,_vdp_cursor + 0
  3196  0f40  46                	ld	b, (hl)
  3197  0f41  f5                	push	af
  3198  0f42  33                	inc	sp
  3199  0f43  c5                	push	bc
  3200  0f44  33                	inc	sp
  3201  0f45  cde30e            	call	_vdp_setCursor2
  3202  0f48  f1                	pop	af
  3203  0f49  1834              	jr	l_vdp_setCursor_00106
  3204                          l_vdp_setCursor_00102:
  3205  0f4b  3a0900            	ld	a, (_vdp_cursor + 1)
  3206  0f4e  3c                	inc	a
  3207  0f4f  210800            	ld	hl,_vdp_cursor + 0
  3208  0f52  46                	ld	b, (hl)
  3209  0f53  f5                	push	af
  3210  0f54  33                	inc	sp
  3211  0f55  c5                	push	bc
  3212  0f56  33                	inc	sp
  3213  0f57  cde30e            	call	_vdp_setCursor2
  3214  0f5a  f1                	pop	af
  3215  0f5b  1822              	jr	l_vdp_setCursor_00106
  3216                          l_vdp_setCursor_00103:
  3217  0f5d  210900            	ld	hl,_vdp_cursor + 1
  3218  0f60  46                	ld	b, (hl)
  3219  0f61  3a0800            	ld	a, (_vdp_cursor + 0)
  3220  0f64  3d                	dec	a
  3221  0f65  c5                	push	bc
  3222  0f66  33                	inc	sp
  3223  0f67  f5                	push	af
  3224  0f68  33                	inc	sp
  3225  0f69  cde30e            	call	_vdp_setCursor2
  3226  0f6c  f1                	pop	af
  3227  0f6d  1810              	jr	l_vdp_setCursor_00106
  3228                          l_vdp_setCursor_00104:
  3229  0f6f  210900            	ld	hl,_vdp_cursor + 1
  3230  0f72  46                	ld	b, (hl)
  3231  0f73  3a0800            	ld	a, (_vdp_cursor + 0)
  3232  0f76  3c                	inc	a
  3233  0f77  c5                	push	bc
  3234  0f78  33                	inc	sp
  3235  0f79  f5                	push	af
  3236  0f7a  33                	inc	sp
  3237  0f7b  cde30e            	call	_vdp_setCursor2
  3238  0f7e  f1                	pop	af
  3239                          l_vdp_setCursor_00106:
  3240  0f7f  c9                	ret
  3241                          	SECTION code_compiler
  3242                          ;	---------------------------------
  3243                          ; Function vdp_setTextColor
  3244                          ; ---------------------------------
  3245                          _vdp_setTextColor:
  3246  0f80  fd210200          	ld	iy,2
  3247  0f84  fd39              	add	iy, sp
  3248  0f86  fd7e00            	ld	a,(iy+0)
  3249  0f89  87                	add	a, a
  3250  0f8a  87                	add	a, a
  3251  0f8b  87                	add	a, a
  3252  0f8c  87                	add	a, a
  3253  0f8d  fd4e01            	ld	c,(iy+0+1)
  3254  0f90  81                	add	a, c
  3255  0f91  57                	ld	d,a
  3256  0f92  1e07              	ld	e,0x07
  3257  0f94  d5                	push	de
  3258  0f95  cd9903            	call	_vdp_setRegister
  3259  0f98  f1                	pop	af
  3260  0f99  c9                	ret
  3261                          	SECTION code_compiler
  3262                          ;	---------------------------------
  3263                          ; Function vdp_write
  3264                          ; ---------------------------------
  3265                          _vdp_write:
  3266  0f9a  dde5              	push	ix
  3267  0f9c  dd210000          	ld	ix,0
  3268  0fa0  dd39              	add	ix,sp
  3269  0fa2  210900            	ld	hl, +(_vdp_cursor + 1) + 0
  3270  0fa5  5e                	ld	e, (hl)
  3271  0fa6  21ce04            	ld	hl,__vdpCursorMaxXFull + 0
  3272  0fa9  66                	ld	h, (hl)
  3273  0faa  2e00              	ld	l,0x00
  3274  0fac  55                	ld	d, l
  3275  0fad  0608              	ld	b,0x08
  3276                          l_vdp_write_00122:
  3277  0faf  29                	add	hl, hl
  3278  0fb0  3001              	jr	NC,l_vdp_write_00123
  3279  0fb2  19                	add	hl, de
  3280                          l_vdp_write_00123:
  3281  0fb3  10fa              	djnz	l_vdp_write_00122
  3282  0fb5  eb                	ex	de, hl
  3283  0fb6  3a0800            	ld	a, (_vdp_cursor + 0)
  3284  0fb9  2600              	ld	h,0x00
  3285  0fbb  6f                	ld	l, a
  3286  0fbc  19                	add	hl, de
  3287  0fbd  eb                	ex	de, hl
  3288  0fbe  2ac704            	ld	hl, (__vdpPatternNameTableAddr)
  3289  0fc1  19                	add	hl, de
  3290  0fc2  d5                	push	de
  3291  0fc3  e5                	push	hl
  3292  0fc4  cdae03            	call	_vdp_setWriteAddress
  3293  0fc7  f1                	pop	af
  3294  0fc8  d1                	pop	de
  3295  0fc9  dd7e04            	ld	a,(ix+4)
  3296  0fcc  d3a0              	out	(_IO_VDPDATA), a
  3297  0fce  210001            	ld	hl,__vdp_textBuffer
  3298  0fd1  19                	add	hl, de
  3299  0fd2  dd7e04            	ld	a,(ix+4)
  3300  0fd5  77                	ld	(hl), a
  3301  0fd6  3ad204            	ld	a, (__autoScroll+0)
  3302  0fd9  b7                	or	a, a
  3303  0fda  2827              	jr	Z,l_vdp_write_00102
  3304  0fdc  210800            	ld	hl,_vdp_cursor + 0
  3305  0fdf  46                	ld	b, (hl)
  3306  0fe0  3acd04            	ld	a, (__vdpCursorMaxX+0)
  3307  0fe3  90                	sub	a, b
  3308  0fe4  201d              	jr	NZ,l_vdp_write_00102
  3309  0fe6  210900            	ld	hl, +(_vdp_cursor + 1) + 0
  3310  0fe9  46                	ld	b, (hl)
  3311  0fea  3a0c00            	ld	a, (__autoScrollBottomRow+0)
  3312  0fed  90                	sub	a, b
  3313  0fee  2013              	jr	NZ,l_vdp_write_00102
  3314  0ff0  3a0c00            	ld	a, (__autoScrollBottomRow+0)
  3315  0ff3  f5                	push	af
  3316  0ff4  33                	inc	sp
  3317  0ff5  3a0b00            	ld	a, (__autoScrollTopRow+0)
  3318  0ff8  f5                	push	af
  3319  0ff9  33                	inc	sp
  3320  0ffa  cdf210            	call	_vdp_scrollTextUp
  3321  0ffd  f1                	pop	af
  3322  0ffe  210800            	ld	hl,_vdp_cursor
  3323  1001  3600              	ld	(hl),0x00
  3324                          l_vdp_write_00102:
  3325  1003  3a0900            	ld	a, ((_vdp_cursor + 1) + 0)
  3326  1006  210800            	ld	hl,_vdp_cursor + 0
  3327  1009  4e                	ld	c, (hl)
  3328  100a  0c                	inc	c
  3329  100b  f5                	push	af
  3330  100c  33                	inc	sp
  3331  100d  79                	ld	a, c
  3332  100e  f5                	push	af
  3333  100f  33                	inc	sp
  3334  1010  cde30e            	call	_vdp_setCursor2
  3335  1013  f1                	pop	af
  3336  1014  dde1              	pop	ix
  3337  1016  c9                	ret
  3338                          	SECTION code_compiler
  3339                          ;	---------------------------------
  3340                          ; Function vdp_writeCharAtLocation
  3341                          ; ---------------------------------
  3342                          _vdp_writeCharAtLocation:
  3343  1017  dde5              	push	ix
  3344  1019  dd210000          	ld	ix,0
  3345  101d  dd39              	add	ix,sp
  3346  101f  21ce04            	ld	hl,__vdpCursorMaxXFull + 0
  3347  1022  5e                	ld	e, (hl)
  3348  1023  dd6605            	ld	h,(ix+5)
  3349  1026  2e00              	ld	l,0x00
  3350  1028  55                	ld	d, l
  3351  1029  0608              	ld	b,0x08
  3352                          l_vdp_writeCharAtLocation_00103:
  3353  102b  29                	add	hl, hl
  3354  102c  3001              	jr	NC,l_vdp_writeCharAtLocation_00104
  3355  102e  19                	add	hl, de
  3356                          l_vdp_writeCharAtLocation_00104:
  3357  102f  10fa              	djnz	l_vdp_writeCharAtLocation_00103
  3358  1031  dd4e04            	ld	c,(ix+4)
  3359  1034  0600              	ld	b,0x00
  3360  1036  09                	add	hl, bc
  3361  1037  eb                	ex	de, hl
  3362  1038  210001            	ld	hl,__vdp_textBuffer+0
  3363  103b  19                	add	hl, de
  3364  103c  dd7e06            	ld	a,(ix+6)
  3365  103f  77                	ld	(hl), a
  3366  1040  2ac704            	ld	hl, (__vdpPatternNameTableAddr)
  3367  1043  19                	add	hl, de
  3368  1044  e5                	push	hl
  3369  1045  cdae03            	call	_vdp_setWriteAddress
  3370  1048  f1                	pop	af
  3371  1049  dd7e06            	ld	a,(ix+6)
  3372  104c  d3a0              	out	(_IO_VDPDATA), a
  3373  104e  dde1              	pop	ix
  3374  1050  c9                	ret
  3375                          	SECTION code_compiler
  3376                          ;	---------------------------------
  3377                          ; Function vdp_getCharAtLocationVRAM
  3378                          ; ---------------------------------
  3379                          _vdp_getCharAtLocationVRAM:
  3380  1051  dde5              	push	ix
  3381  1053  dd210000          	ld	ix,0
  3382  1057  dd39              	add	ix,sp
  3383  1059  21ce04            	ld	hl,__vdpCursorMaxXFull + 0
  3384  105c  5e                	ld	e, (hl)
  3385  105d  dd6605            	ld	h,(ix+5)
  3386  1060  2e00              	ld	l,0x00
  3387  1062  55                	ld	d, l
  3388  1063  0608              	ld	b,0x08
  3389                          l_vdp_getCharAtLocationVRAM_00103:
  3390  1065  29                	add	hl, hl
  3391  1066  3001              	jr	NC,l_vdp_getCharAtLocationVRAM_00104
  3392  1068  19                	add	hl, de
  3393                          l_vdp_getCharAtLocationVRAM_00104:
  3394  1069  10fa              	djnz	l_vdp_getCharAtLocationVRAM_00103
  3395  106b  dd4e04            	ld	c,(ix+4)
  3396  106e  0600              	ld	b,0x00
  3397  1070  09                	add	hl, bc
  3398  1071  eb                	ex	de, hl
  3399  1072  2ac704            	ld	hl, (__vdpPatternNameTableAddr)
  3400  1075  19                	add	hl, de
  3401  1076  e5                	push	hl
  3402  1077  cdc303            	call	_vdp_setReadAddress
  3403  107a  f1                	pop	af
  3404  107b  dba0              	in	a, (_IO_VDPDATA)
  3405  107d  6f                	ld	l, a
  3406  107e  dde1              	pop	ix
  3407  1080  c9                	ret
  3408                          	SECTION code_compiler
  3409                          ;	---------------------------------
  3410                          ; Function vdp_getCharAtLocationBuf
  3411                          ; ---------------------------------
  3412                          _vdp_getCharAtLocationBuf:
  3413  1081  dde5              	push	ix
  3414  1083  dd210000          	ld	ix,0
  3415  1087  dd39              	add	ix,sp
  3416  1089  21ce04            	ld	hl,__vdpCursorMaxXFull + 0
  3417  108c  5e                	ld	e, (hl)
  3418  108d  dd6605            	ld	h,(ix+5)
  3419  1090  2e00              	ld	l,0x00
  3420  1092  55                	ld	d, l
  3421  1093  0608              	ld	b,0x08
  3422                          l_vdp_getCharAtLocationBuf_00103:
  3423  1095  29                	add	hl, hl
  3424  1096  3001              	jr	NC,l_vdp_getCharAtLocationBuf_00104
  3425  1098  19                	add	hl, de
  3426                          l_vdp_getCharAtLocationBuf_00104:
  3427  1099  10fa              	djnz	l_vdp_getCharAtLocationBuf_00103
  3428  109b  dd4e04            	ld	c,(ix+4)
  3429  109e  0600              	ld	b,0x00
  3430  10a0  09                	add	hl, bc
  3431  10a1  110001            	ld	de,__vdp_textBuffer
  3432  10a4  19                	add	hl, de
  3433  10a5  6e                	ld	l, (hl)
  3434  10a6  dde1              	pop	ix
  3435  10a8  c9                	ret
  3436                          	SECTION code_compiler
  3437                          ;	---------------------------------
  3438                          ; Function vdp_setCharAtLocationBuf
  3439                          ; ---------------------------------
  3440                          _vdp_setCharAtLocationBuf:
  3441  10a9  dde5              	push	ix
  3442  10ab  dd210000          	ld	ix,0
  3443  10af  dd39              	add	ix,sp
  3444  10b1  21ce04            	ld	hl,__vdpCursorMaxXFull + 0
  3445  10b4  5e                	ld	e, (hl)
  3446  10b5  dd6605            	ld	h,(ix+5)
  3447  10b8  2e00              	ld	l,0x00
  3448  10ba  55                	ld	d, l
  3449  10bb  0608              	ld	b,0x08
  3450                          l_vdp_setCharAtLocationBuf_00103:
  3451  10bd  29                	add	hl, hl
  3452  10be  3001              	jr	NC,l_vdp_setCharAtLocationBuf_00104
  3453  10c0  19                	add	hl, de
  3454                          l_vdp_setCharAtLocationBuf_00104:
  3455  10c1  10fa              	djnz	l_vdp_setCharAtLocationBuf_00103
  3456  10c3  dd4e04            	ld	c,(ix+4)
  3457  10c6  0600              	ld	b,0x00
  3458  10c8  09                	add	hl, bc
  3459  10c9  110001            	ld	de,__vdp_textBuffer
  3460  10cc  19                	add	hl, de
  3461  10cd  dd7e06            	ld	a,(ix+6)
  3462  10d0  77                	ld	(hl), a
  3463  10d1  dde1              	pop	ix
  3464  10d3  c9                	ret
  3465                          	SECTION code_compiler
  3466                          ;	---------------------------------
  3467                          ; Function vdp_refreshViewPort
  3468                          ; ---------------------------------
  3469                          _vdp_refreshViewPort:
  3470  10d4  2ac704            	ld	hl, (__vdpPatternNameTableAddr)
  3471  10d7  e5                	push	hl
  3472  10d8  cdae03            	call	_vdp_setWriteAddress
  3473  10db  f1                	pop	af
  3474  10dc  e5                	push	hl
  3475  10dd  d5                	push	de
  3476  10de  210001            	ld	hl, __vdp_textBuffer
  3477  10e1  ed5bcf04          	ld	de, (__vdpTextBufferSize)
  3478                          vdp_refreshViewPortLoop3:
  3479  10e5  7e                	ld	a, (hl)
  3480  10e6  d3a0              	out	(0xa0), a
  3481  10e8  23                	inc	hl
  3482  10e9  1b                	dec	de
  3483  10ea  7a                	ld	A, D
  3484  10eb  b3                	or	E
  3485  10ec  c2e510            	jp	nz, vdp_refreshViewPortLoop3
  3486  10ef  d1                	pop	de
  3487  10f0  e1                	pop	hl
  3488  10f1  c9                	ret
  3489                          	SECTION code_compiler
  3490                          ;	---------------------------------
  3491                          ; Function vdp_scrollTextUp
  3492                          ; ---------------------------------
  3493                          _vdp_scrollTextUp:
  3494  10f2  dde5              	push	ix
  3495  10f4  dd210000          	ld	ix,0
  3496  10f8  dd39              	add	ix,sp
  3497  10fa  f5                	push	af
  3498  10fb  21ce04            	ld	hl,__vdpCursorMaxXFull + 0
  3499  10fe  5e                	ld	e, (hl)
  3500  10ff  dd6604            	ld	h,(ix+4)
  3501  1102  2e00              	ld	l,0x00
  3502  1104  55                	ld	d, l
  3503  1105  0608              	ld	b,0x08
  3504                          l_vdp_scrollTextUp_00125:
  3505  1107  29                	add	hl, hl
  3506  1108  3001              	jr	NC,l_vdp_scrollTextUp_00126
  3507  110a  19                	add	hl, de
  3508                          l_vdp_scrollTextUp_00126:
  3509  110b  10fa              	djnz	l_vdp_scrollTextUp_00125
  3510  110d  eb                	ex	de, hl
  3511  110e  2ac704            	ld	hl, (__vdpPatternNameTableAddr)
  3512  1111  19                	add	hl, de
  3513  1112  e5                	push	hl
  3514  1113  cdae03            	call	_vdp_setWriteAddress
  3515  1116  f1                	pop	af
  3516  1117  21ce04            	ld	hl,__vdpCursorMaxXFull + 0
  3517  111a  5e                	ld	e, (hl)
  3518  111b  dd6604            	ld	h,(ix+4)
  3519  111e  2e00              	ld	l,0x00
  3520  1120  55                	ld	d, l
  3521  1121  0608              	ld	b,0x08
  3522                          l_vdp_scrollTextUp_00127:
  3523  1123  29                	add	hl, hl
  3524  1124  3001              	jr	NC,l_vdp_scrollTextUp_00128
  3525  1126  19                	add	hl, de
  3526                          l_vdp_scrollTextUp_00128:
  3527  1127  10fa              	djnz	l_vdp_scrollTextUp_00127
  3528  1129  110001            	ld	de,__vdp_textBuffer
  3529  112c  19                	add	hl, de
  3530  112d  eb                	ex	de, hl
  3531  112e  2ace04            	ld	hl, (__vdpCursorMaxXFull)
  3532  1131  2600              	ld	h,0x00
  3533  1133  19                	add	hl, de
  3534  1134  e3                	ex	(sp), hl
  3535  1135  dd4e05            	ld	c,(ix+5)
  3536  1138  0600              	ld	b,0x00
  3537  113a  03                	inc	bc
  3538  113b  3ace04            	ld	a, (__vdpCursorMaxXFull+0)
  3539  113e  2600              	ld	h,0x00
  3540  1140  d5                	push	de
  3541  1141  6f                	ld	l, a
  3542  1142  e5                	push	hl
  3543  1143  c5                	push	bc
  3544  1144  cd0000            	call	__mulint_callee
  3545  1147  d1                	pop	de
  3546  1148  010001            	ld	bc,__vdp_textBuffer
  3547  114b  09                	add	hl, bc
  3548  114c  4d                	ld	c, l
  3549  114d  44                	ld	b, h
  3550  114e  eb                	ex	de, hl
  3551  114f  d1                	pop	de
  3552  1150  d5                	push	de
  3553                          l_vdp_scrollTextUp_00101:
  3554  1151  1a                	ld	a, (de)
  3555  1152  77                	ld	(hl), a
  3556  1153  d3a0              	out	(_IO_VDPDATA), a
  3557  1155  23                	inc	hl
  3558  1156  13                	inc	de
  3559  1157  7b                	ld	a, e
  3560  1158  91                	sub	a, c
  3561  1159  20f6              	jr	NZ,l_vdp_scrollTextUp_00101
  3562  115b  7a                	ld	a, d
  3563  115c  90                	sub	a, b
  3564  115d  20f2              	jr	NZ,l_vdp_scrollTextUp_00101
  3565  115f  eb                	ex	de, hl
  3566                          l_vdp_scrollTextUp_00104:
  3567  1160  3e20              	ld	a,0x20
  3568  1162  12                	ld	(de),a
  3569  1163  d3a0              	out	(_IO_VDPDATA), a
  3570  1165  13                	inc	de
  3571  1166  6b                	ld	l, e
  3572  1167  62                	ld	h, d
  3573  1168  bf                	cp	a, a
  3574  1169  ed42              	sbc	hl, bc
  3575  116b  20f3              	jr	NZ,l_vdp_scrollTextUp_00104
  3576  116d  ddf9              	ld	sp, ix
  3577  116f  dde1              	pop	ix
  3578  1171  c9                	ret
  3579                          	SECTION code_compiler
  3580                          ;	---------------------------------
  3581                          ; Function vdp_scrollTextDown
  3582                          ; ---------------------------------
  3583                          _vdp_scrollTextDown:
  3584  1172  dde5              	push	ix
  3585  1174  dd210000          	ld	ix,0
  3586  1178  dd39              	add	ix,sp
  3587  117a  f5                	push	af
  3588  117b  fd21ce04          	ld	iy,__vdpCursorMaxXFull
  3589  117f  fd5e00            	ld	e,(iy+0)
  3590  1182  dd6605            	ld	h,(ix+5)
  3591  1185  2e00              	ld	l,0x00
  3592  1187  55                	ld	d, l
  3593  1188  0608              	ld	b,0x08
  3594                          l_vdp_scrollTextDown_00139:
  3595  118a  29                	add	hl, hl
  3596  118b  3001              	jr	NC,l_vdp_scrollTextDown_00140
  3597  118d  19                	add	hl, de
  3598                          l_vdp_scrollTextDown_00140:
  3599  118e  10fa              	djnz	l_vdp_scrollTextDown_00139
  3600  1190  110001            	ld	de,__vdp_textBuffer
  3601  1193  19                	add	hl, de
  3602  1194  2b                	dec	hl
  3603  1195  eb                	ex	de, hl
  3604  1196  3ace04            	ld	a, (__vdpCursorMaxXFull+0)
  3605  1199  83                	add	a, e
  3606  119a  4f                	ld	c, a
  3607  119b  3e00              	ld	a,0x00
  3608  119d  8a                	adc	a, d
  3609  119e  47                	ld	b, a
  3610  119f  d5                	push	de
  3611  11a0  c5                	push	bc
  3612  11a1  fd5e00            	ld	e,(iy+0)
  3613  11a4  dd6604            	ld	h,(ix+4)
  3614  11a7  2e00              	ld	l,0x00
  3615  11a9  55                	ld	d, l
  3616  11aa  0608              	ld	b,0x08
  3617                          l_vdp_scrollTextDown_00141:
  3618  11ac  29                	add	hl, hl
  3619  11ad  3001              	jr	NC,l_vdp_scrollTextDown_00142
  3620  11af  19                	add	hl, de
  3621                          l_vdp_scrollTextDown_00142:
  3622  11b0  10fa              	djnz	l_vdp_scrollTextDown_00141
  3623  11b2  c1                	pop	bc
  3624  11b3  d1                	pop	de
  3625  11b4  3eff              	ld	a, +((__vdp_textBuffer - 1) & 0xFF)
  3626  11b6  85                	add	a, l
  3627  11b7  6f                	ld	l, a
  3628  11b8  3e00              	ld	a, +((__vdp_textBuffer - 1) / 256)
  3629  11ba  8c                	adc	a, h
  3630  11bb  67                	ld	h, a
  3631  11bc  e3                	ex	(sp), hl
  3632                          l_vdp_scrollTextDown_00101:
  3633  11bd  1a                	ld	a, (de)
  3634  11be  02                	ld	(bc), a
  3635  11bf  0b                	dec	bc
  3636  11c0  1b                	dec	de
  3637  11c1  e1                	pop	hl
  3638  11c2  e5                	push	hl
  3639  11c3  bf                	cp	a, a
  3640  11c4  ed52              	sbc	hl, de
  3641  11c6  20f5              	jr	NZ,l_vdp_scrollTextDown_00101
  3642                          l_vdp_scrollTextDown_00104:
  3643  11c8  3e20              	ld	a,0x20
  3644  11ca  02                	ld	(bc), a
  3645  11cb  0b                	dec	bc
  3646  11cc  e1                	pop	hl
  3647  11cd  e5                	push	hl
  3648  11ce  bf                	cp	a, a
  3649  11cf  ed42              	sbc	hl, bc
  3650  11d1  20f5              	jr	NZ,l_vdp_scrollTextDown_00104
  3651  11d3  21ce04            	ld	hl,__vdpCursorMaxXFull + 0
  3652  11d6  5e                	ld	e, (hl)
  3653  11d7  dd6604            	ld	h,(ix+4)
  3654  11da  2e00              	ld	l,0x00
  3655  11dc  55                	ld	d, l
  3656  11dd  0608              	ld	b,0x08
  3657                          l_vdp_scrollTextDown_00147:
  3658  11df  29                	add	hl, hl
  3659  11e0  3001              	jr	NC,l_vdp_scrollTextDown_00148
  3660  11e2  19                	add	hl, de
  3661                          l_vdp_scrollTextDown_00148:
  3662  11e3  10fa              	djnz	l_vdp_scrollTextDown_00147
  3663  11e5  eb                	ex	de, hl
  3664  11e6  2ac704            	ld	hl, (__vdpPatternNameTableAddr)
  3665  11e9  19                	add	hl, de
  3666  11ea  e5                	push	hl
  3667  11eb  cdae03            	call	_vdp_setWriteAddress
  3668  11ee  f1                	pop	af
  3669  11ef  21ce04            	ld	hl,__vdpCursorMaxXFull + 0
  3670  11f2  5e                	ld	e, (hl)
  3671  11f3  dd6604            	ld	h,(ix+4)
  3672  11f6  2e00              	ld	l,0x00
  3673  11f8  55                	ld	d, l
  3674  11f9  0608              	ld	b,0x08
  3675                          l_vdp_scrollTextDown_00149:
  3676  11fb  29                	add	hl, hl
  3677  11fc  3001              	jr	NC,l_vdp_scrollTextDown_00150
  3678  11fe  19                	add	hl, de
  3679                          l_vdp_scrollTextDown_00150:
  3680  11ff  10fa              	djnz	l_vdp_scrollTextDown_00149
  3681  1201  110001            	ld	de,__vdp_textBuffer
  3682  1204  19                	add	hl, de
  3683  1205  eb                	ex	de, hl
  3684  1206  dd4e05            	ld	c,(ix+5)
  3685  1209  0600              	ld	b,0x00
  3686  120b  03                	inc	bc
  3687  120c  3ace04            	ld	a, (__vdpCursorMaxXFull+0)
  3688  120f  2600              	ld	h,0x00
  3689  1211  d5                	push	de
  3690  1212  6f                	ld	l, a
  3691  1213  e5                	push	hl
  3692  1214  c5                	push	bc
  3693  1215  cd0000            	call	__mulint_callee
  3694  1218  d1                	pop	de
  3695  1219  010001            	ld	bc,__vdp_textBuffer
  3696  121c  09                	add	hl, bc
  3697  121d  4d                	ld	c, l
  3698  121e  44                	ld	b, h
  3699                          l_vdp_scrollTextDown_00107:
  3700  121f  1a                	ld	a, (de)
  3701  1220  d3a0              	out	(_IO_VDPDATA), a
  3702  1222  13                	inc	de
  3703  1223  6b                	ld	l, e
  3704  1224  62                	ld	h, d
  3705  1225  bf                	cp	a, a
  3706  1226  ed42              	sbc	hl, bc
  3707  1228  20f5              	jr	NZ,l_vdp_scrollTextDown_00107
  3708  122a  ddf9              	ld	sp, ix
  3709  122c  dde1              	pop	ix
  3710  122e  c9                	ret
  3711                          	SECTION code_compiler
  3712                          ;	---------------------------------
  3713                          ; Function vdp_writeUInt8ToBinary
  3714                          ; ---------------------------------
  3715                          _vdp_writeUInt8ToBinary:
  3716  122f  dde5              	push	ix
  3717  1231  dd210000          	ld	ix,0
  3718  1235  dd39              	add	ix,sp
  3719  1237  21f7ff            	ld	hl, -9
  3720  123a  39                	add	hl, sp
  3721  123b  f9                	ld	sp, hl
  3722  123c  0e00              	ld	c,0x00
  3723                          l_vdp_writeUInt8ToBinary_00106:
  3724  123e  79                	ld	a, c
  3725  123f  d608              	sub	a,0x08
  3726  1241  302a              	jr	NC,l_vdp_writeUInt8ToBinary_00104
  3727  1243  41                	ld	b, c
  3728  1244  dd6e04            	ld	l,(ix+4)
  3729  1247  04                	inc	b
  3730  1248  1802              	jr	l_vdp_writeUInt8ToBinary_00127
  3731                          l_vdp_writeUInt8ToBinary_00126:
  3732  124a  cb3d              	srl	l
  3733                          l_vdp_writeUInt8ToBinary_00127:
  3734  124c  10fc              	djnz	l_vdp_writeUInt8ToBinary_00126
  3735  124e  59                	ld	e, c
  3736  124f  3e07              	ld	a,0x07
  3737  1251  93                	sub	a, e
  3738  1252  5f                	ld	e, a
  3739  1253  07                	rlca
  3740  1254  9f                	sbc	a, a
  3741  1255  57                	ld	d, a
  3742  1256  cb45              	bit	0, l
  3743  1258  2809              	jr	Z,l_vdp_writeUInt8ToBinary_00102
  3744  125a  210000            	ld	hl,0
  3745  125d  39                	add	hl, sp
  3746  125e  19                	add	hl, de
  3747  125f  3631              	ld	(hl),0x31
  3748  1261  1807              	jr	l_vdp_writeUInt8ToBinary_00107
  3749                          l_vdp_writeUInt8ToBinary_00102:
  3750  1263  210000            	ld	hl,0
  3751  1266  39                	add	hl, sp
  3752  1267  19                	add	hl, de
  3753  1268  3630              	ld	(hl),0x30
  3754                          l_vdp_writeUInt8ToBinary_00107:
  3755  126a  0c                	inc	c
  3756  126b  18d1              	jr	l_vdp_writeUInt8ToBinary_00106
  3757                          l_vdp_writeUInt8ToBinary_00104:
  3758  126d  dd36ff00          	ld	(ix-1),0x00
  3759  1271  210000            	ld	hl,0
  3760  1274  39                	add	hl, sp
  3761  1275  e5                	push	hl
  3762  1276  cd2d0e            	call	_vdp_print
  3763  1279  ddf9              	ld	sp,ix
  3764  127b  dde1              	pop	ix
  3765  127d  c9                	ret
  3766                          	SECTION code_compiler
  3767                          ;	---------------------------------
  3768                          ; Function vdp_writeUInt16ToBinary
  3769                          ; ---------------------------------
  3770                          _vdp_writeUInt16ToBinary:
  3771  127e  dde5              	push	ix
  3772  1280  dd210000          	ld	ix,0
  3773  1284  dd39              	add	ix,sp
  3774  1286  21edff            	ld	hl, -19
  3775  1289  39                	add	hl, sp
  3776  128a  f9                	ld	sp, hl
  3777  128b  0e00              	ld	c,0x00
  3778                          l_vdp_writeUInt16ToBinary_00106:
  3779  128d  79                	ld	a, c
  3780  128e  d610              	sub	a,0x10
  3781  1290  303f              	jr	NC,l_vdp_writeUInt16ToBinary_00104
  3782  1292  41                	ld	b, c
  3783  1293  dd5e04            	ld	e,(ix+4)
  3784  1296  dd5605            	ld	d,(ix+5)
  3785  1299  04                	inc	b
  3786  129a  1804              	jr	l_vdp_writeUInt16ToBinary_00127
  3787                          l_vdp_writeUInt16ToBinary_00126:
  3788  129c  cb3a              	srl	d
  3789  129e  cb1b              	rr	e
  3790                          l_vdp_writeUInt16ToBinary_00127:
  3791  12a0  10fa              	djnz	l_vdp_writeUInt16ToBinary_00126
  3792  12a2  41                	ld	b, c
  3793  12a3  3e0f              	ld	a,0x0f
  3794  12a5  90                	sub	a, b
  3795  12a6  dd77fe            	ld	(ix-2),a
  3796  12a9  07                	rlca
  3797  12aa  9f                	sbc	a, a
  3798  12ab  dd77ff            	ld	(ix-1),a
  3799  12ae  cb43              	bit	0, e
  3800  12b0  280f              	jr	Z,l_vdp_writeUInt16ToBinary_00102
  3801  12b2  dd5efe            	ld	e,(ix-2)
  3802  12b5  dd56ff            	ld	d,(ix-1)
  3803  12b8  210000            	ld	hl,0
  3804  12bb  39                	add	hl, sp
  3805  12bc  19                	add	hl, de
  3806  12bd  3631              	ld	(hl),0x31
  3807  12bf  180d              	jr	l_vdp_writeUInt16ToBinary_00107
  3808                          l_vdp_writeUInt16ToBinary_00102:
  3809  12c1  dd5efe            	ld	e,(ix-2)
  3810  12c4  dd56ff            	ld	d,(ix-1)
  3811  12c7  210000            	ld	hl,0
  3812  12ca  39                	add	hl, sp
  3813  12cb  19                	add	hl, de
  3814  12cc  3630              	ld	(hl),0x30
  3815                          l_vdp_writeUInt16ToBinary_00107:
  3816  12ce  0c                	inc	c
  3817  12cf  18bc              	jr	l_vdp_writeUInt16ToBinary_00106
  3818                          l_vdp_writeUInt16ToBinary_00104:
  3819  12d1  dd36fd00          	ld	(ix-3),0x00
  3820  12d5  210000            	ld	hl,0
  3821  12d8  39                	add	hl, sp
  3822  12d9  e5                	push	hl
  3823  12da  cd2d0e            	call	_vdp_print
  3824  12dd  ddf9              	ld	sp,ix
  3825  12df  dde1              	pop	ix
  3826  12e1  c9                	ret
  3827                          	SECTION code_compiler
  3828                          ;	---------------------------------
  3829                          ; Function vdp_writeUInt32ToBinary
  3830                          ; ---------------------------------
  3831                          _vdp_writeUInt32ToBinary:
  3832  12e2  dde5              	push	ix
  3833  12e4  dd210000          	ld	ix,0
  3834  12e8  dd39              	add	ix,sp
  3835  12ea  21daff            	ld	hl, -38
  3836  12ed  39                	add	hl, sp
  3837  12ee  f9                	ld	sp, hl
  3838  12ef  dd36ff00          	ld	(ix-1),0x00
  3839                          l_vdp_writeUInt32ToBinary_00106:
  3840  12f3  dd7eff            	ld	a,(ix-1)
  3841  12f6  d620              	sub	a,0x20
  3842  12f8  3067              	jr	NC,l_vdp_writeUInt32ToBinary_00104
  3843  12fa  dd46ff            	ld	b,(ix-1)
  3844  12fd  dd4e04            	ld	c,(ix+4)
  3845  1300  dd5e05            	ld	e,(ix+5)
  3846  1303  dd6e06            	ld	l,(ix+6)
  3847  1306  dd6607            	ld	h,(ix+7)
  3848  1309  04                	inc	b
  3849  130a  1808              	jr	l_vdp_writeUInt32ToBinary_00127
  3850                          l_vdp_writeUInt32ToBinary_00126:
  3851  130c  cb3c              	srl	h
  3852  130e  cb1d              	rr	l
  3853  1310  cb1b              	rr	e
  3854  1312  cb19              	rr	c
  3855                          l_vdp_writeUInt32ToBinary_00127:
  3856  1314  10f6              	djnz	l_vdp_writeUInt32ToBinary_00126
  3857  1316  dd46ff            	ld	b,(ix-1)
  3858  1319  3e1f              	ld	a,0x1f
  3859  131b  90                	sub	a, b
  3860  131c  dd77fb            	ld	(ix-5),a
  3861  131f  07                	rlca
  3862  1320  9f                	sbc	a, a
  3863  1321  dd77fc            	ld	(ix-4),a
  3864  1324  cb41              	bit	0, c
  3865  1326  281b              	jr	Z,l_vdp_writeUInt32ToBinary_00102
  3866  1328  dd5efb            	ld	e,(ix-5)
  3867  132b  dd56fc            	ld	d,(ix-4)
  3868  132e  210000            	ld	hl,0
  3869  1331  39                	add	hl, sp
  3870  1332  19                	add	hl, de
  3871  1333  dd75fd            	ld	(ix-3),l
  3872  1336  dd74fe            	ld	(ix-2),h
  3873  1339  dd6efd            	ld	l,(ix-3)
  3874  133c  dd66fe            	ld	h,(ix-2)
  3875  133f  3631              	ld	(hl),0x31
  3876  1341  1819              	jr	l_vdp_writeUInt32ToBinary_00107
  3877                          l_vdp_writeUInt32ToBinary_00102:
  3878  1343  dd5efb            	ld	e,(ix-5)
  3879  1346  dd56fc            	ld	d,(ix-4)
  3880  1349  210000            	ld	hl,0
  3881  134c  39                	add	hl, sp
  3882  134d  19                	add	hl, de
  3883  134e  dd75fd            	ld	(ix-3),l
  3884  1351  dd74fe            	ld	(ix-2),h
  3885  1354  dd6efd            	ld	l,(ix-3)
  3886  1357  dd66fe            	ld	h,(ix-2)
  3887  135a  3630              	ld	(hl),0x30
  3888                          l_vdp_writeUInt32ToBinary_00107:
  3889  135c  dd34ff            	inc	(ix-1)
  3890  135f  1892              	jr	l_vdp_writeUInt32ToBinary_00106
  3891                          l_vdp_writeUInt32ToBinary_00104:
  3892  1361  dd36fa00          	ld	(ix-6),0x00
  3893  1365  210000            	ld	hl,0
  3894  1368  39                	add	hl, sp
  3895  1369  e5                	push	hl
  3896  136a  cd2d0e            	call	_vdp_print
  3897  136d  ddf9              	ld	sp,ix
  3898  136f  dde1              	pop	ix
  3899  1371  c9                	ret
  3900                          	SECTION code_compiler
  3901                          ;	---------------------------------
  3902                          ; Function main
  3903                          ; ---------------------------------
  3904                          _main:
  3905  1372  cd0000            	call	_initNABULib
  3906  1375  af                	xor	a, a
  3907  1376  f5                	push	af
  3908  1377  33                	inc	sp
  3909  1378  af                	xor	a, a
  3910  1379  57                	ld	d,a
  3911  137a  1e0f              	ld	e,0x0f
  3912  137c  d5                	push	de
  3913  137d  cdb706            	call	_vdp_initTextMode
  3914  1380  33                	inc	sp
  3915  1381  219200            	ld	hl,_ASCII
  3916  1384  e3                	ex	(sp),hl
  3917  1385  cd0608            	call	_vdp_loadASCIIFont
  3918  1388  f1                	pop	af
  3919                          l_main_00106:
  3920  1389  3e41              	ld	a,0x41
  3921  138b  f5                	push	af
  3922  138c  33                	inc	sp
  3923  138d  cd6907            	call	_vdp_fillScreen
  3924  1390  33                	inc	sp
  3925  1391  cd3207            	call	_vdp_clearScreen
  3926  1394  3e42              	ld	a,0x42
  3927  1396  f5                	push	af
  3928  1397  33                	inc	sp
  3929  1398  cd6907            	call	_vdp_fillScreen
  3930  139b  33                	inc	sp
  3931  139c  110a0f            	ld	de,0x0f0a
  3932  139f  d5                	push	de
  3933  13a0  cd9f07            	call	_vdp_clearRows
  3934  13a3  f1                	pop	af
  3935  13a4  af                	xor	a, a
  3936  13a5  f5                	push	af
  3937  13a6  33                	inc	sp
  3938  13a7  af                	xor	a, a
  3939  13a8  f5                	push	af
  3940  13a9  33                	inc	sp
  3941  13aa  cde30e            	call	_vdp_setCursor2
  3942  13ad  f1                	pop	af
  3943  13ae  010000            	ld	bc,0x0000
  3944                          l_main_00109:
  3945  13b1  79                	ld	a, c
  3946  13b2  d6c0              	sub	a,0xc0
  3947  13b4  78                	ld	a, b
  3948  13b5  de03              	sbc	a,0x03
  3949  13b7  3018              	jr	NC,l_main_00101
  3950  13b9  c5                	push	bc
  3951  13ba  211e00            	ld	hl,0x001e
  3952  13bd  e5                	push	hl
  3953  13be  c5                	push	bc
  3954  13bf  cd0000            	call	__moduint_callee
  3955  13c2  c1                	pop	bc
  3956  13c3  7d                	ld	a, l
  3957  13c4  c641              	add	a,0x41
  3958  13c6  c5                	push	bc
  3959  13c7  f5                	push	af
  3960  13c8  33                	inc	sp
  3961  13c9  cd9a0f            	call	_vdp_write
  3962  13cc  33                	inc	sp
  3963  13cd  c1                	pop	bc
  3964  13ce  03                	inc	bc
  3965  13cf  18e0              	jr	l_main_00109
  3966                          l_main_00101:
  3967  13d1  216400            	ld	hl,0x0064
  3968  13d4  e5                	push	hl
  3969  13d5  3e0a              	ld	a,0x0a
  3970  13d7  f5                	push	af
  3971  13d8  33                	inc	sp
  3972  13d9  af                	xor	a, a
  3973  13da  f5                	push	af
  3974  13db  33                	inc	sp
  3975  13dc  cdaa01            	call	_playNoteDelay
  3976  13df  f1                	pop	af
  3977  13e0  f1                	pop	af
  3978  13e1  010000            	ld	bc,0x0000
  3979                          l_main_00112:
  3980  13e4  79                	ld	a, c
  3981  13e5  d618              	sub	a,0x18
  3982  13e7  78                	ld	a, b
  3983  13e8  17                	rla
  3984  13e9  3f                	ccf
  3985  13ea  1f                	rra
  3986  13eb  de80              	sbc	a,0x80
  3987  13ed  3010              	jr	NC,l_main_00102
  3988  13ef  c5                	push	bc
  3989  13f0  3e17              	ld	a,0x17
  3990  13f2  f5                	push	af
  3991  13f3  33                	inc	sp
  3992  13f4  af                	xor	a, a
  3993  13f5  f5                	push	af
  3994  13f6  33                	inc	sp
  3995  13f7  cdf210            	call	_vdp_scrollTextUp
  3996  13fa  f1                	pop	af
  3997  13fb  c1                	pop	bc
  3998  13fc  03                	inc	bc
  3999  13fd  18e5              	jr	l_main_00112
  4000                          l_main_00102:
  4001  13ff  010000            	ld	bc,0x0000
  4002                          l_main_00115:
  4003  1402  79                	ld	a, c
  4004  1403  d6c0              	sub	a,0xc0
  4005  1405  78                	ld	a, b
  4006  1406  de03              	sbc	a,0x03
  4007  1408  3018              	jr	NC,l_main_00103
  4008  140a  c5                	push	bc
  4009  140b  211e00            	ld	hl,0x001e
  4010  140e  e5                	push	hl
  4011  140f  c5                	push	bc
  4012  1410  cd0000            	call	__moduint_callee
  4013  1413  c1                	pop	bc
  4014  1414  7d                	ld	a, l
  4015  1415  c641              	add	a,0x41
  4016  1417  c5                	push	bc
  4017  1418  f5                	push	af
  4018  1419  33                	inc	sp
  4019  141a  cd9a0f            	call	_vdp_write
  4020  141d  33                	inc	sp
  4021  141e  c1                	pop	bc
  4022  141f  03                	inc	bc
  4023  1420  18e0              	jr	l_main_00115
  4024                          l_main_00103:
  4025  1422  216400            	ld	hl,0x0064
  4026  1425  e5                	push	hl
  4027  1426  3e0a              	ld	a,0x0a
  4028  1428  f5                	push	af
  4029  1429  33                	inc	sp
  4030  142a  af                	xor	a, a
  4031  142b  f5                	push	af
  4032  142c  33                	inc	sp
  4033  142d  cdaa01            	call	_playNoteDelay
  4034  1430  f1                	pop	af
  4035  1431  f1                	pop	af
  4036  1432  010000            	ld	bc,0x0000
  4037                          l_main_00118:
  4038  1435  79                	ld	a, c
  4039  1436  d618              	sub	a,0x18
  4040  1438  78                	ld	a, b
  4041  1439  17                	rla
  4042  143a  3f                	ccf
  4043  143b  1f                	rra
  4044  143c  de80              	sbc	a,0x80
  4045  143e  d28913            	jp	NC, l_main_00106
  4046  1441  c5                	push	bc
  4047  1442  3e17              	ld	a,0x17
  4048  1444  f5                	push	af
  4049  1445  33                	inc	sp
  4050  1446  af                	xor	a, a
  4051  1447  f5                	push	af
  4052  1448  33                	inc	sp
  4053  1449  cd7211            	call	_vdp_scrollTextDown
  4054  144c  f1                	pop	af
  4055  144d  c1                	pop	bc
  4056  144e  03                	inc	bc
  4057  144f  18e4              	jr	l_main_00118
  4058                          	SECTION rodata_compiler
  4059                          _ASCII:
  4060  0092  00                	DEFB +0x00
  4061  0093  00                	DEFB +0x00
  4062  0094  00                	DEFB +0x00
  4063  0095  00                	DEFB +0x00
  4064  0096  00                	DEFB +0x00
  4065  0097  00                	DEFB +0x00
  4066  0098  00                	DEFB +0x00
  4067  0099  00                	DEFB +0x00
  4068  009a  20                	DEFB +0x20
  4069  009b  20                	DEFB +0x20
  4070  009c  20                	DEFB +0x20
  4071  009d  20                	DEFB +0x20
  4072  009e  20                	DEFB +0x20
  4073  009f  00                	DEFB +0x00
  4074  00a0  20                	DEFB +0x20
  4075  00a1  00                	DEFB +0x00
  4076  00a2  50                	DEFB +0x50
  4077  00a3  50                	DEFB +0x50
  4078  00a4  50                	DEFB +0x50
  4079  00a5  00                	DEFB +0x00
  4080  00a6  00                	DEFB +0x00
  4081  00a7  00                	DEFB +0x00
  4082  00a8  00                	DEFB +0x00
  4083  00a9  00                	DEFB +0x00
  4084  00aa  50                	DEFB +0x50
  4085  00ab  50                	DEFB +0x50
  4086  00ac  f8                	DEFB +0xf8
  4087  00ad  50                	DEFB +0x50
  4088  00ae  f8                	DEFB +0xf8
  4089  00af  50                	DEFB +0x50
  4090  00b0  50                	DEFB +0x50
  4091  00b1  00                	DEFB +0x00
  4092  00b2  20                	DEFB +0x20
  4093  00b3  78                	DEFB +0x78
  4094  00b4  a0                	DEFB +0xa0
  4095  00b5  70                	DEFB +0x70
  4096  00b6  28                	DEFB +0x28
  4097  00b7  f0                	DEFB +0xf0
  4098  00b8  20                	DEFB +0x20
  4099  00b9  00                	DEFB +0x00
  4100  00ba  c0                	DEFB +0xc0
  4101  00bb  c8                	DEFB +0xc8
  4102  00bc  10                	DEFB +0x10
  4103  00bd  20                	DEFB +0x20
  4104  00be  40                	DEFB +0x40
  4105  00bf  98                	DEFB +0x98
  4106  00c0  18                	DEFB +0x18
  4107  00c1  00                	DEFB +0x00
  4108  00c2  40                	DEFB +0x40
  4109  00c3  a0                	DEFB +0xa0
  4110  00c4  a0                	DEFB +0xa0
  4111  00c5  40                	DEFB +0x40
  4112  00c6  a8                	DEFB +0xa8
  4113  00c7  90                	DEFB +0x90
  4114  00c8  68                	DEFB +0x68
  4115  00c9  00                	DEFB +0x00
  4116  00ca  20                	DEFB +0x20
  4117  00cb  20                	DEFB +0x20
  4118  00cc  20                	DEFB +0x20
  4119  00cd  00                	DEFB +0x00
  4120  00ce  00                	DEFB +0x00
  4121  00cf  00                	DEFB +0x00
  4122  00d0  00                	DEFB +0x00
  4123  00d1  00                	DEFB +0x00
  4124  00d2  20                	DEFB +0x20
  4125  00d3  40                	DEFB +0x40
  4126  00d4  80                	DEFB +0x80
  4127  00d5  80                	DEFB +0x80
  4128  00d6  80                	DEFB +0x80
  4129  00d7  40                	DEFB +0x40
  4130  00d8  20                	DEFB +0x20
  4131  00d9  00                	DEFB +0x00
  4132  00da  20                	DEFB +0x20
  4133  00db  10                	DEFB +0x10
  4134  00dc  08                	DEFB +0x08
  4135  00dd  08                	DEFB +0x08
  4136  00de  08                	DEFB +0x08
  4137  00df  10                	DEFB +0x10
  4138  00e0  20                	DEFB +0x20
  4139  00e1  00                	DEFB +0x00
  4140  00e2  20                	DEFB +0x20
  4141  00e3  a8                	DEFB +0xa8
  4142  00e4  70                	DEFB +0x70
  4143  00e5  20                	DEFB +0x20
  4144  00e6  70                	DEFB +0x70
  4145  00e7  a8                	DEFB +0xa8
  4146  00e8  20                	DEFB +0x20
  4147  00e9  00                	DEFB +0x00
  4148  00ea  00                	DEFB +0x00
  4149  00eb  20                	DEFB +0x20
  4150  00ec  20                	DEFB +0x20
  4151  00ed  f8                	DEFB +0xf8
  4152  00ee  20                	DEFB +0x20
  4153  00ef  20                	DEFB +0x20
  4154  00f0  00                	DEFB +0x00
  4155  00f1  00                	DEFB +0x00
  4156  00f2  00                	DEFB +0x00
  4157  00f3  00                	DEFB +0x00
  4158  00f4  00                	DEFB +0x00
  4159  00f5  00                	DEFB +0x00
  4160  00f6  20                	DEFB +0x20
  4161  00f7  20                	DEFB +0x20
  4162  00f8  40                	DEFB +0x40
  4163  00f9  00                	DEFB +0x00
  4164  00fa  00                	DEFB +0x00
  4165  00fb  00                	DEFB +0x00
  4166  00fc  00                	DEFB +0x00
  4167  00fd  f8                	DEFB +0xf8
  4168  00fe  00                	DEFB +0x00
  4169  00ff  00                	DEFB +0x00
  4170  0100  00                	DEFB +0x00
  4171  0101  00                	DEFB +0x00
  4172  0102  00                	DEFB +0x00
  4173  0103  00                	DEFB +0x00
  4174  0104  00                	DEFB +0x00
  4175  0105  00                	DEFB +0x00
  4176  0106  00                	DEFB +0x00
  4177  0107  00                	DEFB +0x00
  4178  0108  20                	DEFB +0x20
  4179  0109  00                	DEFB +0x00
  4180  010a  00                	DEFB +0x00
  4181  010b  08                	DEFB +0x08
  4182  010c  10                	DEFB +0x10
  4183  010d  20                	DEFB +0x20
  4184  010e  40                	DEFB +0x40
  4185  010f  80                	DEFB +0x80
  4186  0110  00                	DEFB +0x00
  4187  0111  00                	DEFB +0x00
  4188  0112  70                	DEFB +0x70
  4189  0113  88                	DEFB +0x88
  4190  0114  98                	DEFB +0x98
  4191  0115  a8                	DEFB +0xa8
  4192  0116  c8                	DEFB +0xc8
  4193  0117  88                	DEFB +0x88
  4194  0118  70                	DEFB +0x70
  4195  0119  00                	DEFB +0x00
  4196  011a  20                	DEFB +0x20
  4197  011b  60                	DEFB +0x60
  4198  011c  20                	DEFB +0x20
  4199  011d  20                	DEFB +0x20
  4200  011e  20                	DEFB +0x20
  4201  011f  20                	DEFB +0x20
  4202  0120  70                	DEFB +0x70
  4203  0121  00                	DEFB +0x00
  4204  0122  70                	DEFB +0x70
  4205  0123  88                	DEFB +0x88
  4206  0124  08                	DEFB +0x08
  4207  0125  30                	DEFB +0x30
  4208  0126  40                	DEFB +0x40
  4209  0127  80                	DEFB +0x80
  4210  0128  f8                	DEFB +0xf8
  4211  0129  00                	DEFB +0x00
  4212  012a  f8                	DEFB +0xf8
  4213  012b  08                	DEFB +0x08
  4214  012c  10                	DEFB +0x10
  4215  012d  30                	DEFB +0x30
  4216  012e  08                	DEFB +0x08
  4217  012f  88                	DEFB +0x88
  4218  0130  70                	DEFB +0x70
  4219  0131  00                	DEFB +0x00
  4220  0132  10                	DEFB +0x10
  4221  0133  30                	DEFB +0x30
  4222  0134  50                	DEFB +0x50
  4223  0135  90                	DEFB +0x90
  4224  0136  f8                	DEFB +0xf8
  4225  0137  10                	DEFB +0x10
  4226  0138  10                	DEFB +0x10
  4227  0139  00                	DEFB +0x00
  4228  013a  f8                	DEFB +0xf8
  4229  013b  80                	DEFB +0x80
  4230  013c  f0                	DEFB +0xf0
  4231  013d  08                	DEFB +0x08
  4232  013e  08                	DEFB +0x08
  4233  013f  88                	DEFB +0x88
  4234  0140  70                	DEFB +0x70
  4235  0141  00                	DEFB +0x00
  4236  0142  38                	DEFB +0x38
  4237  0143  40                	DEFB +0x40
  4238  0144  80                	DEFB +0x80
  4239  0145  f0                	DEFB +0xf0
  4240  0146  88                	DEFB +0x88
  4241  0147  88                	DEFB +0x88
  4242  0148  70                	DEFB +0x70
  4243  0149  00                	DEFB +0x00
  4244  014a  f8                	DEFB +0xf8
  4245  014b  08                	DEFB +0x08
  4246  014c  10                	DEFB +0x10
  4247  014d  20                	DEFB +0x20
  4248  014e  40                	DEFB +0x40
  4249  014f  40                	DEFB +0x40
  4250  0150  40                	DEFB +0x40
  4251  0151  00                	DEFB +0x00
  4252  0152  70                	DEFB +0x70
  4253  0153  88                	DEFB +0x88
  4254  0154  88                	DEFB +0x88
  4255  0155  70                	DEFB +0x70
  4256  0156  88                	DEFB +0x88
  4257  0157  88                	DEFB +0x88
  4258  0158  70                	DEFB +0x70
  4259  0159  00                	DEFB +0x00
  4260  015a  70                	DEFB +0x70
  4261  015b  88                	DEFB +0x88
  4262  015c  88                	DEFB +0x88
  4263  015d  78                	DEFB +0x78
  4264  015e  08                	DEFB +0x08
  4265  015f  10                	DEFB +0x10
  4266  0160  e0                	DEFB +0xe0
  4267  0161  00                	DEFB +0x00
  4268  0162  00                	DEFB +0x00
  4269  0163  00                	DEFB +0x00
  4270  0164  20                	DEFB +0x20
  4271  0165  00                	DEFB +0x00
  4272  0166  20                	DEFB +0x20
  4273  0167  00                	DEFB +0x00
  4274  0168  00                	DEFB +0x00
  4275  0169  00                	DEFB +0x00
  4276  016a  00                	DEFB +0x00
  4277  016b  00                	DEFB +0x00
  4278  016c  20                	DEFB +0x20
  4279  016d  00                	DEFB +0x00
  4280  016e  20                	DEFB +0x20
  4281  016f  20                	DEFB +0x20
  4282  0170  40                	DEFB +0x40
  4283  0171  00                	DEFB +0x00
  4284  0172  10                	DEFB +0x10
  4285  0173  20                	DEFB +0x20
  4286  0174  40                	DEFB +0x40
  4287  0175  80                	DEFB +0x80
  4288  0176  40                	DEFB +0x40
  4289  0177  20                	DEFB +0x20
  4290  0178  10                	DEFB +0x10
  4291  0179  00                	DEFB +0x00
  4292  017a  00                	DEFB +0x00
  4293  017b  00                	DEFB +0x00
  4294  017c  f8                	DEFB +0xf8
  4295  017d  00                	DEFB +0x00
  4296  017e  f8                	DEFB +0xf8
  4297  017f  00                	DEFB +0x00
  4298  0180  00                	DEFB +0x00
  4299  0181  00                	DEFB +0x00
  4300  0182  40                	DEFB +0x40
  4301  0183  20                	DEFB +0x20
  4302  0184  10                	DEFB +0x10
  4303  0185  08                	DEFB +0x08
  4304  0186  10                	DEFB +0x10
  4305  0187  20                	DEFB +0x20
  4306  0188  40                	DEFB +0x40
  4307  0189  00                	DEFB +0x00
  4308  018a  70                	DEFB +0x70
  4309  018b  88                	DEFB +0x88
  4310  018c  10                	DEFB +0x10
  4311  018d  20                	DEFB +0x20
  4312  018e  20                	DEFB +0x20
  4313  018f  00                	DEFB +0x00
  4314  0190  20                	DEFB +0x20
  4315  0191  00                	DEFB +0x00
  4316  0192  70                	DEFB +0x70
  4317  0193  88                	DEFB +0x88
  4318  0194  a8                	DEFB +0xa8
  4319  0195  b8                	DEFB +0xb8
  4320  0196  b0                	DEFB +0xb0
  4321  0197  80                	DEFB +0x80
  4322  0198  78                	DEFB +0x78
  4323  0199  00                	DEFB +0x00
  4324  019a  20                	DEFB +0x20
  4325  019b  50                	DEFB +0x50
  4326  019c  88                	DEFB +0x88
  4327  019d  88                	DEFB +0x88
  4328  019e  f8                	DEFB +0xf8
  4329  019f  88                	DEFB +0x88
  4330  01a0  88                	DEFB +0x88
  4331  01a1  00                	DEFB +0x00
  4332  01a2  f0                	DEFB +0xf0
  4333  01a3  88                	DEFB +0x88
  4334  01a4  88                	DEFB +0x88
  4335  01a5  f0                	DEFB +0xf0
  4336  01a6  88                	DEFB +0x88
  4337  01a7  88                	DEFB +0x88
  4338  01a8  f0                	DEFB +0xf0
  4339  01a9  00                	DEFB +0x00
  4340  01aa  70                	DEFB +0x70
  4341  01ab  88                	DEFB +0x88
  4342  01ac  80                	DEFB +0x80
  4343  01ad  80                	DEFB +0x80
  4344  01ae  80                	DEFB +0x80
  4345  01af  88                	DEFB +0x88
  4346  01b0  70                	DEFB +0x70
  4347  01b1  00                	DEFB +0x00
  4348  01b2  f0                	DEFB +0xf0
  4349  01b3  88                	DEFB +0x88
  4350  01b4  88                	DEFB +0x88
  4351  01b5  88                	DEFB +0x88
  4352  01b6  88                	DEFB +0x88
  4353  01b7  88                	DEFB +0x88
  4354  01b8  f0                	DEFB +0xf0
  4355  01b9  00                	DEFB +0x00
  4356  01ba  f8                	DEFB +0xf8
  4357  01bb  80                	DEFB +0x80
  4358  01bc  80                	DEFB +0x80
  4359  01bd  f0                	DEFB +0xf0
  4360  01be  80                	DEFB +0x80
  4361  01bf  80                	DEFB +0x80
  4362  01c0  f8                	DEFB +0xf8
  4363  01c1  00                	DEFB +0x00
  4364  01c2  f8                	DEFB +0xf8
  4365  01c3  80                	DEFB +0x80
  4366  01c4  80                	DEFB +0x80
  4367  01c5  f0                	DEFB +0xf0
  4368  01c6  80                	DEFB +0x80
  4369  01c7  80                	DEFB +0x80
  4370  01c8  80                	DEFB +0x80
  4371  01c9  00                	DEFB +0x00
  4372  01ca  78                	DEFB +0x78
  4373  01cb  80                	DEFB +0x80
  4374  01cc  80                	DEFB +0x80
  4375  01cd  80                	DEFB +0x80
  4376  01ce  98                	DEFB +0x98
  4377  01cf  88                	DEFB +0x88
  4378  01d0  78                	DEFB +0x78
  4379  01d1  00                	DEFB +0x00
  4380  01d2  88                	DEFB +0x88
  4381  01d3  88                	DEFB +0x88
  4382  01d4  88                	DEFB +0x88
  4383  01d5  f8                	DEFB +0xf8
  4384  01d6  88                	DEFB +0x88
  4385  01d7  88                	DEFB +0x88
  4386  01d8  88                	DEFB +0x88
  4387  01d9  00                	DEFB +0x00
  4388  01da  70                	DEFB +0x70
  4389  01db  20                	DEFB +0x20
  4390  01dc  20                	DEFB +0x20
  4391  01dd  20                	DEFB +0x20
  4392  01de  20                	DEFB +0x20
  4393  01df  20                	DEFB +0x20
  4394  01e0  70                	DEFB +0x70
  4395  01e1  00                	DEFB +0x00
  4396  01e2  08                	DEFB +0x08
  4397  01e3  08                	DEFB +0x08
  4398  01e4  08                	DEFB +0x08
  4399  01e5  08                	DEFB +0x08
  4400  01e6  08                	DEFB +0x08
  4401  01e7  88                	DEFB +0x88
  4402  01e8  70                	DEFB +0x70
  4403  01e9  00                	DEFB +0x00
  4404  01ea  88                	DEFB +0x88
  4405  01eb  90                	DEFB +0x90
  4406  01ec  a0                	DEFB +0xa0
  4407  01ed  c0                	DEFB +0xc0
  4408  01ee  a0                	DEFB +0xa0
  4409  01ef  90                	DEFB +0x90
  4410  01f0  88                	DEFB +0x88
  4411  01f1  00                	DEFB +0x00
  4412  01f2  80                	DEFB +0x80
  4413  01f3  80                	DEFB +0x80
  4414  01f4  80                	DEFB +0x80
  4415  01f5  80                	DEFB +0x80
  4416  01f6  80                	DEFB +0x80
  4417  01f7  80                	DEFB +0x80
  4418  01f8  f8                	DEFB +0xf8
  4419  01f9  00                	DEFB +0x00
  4420  01fa  88                	DEFB +0x88
  4421  01fb  d8                	DEFB +0xd8
  4422  01fc  a8                	DEFB +0xa8
  4423  01fd  a8                	DEFB +0xa8
  4424  01fe  88                	DEFB +0x88
  4425  01ff  88                	DEFB +0x88
  4426  0200  88                	DEFB +0x88
  4427  0201  00                	DEFB +0x00
  4428  0202  88                	DEFB +0x88
  4429  0203  88                	DEFB +0x88
  4430  0204  c8                	DEFB +0xc8
  4431  0205  a8                	DEFB +0xa8
  4432  0206  98                	DEFB +0x98
  4433  0207  88                	DEFB +0x88
  4434  0208  88                	DEFB +0x88
  4435  0209  00                	DEFB +0x00
  4436  020a  70                	DEFB +0x70
  4437  020b  88                	DEFB +0x88
  4438  020c  88                	DEFB +0x88
  4439  020d  88                	DEFB +0x88
  4440  020e  88                	DEFB +0x88
  4441  020f  88                	DEFB +0x88
  4442  0210  70                	DEFB +0x70
  4443  0211  00                	DEFB +0x00
  4444  0212  f0                	DEFB +0xf0
  4445  0213  88                	DEFB +0x88
  4446  0214  88                	DEFB +0x88
  4447  0215  f0                	DEFB +0xf0
  4448  0216  80                	DEFB +0x80
  4449  0217  80                	DEFB +0x80
  4450  0218  80                	DEFB +0x80
  4451  0219  00                	DEFB +0x00
  4452  021a  70                	DEFB +0x70
  4453  021b  88                	DEFB +0x88
  4454  021c  88                	DEFB +0x88
  4455  021d  88                	DEFB +0x88
  4456  021e  a8                	DEFB +0xa8
  4457  021f  90                	DEFB +0x90
  4458  0220  68                	DEFB +0x68
  4459  0221  00                	DEFB +0x00
  4460  0222  f0                	DEFB +0xf0
  4461  0223  88                	DEFB +0x88
  4462  0224  88                	DEFB +0x88
  4463  0225  f0                	DEFB +0xf0
  4464  0226  a0                	DEFB +0xa0
  4465  0227  90                	DEFB +0x90
  4466  0228  88                	DEFB +0x88
  4467  0229  00                	DEFB +0x00
  4468  022a  70                	DEFB +0x70
  4469  022b  88                	DEFB +0x88
  4470  022c  80                	DEFB +0x80
  4471  022d  70                	DEFB +0x70
  4472  022e  08                	DEFB +0x08
  4473  022f  88                	DEFB +0x88
  4474  0230  70                	DEFB +0x70
  4475  0231  00                	DEFB +0x00
  4476  0232  f8                	DEFB +0xf8
  4477  0233  20                	DEFB +0x20
  4478  0234  20                	DEFB +0x20
  4479  0235  20                	DEFB +0x20
  4480  0236  20                	DEFB +0x20
  4481  0237  20                	DEFB +0x20
  4482  0238  20                	DEFB +0x20
  4483  0239  00                	DEFB +0x00
  4484  023a  88                	DEFB +0x88
  4485  023b  88                	DEFB +0x88
  4486  023c  88                	DEFB +0x88
  4487  023d  88                	DEFB +0x88
  4488  023e  88                	DEFB +0x88
  4489  023f  88                	DEFB +0x88
  4490  0240  70                	DEFB +0x70
  4491  0241  00                	DEFB +0x00
  4492  0242  88                	DEFB +0x88
  4493  0243  88                	DEFB +0x88
  4494  0244  88                	DEFB +0x88
  4495  0245  88                	DEFB +0x88
  4496  0246  88                	DEFB +0x88
  4497  0247  50                	DEFB +0x50
  4498  0248  20                	DEFB +0x20
  4499  0249  00                	DEFB +0x00
  4500  024a  88                	DEFB +0x88
  4501  024b  88                	DEFB +0x88
  4502  024c  88                	DEFB +0x88
  4503  024d  a8                	DEFB +0xa8
  4504  024e  a8                	DEFB +0xa8
  4505  024f  d8                	DEFB +0xd8
  4506  0250  88                	DEFB +0x88
  4507  0251  00                	DEFB +0x00
  4508  0252  88                	DEFB +0x88
  4509  0253  88                	DEFB +0x88
  4510  0254  50                	DEFB +0x50
  4511  0255  20                	DEFB +0x20
  4512  0256  50                	DEFB +0x50
  4513  0257  88                	DEFB +0x88
  4514  0258  88                	DEFB +0x88
  4515  0259  00                	DEFB +0x00
  4516  025a  88                	DEFB +0x88
  4517  025b  88                	DEFB +0x88
  4518  025c  50                	DEFB +0x50
  4519  025d  20                	DEFB +0x20
  4520  025e  20                	DEFB +0x20
  4521  025f  20                	DEFB +0x20
  4522  0260  20                	DEFB +0x20
  4523  0261  00                	DEFB +0x00
  4524  0262  f8                	DEFB +0xf8
  4525  0263  08                	DEFB +0x08
  4526  0264  10                	DEFB +0x10
  4527  0265  20                	DEFB +0x20
  4528  0266  40                	DEFB +0x40
  4529  0267  80                	DEFB +0x80
  4530  0268  f8                	DEFB +0xf8
  4531  0269  00                	DEFB +0x00
  4532  026a  78                	DEFB +0x78
  4533  026b  40                	DEFB +0x40
  4534  026c  40                	DEFB +0x40
  4535  026d  40                	DEFB +0x40
  4536  026e  40                	DEFB +0x40
  4537  026f  40                	DEFB +0x40
  4538  0270  78                	DEFB +0x78
  4539  0271  00                	DEFB +0x00
  4540  0272  00                	DEFB +0x00
  4541  0273  80                	DEFB +0x80
  4542  0274  40                	DEFB +0x40
  4543  0275  20                	DEFB +0x20
  4544  0276  10                	DEFB +0x10
  4545  0277  08                	DEFB +0x08
  4546  0278  00                	DEFB +0x00
  4547  0279  00                	DEFB +0x00
  4548  027a  f0                	DEFB +0xf0
  4549  027b  10                	DEFB +0x10
  4550  027c  10                	DEFB +0x10
  4551  027d  10                	DEFB +0x10
  4552  027e  10                	DEFB +0x10
  4553  027f  10                	DEFB +0x10
  4554  0280  f0                	DEFB +0xf0
  4555  0281  00                	DEFB +0x00
  4556  0282  00                	DEFB +0x00
  4557  0283  00                	DEFB +0x00
  4558  0284  20                	DEFB +0x20
  4559  0285  50                	DEFB +0x50
  4560  0286  88                	DEFB +0x88
  4561  0287  00                	DEFB +0x00
  4562  0288  00                	DEFB +0x00
  4563  0289  00                	DEFB +0x00
  4564  028a  00                	DEFB +0x00
  4565  028b  00                	DEFB +0x00
  4566  028c  00                	DEFB +0x00
  4567  028d  00                	DEFB +0x00
  4568  028e  00                	DEFB +0x00
  4569  028f  00                	DEFB +0x00
  4570  0290  00                	DEFB +0x00
  4571  0291  f8                	DEFB +0xf8
  4572  0292  40                	DEFB +0x40
  4573  0293  20                	DEFB +0x20
  4574  0294  10                	DEFB +0x10
  4575  0295  00                	DEFB +0x00
  4576  0296  00                	DEFB +0x00
  4577  0297  00                	DEFB +0x00
  4578  0298  00                	DEFB +0x00
  4579  0299  00                	DEFB +0x00
  4580  029a  00                	DEFB +0x00
  4581  029b  00                	DEFB +0x00
  4582  029c  70                	DEFB +0x70
  4583  029d  88                	DEFB +0x88
  4584  029e  f8                	DEFB +0xf8
  4585  029f  88                	DEFB +0x88
  4586  02a0  88                	DEFB +0x88
  4587  02a1  00                	DEFB +0x00
  4588  02a2  00                	DEFB +0x00
  4589  02a3  00                	DEFB +0x00
  4590  02a4  f0                	DEFB +0xf0
  4591  02a5  48                	DEFB +0x48
  4592  02a6  70                	DEFB +0x70
  4593  02a7  48                	DEFB +0x48
  4594  02a8  f0                	DEFB +0xf0
  4595  02a9  00                	DEFB +0x00
  4596  02aa  00                	DEFB +0x00
  4597  02ab  00                	DEFB +0x00
  4598  02ac  78                	DEFB +0x78
  4599  02ad  80                	DEFB +0x80
  4600  02ae  80                	DEFB +0x80
  4601  02af  80                	DEFB +0x80
  4602  02b0  78                	DEFB +0x78
  4603  02b1  00                	DEFB +0x00
  4604  02b2  00                	DEFB +0x00
  4605  02b3  00                	DEFB +0x00
  4606  02b4  f0                	DEFB +0xf0
  4607  02b5  48                	DEFB +0x48
  4608  02b6  48                	DEFB +0x48
  4609  02b7  48                	DEFB +0x48
  4610  02b8  f0                	DEFB +0xf0
  4611  02b9  00                	DEFB +0x00
  4612  02ba  00                	DEFB +0x00
  4613  02bb  00                	DEFB +0x00
  4614  02bc  f0                	DEFB +0xf0
  4615  02bd  80                	DEFB +0x80
  4616  02be  e0                	DEFB +0xe0
  4617  02bf  80                	DEFB +0x80
  4618  02c0  f0                	DEFB +0xf0
  4619  02c1  00                	DEFB +0x00
  4620  02c2  00                	DEFB +0x00
  4621  02c3  00                	DEFB +0x00
  4622  02c4  f0                	DEFB +0xf0
  4623  02c5  80                	DEFB +0x80
  4624  02c6  e0                	DEFB +0xe0
  4625  02c7  80                	DEFB +0x80
  4626  02c8  80                	DEFB +0x80
  4627  02c9  00                	DEFB +0x00
  4628  02ca  00                	DEFB +0x00
  4629  02cb  00                	DEFB +0x00
  4630  02cc  78                	DEFB +0x78
  4631  02cd  80                	DEFB +0x80
  4632  02ce  b8                	DEFB +0xb8
  4633  02cf  88                	DEFB +0x88
  4634  02d0  70                	DEFB +0x70
  4635  02d1  00                	DEFB +0x00
  4636  02d2  00                	DEFB +0x00
  4637  02d3  00                	DEFB +0x00
  4638  02d4  88                	DEFB +0x88
  4639  02d5  88                	DEFB +0x88
  4640  02d6  f8                	DEFB +0xf8
  4641  02d7  88                	DEFB +0x88
  4642  02d8  88                	DEFB +0x88
  4643  02d9  00                	DEFB +0x00
  4644  02da  00                	DEFB +0x00
  4645  02db  00                	DEFB +0x00
  4646  02dc  70                	DEFB +0x70
  4647  02dd  20                	DEFB +0x20
  4648  02de  20                	DEFB +0x20
  4649  02df  20                	DEFB +0x20
  4650  02e0  f8                	DEFB +0xf8
  4651  02e1  00                	DEFB +0x00
  4652  02e2  00                	DEFB +0x00
  4653  02e3  00                	DEFB +0x00
  4654  02e4  70                	DEFB +0x70
  4655  02e5  20                	DEFB +0x20
  4656  02e6  20                	DEFB +0x20
  4657  02e7  a0                	DEFB +0xa0
  4658  02e8  e0                	DEFB +0xe0
  4659  02e9  00                	DEFB +0x00
  4660  02ea  00                	DEFB +0x00
  4661  02eb  00                	DEFB +0x00
  4662  02ec  90                	DEFB +0x90
  4663  02ed  a0                	DEFB +0xa0
  4664  02ee  c0                	DEFB +0xc0
  4665  02ef  a0                	DEFB +0xa0
  4666  02f0  90                	DEFB +0x90
  4667  02f1  00                	DEFB +0x00
  4668  02f2  00                	DEFB +0x00
  4669  02f3  00                	DEFB +0x00
  4670  02f4  80                	DEFB +0x80
  4671  02f5  80                	DEFB +0x80
  4672  02f6  80                	DEFB +0x80
  4673  02f7  80                	DEFB +0x80
  4674  02f8  f8                	DEFB +0xf8
  4675  02f9  00                	DEFB +0x00
  4676  02fa  00                	DEFB +0x00
  4677  02fb  00                	DEFB +0x00
  4678  02fc  88                	DEFB +0x88
  4679  02fd  d8                	DEFB +0xd8
  4680  02fe  a8                	DEFB +0xa8
  4681  02ff  88                	DEFB +0x88
  4682  0300  88                	DEFB +0x88
  4683  0301  00                	DEFB +0x00
  4684  0302  00                	DEFB +0x00
  4685  0303  00                	DEFB +0x00
  4686  0304  88                	DEFB +0x88
  4687  0305  c8                	DEFB +0xc8
  4688  0306  a8                	DEFB +0xa8
  4689  0307  98                	DEFB +0x98
  4690  0308  88                	DEFB +0x88
  4691  0309  00                	DEFB +0x00
  4692  030a  00                	DEFB +0x00
  4693  030b  00                	DEFB +0x00
  4694  030c  70                	DEFB +0x70
  4695  030d  88                	DEFB +0x88
  4696  030e  88                	DEFB +0x88
  4697  030f  88                	DEFB +0x88
  4698  0310  70                	DEFB +0x70
  4699  0311  00                	DEFB +0x00
  4700  0312  00                	DEFB +0x00
  4701  0313  00                	DEFB +0x00
  4702  0314  f0                	DEFB +0xf0
  4703  0315  88                	DEFB +0x88
  4704  0316  f0                	DEFB +0xf0
  4705  0317  80                	DEFB +0x80
  4706  0318  80                	DEFB +0x80
  4707  0319  00                	DEFB +0x00
  4708  031a  00                	DEFB +0x00
  4709  031b  00                	DEFB +0x00
  4710  031c  f8                	DEFB +0xf8
  4711  031d  88                	DEFB +0x88
  4712  031e  a8                	DEFB +0xa8
  4713  031f  90                	DEFB +0x90
  4714  0320  e8                	DEFB +0xe8
  4715  0321  00                	DEFB +0x00
  4716  0322  00                	DEFB +0x00
  4717  0323  00                	DEFB +0x00
  4718  0324  f8                	DEFB +0xf8
  4719  0325  88                	DEFB +0x88
  4720  0326  f8                	DEFB +0xf8
  4721  0327  a0                	DEFB +0xa0
  4722  0328  90                	DEFB +0x90
  4723  0329  00                	DEFB +0x00
  4724  032a  00                	DEFB +0x00
  4725  032b  00                	DEFB +0x00
  4726  032c  78                	DEFB +0x78
  4727  032d  80                	DEFB +0x80
  4728  032e  70                	DEFB +0x70
  4729  032f  08                	DEFB +0x08
  4730  0330  f0                	DEFB +0xf0
  4731  0331  00                	DEFB +0x00
  4732  0332  00                	DEFB +0x00
  4733  0333  00                	DEFB +0x00
  4734  0334  f8                	DEFB +0xf8
  4735  0335  20                	DEFB +0x20
  4736  0336  20                	DEFB +0x20
  4737  0337  20                	DEFB +0x20
  4738  0338  20                	DEFB +0x20
  4739  0339  00                	DEFB +0x00
  4740  033a  00                	DEFB +0x00
  4741  033b  00                	DEFB +0x00
  4742  033c  88                	DEFB +0x88
  4743  033d  88                	DEFB +0x88
  4744  033e  88                	DEFB +0x88
  4745  033f  88                	DEFB +0x88
  4746  0340  70                	DEFB +0x70
  4747  0341  00                	DEFB +0x00
  4748  0342  00                	DEFB +0x00
  4749  0343  00                	DEFB +0x00
  4750  0344  88                	DEFB +0x88
  4751  0345  88                	DEFB +0x88
  4752  0346  90                	DEFB +0x90
  4753  0347  a0                	DEFB +0xa0
  4754  0348  40                	DEFB +0x40
  4755  0349  00                	DEFB +0x00
  4756  034a  00                	DEFB +0x00
  4757  034b  00                	DEFB +0x00
  4758  034c  88                	DEFB +0x88
  4759  034d  88                	DEFB +0x88
  4760  034e  a8                	DEFB +0xa8
  4761  034f  d8                	DEFB +0xd8
  4762  0350  88                	DEFB +0x88
  4763  0351  00                	DEFB +0x00
  4764  0352  00                	DEFB +0x00
  4765  0353  00                	DEFB +0x00
  4766  0354  88                	DEFB +0x88
  4767  0355  70                	DEFB +0x70
  4768  0356  20                	DEFB +0x20
  4769  0357  70                	DEFB +0x70
  4770  0358  88                	DEFB +0x88
  4771  0359  00                	DEFB +0x00
  4772  035a  00                	DEFB +0x00
  4773  035b  00                	DEFB +0x00
  4774  035c  88                	DEFB +0x88
  4775  035d  50                	DEFB +0x50
  4776  035e  20                	DEFB +0x20
  4777  035f  20                	DEFB +0x20
  4778  0360  20                	DEFB +0x20
  4779  0361  00                	DEFB +0x00
  4780  0362  00                	DEFB +0x00
  4781  0363  00                	DEFB +0x00
  4782  0364  f8                	DEFB +0xf8
  4783  0365  10                	DEFB +0x10
  4784  0366  20                	DEFB +0x20
  4785  0367  40                	DEFB +0x40
  4786  0368  f8                	DEFB +0xf8
  4787  0369  00                	DEFB +0x00
  4788  036a  38                	DEFB +0x38
  4789  036b  40                	DEFB +0x40
  4790  036c  20                	DEFB +0x20
  4791  036d  c0                	DEFB +0xc0
  4792  036e  20                	DEFB +0x20
  4793  036f  40                	DEFB +0x40
  4794  0370  38                	DEFB +0x38
  4795  0371  00                	DEFB +0x00
  4796  0372  40                	DEFB +0x40
  4797  0373  20                	DEFB +0x20
  4798  0374  10                	DEFB +0x10
  4799  0375  08                	DEFB +0x08
  4800  0376  10                	DEFB +0x10
  4801  0377  20                	DEFB +0x20
  4802  0378  40                	DEFB +0x40
  4803  0379  00                	DEFB +0x00
  4804  037a  e0                	DEFB +0xe0
  4805  037b  10                	DEFB +0x10
  4806  037c  20                	DEFB +0x20
  4807  037d  18                	DEFB +0x18
  4808  037e  20                	DEFB +0x20
  4809  037f  10                	DEFB +0x10
  4810  0380  e0                	DEFB +0xe0
  4811  0381  00                	DEFB +0x00
  4812  0382  40                	DEFB +0x40
  4813  0383  a8                	DEFB +0xa8
  4814  0384  10                	DEFB +0x10
  4815  0385  00                	DEFB +0x00
  4816  0386  00                	DEFB +0x00
  4817  0387  00                	DEFB +0x00
  4818  0388  00                	DEFB +0x00
  4819  0389  00                	DEFB +0x00
  4820  038a  a8                	DEFB +0xa8
  4821  038b  50                	DEFB +0x50
  4822  038c  a8                	DEFB +0xa8
  4823  038d  50                	DEFB +0x50
  4824  038e  a8                	DEFB +0xa8
  4825  038f  50                	DEFB +0x50
  4826  0390  a8                	DEFB +0xa8
  4827  0391  00                	DEFB +0x00
  4828                          	SECTION data_compiler
  4829                          __randomSeed:
  4830  0000  00                	DEFB +0x00
  4831                          __kbdBufferReadPos:
  4832  0001  00                	DEFB +0x00
  4833                          __kbdBufferWritePos:
  4834  0002  00                	DEFB +0x00
  4835                          __lastKeyboardIntVal:
  4836  0003  00                	DEFB +0x00
  4837                          __joyStatus:
  4838  0004  00                	DEFB +0x00
  4839  0005  00                	DEFB 0x00
  4840  0006  00                	DEFB 0x00
  4841  0007  00                	DEFB 0x00
  4842                          _vdp_cursor:
  4843  0008  00                	DEFB +0x00
  4844  0009  00                	DEFB +0x00
  4845                          __vdpReg1Val:
  4846  000a  00                	DEFB +0x00
  4847                          __autoScrollTopRow:
  4848  000b  00                	DEFB +0x00
  4849                          __autoScrollBottomRow:
  4850  000c  17                	DEFB +0x17
  4851                          __vdpInterruptEnabled:
  4852  000d  00                	DEFB +0x00
  4853                          _vdpStatusRegVal:
  4854  000e  00                	DEFB +0x00
  4855                          _vdpIsReady:
  4856  000f  00                	DEFB +0x00
  4857                          	SECTION IGNORE
  4858                          
